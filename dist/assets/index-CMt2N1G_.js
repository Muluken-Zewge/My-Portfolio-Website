var Yb=c=>{throw TypeError(c)};var _p=(c,t,e)=>t.has(c)||Yb("Cannot "+e);var _t=(c,t,e)=>(_p(c,t,"read from private field"),e?e.call(c):t.get(c)),Ve=(c,t,e)=>t.has(c)?Yb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(c):t.set(c,e),pe=(c,t,e,i)=>(_p(c,t,"write to private field"),i?i.call(c,e):t.set(c,e),e),qe=(c,t,e)=>(_p(c,t,"access private method"),e);var Sp=(c,t,e,i)=>({set _(s){pe(c,t,s,e)},get _(){return _t(c,t,i)}});function $3(c,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in c)){const n=Object.getOwnPropertyDescriptor(i,s);n&&Object.defineProperty(c,s,n.get?n:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();function rc(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Ep={exports:{}},yl={};var Wb;function G3(){if(Wb)return yl;Wb=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,n){var a=null;if(n!==void 0&&(a=""+n),s.key!==void 0&&(a=""+s.key),"key"in s){n={};for(var o in s)o!=="key"&&(n[o]=s[o])}else n=s;return s=n.ref,{$$typeof:c,type:i,key:a,ref:s!==void 0?s:null,props:n}}return yl.Fragment=t,yl.jsx=e,yl.jsxs=e,yl}var Kb;function V3(){return Kb||(Kb=1,Ep.exports=G3()),Ep.exports}var T=V3(),xp={exports:{}},St={};var Qb;function q3(){if(Qb)return St;Qb=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=m&&P[m]||P["@@iterator"],typeof P=="function"?P:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function _(P,H,W){this.props=P,this.context=H,this.refs=S,this.updater=W||w}_.prototype.isReactComponent={},_.prototype.setState=function(P,H){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,H,"setState")},_.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function x(){}x.prototype=_.prototype;function E(P,H,W){this.props=P,this.context=H,this.refs=S,this.updater=W||w}var R=E.prototype=new x;R.constructor=E,v(R,_.prototype),R.isPureReactComponent=!0;var D=Array.isArray;function M(){}var k={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function I(P,H,W){var z=W.ref;return{$$typeof:c,type:P,key:H,ref:z!==void 0?z:null,props:W}}function G(P,H){return I(P.type,H,P.props)}function j(P){return typeof P=="object"&&P!==null&&P.$$typeof===c}function tt(P){var H={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(W){return H[W]})}var ot=/\/+/g;function rt(P,H){return typeof P=="object"&&P!==null&&P.key!=null?tt(""+P.key):H.toString(36)}function lt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(M,M):(P.status="pending",P.then(function(H){P.status==="pending"&&(P.status="fulfilled",P.value=H)},function(H){P.status==="pending"&&(P.status="rejected",P.reason=H)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function O(P,H,W,z,ct){var Z=typeof P;(Z==="undefined"||Z==="boolean")&&(P=null);var et=!1;if(P===null)et=!0;else switch(Z){case"bigint":case"string":case"number":et=!0;break;case"object":switch(P.$$typeof){case c:case t:et=!0;break;case f:return et=P._init,O(et(P._payload),H,W,z,ct)}}if(et)return ct=ct(P),et=z===""?"."+rt(P,0):z,D(ct)?(W="",et!=null&&(W=et.replace(ot,"$&/")+"/"),O(ct,H,W,"",function(Tt){return Tt})):ct!=null&&(j(ct)&&(ct=G(ct,W+(ct.key==null||P&&P.key===ct.key?"":(""+ct.key).replace(ot,"$&/")+"/")+et)),H.push(ct)),1;et=0;var mt=z===""?".":z+":";if(D(P))for(var gt=0;gt<P.length;gt++)z=P[gt],Z=mt+rt(z,gt),et+=O(z,H,W,Z,ct);else if(gt=y(P),typeof gt=="function")for(P=gt.call(P),gt=0;!(z=P.next()).done;)z=z.value,Z=mt+rt(z,gt++),et+=O(z,H,W,Z,ct);else if(Z==="object"){if(typeof P.then=="function")return O(lt(P),H,W,z,ct);throw H=String(P),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return et}function $(P,H,W){if(P==null)return P;var z=[],ct=0;return O(P,z,"","",function(Z){return H.call(W,Z,ct++)}),z}function K(P){if(P._status===-1){var H=P._result;H=H(),H.then(function(W){(P._status===0||P._status===-1)&&(P._status=1,P._result=W)},function(W){(P._status===0||P._status===-1)&&(P._status=2,P._result=W)}),P._status===-1&&(P._status=0,P._result=H)}if(P._status===1)return P._result.default;throw P._result}var at=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},nt={map:$,forEach:function(P,H,W){$(P,function(){H.apply(this,arguments)},W)},count:function(P){var H=0;return $(P,function(){H++}),H},toArray:function(P){return $(P,function(H){return H})||[]},only:function(P){if(!j(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return St.Activity=p,St.Children=nt,St.Component=_,St.Fragment=e,St.Profiler=s,St.PureComponent=E,St.StrictMode=i,St.Suspense=h,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,St.__COMPILER_RUNTIME={__proto__:null,c:function(P){return k.H.useMemoCache(P)}},St.cache=function(P){return function(){return P.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(P,H,W){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var z=v({},P.props),ct=P.key;if(H!=null)for(Z in H.key!==void 0&&(ct=""+H.key),H)!N.call(H,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&H.ref===void 0||(z[Z]=H[Z]);var Z=arguments.length-2;if(Z===1)z.children=W;else if(1<Z){for(var et=Array(Z),mt=0;mt<Z;mt++)et[mt]=arguments[mt+2];z.children=et}return I(P.type,ct,z)},St.createContext=function(P){return P={$$typeof:a,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:n,_context:P},P},St.createElement=function(P,H,W){var z,ct={},Z=null;if(H!=null)for(z in H.key!==void 0&&(Z=""+H.key),H)N.call(H,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(ct[z]=H[z]);var et=arguments.length-2;if(et===1)ct.children=W;else if(1<et){for(var mt=Array(et),gt=0;gt<et;gt++)mt[gt]=arguments[gt+2];ct.children=mt}if(P&&P.defaultProps)for(z in et=P.defaultProps,et)ct[z]===void 0&&(ct[z]=et[z]);return I(P,Z,ct)},St.createRef=function(){return{current:null}},St.forwardRef=function(P){return{$$typeof:o,render:P}},St.isValidElement=j,St.lazy=function(P){return{$$typeof:f,_payload:{_status:-1,_result:P},_init:K}},St.memo=function(P,H){return{$$typeof:u,type:P,compare:H===void 0?null:H}},St.startTransition=function(P){var H=k.T,W={};k.T=W;try{var z=P(),ct=k.S;ct!==null&&ct(W,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(M,at)}catch(Z){at(Z)}finally{H!==null&&W.types!==null&&(H.types=W.types),k.T=H}},St.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},St.use=function(P){return k.H.use(P)},St.useActionState=function(P,H,W){return k.H.useActionState(P,H,W)},St.useCallback=function(P,H){return k.H.useCallback(P,H)},St.useContext=function(P){return k.H.useContext(P)},St.useDebugValue=function(){},St.useDeferredValue=function(P,H){return k.H.useDeferredValue(P,H)},St.useEffect=function(P,H){return k.H.useEffect(P,H)},St.useEffectEvent=function(P){return k.H.useEffectEvent(P)},St.useId=function(){return k.H.useId()},St.useImperativeHandle=function(P,H,W){return k.H.useImperativeHandle(P,H,W)},St.useInsertionEffect=function(P,H){return k.H.useInsertionEffect(P,H)},St.useLayoutEffect=function(P,H){return k.H.useLayoutEffect(P,H)},St.useMemo=function(P,H){return k.H.useMemo(P,H)},St.useOptimistic=function(P,H){return k.H.useOptimistic(P,H)},St.useReducer=function(P,H,W){return k.H.useReducer(P,H,W)},St.useRef=function(P){return k.H.useRef(P)},St.useState=function(P){return k.H.useState(P)},St.useSyncExternalStore=function(P,H,W){return k.H.useSyncExternalStore(P,H,W)},St.useTransition=function(){return k.H.useTransition()},St.version="19.2.3",St}var Zb;function Nu(){return Zb||(Zb=1,xp.exports=q3()),xp.exports}var F=Nu();const We=rc(F),X3=$3({__proto__:null,default:We},[F]);var Cp={exports:{}},bl={},Tp={exports:{}},Mp={};var Jb;function Y3(){return Jb||(Jb=1,(function(c){function t(O,$){var K=O.length;O.push($);t:for(;0<K;){var at=K-1>>>1,nt=O[at];if(0<s(nt,$))O[at]=$,O[K]=nt,K=at;else break t}}function e(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var $=O[0],K=O.pop();if(K!==$){O[0]=K;t:for(var at=0,nt=O.length,P=nt>>>1;at<P;){var H=2*(at+1)-1,W=O[H],z=H+1,ct=O[z];if(0>s(W,K))z<nt&&0>s(ct,W)?(O[at]=ct,O[z]=K,at=z):(O[at]=W,O[H]=K,at=H);else if(z<nt&&0>s(ct,K))O[at]=ct,O[z]=K,at=z;else break t}}return $}function s(O,$){var K=O.sortIndex-$.sortIndex;return K!==0?K:O.id-$.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;c.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();c.unstable_now=function(){return a.now()-o}}var h=[],u=[],f=1,p=null,m=3,y=!1,w=!1,v=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function R(O){for(var $=e(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=O)i(u),$.sortIndex=$.expirationTime,t(h,$);else break;$=e(u)}}function D(O){if(v=!1,R(O),!w)if(e(h)!==null)w=!0,M||(M=!0,tt());else{var $=e(u);$!==null&&lt(D,$.startTime-O)}}var M=!1,k=-1,N=5,I=-1;function G(){return S?!0:!(c.unstable_now()-I<N)}function j(){if(S=!1,M){var O=c.unstable_now();I=O;var $=!0;try{t:{w=!1,v&&(v=!1,x(k),k=-1),y=!0;var K=m;try{e:{for(R(O),p=e(h);p!==null&&!(p.expirationTime>O&&G());){var at=p.callback;if(typeof at=="function"){p.callback=null,m=p.priorityLevel;var nt=at(p.expirationTime<=O);if(O=c.unstable_now(),typeof nt=="function"){p.callback=nt,R(O),$=!0;break e}p===e(h)&&i(h),R(O)}else i(h);p=e(h)}if(p!==null)$=!0;else{var P=e(u);P!==null&&lt(D,P.startTime-O),$=!1}}break t}finally{p=null,m=K,y=!1}$=void 0}}finally{$?tt():M=!1}}}var tt;if(typeof E=="function")tt=function(){E(j)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,rt=ot.port2;ot.port1.onmessage=j,tt=function(){rt.postMessage(null)}}else tt=function(){_(j,0)};function lt(O,$){k=_(function(){O(c.unstable_now())},$)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(O){O.callback=null},c.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},c.unstable_getCurrentPriorityLevel=function(){return m},c.unstable_next=function(O){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var K=m;m=$;try{return O()}finally{m=K}},c.unstable_requestPaint=function(){S=!0},c.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=m;m=O;try{return $()}finally{m=K}},c.unstable_scheduleCallback=function(O,$,K){var at=c.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?at+K:at):K=at,O){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=K+nt,O={id:f++,callback:$,priorityLevel:O,startTime:K,expirationTime:nt,sortIndex:-1},K>at?(O.sortIndex=K,t(u,O),e(h)===null&&O===e(u)&&(v?(x(k),k=-1):v=!0,lt(D,K-at))):(O.sortIndex=nt,t(h,O),w||y||(w=!0,M||(M=!0,tt()))),O},c.unstable_shouldYield=G,c.unstable_wrapCallback=function(O){var $=m;return function(){var K=m;m=$;try{return O.apply(this,arguments)}finally{m=K}}}})(Mp)),Mp}var tv;function W3(){return tv||(tv=1,Tp.exports=Y3()),Tp.exports}var Dp={exports:{}},fi={};var ev;function K3(){if(ev)return fi;ev=1;var c=Nu();function t(h){var u="https://react.dev/errors/"+h;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+h+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function n(h,u,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:h,containerInfo:u,implementation:f}}var a=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(h,u){if(h==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fi.createPortal=function(h,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return n(h,u,null,f)},fi.flushSync=function(h){var u=a.T,f=i.p;try{if(a.T=null,i.p=2,h)return h()}finally{a.T=u,i.p=f,i.d.f()}},fi.preconnect=function(h,u){typeof h=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(h,u))},fi.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},fi.preinit=function(h,u){if(typeof h=="string"&&u&&typeof u.as=="string"){var f=u.as,p=o(f,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?i.d.S(h,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:y}):f==="script"&&i.d.X(h,{crossOrigin:p,integrity:m,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},fi.preinitModule=function(h,u){if(typeof h=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);i.d.M(h,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(h)},fi.preload=function(h,u){if(typeof h=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,p=o(f,u.crossOrigin);i.d.L(h,f,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},fi.preloadModule=function(h,u){if(typeof h=="string")if(u){var f=o(u.as,u.crossOrigin);i.d.m(h,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(h)},fi.requestFormReset=function(h){i.d.r(h)},fi.unstable_batchedUpdates=function(h,u){return h(u)},fi.useFormState=function(h,u,f){return a.H.useFormState(h,u,f)},fi.useFormStatus=function(){return a.H.useHostTransitionStatus()},fi.version="19.2.3",fi}var iv;function oA(){if(iv)return Dp.exports;iv=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),Dp.exports=K3(),Dp.exports}var sv;function Q3(){if(sv)return bl;sv=1;var c=W3(),t=Nu(),e=oA();function i(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function n(r){var l=r,d=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(d=l.return),r=l.return;while(r)}return l.tag===3?d:null}function a(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function o(r){if(r.tag===31){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function h(r){if(n(r)!==r)throw Error(i(188))}function u(r){var l=r.alternate;if(!l){if(l=n(r),l===null)throw Error(i(188));return l!==r?null:r}for(var d=r,g=l;;){var b=d.return;if(b===null)break;var A=b.alternate;if(A===null){if(g=b.return,g!==null){d=g;continue}break}if(b.child===A.child){for(A=b.child;A;){if(A===d)return h(b),r;if(A===g)return h(b),l;A=A.sibling}throw Error(i(188))}if(d.return!==g.return)d=b,g=A;else{for(var C=!1,L=b.child;L;){if(L===d){C=!0,d=b,g=A;break}if(L===g){C=!0,g=b,d=A;break}L=L.sibling}if(!C){for(L=A.child;L;){if(L===d){C=!0,d=A,g=b;break}if(L===g){C=!0,g=A,d=b;break}L=L.sibling}if(!C)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?r:l}function f(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=f(r),l!==null)return l;r=r.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),E=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function tt(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var ot=Symbol.for("react.client.reference");function rt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ot?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case v:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case E:return r.displayName||"Context";case x:return(r._context.displayName||"Context")+".Consumer";case R:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case k:return l=r.displayName||null,l!==null?l:rt(r.type)||"Memo";case N:l=r._payload,r=r._init;try{return rt(r(l))}catch{}}return null}var lt=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},at=[],nt=-1;function P(r){return{current:r}}function H(r){0>nt||(r.current=at[nt],at[nt]=null,nt--)}function W(r,l){nt++,at[nt]=r.current,r.current=l}var z=P(null),ct=P(null),Z=P(null),et=P(null);function mt(r,l){switch(W(Z,l),W(ct,r),W(z,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?yb(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=yb(l),r=bb(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}H(z),W(z,r)}function gt(){H(z),H(ct),H(Z)}function Tt(r){r.memoizedState!==null&&W(et,r);var l=z.current,d=bb(l,r.type);l!==d&&(W(ct,r),W(z,d))}function qt(r){ct.current===r&&(H(z),H(ct)),et.current===r&&(H(et),fl._currentValue=K)}var ie,Pe;function be(r){if(ie===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);ie=l&&l[1]||"",Pe=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+r+Pe}var Qt=!1;function Ei(r,l){if(!r||Qt)return"";Qt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Q){var Y=Q}Reflect.construct(r,[],st)}else{try{st.call()}catch(Q){Y=Q}r.call(st.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(st=r())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),C=A[0],L=A[1];if(C&&L){var B=C.split(`
`),X=L.split(`
`);for(b=g=0;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;for(;b<X.length&&!X[b].includes("DetermineComponentFrameRoot");)b++;if(g===B.length||b===X.length)for(g=B.length-1,b=X.length-1;1<=g&&0<=b&&B[g]!==X[b];)b--;for(;1<=g&&0<=b;g--,b--)if(B[g]!==X[b]){if(g!==1||b!==1)do if(g--,b--,0>b||B[g]!==X[b]){var J=`
`+B[g].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=g&&0<=b);break}}}finally{Qt=!1,Error.prepareStackTrace=d}return(d=r?r.displayName||r.name:"")?be(d):""}function $s(r,l){switch(r.tag){case 26:case 27:case 5:return be(r.type);case 16:return be("Lazy");case 13:return r.child!==l&&l!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return Ei(r.type,!1);case 11:return Ei(r.type.render,!1);case 1:return Ei(r.type,!0);case 31:return be("Activity");default:return""}}function lr(r){try{var l="",d=null;do l+=$s(r,d),d=r,r=r.return;while(r);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var cr=Object.prototype.hasOwnProperty,hr=c.unstable_scheduleCallback,Sn=c.unstable_cancelCallback,ur=c.unstable_shouldYield,dr=c.unstable_requestPaint,Qe=c.unstable_now,fr=c.unstable_getCurrentPriorityLevel,Nt=c.unstable_ImmediatePriority,Qi=c.unstable_UserBlockingPriority,Gs=c.unstable_NormalPriority,od=c.unstable_LowPriority,ia=c.unstable_IdlePriority,ld=c.log,sa=c.unstable_setDisableYieldValue,pr=null,Fi=null;function En(r){if(typeof ld=="function"&&sa(r),Fi&&typeof Fi.setStrictMode=="function")try{Fi.setStrictMode(pr,r)}catch{}}var Ii=Math.clz32?Math.clz32:DS,TS=Math.log,MS=Math.LN2;function DS(r){return r>>>=0,r===0?32:31-(TS(r)/MS|0)|0}var Ec=256,xc=262144,Cc=4194304;function gr(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Tc(r,l,d){var g=r.pendingLanes;if(g===0)return 0;var b=0,A=r.suspendedLanes,C=r.pingedLanes;r=r.warmLanes;var L=g&134217727;return L!==0?(g=L&~A,g!==0?b=gr(g):(C&=L,C!==0?b=gr(C):d||(d=L&~r,d!==0&&(b=gr(d))))):(L=g&~A,L!==0?b=gr(L):C!==0?b=gr(C):d||(d=g&~r,d!==0&&(b=gr(d)))),b===0?0:l!==0&&l!==b&&(l&A)===0&&(A=b&-b,d=l&-l,A>=d||A===32&&(d&4194048)!==0)?l:b}function Co(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function RS(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zm(){var r=Cc;return Cc<<=1,(Cc&62914560)===0&&(Cc=4194304),r}function cd(r){for(var l=[],d=0;31>d;d++)l.push(r);return l}function To(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function kS(r,l,d,g,b,A){var C=r.pendingLanes;r.pendingLanes=d,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=d,r.entangledLanes&=d,r.errorRecoveryDisabledLanes&=d,r.shellSuspendCounter=0;var L=r.entanglements,B=r.expirationTimes,X=r.hiddenUpdates;for(d=C&~d;0<d;){var J=31-Ii(d),st=1<<J;L[J]=0,B[J]=-1;var Y=X[J];if(Y!==null)for(X[J]=null,J=0;J<Y.length;J++){var Q=Y[J];Q!==null&&(Q.lane&=-536870913)}d&=~st}g!==0&&Jm(r,g,0),A!==0&&b===0&&r.tag!==0&&(r.suspendedLanes|=A&~(C&~l))}function Jm(r,l,d){r.pendingLanes|=l,r.suspendedLanes&=~l;var g=31-Ii(l);r.entangledLanes|=l,r.entanglements[g]=r.entanglements[g]|1073741824|d&261930}function t0(r,l){var d=r.entangledLanes|=l;for(r=r.entanglements;d;){var g=31-Ii(d),b=1<<g;b&l|r[g]&l&&(r[g]|=l),d&=~b}}function e0(r,l){var d=l&-l;return d=(d&42)!==0?1:hd(d),(d&(r.suspendedLanes|l))!==0?0:d}function hd(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ud(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function i0(){var r=$.p;return r!==0?r:(r=window.event,r===void 0?32:Hb(r.type))}function s0(r,l){var d=$.p;try{return $.p=r,l()}finally{$.p=d}}var xn=Math.random().toString(36).slice(2),ii="__reactFiber$"+xn,xi="__reactProps$"+xn,na="__reactContainer$"+xn,dd="__reactEvents$"+xn,LS="__reactListeners$"+xn,OS="__reactHandles$"+xn,n0="__reactResources$"+xn,Mo="__reactMarker$"+xn;function fd(r){delete r[ii],delete r[xi],delete r[dd],delete r[LS],delete r[OS]}function ra(r){var l=r[ii];if(l)return l;for(var d=r.parentNode;d;){if(l=d[na]||d[ii]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(r=xb(r);r!==null;){if(d=r[ii])return d;r=xb(r)}return l}r=d,d=r.parentNode}return null}function aa(r){if(r=r[ii]||r[na]){var l=r.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return r}return null}function Do(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(i(33))}function oa(r){var l=r[n0];return l||(l=r[n0]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ze(r){r[Mo]=!0}var r0=new Set,a0={};function mr(r,l){la(r,l),la(r+"Capture",l)}function la(r,l){for(a0[r]=l,r=0;r<l.length;r++)r0.add(l[r])}var PS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),o0={},l0={};function NS(r){return cr.call(l0,r)?!0:cr.call(o0,r)?!1:PS.test(r)?l0[r]=!0:(o0[r]=!0,!1)}function Mc(r,l,d){if(NS(l))if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+d)}}function Dc(r,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+d)}}function Vs(r,l,d,g){if(g===null)r.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(d);return}r.setAttributeNS(l,d,""+g)}}function Zi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function c0(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function FS(r,l,d){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,l);if(!r.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,A=g.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return b.call(this)},set:function(C){d=""+C,A.call(this,C)}}),Object.defineProperty(r,l,{enumerable:g.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function pd(r){if(!r._valueTracker){var l=c0(r)?"checked":"value";r._valueTracker=FS(r,l,""+r[l])}}function h0(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return r&&(g=c0(r)?r.checked?"true":"false":r.value),r=g,r!==d?(l.setValue(r),!0):!1}function Rc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var IS=/[\n"\\]/g;function Ji(r){return r.replace(IS,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function gd(r,l,d,g,b,A,C,L){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),l!=null?C==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+Zi(l)):r.value!==""+Zi(l)&&(r.value=""+Zi(l)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),l!=null?md(r,C,Zi(l)):d!=null?md(r,C,Zi(d)):g!=null&&r.removeAttribute("value"),b==null&&A!=null&&(r.defaultChecked=!!A),b!=null&&(r.checked=b&&typeof b!="function"&&typeof b!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?r.name=""+Zi(L):r.removeAttribute("name")}function u0(r,l,d,g,b,A,C,L){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.type=A),l!=null||d!=null){if(!(A!=="submit"&&A!=="reset"||l!=null)){pd(r);return}d=d!=null?""+Zi(d):"",l=l!=null?""+Zi(l):d,L||l===r.value||(r.value=l),r.defaultValue=l}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=L?r.checked:!!g,r.defaultChecked=!!g,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C),pd(r)}function md(r,l,d){l==="number"&&Rc(r.ownerDocument)===r||r.defaultValue===""+d||(r.defaultValue=""+d)}function ca(r,l,d,g){if(r=r.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<r.length;d++)b=l.hasOwnProperty("$"+r[d].value),r[d].selected!==b&&(r[d].selected=b),b&&g&&(r[d].defaultSelected=!0)}else{for(d=""+Zi(d),l=null,b=0;b<r.length;b++){if(r[b].value===d){r[b].selected=!0,g&&(r[b].defaultSelected=!0);return}l!==null||r[b].disabled||(l=r[b])}l!==null&&(l.selected=!0)}}function d0(r,l,d){if(l!=null&&(l=""+Zi(l),l!==r.value&&(r.value=l),d==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=d!=null?""+Zi(d):""}function f0(r,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(i(92));if(lt(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Zi(l),r.defaultValue=d,g=r.textContent,g===d&&g!==""&&g!==null&&(r.value=g),pd(r)}function ha(r,l){if(l){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=l;return}}r.textContent=l}var BS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function p0(r,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":g?r.setProperty(l,d):typeof d!="number"||d===0||BS.has(l)?l==="float"?r.cssFloat=d:r[l]=(""+d).trim():r[l]=d+"px"}function g0(r,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(r=r.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var b in l)g=l[b],l.hasOwnProperty(b)&&d[b]!==g&&p0(r,b,g)}else for(var A in l)l.hasOwnProperty(A)&&p0(r,A,l[A])}function yd(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kc(r){return jS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function qs(){}var bd=null;function vd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ua=null,da=null;function m0(r){var l=aa(r);if(l&&(r=l.stateNode)){var d=r[xi]||null;t:switch(r=l.stateNode,l.type){case"input":if(gd(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Ji(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==r&&g.form===r.form){var b=g[xi]||null;if(!b)throw Error(i(90));gd(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===r.form&&h0(g)}break t;case"textarea":d0(r,d.value,d.defaultValue);break t;case"select":l=d.value,l!=null&&ca(r,!!d.multiple,l,!1)}}}var Ad=!1;function y0(r,l,d){if(Ad)return r(l,d);Ad=!0;try{var g=r(l);return g}finally{if(Ad=!1,(ua!==null||da!==null)&&(bh(),ua&&(l=ua,r=da,da=ua=null,m0(l),r)))for(l=0;l<r.length;l++)m0(r[l])}}function Ro(r,l){var d=r.stateNode;if(d===null)return null;var g=d[xi]||null;if(g===null)return null;d=g[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break t;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wd=!1;if(Xs)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){wd=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{wd=!1}var Cn=null,_d=null,Lc=null;function b0(){if(Lc)return Lc;var r,l=_d,d=l.length,g,b="value"in Cn?Cn.value:Cn.textContent,A=b.length;for(r=0;r<d&&l[r]===b[r];r++);var C=d-r;for(g=1;g<=C&&l[d-g]===b[A-g];g++);return Lc=b.slice(r,1<g?1-g:void 0)}function Oc(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function Pc(){return!0}function v0(){return!1}function Ci(r){function l(d,g,b,A,C){this._reactName=d,this._targetInst=b,this.type=g,this.nativeEvent=A,this.target=C,this.currentTarget=null;for(var L in r)r.hasOwnProperty(L)&&(d=r[L],this[L]=d?d(A):A[L]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Pc:v0,this.isPropagationStopped=v0,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Pc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Pc)},persist:function(){},isPersistent:Pc}),l}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=Ci(yr),Lo=p({},yr,{view:0,detail:0}),HS=Ci(Lo),Sd,Ed,Oo,Fc=p({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Oo&&(Oo&&r.type==="mousemove"?(Sd=r.screenX-Oo.screenX,Ed=r.screenY-Oo.screenY):Ed=Sd=0,Oo=r),Sd)},movementY:function(r){return"movementY"in r?r.movementY:Ed}}),A0=Ci(Fc),US=p({},Fc,{dataTransfer:0}),$S=Ci(US),GS=p({},Lo,{relatedTarget:0}),xd=Ci(GS),VS=p({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),qS=Ci(VS),XS=p({},yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),YS=Ci(XS),WS=p({},yr,{data:0}),w0=Ci(WS),KS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JS(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=ZS[r])?!!l[r]:!1}function Cd(){return JS}var tE=p({},Lo,{key:function(r){if(r.key){var l=KS[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=Oc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?QS[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cd,charCode:function(r){return r.type==="keypress"?Oc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Oc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),eE=Ci(tE),iE=p({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_0=Ci(iE),sE=p({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cd}),nE=Ci(sE),rE=p({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),aE=Ci(rE),oE=p({},Fc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),lE=Ci(oE),cE=p({},yr,{newState:0,oldState:0}),hE=Ci(cE),uE=[9,13,27,32],Td=Xs&&"CompositionEvent"in window,Po=null;Xs&&"documentMode"in document&&(Po=document.documentMode);var dE=Xs&&"TextEvent"in window&&!Po,S0=Xs&&(!Td||Po&&8<Po&&11>=Po),E0=" ",x0=!1;function C0(r,l){switch(r){case"keyup":return uE.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T0(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fa=!1;function fE(r,l){switch(r){case"compositionend":return T0(l);case"keypress":return l.which!==32?null:(x0=!0,E0);case"textInput":return r=l.data,r===E0&&x0?null:r;default:return null}}function pE(r,l){if(fa)return r==="compositionend"||!Td&&C0(r,l)?(r=b0(),Lc=_d=Cn=null,fa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return S0&&l.locale!=="ko"?null:l.data;default:return null}}var gE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M0(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!gE[r.type]:l==="textarea"}function D0(r,l,d,g){ua?da?da.push(g):da=[g]:ua=g,l=xh(l,"onChange"),0<l.length&&(d=new Nc("onChange","change",null,d,g),r.push({event:d,listeners:l}))}var No=null,Fo=null;function mE(r){ub(r,0)}function Ic(r){var l=Do(r);if(h0(l))return r}function R0(r,l){if(r==="change")return l}var k0=!1;if(Xs){var Md;if(Xs){var Dd="oninput"in document;if(!Dd){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),Dd=typeof L0.oninput=="function"}Md=Dd}else Md=!1;k0=Md&&(!document.documentMode||9<document.documentMode)}function O0(){No&&(No.detachEvent("onpropertychange",P0),Fo=No=null)}function P0(r){if(r.propertyName==="value"&&Ic(Fo)){var l=[];D0(l,Fo,r,vd(r)),y0(mE,l)}}function yE(r,l,d){r==="focusin"?(O0(),No=l,Fo=d,No.attachEvent("onpropertychange",P0)):r==="focusout"&&O0()}function bE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ic(Fo)}function vE(r,l){if(r==="click")return Ic(l)}function AE(r,l){if(r==="input"||r==="change")return Ic(l)}function wE(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var Bi=typeof Object.is=="function"?Object.is:wE;function Io(r,l){if(Bi(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var d=Object.keys(r),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var b=d[g];if(!cr.call(l,b)||!Bi(r[b],l[b]))return!1}return!0}function N0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function F0(r,l){var d=N0(r);r=0;for(var g;d;){if(d.nodeType===3){if(g=r+d.textContent.length,r<=l&&g>=l)return{node:d,offset:l-r};r=g}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=N0(d)}}function I0(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?I0(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function B0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=Rc(r.document);l instanceof r.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)r=l.contentWindow;else break;l=Rc(r.document)}return l}function Rd(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var _E=Xs&&"documentMode"in document&&11>=document.documentMode,pa=null,kd=null,Bo=null,Ld=!1;function z0(r,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Ld||pa==null||pa!==Rc(g)||(g=pa,"selectionStart"in g&&Rd(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Bo&&Io(Bo,g)||(Bo=g,g=xh(kd,"onSelect"),0<g.length&&(l=new Nc("onSelect","select",null,l,d),r.push({event:l,listeners:g}),l.target=pa)))}function br(r,l){var d={};return d[r.toLowerCase()]=l.toLowerCase(),d["Webkit"+r]="webkit"+l,d["Moz"+r]="moz"+l,d}var ga={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionrun:br("Transition","TransitionRun"),transitionstart:br("Transition","TransitionStart"),transitioncancel:br("Transition","TransitionCancel"),transitionend:br("Transition","TransitionEnd")},Od={},j0={};Xs&&(j0=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function vr(r){if(Od[r])return Od[r];if(!ga[r])return r;var l=ga[r],d;for(d in l)if(l.hasOwnProperty(d)&&d in j0)return Od[r]=l[d];return r}var H0=vr("animationend"),U0=vr("animationiteration"),$0=vr("animationstart"),SE=vr("transitionrun"),EE=vr("transitionstart"),xE=vr("transitioncancel"),G0=vr("transitionend"),V0=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function bs(r,l){V0.set(r,l),mr(l,[r])}var Bc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ts=[],ma=0,Nd=0;function zc(){for(var r=ma,l=Nd=ma=0;l<r;){var d=ts[l];ts[l++]=null;var g=ts[l];ts[l++]=null;var b=ts[l];ts[l++]=null;var A=ts[l];if(ts[l++]=null,g!==null&&b!==null){var C=g.pending;C===null?b.next=b:(b.next=C.next,C.next=b),g.pending=b}A!==0&&q0(d,b,A)}}function jc(r,l,d,g){ts[ma++]=r,ts[ma++]=l,ts[ma++]=d,ts[ma++]=g,Nd|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function Fd(r,l,d,g){return jc(r,l,d,g),Hc(r)}function Ar(r,l){return jc(r,null,null,l),Hc(r)}function q0(r,l,d){r.lanes|=d;var g=r.alternate;g!==null&&(g.lanes|=d);for(var b=!1,A=r.return;A!==null;)A.childLanes|=d,g=A.alternate,g!==null&&(g.childLanes|=d),A.tag===22&&(r=A.stateNode,r===null||r._visibility&1||(b=!0)),r=A,A=A.return;return r.tag===3?(A=r.stateNode,b&&l!==null&&(b=31-Ii(d),r=A.hiddenUpdates,g=r[b],g===null?r[b]=[l]:g.push(l),l.lane=d|536870912),A):null}function Hc(r){if(50<al)throw al=0,qf=null,Error(i(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var ya={};function CE(r,l,d,g){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(r,l,d,g){return new CE(r,l,d,g)}function Id(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ys(r,l){var d=r.alternate;return d===null?(d=zi(r.tag,l,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=l,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&65011712,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,l=r.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d.refCleanup=r.refCleanup,d}function X0(r,l){r.flags&=65011714;var d=r.alternate;return d===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=d.childLanes,r.lanes=d.lanes,r.child=d.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=d.memoizedProps,r.memoizedState=d.memoizedState,r.updateQueue=d.updateQueue,r.type=d.type,l=d.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function Uc(r,l,d,g,b,A){var C=0;if(g=r,typeof r=="function")Id(r)&&(C=1);else if(typeof r=="string")C=k3(r,d,z.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case I:return r=zi(31,d,l,b),r.elementType=I,r.lanes=A,r;case v:return wr(d.children,b,A,l);case S:C=8,b|=24;break;case _:return r=zi(12,d,l,b|2),r.elementType=_,r.lanes=A,r;case D:return r=zi(13,d,l,b),r.elementType=D,r.lanes=A,r;case M:return r=zi(19,d,l,b),r.elementType=M,r.lanes=A,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:C=10;break t;case x:C=9;break t;case R:C=11;break t;case k:C=14;break t;case N:C=16,g=null;break t}C=29,d=Error(i(130,r===null?"null":typeof r,"")),g=null}return l=zi(C,d,l,b),l.elementType=r,l.type=g,l.lanes=A,l}function wr(r,l,d,g){return r=zi(7,r,g,l),r.lanes=d,r}function Bd(r,l,d){return r=zi(6,r,null,l),r.lanes=d,r}function Y0(r){var l=zi(18,null,null,0);return l.stateNode=r,l}function zd(r,l,d){return l=zi(4,r.children!==null?r.children:[],r.key,l),l.lanes=d,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var W0=new WeakMap;function es(r,l){if(typeof r=="object"&&r!==null){var d=W0.get(r);return d!==void 0?d:(l={value:r,source:l,stack:lr(l)},W0.set(r,l),l)}return{value:r,source:l,stack:lr(l)}}var ba=[],va=0,$c=null,zo=0,is=[],ss=0,Tn=null,xs=1,Cs="";function Ws(r,l){ba[va++]=zo,ba[va++]=$c,$c=r,zo=l}function K0(r,l,d){is[ss++]=xs,is[ss++]=Cs,is[ss++]=Tn,Tn=r;var g=xs;r=Cs;var b=32-Ii(g)-1;g&=~(1<<b),d+=1;var A=32-Ii(l)+b;if(30<A){var C=b-b%5;A=(g&(1<<C)-1).toString(32),g>>=C,b-=C,xs=1<<32-Ii(l)+b|d<<b|g,Cs=A+r}else xs=1<<A|d<<b|g,Cs=r}function jd(r){r.return!==null&&(Ws(r,1),K0(r,1,0))}function Hd(r){for(;r===$c;)$c=ba[--va],ba[va]=null,zo=ba[--va],ba[va]=null;for(;r===Tn;)Tn=is[--ss],is[ss]=null,Cs=is[--ss],is[ss]=null,xs=is[--ss],is[ss]=null}function Q0(r,l){is[ss++]=xs,is[ss++]=Cs,is[ss++]=Tn,xs=l.id,Cs=l.overflow,Tn=r}var si=null,me=null,jt=!1,Mn=null,ns=!1,Ud=Error(i(519));function Dn(r){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jo(es(l,r)),Ud}function Z0(r){var l=r.stateNode,d=r.type,g=r.memoizedProps;switch(l[ii]=r,l[xi]=g,d){case"dialog":It("cancel",l),It("close",l);break;case"iframe":case"object":case"embed":It("load",l);break;case"video":case"audio":for(d=0;d<ll.length;d++)It(ll[d],l);break;case"source":It("error",l);break;case"img":case"image":case"link":It("error",l),It("load",l);break;case"details":It("toggle",l);break;case"input":It("invalid",l),u0(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":It("invalid",l);break;case"textarea":It("invalid",l),f0(l,g.value,g.defaultValue,g.children)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||gb(l.textContent,d)?(g.popover!=null&&(It("beforetoggle",l),It("toggle",l)),g.onScroll!=null&&It("scroll",l),g.onScrollEnd!=null&&It("scrollend",l),g.onClick!=null&&(l.onclick=qs),l=!0):l=!1,l||Dn(r,!0)}function J0(r){for(si=r.return;si;)switch(si.tag){case 5:case 31:case 13:ns=!1;return;case 27:case 3:ns=!0;return;default:si=si.return}}function Aa(r){if(r!==si)return!1;if(!jt)return J0(r),jt=!0,!1;var l=r.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=r.type,d=!(d!=="form"&&d!=="button")||op(r.type,r.memoizedProps)),d=!d),d&&me&&Dn(r),J0(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));me=Eb(r)}else if(l===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));me=Eb(r)}else l===27?(l=me,$n(r.type)?(r=dp,dp=null,me=r):me=l):me=si?as(r.stateNode.nextSibling):null;return!0}function _r(){me=si=null,jt=!1}function $d(){var r=Mn;return r!==null&&(Ri===null?Ri=r:Ri.push.apply(Ri,r),Mn=null),r}function jo(r){Mn===null?Mn=[r]:Mn.push(r)}var Gd=P(null),Sr=null,Ks=null;function Rn(r,l,d){W(Gd,l._currentValue),l._currentValue=d}function Qs(r){r._currentValue=Gd.current,H(Gd)}function Vd(r,l,d){for(;r!==null;){var g=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),r===d)break;r=r.return}}function qd(r,l,d,g){var b=r.child;for(b!==null&&(b.return=r);b!==null;){var A=b.dependencies;if(A!==null){var C=b.child;A=A.firstContext;t:for(;A!==null;){var L=A;A=b;for(var B=0;B<l.length;B++)if(L.context===l[B]){A.lanes|=d,L=A.alternate,L!==null&&(L.lanes|=d),Vd(A.return,d,r),g||(C=null);break t}A=L.next}}else if(b.tag===18){if(C=b.return,C===null)throw Error(i(341));C.lanes|=d,A=C.alternate,A!==null&&(A.lanes|=d),Vd(C,d,r),C=null}else C=b.child;if(C!==null)C.return=b;else for(C=b;C!==null;){if(C===r){C=null;break}if(b=C.sibling,b!==null){b.return=C.return,C=b;break}C=C.return}b=C}}function wa(r,l,d,g){r=null;for(var b=l,A=!1;b!==null;){if(!A){if((b.flags&524288)!==0)A=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var C=b.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var L=b.type;Bi(b.pendingProps.value,C.value)||(r!==null?r.push(L):r=[L])}}else if(b===et.current){if(C=b.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(r!==null?r.push(fl):r=[fl])}b=b.return}r!==null&&qd(l,r,d,g),l.flags|=262144}function Gc(r){for(r=r.firstContext;r!==null;){if(!Bi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Er(r){Sr=r,Ks=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ni(r){return t1(Sr,r)}function Vc(r,l){return Sr===null&&Er(r),t1(r,l)}function t1(r,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Ks===null){if(r===null)throw Error(i(308));Ks=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else Ks=Ks.next=l;return d}var TE=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(d,g){r.push(g)}};this.abort=function(){l.aborted=!0,r.forEach(function(d){return d()})}},ME=c.unstable_scheduleCallback,DE=c.unstable_NormalPriority,Ne={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new TE,data:new Map,refCount:0}}function Ho(r){r.refCount--,r.refCount===0&&ME(DE,function(){r.controller.abort()})}var Uo=null,Yd=0,_a=0,Sa=null;function RE(r,l){if(Uo===null){var d=Uo=[];Yd=0,_a=Zf(),Sa={status:"pending",value:void 0,then:function(g){d.push(g)}}}return Yd++,l.then(e1,e1),l}function e1(){if(--Yd===0&&Uo!==null){Sa!==null&&(Sa.status="fulfilled");var r=Uo;Uo=null,_a=0,Sa=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function kE(r,l){var d=[],g={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return r.then(function(){g.status="fulfilled",g.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(g.status="rejected",g.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),g}var i1=O.S;O.S=function(r,l){zy=Qe(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&RE(r,l),i1!==null&&i1(r,l)};var xr=P(null);function Wd(){var r=xr.current;return r!==null?r:ce.pooledCache}function qc(r,l){l===null?W(xr,xr.current):W(xr,l.pool)}function s1(){var r=Wd();return r===null?null:{parent:Ne._currentValue,pool:r}}var Ea=Error(i(460)),Kd=Error(i(474)),Xc=Error(i(542)),Yc={then:function(){}};function n1(r){return r=r.status,r==="fulfilled"||r==="rejected"}function r1(r,l,d){switch(d=r[d],d===void 0?r.push(l):d!==l&&(l.then(qs,qs),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,o1(r),r;default:if(typeof l.status=="string")l.then(qs,qs);else{if(r=ce,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=l,r.status="pending",r.then(function(g){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=g}},function(g){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,o1(r),r}throw Tr=l,Ea}}function Cr(r){try{var l=r._init;return l(r._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Tr=d,Ea):d}}var Tr=null;function a1(){if(Tr===null)throw Error(i(459));var r=Tr;return Tr=null,r}function o1(r){if(r===Ea||r===Xc)throw Error(i(483))}var xa=null,$o=0;function Wc(r){var l=$o;return $o+=1,xa===null&&(xa=[]),r1(xa,r,l)}function Go(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function Kc(r,l){throw l.$$typeof===m?Error(i(525)):(r=Object.prototype.toString.call(l),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function l1(r){function l(V,U){if(r){var q=V.deletions;q===null?(V.deletions=[U],V.flags|=16):q.push(U)}}function d(V,U){if(!r)return null;for(;U!==null;)l(V,U),U=U.sibling;return null}function g(V){for(var U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function b(V,U){return V=Ys(V,U),V.index=0,V.sibling=null,V}function A(V,U,q){return V.index=q,r?(q=V.alternate,q!==null?(q=q.index,q<U?(V.flags|=67108866,U):q):(V.flags|=67108866,U)):(V.flags|=1048576,U)}function C(V){return r&&V.alternate===null&&(V.flags|=67108866),V}function L(V,U,q,it){return U===null||U.tag!==6?(U=Bd(q,V.mode,it),U.return=V,U):(U=b(U,q),U.return=V,U)}function B(V,U,q,it){var bt=q.type;return bt===v?J(V,U,q.props.children,it,q.key):U!==null&&(U.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===N&&Cr(bt)===U.type)?(U=b(U,q.props),Go(U,q),U.return=V,U):(U=Uc(q.type,q.key,q.props,null,V.mode,it),Go(U,q),U.return=V,U)}function X(V,U,q,it){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=zd(q,V.mode,it),U.return=V,U):(U=b(U,q.children||[]),U.return=V,U)}function J(V,U,q,it,bt){return U===null||U.tag!==7?(U=wr(q,V.mode,it,bt),U.return=V,U):(U=b(U,q),U.return=V,U)}function st(V,U,q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Bd(""+U,V.mode,q),U.return=V,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case y:return q=Uc(U.type,U.key,U.props,null,V.mode,q),Go(q,U),q.return=V,q;case w:return U=zd(U,V.mode,q),U.return=V,U;case N:return U=Cr(U),st(V,U,q)}if(lt(U)||tt(U))return U=wr(U,V.mode,q,null),U.return=V,U;if(typeof U.then=="function")return st(V,Wc(U),q);if(U.$$typeof===E)return st(V,Vc(V,U),q);Kc(V,U)}return null}function Y(V,U,q,it){var bt=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return bt!==null?null:L(V,U,""+q,it);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case y:return q.key===bt?B(V,U,q,it):null;case w:return q.key===bt?X(V,U,q,it):null;case N:return q=Cr(q),Y(V,U,q,it)}if(lt(q)||tt(q))return bt!==null?null:J(V,U,q,it,null);if(typeof q.then=="function")return Y(V,U,Wc(q),it);if(q.$$typeof===E)return Y(V,U,Vc(V,q),it);Kc(V,q)}return null}function Q(V,U,q,it,bt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return V=V.get(q)||null,L(U,V,""+it,bt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case y:return V=V.get(it.key===null?q:it.key)||null,B(U,V,it,bt);case w:return V=V.get(it.key===null?q:it.key)||null,X(U,V,it,bt);case N:return it=Cr(it),Q(V,U,q,it,bt)}if(lt(it)||tt(it))return V=V.get(q)||null,J(U,V,it,bt,null);if(typeof it.then=="function")return Q(V,U,q,Wc(it),bt);if(it.$$typeof===E)return Q(V,U,q,Vc(U,it),bt);Kc(U,it)}return null}function ft(V,U,q,it){for(var bt=null,Yt=null,yt=U,kt=U=0,zt=null;yt!==null&&kt<q.length;kt++){yt.index>kt?(zt=yt,yt=null):zt=yt.sibling;var Wt=Y(V,yt,q[kt],it);if(Wt===null){yt===null&&(yt=zt);break}r&&yt&&Wt.alternate===null&&l(V,yt),U=A(Wt,U,kt),Yt===null?bt=Wt:Yt.sibling=Wt,Yt=Wt,yt=zt}if(kt===q.length)return d(V,yt),jt&&Ws(V,kt),bt;if(yt===null){for(;kt<q.length;kt++)yt=st(V,q[kt],it),yt!==null&&(U=A(yt,U,kt),Yt===null?bt=yt:Yt.sibling=yt,Yt=yt);return jt&&Ws(V,kt),bt}for(yt=g(yt);kt<q.length;kt++)zt=Q(yt,V,kt,q[kt],it),zt!==null&&(r&&zt.alternate!==null&&yt.delete(zt.key===null?kt:zt.key),U=A(zt,U,kt),Yt===null?bt=zt:Yt.sibling=zt,Yt=zt);return r&&yt.forEach(function(Yn){return l(V,Yn)}),jt&&Ws(V,kt),bt}function At(V,U,q,it){if(q==null)throw Error(i(151));for(var bt=null,Yt=null,yt=U,kt=U=0,zt=null,Wt=q.next();yt!==null&&!Wt.done;kt++,Wt=q.next()){yt.index>kt?(zt=yt,yt=null):zt=yt.sibling;var Yn=Y(V,yt,Wt.value,it);if(Yn===null){yt===null&&(yt=zt);break}r&&yt&&Yn.alternate===null&&l(V,yt),U=A(Yn,U,kt),Yt===null?bt=Yn:Yt.sibling=Yn,Yt=Yn,yt=zt}if(Wt.done)return d(V,yt),jt&&Ws(V,kt),bt;if(yt===null){for(;!Wt.done;kt++,Wt=q.next())Wt=st(V,Wt.value,it),Wt!==null&&(U=A(Wt,U,kt),Yt===null?bt=Wt:Yt.sibling=Wt,Yt=Wt);return jt&&Ws(V,kt),bt}for(yt=g(yt);!Wt.done;kt++,Wt=q.next())Wt=Q(yt,V,kt,Wt.value,it),Wt!==null&&(r&&Wt.alternate!==null&&yt.delete(Wt.key===null?kt:Wt.key),U=A(Wt,U,kt),Yt===null?bt=Wt:Yt.sibling=Wt,Yt=Wt);return r&&yt.forEach(function(U3){return l(V,U3)}),jt&&Ws(V,kt),bt}function oe(V,U,q,it){if(typeof q=="object"&&q!==null&&q.type===v&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case y:t:{for(var bt=q.key;U!==null;){if(U.key===bt){if(bt=q.type,bt===v){if(U.tag===7){d(V,U.sibling),it=b(U,q.props.children),it.return=V,V=it;break t}}else if(U.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===N&&Cr(bt)===U.type){d(V,U.sibling),it=b(U,q.props),Go(it,q),it.return=V,V=it;break t}d(V,U);break}else l(V,U);U=U.sibling}q.type===v?(it=wr(q.props.children,V.mode,it,q.key),it.return=V,V=it):(it=Uc(q.type,q.key,q.props,null,V.mode,it),Go(it,q),it.return=V,V=it)}return C(V);case w:t:{for(bt=q.key;U!==null;){if(U.key===bt)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){d(V,U.sibling),it=b(U,q.children||[]),it.return=V,V=it;break t}else{d(V,U);break}else l(V,U);U=U.sibling}it=zd(q,V.mode,it),it.return=V,V=it}return C(V);case N:return q=Cr(q),oe(V,U,q,it)}if(lt(q))return ft(V,U,q,it);if(tt(q)){if(bt=tt(q),typeof bt!="function")throw Error(i(150));return q=bt.call(q),At(V,U,q,it)}if(typeof q.then=="function")return oe(V,U,Wc(q),it);if(q.$$typeof===E)return oe(V,U,Vc(V,q),it);Kc(V,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,U!==null&&U.tag===6?(d(V,U.sibling),it=b(U,q),it.return=V,V=it):(d(V,U),it=Bd(q,V.mode,it),it.return=V,V=it),C(V)):d(V,U)}return function(V,U,q,it){try{$o=0;var bt=oe(V,U,q,it);return xa=null,bt}catch(yt){if(yt===Ea||yt===Xc)throw yt;var Yt=zi(29,yt,null,V.mode);return Yt.lanes=it,Yt.return=V,Yt}}}var Mr=l1(!0),c1=l1(!1),kn=!1;function Qd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zd(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ln(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function On(r,l,d){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(Zt&2)!==0){var b=g.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),g.pending=l,l=Hc(r),q0(r,null,d),l}return jc(r,g,l,d),Hc(r)}function Vo(r,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=r.pendingLanes,d|=g,l.lanes=d,t0(r,d)}}function Jd(r,l){var d=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var b=null,A=null;if(d=d.firstBaseUpdate,d!==null){do{var C={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};A===null?b=A=C:A=A.next=C,d=d.next}while(d!==null);A===null?b=A=l:A=A.next=l}else b=A=l;d={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=l:r.next=l,d.lastBaseUpdate=l}var tf=!1;function qo(){if(tf){var r=Sa;if(r!==null)throw r}}function Xo(r,l,d,g){tf=!1;var b=r.updateQueue;kn=!1;var A=b.firstBaseUpdate,C=b.lastBaseUpdate,L=b.shared.pending;if(L!==null){b.shared.pending=null;var B=L,X=B.next;B.next=null,C===null?A=X:C.next=X,C=B;var J=r.alternate;J!==null&&(J=J.updateQueue,L=J.lastBaseUpdate,L!==C&&(L===null?J.firstBaseUpdate=X:L.next=X,J.lastBaseUpdate=B))}if(A!==null){var st=b.baseState;C=0,J=X=B=null,L=A;do{var Y=L.lane&-536870913,Q=Y!==L.lane;if(Q?(Bt&Y)===Y:(g&Y)===Y){Y!==0&&Y===_a&&(tf=!0),J!==null&&(J=J.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var ft=r,At=L;Y=l;var oe=d;switch(At.tag){case 1:if(ft=At.payload,typeof ft=="function"){st=ft.call(oe,st,Y);break t}st=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=At.payload,Y=typeof ft=="function"?ft.call(oe,st,Y):ft,Y==null)break t;st=p({},st,Y);break t;case 2:kn=!0}}Y=L.callback,Y!==null&&(r.flags|=64,Q&&(r.flags|=8192),Q=b.callbacks,Q===null?b.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:L.tag,payload:L.payload,callback:L.callback,next:null},J===null?(X=J=Q,B=st):J=J.next=Q,C|=Y;if(L=L.next,L===null){if(L=b.shared.pending,L===null)break;Q=L,L=Q.next,Q.next=null,b.lastBaseUpdate=Q,b.shared.pending=null}}while(!0);J===null&&(B=st),b.baseState=B,b.firstBaseUpdate=X,b.lastBaseUpdate=J,A===null&&(b.shared.lanes=0),Bn|=C,r.lanes=C,r.memoizedState=st}}function h1(r,l){if(typeof r!="function")throw Error(i(191,r));r.call(l)}function u1(r,l){var d=r.callbacks;if(d!==null)for(r.callbacks=null,r=0;r<d.length;r++)h1(d[r],l)}var Ca=P(null),Qc=P(0);function d1(r,l){r=on,W(Qc,r),W(Ca,l),on=r|l.baseLanes}function ef(){W(Qc,on),W(Ca,Ca.current)}function sf(){on=Qc.current,H(Ca),H(Qc)}var ji=P(null),rs=null;function Pn(r){var l=r.alternate;W(Re,Re.current&1),W(ji,r),rs===null&&(l===null||Ca.current!==null||l.memoizedState!==null)&&(rs=r)}function nf(r){W(Re,Re.current),W(ji,r),rs===null&&(rs=r)}function f1(r){r.tag===22?(W(Re,Re.current),W(ji,r),rs===null&&(rs=r)):Nn()}function Nn(){W(Re,Re.current),W(ji,ji.current)}function Hi(r){H(ji),rs===r&&(rs=null),H(Re)}var Re=P(0);function Zc(r){for(var l=r;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||hp(d)||up(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Zs=0,Rt=null,re=null,Fe=null,Jc=!1,Ta=!1,Dr=!1,th=0,Yo=0,Ma=null,LE=0;function Ce(){throw Error(i(321))}function rf(r,l){if(l===null)return!1;for(var d=0;d<l.length&&d<r.length;d++)if(!Bi(r[d],l[d]))return!1;return!0}function af(r,l,d,g,b,A){return Zs=A,Rt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,O.H=r===null||r.memoizedState===null?K1:wf,Dr=!1,A=d(g,b),Dr=!1,Ta&&(A=g1(l,d,g,b)),p1(r),A}function p1(r){O.H=Qo;var l=re!==null&&re.next!==null;if(Zs=0,Fe=re=Rt=null,Jc=!1,Yo=0,Ma=null,l)throw Error(i(300));r===null||Ie||(r=r.dependencies,r!==null&&Gc(r)&&(Ie=!0))}function g1(r,l,d,g){Rt=r;var b=0;do{if(Ta&&(Ma=null),Yo=0,Ta=!1,25<=b)throw Error(i(301));if(b+=1,Fe=re=null,r.updateQueue!=null){var A=r.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}O.H=Q1,A=l(d,g)}while(Ta);return A}function OE(){var r=O.H,l=r.useState()[0];return l=typeof l.then=="function"?Wo(l):l,r=r.useState()[0],(re!==null?re.memoizedState:null)!==r&&(Rt.flags|=1024),l}function of(){var r=th!==0;return th=0,r}function lf(r,l,d){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~d}function cf(r){if(Jc){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Jc=!1}Zs=0,Fe=re=Rt=null,Ta=!1,Yo=th=0,Ma=null}function mi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Rt.memoizedState=Fe=r:Fe=Fe.next=r,Fe}function ke(){if(re===null){var r=Rt.alternate;r=r!==null?r.memoizedState:null}else r=re.next;var l=Fe===null?Rt.memoizedState:Fe.next;if(l!==null)Fe=l,re=r;else{if(r===null)throw Rt.alternate===null?Error(i(467)):Error(i(310));re=r,r={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Fe===null?Rt.memoizedState=Fe=r:Fe=Fe.next=r}return Fe}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(r){var l=Yo;return Yo+=1,Ma===null&&(Ma=[]),r=r1(Ma,r,l),l=Rt,(Fe===null?l.memoizedState:Fe.next)===null&&(l=l.alternate,O.H=l===null||l.memoizedState===null?K1:wf),r}function ih(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Wo(r);if(r.$$typeof===E)return ni(r)}throw Error(i(438,String(r)))}function hf(r){var l=null,d=Rt.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=Rt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=eh(),Rt.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(r),g=0;g<r;g++)d[g]=G;return l.index++,d}function Js(r,l){return typeof l=="function"?l(r):l}function sh(r){var l=ke();return uf(l,re,r)}function uf(r,l,d){var g=r.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var b=r.baseQueue,A=g.pending;if(A!==null){if(b!==null){var C=b.next;b.next=A.next,A.next=C}l.baseQueue=b=A,g.pending=null}if(A=r.baseState,b===null)r.memoizedState=A;else{l=b.next;var L=C=null,B=null,X=l,J=!1;do{var st=X.lane&-536870913;if(st!==X.lane?(Bt&st)===st:(Zs&st)===st){var Y=X.revertLane;if(Y===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),st===_a&&(J=!0);else if((Zs&Y)===Y){X=X.next,Y===_a&&(J=!0);continue}else st={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(L=B=st,C=A):B=B.next=st,Rt.lanes|=Y,Bn|=Y;st=X.action,Dr&&d(A,st),A=X.hasEagerState?X.eagerState:d(A,st)}else Y={lane:st,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(L=B=Y,C=A):B=B.next=Y,Rt.lanes|=st,Bn|=st;X=X.next}while(X!==null&&X!==l);if(B===null?C=A:B.next=L,!Bi(A,r.memoizedState)&&(Ie=!0,J&&(d=Sa,d!==null)))throw d;r.memoizedState=A,r.baseState=C,r.baseQueue=B,g.lastRenderedState=A}return b===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function df(r){var l=ke(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=r;var g=d.dispatch,b=d.pending,A=l.memoizedState;if(b!==null){d.pending=null;var C=b=b.next;do A=r(A,C.action),C=C.next;while(C!==b);Bi(A,l.memoizedState)||(Ie=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),d.lastRenderedState=A}return[A,g]}function m1(r,l,d){var g=Rt,b=ke(),A=jt;if(A){if(d===void 0)throw Error(i(407));d=d()}else d=l();var C=!Bi((re||b).memoizedState,d);if(C&&(b.memoizedState=d,Ie=!0),b=b.queue,gf(v1.bind(null,g,b,r),[r]),b.getSnapshot!==l||C||Fe!==null&&Fe.memoizedState.tag&1){if(g.flags|=2048,Da(9,{destroy:void 0},b1.bind(null,g,b,d,l),null),ce===null)throw Error(i(349));A||(Zs&127)!==0||y1(g,l,d)}return d}function y1(r,l,d){r.flags|=16384,r={getSnapshot:l,value:d},l=Rt.updateQueue,l===null?(l=eh(),Rt.updateQueue=l,l.stores=[r]):(d=l.stores,d===null?l.stores=[r]:d.push(r))}function b1(r,l,d,g){l.value=d,l.getSnapshot=g,A1(l)&&w1(r)}function v1(r,l,d){return d(function(){A1(l)&&w1(r)})}function A1(r){var l=r.getSnapshot;r=r.value;try{var d=l();return!Bi(r,d)}catch{return!0}}function w1(r){var l=Ar(r,2);l!==null&&ki(l,r,2)}function ff(r){var l=mi();if(typeof r=="function"){var d=r;if(r=d(),Dr){En(!0);try{d()}finally{En(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:r},l}function _1(r,l,d,g){return r.baseState=d,uf(r,re,typeof g=="function"?g:Js)}function PE(r,l,d,g,b){if(ah(r))throw Error(i(485));if(r=l.action,r!==null){var A={payload:b,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){A.listeners.push(C)}};O.T!==null?d(!0):A.isTransition=!1,g(A),d=l.pending,d===null?(A.next=l.pending=A,S1(l,A)):(A.next=d.next,l.pending=d.next=A)}}function S1(r,l){var d=l.action,g=l.payload,b=r.state;if(l.isTransition){var A=O.T,C={};O.T=C;try{var L=d(b,g),B=O.S;B!==null&&B(C,L),E1(r,l,L)}catch(X){pf(r,l,X)}finally{A!==null&&C.types!==null&&(A.types=C.types),O.T=A}}else try{A=d(b,g),E1(r,l,A)}catch(X){pf(r,l,X)}}function E1(r,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){x1(r,l,g)},function(g){return pf(r,l,g)}):x1(r,l,d)}function x1(r,l,d){l.status="fulfilled",l.value=d,C1(l),r.state=d,l=r.pending,l!==null&&(d=l.next,d===l?r.pending=null:(d=d.next,l.next=d,S1(r,d)))}function pf(r,l,d){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,C1(l),l=l.next;while(l!==g)}r.action=null}function C1(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function T1(r,l){return l}function M1(r,l){if(jt){var d=ce.formState;if(d!==null){t:{var g=Rt;if(jt){if(me){e:{for(var b=me,A=ns;b.nodeType!==8;){if(!A){b=null;break e}if(b=as(b.nextSibling),b===null){b=null;break e}}A=b.data,b=A==="F!"||A==="F"?b:null}if(b){me=as(b.nextSibling),g=b.data==="F!";break t}}Dn(g)}g=!1}g&&(l=d[0])}}return d=mi(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T1,lastRenderedState:l},d.queue=g,d=X1.bind(null,Rt,g),g.dispatch=d,g=ff(!1),A=Af.bind(null,Rt,!1,g.queue),g=mi(),b={state:l,dispatch:null,action:r,pending:null},g.queue=b,d=PE.bind(null,Rt,b,A,d),b.dispatch=d,g.memoizedState=r,[l,d,!1]}function D1(r){var l=ke();return R1(l,re,r)}function R1(r,l,d){if(l=uf(r,l,T1)[0],r=sh(Js)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Wo(l)}catch(C){throw C===Ea?Xc:C}else g=l;l=ke();var b=l.queue,A=b.dispatch;return d!==l.memoizedState&&(Rt.flags|=2048,Da(9,{destroy:void 0},NE.bind(null,b,d),null)),[g,A,r]}function NE(r,l){r.action=l}function k1(r){var l=ke(),d=re;if(d!==null)return R1(l,d,r);ke(),l=l.memoizedState,d=ke();var g=d.queue.dispatch;return d.memoizedState=r,[l,g,!1]}function Da(r,l,d,g){return r={tag:r,create:d,deps:g,inst:l,next:null},l=Rt.updateQueue,l===null&&(l=eh(),Rt.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=r.next=r:(g=d.next,d.next=r,r.next=g,l.lastEffect=r),r}function L1(){return ke().memoizedState}function nh(r,l,d,g){var b=mi();Rt.flags|=r,b.memoizedState=Da(1|l,{destroy:void 0},d,g===void 0?null:g)}function rh(r,l,d,g){var b=ke();g=g===void 0?null:g;var A=b.memoizedState.inst;re!==null&&g!==null&&rf(g,re.memoizedState.deps)?b.memoizedState=Da(l,A,d,g):(Rt.flags|=r,b.memoizedState=Da(1|l,A,d,g))}function O1(r,l){nh(8390656,8,r,l)}function gf(r,l){rh(2048,8,r,l)}function FE(r){Rt.flags|=4;var l=Rt.updateQueue;if(l===null)l=eh(),Rt.updateQueue=l,l.events=[r];else{var d=l.events;d===null?l.events=[r]:d.push(r)}}function P1(r){var l=ke().memoizedState;return FE({ref:l,nextImpl:r}),function(){if((Zt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function N1(r,l){return rh(4,2,r,l)}function F1(r,l){return rh(4,4,r,l)}function I1(r,l){if(typeof l=="function"){r=r();var d=l(r);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function B1(r,l,d){d=d!=null?d.concat([r]):null,rh(4,4,I1.bind(null,l,r),d)}function mf(){}function z1(r,l){var d=ke();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&rf(l,g[1])?g[0]:(d.memoizedState=[r,l],r)}function j1(r,l){var d=ke();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&rf(l,g[1]))return g[0];if(g=r(),Dr){En(!0);try{r()}finally{En(!1)}}return d.memoizedState=[g,l],g}function yf(r,l,d){return d===void 0||(Zs&1073741824)!==0&&(Bt&261930)===0?r.memoizedState=l:(r.memoizedState=d,r=Hy(),Rt.lanes|=r,Bn|=r,d)}function H1(r,l,d,g){return Bi(d,l)?d:Ca.current!==null?(r=yf(r,d,g),Bi(r,l)||(Ie=!0),r):(Zs&42)===0||(Zs&1073741824)!==0&&(Bt&261930)===0?(Ie=!0,r.memoizedState=d):(r=Hy(),Rt.lanes|=r,Bn|=r,l)}function U1(r,l,d,g,b){var A=$.p;$.p=A!==0&&8>A?A:8;var C=O.T,L={};O.T=L,Af(r,!1,l,d);try{var B=b(),X=O.S;if(X!==null&&X(L,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var J=kE(B,g);Ko(r,l,J,Gi(r))}else Ko(r,l,g,Gi(r))}catch(st){Ko(r,l,{then:function(){},status:"rejected",reason:st},Gi())}finally{$.p=A,C!==null&&L.types!==null&&(C.types=L.types),O.T=C}}function IE(){}function bf(r,l,d,g){if(r.tag!==5)throw Error(i(476));var b=$1(r).queue;U1(r,b,l,K,d===null?IE:function(){return G1(r),d(g)})}function $1(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:K},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:d},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function G1(r){var l=$1(r);l.next===null&&(l=r.alternate.memoizedState),Ko(r,l.next.queue,{},Gi())}function vf(){return ni(fl)}function V1(){return ke().memoizedState}function q1(){return ke().memoizedState}function BE(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var d=Gi();r=Ln(d);var g=On(l,r,d);g!==null&&(ki(g,l,d),Vo(g,l,d)),l={cache:Xd()},r.payload=l;return}l=l.return}}function zE(r,l,d){var g=Gi();d={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},ah(r)?Y1(l,d):(d=Fd(r,l,d,g),d!==null&&(ki(d,r,g),W1(d,l,g)))}function X1(r,l,d){var g=Gi();Ko(r,l,d,g)}function Ko(r,l,d,g){var b={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(ah(r))Y1(l,b);else{var A=r.alternate;if(r.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var C=l.lastRenderedState,L=A(C,d);if(b.hasEagerState=!0,b.eagerState=L,Bi(L,C))return jc(r,l,b,0),ce===null&&zc(),!1}catch{}if(d=Fd(r,l,b,g),d!==null)return ki(d,r,g),W1(d,l,g),!0}return!1}function Af(r,l,d,g){if(g={lane:2,revertLane:Zf(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},ah(r)){if(l)throw Error(i(479))}else l=Fd(r,d,g,2),l!==null&&ki(l,r,2)}function ah(r){var l=r.alternate;return r===Rt||l!==null&&l===Rt}function Y1(r,l){Ta=Jc=!0;var d=r.pending;d===null?l.next=l:(l.next=d.next,d.next=l),r.pending=l}function W1(r,l,d){if((d&4194048)!==0){var g=l.lanes;g&=r.pendingLanes,d|=g,l.lanes=d,t0(r,d)}}var Qo={readContext:ni,use:ih,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce};Qo.useEffectEvent=Ce;var K1={readContext:ni,use:ih,useCallback:function(r,l){return mi().memoizedState=[r,l===void 0?null:l],r},useContext:ni,useEffect:O1,useImperativeHandle:function(r,l,d){d=d!=null?d.concat([r]):null,nh(4194308,4,I1.bind(null,l,r),d)},useLayoutEffect:function(r,l){return nh(4194308,4,r,l)},useInsertionEffect:function(r,l){nh(4,2,r,l)},useMemo:function(r,l){var d=mi();l=l===void 0?null:l;var g=r();if(Dr){En(!0);try{r()}finally{En(!1)}}return d.memoizedState=[g,l],g},useReducer:function(r,l,d){var g=mi();if(d!==void 0){var b=d(l);if(Dr){En(!0);try{d(l)}finally{En(!1)}}}else b=l;return g.memoizedState=g.baseState=b,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:b},g.queue=r,r=r.dispatch=zE.bind(null,Rt,r),[g.memoizedState,r]},useRef:function(r){var l=mi();return r={current:r},l.memoizedState=r},useState:function(r){r=ff(r);var l=r.queue,d=X1.bind(null,Rt,l);return l.dispatch=d,[r.memoizedState,d]},useDebugValue:mf,useDeferredValue:function(r,l){var d=mi();return yf(d,r,l)},useTransition:function(){var r=ff(!1);return r=U1.bind(null,Rt,r.queue,!0,!1),mi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,d){var g=Rt,b=mi();if(jt){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),ce===null)throw Error(i(349));(Bt&127)!==0||y1(g,l,d)}b.memoizedState=d;var A={value:d,getSnapshot:l};return b.queue=A,O1(v1.bind(null,g,A,r),[r]),g.flags|=2048,Da(9,{destroy:void 0},b1.bind(null,g,A,d,l),null),d},useId:function(){var r=mi(),l=ce.identifierPrefix;if(jt){var d=Cs,g=xs;d=(g&~(1<<32-Ii(g)-1)).toString(32)+d,l="_"+l+"R_"+d,d=th++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=LE++,l="_"+l+"r_"+d.toString(32)+"_";return r.memoizedState=l},useHostTransitionStatus:vf,useFormState:M1,useActionState:M1,useOptimistic:function(r){var l=mi();l.memoizedState=l.baseState=r;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Af.bind(null,Rt,!0,d),d.dispatch=l,[r,l]},useMemoCache:hf,useCacheRefresh:function(){return mi().memoizedState=BE.bind(null,Rt)},useEffectEvent:function(r){var l=mi(),d={impl:r};return l.memoizedState=d,function(){if((Zt&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}},wf={readContext:ni,use:ih,useCallback:z1,useContext:ni,useEffect:gf,useImperativeHandle:B1,useInsertionEffect:N1,useLayoutEffect:F1,useMemo:j1,useReducer:sh,useRef:L1,useState:function(){return sh(Js)},useDebugValue:mf,useDeferredValue:function(r,l){var d=ke();return H1(d,re.memoizedState,r,l)},useTransition:function(){var r=sh(Js)[0],l=ke().memoizedState;return[typeof r=="boolean"?r:Wo(r),l]},useSyncExternalStore:m1,useId:V1,useHostTransitionStatus:vf,useFormState:D1,useActionState:D1,useOptimistic:function(r,l){var d=ke();return _1(d,re,r,l)},useMemoCache:hf,useCacheRefresh:q1};wf.useEffectEvent=P1;var Q1={readContext:ni,use:ih,useCallback:z1,useContext:ni,useEffect:gf,useImperativeHandle:B1,useInsertionEffect:N1,useLayoutEffect:F1,useMemo:j1,useReducer:df,useRef:L1,useState:function(){return df(Js)},useDebugValue:mf,useDeferredValue:function(r,l){var d=ke();return re===null?yf(d,r,l):H1(d,re.memoizedState,r,l)},useTransition:function(){var r=df(Js)[0],l=ke().memoizedState;return[typeof r=="boolean"?r:Wo(r),l]},useSyncExternalStore:m1,useId:V1,useHostTransitionStatus:vf,useFormState:k1,useActionState:k1,useOptimistic:function(r,l){var d=ke();return re!==null?_1(d,re,r,l):(d.baseState=r,[r,d.queue.dispatch])},useMemoCache:hf,useCacheRefresh:q1};Q1.useEffectEvent=P1;function _f(r,l,d,g){l=r.memoizedState,d=d(g,l),d=d==null?l:p({},l,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var Sf={enqueueSetState:function(r,l,d){r=r._reactInternals;var g=Gi(),b=Ln(g);b.payload=l,d!=null&&(b.callback=d),l=On(r,b,g),l!==null&&(ki(l,r,g),Vo(l,r,g))},enqueueReplaceState:function(r,l,d){r=r._reactInternals;var g=Gi(),b=Ln(g);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=On(r,b,g),l!==null&&(ki(l,r,g),Vo(l,r,g))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var d=Gi(),g=Ln(d);g.tag=2,l!=null&&(g.callback=l),l=On(r,g,d),l!==null&&(ki(l,r,d),Vo(l,r,d))}};function Z1(r,l,d,g,b,A,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,A,C):l.prototype&&l.prototype.isPureReactComponent?!Io(d,g)||!Io(b,A):!0}function J1(r,l,d,g){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==r&&Sf.enqueueReplaceState(l,l.state,null)}function Rr(r,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(r=r.defaultProps){d===l&&(d=p({},d));for(var b in r)d[b]===void 0&&(d[b]=r[b])}return d}function ty(r){Bc(r)}function ey(r){console.error(r)}function iy(r){Bc(r)}function oh(r,l){try{var d=r.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function sy(r,l,d){try{var g=r.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Ef(r,l,d){return d=Ln(d),d.tag=3,d.payload={element:null},d.callback=function(){oh(r,l)},d}function ny(r){return r=Ln(r),r.tag=3,r}function ry(r,l,d,g){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var A=g.value;r.payload=function(){return b(A)},r.callback=function(){sy(l,d,g)}}var C=d.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){sy(l,d,g),typeof b!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var L=g.stack;this.componentDidCatch(g.value,{componentStack:L!==null?L:""})})}function jE(r,l,d,g,b){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&wa(l,d,b,!0),d=ji.current,d!==null){switch(d.tag){case 31:case 13:return rs===null?vh():d.alternate===null&&Te===0&&(Te=3),d.flags&=-257,d.flags|=65536,d.lanes=b,g===Yc?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),Wf(r,g,b)),!1;case 22:return d.flags|=65536,g===Yc?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),Wf(r,g,b)),!1}throw Error(i(435,d.tag))}return Wf(r,g,b),vh(),!1}if(jt)return l=ji.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,g!==Ud&&(r=Error(i(422),{cause:g}),jo(es(r,d)))):(g!==Ud&&(l=Error(i(423),{cause:g}),jo(es(l,d))),r=r.current.alternate,r.flags|=65536,b&=-b,r.lanes|=b,g=es(g,d),b=Ef(r.stateNode,g,b),Jd(r,b),Te!==4&&(Te=2)),!1;var A=Error(i(520),{cause:g});if(A=es(A,d),rl===null?rl=[A]:rl.push(A),Te!==4&&(Te=2),l===null)return!0;g=es(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,r=b&-b,d.lanes|=r,r=Ef(d.stateNode,g,r),Jd(d,r),!1;case 1:if(l=d.type,A=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(zn===null||!zn.has(A))))return d.flags|=65536,b&=-b,d.lanes|=b,b=ny(b),ry(b,r,d,g),Jd(d,b),!1}d=d.return}while(d!==null);return!1}var xf=Error(i(461)),Ie=!1;function ri(r,l,d,g){l.child=r===null?c1(l,null,d,g):Mr(l,r.child,d,g)}function ay(r,l,d,g,b){d=d.render;var A=l.ref;if("ref"in g){var C={};for(var L in g)L!=="ref"&&(C[L]=g[L])}else C=g;return Er(l),g=af(r,l,d,C,A,b),L=of(),r!==null&&!Ie?(lf(r,l,b),tn(r,l,b)):(jt&&L&&jd(l),l.flags|=1,ri(r,l,g,b),l.child)}function oy(r,l,d,g,b){if(r===null){var A=d.type;return typeof A=="function"&&!Id(A)&&A.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=A,ly(r,l,A,g,b)):(r=Uc(d.type,null,g,l,l.mode,b),r.ref=l.ref,r.return=l,l.child=r)}if(A=r.child,!Of(r,b)){var C=A.memoizedProps;if(d=d.compare,d=d!==null?d:Io,d(C,g)&&r.ref===l.ref)return tn(r,l,b)}return l.flags|=1,r=Ys(A,g),r.ref=l.ref,r.return=l,l.child=r}function ly(r,l,d,g,b){if(r!==null){var A=r.memoizedProps;if(Io(A,g)&&r.ref===l.ref)if(Ie=!1,l.pendingProps=g=A,Of(r,b))(r.flags&131072)!==0&&(Ie=!0);else return l.lanes=r.lanes,tn(r,l,b)}return Cf(r,l,d,g,b)}function cy(r,l,d,g){var b=g.children,A=r!==null?r.memoizedState:null;if(r===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(A=A!==null?A.baseLanes|d:d,r!==null){for(g=l.child=r.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~A}else g=0,l.child=null;return hy(r,l,A,d,g)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&qc(l,A!==null?A.cachePool:null),A!==null?d1(l,A):ef(),f1(l);else return g=l.lanes=536870912,hy(r,l,A!==null?A.baseLanes|d:d,d,g)}else A!==null?(qc(l,A.cachePool),d1(l,A),Nn(),l.memoizedState=null):(r!==null&&qc(l,null),ef(),Nn());return ri(r,l,b,d),l.child}function Zo(r,l){return r!==null&&r.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function hy(r,l,d,g,b){var A=Wd();return A=A===null?null:{parent:Ne._currentValue,pool:A},l.memoizedState={baseLanes:d,cachePool:A},r!==null&&qc(l,null),ef(),f1(l),r!==null&&wa(r,l,g,!0),l.childLanes=b,null}function lh(r,l){return l=hh({mode:l.mode,children:l.children},r.mode),l.ref=r.ref,r.child=l,l.return=r,l}function uy(r,l,d){return Mr(l,r.child,null,d),r=lh(l,l.pendingProps),r.flags|=2,Hi(l),l.memoizedState=null,r}function HE(r,l,d){var g=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,r===null){if(jt){if(g.mode==="hidden")return r=lh(l,g),l.lanes=536870912,Zo(null,r);if(nf(l),(r=me)?(r=Sb(r,ns),r=r!==null&&r.data==="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:Tn!==null?{id:xs,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},d=Y0(r),d.return=l,l.child=d,si=l,me=null)):r=null,r===null)throw Dn(l);return l.lanes=536870912,null}return lh(l,g)}var A=r.memoizedState;if(A!==null){var C=A.dehydrated;if(nf(l),b)if(l.flags&256)l.flags&=-257,l=uy(r,l,d);else if(l.memoizedState!==null)l.child=r.child,l.flags|=128,l=null;else throw Error(i(558));else if(Ie||wa(r,l,d,!1),b=(d&r.childLanes)!==0,Ie||b){if(g=ce,g!==null&&(C=e0(g,d),C!==0&&C!==A.retryLane))throw A.retryLane=C,Ar(r,C),ki(g,r,C),xf;vh(),l=uy(r,l,d)}else r=A.treeContext,me=as(C.nextSibling),si=l,jt=!0,Mn=null,ns=!1,r!==null&&Q0(l,r),l=lh(l,g),l.flags|=4096;return l}return r=Ys(r.child,{mode:g.mode,children:g.children}),r.ref=l.ref,l.child=r,r.return=l,r}function ch(r,l){var d=l.ref;if(d===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(r===null||r.ref!==d)&&(l.flags|=4194816)}}function Cf(r,l,d,g,b){return Er(l),d=af(r,l,d,g,void 0,b),g=of(),r!==null&&!Ie?(lf(r,l,b),tn(r,l,b)):(jt&&g&&jd(l),l.flags|=1,ri(r,l,d,b),l.child)}function dy(r,l,d,g,b,A){return Er(l),l.updateQueue=null,d=g1(l,g,d,b),p1(r),g=of(),r!==null&&!Ie?(lf(r,l,A),tn(r,l,A)):(jt&&g&&jd(l),l.flags|=1,ri(r,l,d,A),l.child)}function fy(r,l,d,g,b){if(Er(l),l.stateNode===null){var A=ya,C=d.contextType;typeof C=="object"&&C!==null&&(A=ni(C)),A=new d(g,A),l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Sf,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=g,A.state=l.memoizedState,A.refs={},Qd(l),C=d.contextType,A.context=typeof C=="object"&&C!==null?ni(C):ya,A.state=l.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(_f(l,d,C,g),A.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(C=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),C!==A.state&&Sf.enqueueReplaceState(A,A.state,null),Xo(l,g,A,b),qo(),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(r===null){A=l.stateNode;var L=l.memoizedProps,B=Rr(d,L);A.props=B;var X=A.context,J=d.contextType;C=ya,typeof J=="object"&&J!==null&&(C=ni(J));var st=d.getDerivedStateFromProps;J=typeof st=="function"||typeof A.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,J||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(L||X!==C)&&J1(l,A,g,C),kn=!1;var Y=l.memoizedState;A.state=Y,Xo(l,g,A,b),qo(),X=l.memoizedState,L||Y!==X||kn?(typeof st=="function"&&(_f(l,d,st,g),X=l.memoizedState),(B=kn||Z1(l,d,B,g,Y,X,C))?(J||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=X),A.props=g,A.state=X,A.context=C,g=B):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{A=l.stateNode,Zd(r,l),C=l.memoizedProps,J=Rr(d,C),A.props=J,st=l.pendingProps,Y=A.context,X=d.contextType,B=ya,typeof X=="object"&&X!==null&&(B=ni(X)),L=d.getDerivedStateFromProps,(X=typeof L=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(C!==st||Y!==B)&&J1(l,A,g,B),kn=!1,Y=l.memoizedState,A.state=Y,Xo(l,g,A,b),qo();var Q=l.memoizedState;C!==st||Y!==Q||kn||r!==null&&r.dependencies!==null&&Gc(r.dependencies)?(typeof L=="function"&&(_f(l,d,L,g),Q=l.memoizedState),(J=kn||Z1(l,d,J,g,Y,Q,B)||r!==null&&r.dependencies!==null&&Gc(r.dependencies))?(X||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,Q,B),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,Q,B)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Q),A.props=g,A.state=Q,A.context=B,g=J):(typeof A.componentDidUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(l.flags|=1024),g=!1)}return A=g,ch(r,l),g=(l.flags&128)!==0,A||g?(A=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:A.render(),l.flags|=1,r!==null&&g?(l.child=Mr(l,r.child,null,b),l.child=Mr(l,null,d,b)):ri(r,l,d,b),l.memoizedState=A.state,r=l.child):r=tn(r,l,b),r}function py(r,l,d,g){return _r(),l.flags|=256,ri(r,l,d,g),l.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(r){return{baseLanes:r,cachePool:s1()}}function Df(r,l,d){return r=r!==null?r.childLanes&~d:0,l&&(r|=$i),r}function gy(r,l,d){var g=l.pendingProps,b=!1,A=(l.flags&128)!==0,C;if((C=A)||(C=r!==null&&r.memoizedState===null?!1:(Re.current&2)!==0),C&&(b=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,r===null){if(jt){if(b?Pn(l):Nn(),(r=me)?(r=Sb(r,ns),r=r!==null&&r.data!=="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:Tn!==null?{id:xs,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},d=Y0(r),d.return=l,l.child=d,si=l,me=null)):r=null,r===null)throw Dn(l);return up(r)?l.lanes=32:l.lanes=536870912,null}var L=g.children;return g=g.fallback,b?(Nn(),b=l.mode,L=hh({mode:"hidden",children:L},b),g=wr(g,b,d,null),L.return=l,g.return=l,L.sibling=g,l.child=L,g=l.child,g.memoizedState=Mf(d),g.childLanes=Df(r,C,d),l.memoizedState=Tf,Zo(null,g)):(Pn(l),Rf(l,L))}var B=r.memoizedState;if(B!==null&&(L=B.dehydrated,L!==null)){if(A)l.flags&256?(Pn(l),l.flags&=-257,l=kf(r,l,d)):l.memoizedState!==null?(Nn(),l.child=r.child,l.flags|=128,l=null):(Nn(),L=g.fallback,b=l.mode,g=hh({mode:"visible",children:g.children},b),L=wr(L,b,d,null),L.flags|=2,g.return=l,L.return=l,g.sibling=L,l.child=g,Mr(l,r.child,null,d),g=l.child,g.memoizedState=Mf(d),g.childLanes=Df(r,C,d),l.memoizedState=Tf,l=Zo(null,g));else if(Pn(l),up(L)){if(C=L.nextSibling&&L.nextSibling.dataset,C)var X=C.dgst;C=X,g=Error(i(419)),g.stack="",g.digest=C,jo({value:g,source:null,stack:null}),l=kf(r,l,d)}else if(Ie||wa(r,l,d,!1),C=(d&r.childLanes)!==0,Ie||C){if(C=ce,C!==null&&(g=e0(C,d),g!==0&&g!==B.retryLane))throw B.retryLane=g,Ar(r,g),ki(C,r,g),xf;hp(L)||vh(),l=kf(r,l,d)}else hp(L)?(l.flags|=192,l.child=r.child,l=null):(r=B.treeContext,me=as(L.nextSibling),si=l,jt=!0,Mn=null,ns=!1,r!==null&&Q0(l,r),l=Rf(l,g.children),l.flags|=4096);return l}return b?(Nn(),L=g.fallback,b=l.mode,B=r.child,X=B.sibling,g=Ys(B,{mode:"hidden",children:g.children}),g.subtreeFlags=B.subtreeFlags&65011712,X!==null?L=Ys(X,L):(L=wr(L,b,d,null),L.flags|=2),L.return=l,g.return=l,g.sibling=L,l.child=g,Zo(null,g),g=l.child,L=r.child.memoizedState,L===null?L=Mf(d):(b=L.cachePool,b!==null?(B=Ne._currentValue,b=b.parent!==B?{parent:B,pool:B}:b):b=s1(),L={baseLanes:L.baseLanes|d,cachePool:b}),g.memoizedState=L,g.childLanes=Df(r,C,d),l.memoizedState=Tf,Zo(r.child,g)):(Pn(l),d=r.child,r=d.sibling,d=Ys(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,r!==null&&(C=l.deletions,C===null?(l.deletions=[r],l.flags|=16):C.push(r)),l.child=d,l.memoizedState=null,d)}function Rf(r,l){return l=hh({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function hh(r,l){return r=zi(22,r,null,l),r.lanes=0,r}function kf(r,l,d){return Mr(l,r.child,null,d),r=Rf(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function my(r,l,d){r.lanes|=l;var g=r.alternate;g!==null&&(g.lanes|=l),Vd(r.return,l,d)}function Lf(r,l,d,g,b,A){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:b,treeForkCount:A}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=d,C.tailMode=b,C.treeForkCount=A)}function yy(r,l,d){var g=l.pendingProps,b=g.revealOrder,A=g.tail;g=g.children;var C=Re.current,L=(C&2)!==0;if(L?(C=C&1|2,l.flags|=128):C&=1,W(Re,C),ri(r,l,g,d),g=jt?zo:0,!L&&r!==null&&(r.flags&128)!==0)t:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&my(r,d,l);else if(r.tag===19)my(r,d,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break t;for(;r.sibling===null;){if(r.return===null||r.return===l)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(b){case"forwards":for(d=l.child,b=null;d!==null;)r=d.alternate,r!==null&&Zc(r)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),Lf(l,!1,b,d,A,g);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(r=b.alternate,r!==null&&Zc(r)===null){l.child=b;break}r=b.sibling,b.sibling=d,d=b,b=r}Lf(l,!0,d,null,A,g);break;case"together":Lf(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function tn(r,l,d){if(r!==null&&(l.dependencies=r.dependencies),Bn|=l.lanes,(d&l.childLanes)===0)if(r!==null){if(wa(r,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(i(153));if(l.child!==null){for(r=l.child,d=Ys(r,r.pendingProps),l.child=d,d.return=l;r.sibling!==null;)r=r.sibling,d=d.sibling=Ys(r,r.pendingProps),d.return=l;d.sibling=null}return l.child}function Of(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&Gc(r)))}function UE(r,l,d){switch(l.tag){case 3:mt(l,l.stateNode.containerInfo),Rn(l,Ne,r.memoizedState.cache),_r();break;case 27:case 5:Tt(l);break;case 4:mt(l,l.stateNode.containerInfo);break;case 10:Rn(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,nf(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Pn(l),l.flags|=128,null):(d&l.child.childLanes)!==0?gy(r,l,d):(Pn(l),r=tn(r,l,d),r!==null?r.sibling:null);Pn(l);break;case 19:var b=(r.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(wa(r,l,d,!1),g=(d&l.childLanes)!==0),b){if(g)return yy(r,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),W(Re,Re.current),g)break;return null;case 22:return l.lanes=0,cy(r,l,d,l.pendingProps);case 24:Rn(l,Ne,r.memoizedState.cache)}return tn(r,l,d)}function by(r,l,d){if(r!==null)if(r.memoizedProps!==l.pendingProps)Ie=!0;else{if(!Of(r,d)&&(l.flags&128)===0)return Ie=!1,UE(r,l,d);Ie=(r.flags&131072)!==0}else Ie=!1,jt&&(l.flags&1048576)!==0&&K0(l,zo,l.index);switch(l.lanes=0,l.tag){case 16:t:{var g=l.pendingProps;if(r=Cr(l.elementType),l.type=r,typeof r=="function")Id(r)?(g=Rr(r,g),l.tag=1,l=fy(null,l,r,g,d)):(l.tag=0,l=Cf(null,l,r,g,d));else{if(r!=null){var b=r.$$typeof;if(b===R){l.tag=11,l=ay(null,l,r,g,d);break t}else if(b===k){l.tag=14,l=oy(null,l,r,g,d);break t}}throw l=rt(r)||r,Error(i(306,l,""))}}return l;case 0:return Cf(r,l,l.type,l.pendingProps,d);case 1:return g=l.type,b=Rr(g,l.pendingProps),fy(r,l,g,b,d);case 3:t:{if(mt(l,l.stateNode.containerInfo),r===null)throw Error(i(387));g=l.pendingProps;var A=l.memoizedState;b=A.element,Zd(r,l),Xo(l,g,null,d);var C=l.memoizedState;if(g=C.cache,Rn(l,Ne,g),g!==A.cache&&qd(l,[Ne],d,!0),qo(),g=C.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){l=py(r,l,g,d);break t}else if(g!==b){b=es(Error(i(424)),l),jo(b),l=py(r,l,g,d);break t}else for(r=l.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,me=as(r.firstChild),si=l,jt=!0,Mn=null,ns=!0,d=c1(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(_r(),g===b){l=tn(r,l,d);break t}ri(r,l,g,d)}l=l.child}return l;case 26:return ch(r,l),r===null?(d=Db(l.type,null,l.pendingProps,null))?l.memoizedState=d:jt||(d=l.type,r=l.pendingProps,g=Ch(Z.current).createElement(d),g[ii]=l,g[xi]=r,ai(g,d,r),Ze(g),l.stateNode=g):l.memoizedState=Db(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return Tt(l),r===null&&jt&&(g=l.stateNode=Cb(l.type,l.pendingProps,Z.current),si=l,ns=!0,b=me,$n(l.type)?(dp=b,me=as(g.firstChild)):me=b),ri(r,l,l.pendingProps.children,d),ch(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&jt&&((b=g=me)&&(g=b3(g,l.type,l.pendingProps,ns),g!==null?(l.stateNode=g,si=l,me=as(g.firstChild),ns=!1,b=!0):b=!1),b||Dn(l)),Tt(l),b=l.type,A=l.pendingProps,C=r!==null?r.memoizedProps:null,g=A.children,op(b,A)?g=null:C!==null&&op(b,C)&&(l.flags|=32),l.memoizedState!==null&&(b=af(r,l,OE,null,null,d),fl._currentValue=b),ch(r,l),ri(r,l,g,d),l.child;case 6:return r===null&&jt&&((r=d=me)&&(d=v3(d,l.pendingProps,ns),d!==null?(l.stateNode=d,si=l,me=null,r=!0):r=!1),r||Dn(l)),null;case 13:return gy(r,l,d);case 4:return mt(l,l.stateNode.containerInfo),g=l.pendingProps,r===null?l.child=Mr(l,null,g,d):ri(r,l,g,d),l.child;case 11:return ay(r,l,l.type,l.pendingProps,d);case 7:return ri(r,l,l.pendingProps,d),l.child;case 8:return ri(r,l,l.pendingProps.children,d),l.child;case 12:return ri(r,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,Rn(l,l.type,g.value),ri(r,l,g.children,d),l.child;case 9:return b=l.type._context,g=l.pendingProps.children,Er(l),b=ni(b),g=g(b),l.flags|=1,ri(r,l,g,d),l.child;case 14:return oy(r,l,l.type,l.pendingProps,d);case 15:return ly(r,l,l.type,l.pendingProps,d);case 19:return yy(r,l,d);case 31:return HE(r,l,d);case 22:return cy(r,l,d,l.pendingProps);case 24:return Er(l),g=ni(Ne),r===null?(b=Wd(),b===null&&(b=ce,A=Xd(),b.pooledCache=A,A.refCount++,A!==null&&(b.pooledCacheLanes|=d),b=A),l.memoizedState={parent:g,cache:b},Qd(l),Rn(l,Ne,b)):((r.lanes&d)!==0&&(Zd(r,l),Xo(l,null,null,d),qo()),b=r.memoizedState,A=l.memoizedState,b.parent!==g?(b={parent:g,cache:g},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),Rn(l,Ne,g)):(g=A.cache,Rn(l,Ne,g),g!==b.cache&&qd(l,[Ne],d,!0))),ri(r,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function en(r){r.flags|=4}function Pf(r,l,d,g,b){if((l=(r.mode&32)!==0)&&(l=!1),l){if(r.flags|=16777216,(b&335544128)===b)if(r.stateNode.complete)r.flags|=8192;else if(Vy())r.flags|=8192;else throw Tr=Yc,Kd}else r.flags&=-16777217}function vy(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Pb(l))if(Vy())r.flags|=8192;else throw Tr=Yc,Kd}function uh(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Zm():536870912,r.lanes|=l,Oa|=l)}function Jo(r,l){if(!jt)switch(r.tailMode){case"hidden":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function ye(r){var l=r.alternate!==null&&r.alternate.child===r.child,d=0,g=0;if(l)for(var b=r.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=g,r.childLanes=d,l}function $E(r,l,d){var g=l.pendingProps;switch(Hd(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(l),null;case 1:return ye(l),null;case 3:return d=l.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Qs(Ne),gt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Aa(l)?en(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,$d())),ye(l),null;case 26:var b=l.type,A=l.memoizedState;return r===null?(en(l),A!==null?(ye(l),vy(l,A)):(ye(l),Pf(l,b,null,g,d))):A?A!==r.memoizedState?(en(l),ye(l),vy(l,A)):(ye(l),l.flags&=-16777217):(r=r.memoizedProps,r!==g&&en(l),ye(l),Pf(l,b,r,g,d)),null;case 27:if(qt(l),d=Z.current,b=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==g&&en(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return ye(l),null}r=z.current,Aa(l)?Z0(l):(r=Cb(b,g,d),l.stateNode=r,en(l))}return ye(l),null;case 5:if(qt(l),b=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==g&&en(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return ye(l),null}if(A=z.current,Aa(l))Z0(l);else{var C=Ch(Z.current);switch(A){case 1:A=C.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=C.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=C.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof g.is=="string"?C.createElement("select",{is:g.is}):C.createElement("select"),g.multiple?A.multiple=!0:g.size&&(A.size=g.size);break;default:A=typeof g.is=="string"?C.createElement(b,{is:g.is}):C.createElement(b)}}A[ii]=l,A[xi]=g;t:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)A.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break t;for(;C.sibling===null;){if(C.return===null||C.return===l)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=A;t:switch(ai(A,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break t;case"img":g=!0;break t;default:g=!1}g&&en(l)}}return ye(l),Pf(l,l.type,r===null?null:r.memoizedProps,l.pendingProps,d),null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==g&&en(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(i(166));if(r=Z.current,Aa(l)){if(r=l.stateNode,d=l.memoizedProps,g=null,b=si,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}r[ii]=l,r=!!(r.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||gb(r.nodeValue,d)),r||Dn(l,!0)}else r=Ch(r).createTextNode(g),r[ii]=l,l.stateNode=r}return ye(l),null;case 31:if(d=l.memoizedState,r===null||r.memoizedState!==null){if(g=Aa(l),d!==null){if(r===null){if(!g)throw Error(i(318));if(r=l.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[ii]=l}else _r(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ye(l),r=!1}else d=$d(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),r=!0;if(!r)return l.flags&256?(Hi(l),l):(Hi(l),null);if((l.flags&128)!==0)throw Error(i(558))}return ye(l),null;case 13:if(g=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(b=Aa(l),g!==null&&g.dehydrated!==null){if(r===null){if(!b)throw Error(i(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[ii]=l}else _r(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ye(l),b=!1}else b=$d(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(Hi(l),l):(Hi(l),null)}return Hi(l),(l.flags&128)!==0?(l.lanes=d,l):(d=g!==null,r=r!==null&&r.memoizedState!==null,d&&(g=l.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==b&&(g.flags|=2048)),d!==r&&d&&(l.child.flags|=8192),uh(l,l.updateQueue),ye(l),null);case 4:return gt(),r===null&&ip(l.stateNode.containerInfo),ye(l),null;case 10:return Qs(l.type),ye(l),null;case 19:if(H(Re),g=l.memoizedState,g===null)return ye(l),null;if(b=(l.flags&128)!==0,A=g.rendering,A===null)if(b)Jo(g,!1);else{if(Te!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(A=Zc(r),A!==null){for(l.flags|=128,Jo(g,!1),r=A.updateQueue,l.updateQueue=r,uh(l,r),l.subtreeFlags=0,r=d,d=l.child;d!==null;)X0(d,r),d=d.sibling;return W(Re,Re.current&1|2),jt&&Ws(l,g.treeForkCount),l.child}r=r.sibling}g.tail!==null&&Qe()>mh&&(l.flags|=128,b=!0,Jo(g,!1),l.lanes=4194304)}else{if(!b)if(r=Zc(A),r!==null){if(l.flags|=128,b=!0,r=r.updateQueue,l.updateQueue=r,uh(l,r),Jo(g,!0),g.tail===null&&g.tailMode==="hidden"&&!A.alternate&&!jt)return ye(l),null}else 2*Qe()-g.renderingStartTime>mh&&d!==536870912&&(l.flags|=128,b=!0,Jo(g,!1),l.lanes=4194304);g.isBackwards?(A.sibling=l.child,l.child=A):(r=g.last,r!==null?r.sibling=A:l.child=A,g.last=A)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Qe(),r.sibling=null,d=Re.current,W(Re,b?d&1|2:d&1),jt&&Ws(l,g.treeForkCount),r):(ye(l),null);case 22:case 23:return Hi(l),sf(),g=l.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(ye(l),l.subtreeFlags&6&&(l.flags|=8192)):ye(l),d=l.updateQueue,d!==null&&uh(l,d.retryQueue),d=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),r!==null&&H(xr),null;case 24:return d=null,r!==null&&(d=r.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Qs(Ne),ye(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function GE(r,l){switch(Hd(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return Qs(Ne),gt(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return qt(l),null;case 31:if(l.memoizedState!==null){if(Hi(l),l.alternate===null)throw Error(i(340));_r()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 13:if(Hi(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(i(340));_r()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return H(Re),null;case 4:return gt(),null;case 10:return Qs(l.type),null;case 22:case 23:return Hi(l),sf(),r!==null&&H(xr),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return Qs(Ne),null;case 25:return null;default:return null}}function Ay(r,l){switch(Hd(l),l.tag){case 3:Qs(Ne),gt();break;case 26:case 27:case 5:qt(l);break;case 4:gt();break;case 31:l.memoizedState!==null&&Hi(l);break;case 13:Hi(l);break;case 19:H(Re);break;case 10:Qs(l.type);break;case 22:case 23:Hi(l),sf(),r!==null&&H(xr);break;case 24:Qs(Ne)}}function tl(r,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&r)===r){g=void 0;var A=d.create,C=d.inst;g=A(),C.destroy=g}d=d.next}while(d!==b)}}catch(L){ne(l,l.return,L)}}function Fn(r,l,d){try{var g=l.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var A=b.next;g=A;do{if((g.tag&r)===r){var C=g.inst,L=C.destroy;if(L!==void 0){C.destroy=void 0,b=l;var B=d,X=L;try{X()}catch(J){ne(b,B,J)}}}g=g.next}while(g!==A)}}catch(J){ne(l,l.return,J)}}function wy(r){var l=r.updateQueue;if(l!==null){var d=r.stateNode;try{u1(l,d)}catch(g){ne(r,r.return,g)}}}function _y(r,l,d){d.props=Rr(r.type,r.memoizedProps),d.state=r.memoizedState;try{d.componentWillUnmount()}catch(g){ne(r,l,g)}}function el(r,l){try{var d=r.ref;if(d!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof d=="function"?r.refCleanup=d(g):d.current=g}}catch(b){ne(r,l,b)}}function Ts(r,l){var d=r.ref,g=r.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(b){ne(r,l,b)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){ne(r,l,b)}else d.current=null}function Sy(r){var l=r.type,d=r.memoizedProps,g=r.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break t;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(b){ne(r,r.return,b)}}function Nf(r,l,d){try{var g=r.stateNode;d3(g,r.type,d,l),g[xi]=l}catch(b){ne(r,r.return,b)}}function Ey(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&$n(r.type)||r.tag===4}function Ff(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Ey(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&$n(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function If(r,l,d){var g=r.tag;if(g===5||g===6)r=r.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(r,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(r),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=qs));else if(g!==4&&(g===27&&$n(r.type)&&(d=r.stateNode,l=null),r=r.child,r!==null))for(If(r,l,d),r=r.sibling;r!==null;)If(r,l,d),r=r.sibling}function dh(r,l,d){var g=r.tag;if(g===5||g===6)r=r.stateNode,l?d.insertBefore(r,l):d.appendChild(r);else if(g!==4&&(g===27&&$n(r.type)&&(d=r.stateNode),r=r.child,r!==null))for(dh(r,l,d),r=r.sibling;r!==null;)dh(r,l,d),r=r.sibling}function xy(r){var l=r.stateNode,d=r.memoizedProps;try{for(var g=r.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);ai(l,g,d),l[ii]=r,l[xi]=d}catch(A){ne(r,r.return,A)}}var sn=!1,Be=!1,Bf=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,Je=null;function VE(r,l){if(r=r.containerInfo,rp=Oh,r=B0(r),Rd(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else t:{d=(d=r.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var b=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{d.nodeType,A.nodeType}catch{d=null;break t}var C=0,L=-1,B=-1,X=0,J=0,st=r,Y=null;e:for(;;){for(var Q;st!==d||b!==0&&st.nodeType!==3||(L=C+b),st!==A||g!==0&&st.nodeType!==3||(B=C+g),st.nodeType===3&&(C+=st.nodeValue.length),(Q=st.firstChild)!==null;)Y=st,st=Q;for(;;){if(st===r)break e;if(Y===d&&++X===b&&(L=C),Y===A&&++J===g&&(B=C),(Q=st.nextSibling)!==null)break;st=Y,Y=st.parentNode}st=Q}d=L===-1||B===-1?null:{start:L,end:B}}else d=null}d=d||{start:0,end:0}}else d=null;for(ap={focusedElem:r,selectionRange:d},Oh=!1,Je=l;Je!==null;)if(l=Je,r=l.child,(l.subtreeFlags&1028)!==0&&r!==null)r.return=l,Je=r;else for(;Je!==null;){switch(l=Je,A=l.alternate,r=l.flags,l.tag){case 0:if((r&4)!==0&&(r=l.updateQueue,r=r!==null?r.events:null,r!==null))for(d=0;d<r.length;d++)b=r[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&A!==null){r=void 0,d=l,b=A.memoizedProps,A=A.memoizedState,g=d.stateNode;try{var ft=Rr(d.type,b);r=g.getSnapshotBeforeUpdate(ft,A),g.__reactInternalSnapshotBeforeUpdate=r}catch(At){ne(d,d.return,At)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,d=r.nodeType,d===9)cp(r);else if(d===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":cp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=l.sibling,r!==null){r.return=l.return,Je=r;break}Je=l.return}}function Ty(r,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:rn(r,d),g&4&&tl(5,d);break;case 1:if(rn(r,d),g&4)if(r=d.stateNode,l===null)try{r.componentDidMount()}catch(C){ne(d,d.return,C)}else{var b=Rr(d.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(b,l,r.__reactInternalSnapshotBeforeUpdate)}catch(C){ne(d,d.return,C)}}g&64&&wy(d),g&512&&el(d,d.return);break;case 3:if(rn(r,d),g&64&&(r=d.updateQueue,r!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{u1(r,l)}catch(C){ne(d,d.return,C)}}break;case 27:l===null&&g&4&&xy(d);case 26:case 5:rn(r,d),l===null&&g&4&&Sy(d),g&512&&el(d,d.return);break;case 12:rn(r,d);break;case 31:rn(r,d),g&4&&Ry(r,d);break;case 13:rn(r,d),g&4&&ky(r,d),g&64&&(r=d.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(d=t3.bind(null,d),A3(r,d))));break;case 22:if(g=d.memoizedState!==null||sn,!g){l=l!==null&&l.memoizedState!==null||Be,b=sn;var A=Be;sn=g,(Be=l)&&!A?an(r,d,(d.subtreeFlags&8772)!==0):rn(r,d),sn=b,Be=A}break;case 30:break;default:rn(r,d)}}function My(r){var l=r.alternate;l!==null&&(r.alternate=null,My(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&fd(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ve=null,Ti=!1;function nn(r,l,d){for(d=d.child;d!==null;)Dy(r,l,d),d=d.sibling}function Dy(r,l,d){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(pr,d)}catch{}switch(d.tag){case 26:Be||Ts(d,l),nn(r,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Be||Ts(d,l);var g=ve,b=Ti;$n(d.type)&&(ve=d.stateNode,Ti=!1),nn(r,l,d),hl(d.stateNode),ve=g,Ti=b;break;case 5:Be||Ts(d,l);case 6:if(g=ve,b=Ti,ve=null,nn(r,l,d),ve=g,Ti=b,ve!==null)if(Ti)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(d.stateNode)}catch(A){ne(d,l,A)}else try{ve.removeChild(d.stateNode)}catch(A){ne(d,l,A)}break;case 18:ve!==null&&(Ti?(r=ve,wb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,d.stateNode),Ha(r)):wb(ve,d.stateNode));break;case 4:g=ve,b=Ti,ve=d.stateNode.containerInfo,Ti=!0,nn(r,l,d),ve=g,Ti=b;break;case 0:case 11:case 14:case 15:Fn(2,d,l),Be||Fn(4,d,l),nn(r,l,d);break;case 1:Be||(Ts(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&_y(d,l,g)),nn(r,l,d);break;case 21:nn(r,l,d);break;case 22:Be=(g=Be)||d.memoizedState!==null,nn(r,l,d),Be=g;break;default:nn(r,l,d)}}function Ry(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ha(r)}catch(d){ne(l,l.return,d)}}}function ky(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ha(r)}catch(d){ne(l,l.return,d)}}function qE(r){switch(r.tag){case 31:case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new Cy),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new Cy),l;default:throw Error(i(435,r.tag))}}function fh(r,l){var d=qE(r);l.forEach(function(g){if(!d.has(g)){d.add(g);var b=e3.bind(null,r,g);g.then(b,b)}})}function Mi(r,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var b=d[g],A=r,C=l,L=C;t:for(;L!==null;){switch(L.tag){case 27:if($n(L.type)){ve=L.stateNode,Ti=!1;break t}break;case 5:ve=L.stateNode,Ti=!1;break t;case 3:case 4:ve=L.stateNode.containerInfo,Ti=!0;break t}L=L.return}if(ve===null)throw Error(i(160));Dy(A,C,b),ve=null,Ti=!1,A=b.alternate,A!==null&&(A.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Ly(l,r),l=l.sibling}var vs=null;function Ly(r,l){var d=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Mi(l,r),Di(r),g&4&&(Fn(3,r,r.return),tl(3,r),Fn(5,r,r.return));break;case 1:Mi(l,r),Di(r),g&512&&(Be||d===null||Ts(d,d.return)),g&64&&sn&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(d=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var b=vs;if(Mi(l,r),Di(r),g&512&&(Be||d===null||Ts(d,d.return)),g&4){var A=d!==null?d.memoizedState:null;if(g=r.memoizedState,d===null)if(g===null)if(r.stateNode===null){t:{g=r.type,d=r.memoizedProps,b=b.ownerDocument||b;e:switch(g){case"title":A=b.getElementsByTagName("title")[0],(!A||A[Mo]||A[ii]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=b.createElement(g),b.head.insertBefore(A,b.querySelector("head > title"))),ai(A,g,d),A[ii]=r,Ze(A),g=A;break t;case"link":var C=Lb("link","href",b).get(g+(d.href||""));if(C){for(var L=0;L<C.length;L++)if(A=C[L],A.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&A.getAttribute("rel")===(d.rel==null?null:d.rel)&&A.getAttribute("title")===(d.title==null?null:d.title)&&A.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){C.splice(L,1);break e}}A=b.createElement(g),ai(A,g,d),b.head.appendChild(A);break;case"meta":if(C=Lb("meta","content",b).get(g+(d.content||""))){for(L=0;L<C.length;L++)if(A=C[L],A.getAttribute("content")===(d.content==null?null:""+d.content)&&A.getAttribute("name")===(d.name==null?null:d.name)&&A.getAttribute("property")===(d.property==null?null:d.property)&&A.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&A.getAttribute("charset")===(d.charSet==null?null:d.charSet)){C.splice(L,1);break e}}A=b.createElement(g),ai(A,g,d),b.head.appendChild(A);break;default:throw Error(i(468,g))}A[ii]=r,Ze(A),g=A}r.stateNode=g}else Ob(b,r.type,r.stateNode);else r.stateNode=kb(b,g,r.memoizedProps);else A!==g?(A===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):A.count--,g===null?Ob(b,r.type,r.stateNode):kb(b,g,r.memoizedProps)):g===null&&r.stateNode!==null&&Nf(r,r.memoizedProps,d.memoizedProps)}break;case 27:Mi(l,r),Di(r),g&512&&(Be||d===null||Ts(d,d.return)),d!==null&&g&4&&Nf(r,r.memoizedProps,d.memoizedProps);break;case 5:if(Mi(l,r),Di(r),g&512&&(Be||d===null||Ts(d,d.return)),r.flags&32){b=r.stateNode;try{ha(b,"")}catch(ft){ne(r,r.return,ft)}}g&4&&r.stateNode!=null&&(b=r.memoizedProps,Nf(r,b,d!==null?d.memoizedProps:b)),g&1024&&(Bf=!0);break;case 6:if(Mi(l,r),Di(r),g&4){if(r.stateNode===null)throw Error(i(162));g=r.memoizedProps,d=r.stateNode;try{d.nodeValue=g}catch(ft){ne(r,r.return,ft)}}break;case 3:if(Dh=null,b=vs,vs=Th(l.containerInfo),Mi(l,r),vs=b,Di(r),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Ha(l.containerInfo)}catch(ft){ne(r,r.return,ft)}Bf&&(Bf=!1,Oy(r));break;case 4:g=vs,vs=Th(r.stateNode.containerInfo),Mi(l,r),Di(r),vs=g;break;case 12:Mi(l,r),Di(r);break;case 31:Mi(l,r),Di(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,fh(r,g)));break;case 13:Mi(l,r),Di(r),r.child.flags&8192&&r.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(gh=Qe()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,fh(r,g)));break;case 22:b=r.memoizedState!==null;var B=d!==null&&d.memoizedState!==null,X=sn,J=Be;if(sn=X||b,Be=J||B,Mi(l,r),Be=J,sn=X,Di(r),g&8192)t:for(l=r.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||B||sn||Be||kr(r)),d=null,l=r;;){if(l.tag===5||l.tag===26){if(d===null){B=d=l;try{if(A=B.stateNode,b)C=A.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{L=B.stateNode;var st=B.memoizedProps.style,Y=st!=null&&st.hasOwnProperty("display")?st.display:null;L.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ft){ne(B,B.return,ft)}}}else if(l.tag===6){if(d===null){B=l;try{B.stateNode.nodeValue=b?"":B.memoizedProps}catch(ft){ne(B,B.return,ft)}}}else if(l.tag===18){if(d===null){B=l;try{var Q=B.stateNode;b?_b(Q,!0):_b(B.stateNode,!1)}catch(ft){ne(B,B.return,ft)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break t;for(;l.sibling===null;){if(l.return===null||l.return===r)break t;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=r.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,fh(r,d))));break;case 19:Mi(l,r),Di(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,fh(r,g)));break;case 30:break;case 21:break;default:Mi(l,r),Di(r)}}function Di(r){var l=r.flags;if(l&2){try{for(var d,g=r.return;g!==null;){if(Ey(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var b=d.stateNode,A=Ff(r);dh(r,A,b);break;case 5:var C=d.stateNode;d.flags&32&&(ha(C,""),d.flags&=-33);var L=Ff(r);dh(r,L,C);break;case 3:case 4:var B=d.stateNode.containerInfo,X=Ff(r);If(r,X,B);break;default:throw Error(i(161))}}catch(J){ne(r,r.return,J)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function Oy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;Oy(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function rn(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Ty(r,l.alternate,l),l=l.sibling}function kr(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:Fn(4,l,l.return),kr(l);break;case 1:Ts(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&_y(l,l.return,d),kr(l);break;case 27:hl(l.stateNode);case 26:case 5:Ts(l,l.return),kr(l);break;case 22:l.memoizedState===null&&kr(l);break;case 30:kr(l);break;default:kr(l)}r=r.sibling}}function an(r,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,b=r,A=l,C=A.flags;switch(A.tag){case 0:case 11:case 15:an(b,A,d),tl(4,A);break;case 1:if(an(b,A,d),g=A,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(X){ne(g,g.return,X)}if(g=A,b=g.updateQueue,b!==null){var L=g.stateNode;try{var B=b.shared.hiddenCallbacks;if(B!==null)for(b.shared.hiddenCallbacks=null,b=0;b<B.length;b++)h1(B[b],L)}catch(X){ne(g,g.return,X)}}d&&C&64&&wy(A),el(A,A.return);break;case 27:xy(A);case 26:case 5:an(b,A,d),d&&g===null&&C&4&&Sy(A),el(A,A.return);break;case 12:an(b,A,d);break;case 31:an(b,A,d),d&&C&4&&Ry(b,A);break;case 13:an(b,A,d),d&&C&4&&ky(b,A);break;case 22:A.memoizedState===null&&an(b,A,d),el(A,A.return);break;case 30:break;default:an(b,A,d)}l=l.sibling}}function zf(r,l){var d=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==d&&(r!=null&&r.refCount++,d!=null&&Ho(d))}function jf(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&Ho(r))}function As(r,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Py(r,l,d,g),l=l.sibling}function Py(r,l,d,g){var b=l.flags;switch(l.tag){case 0:case 11:case 15:As(r,l,d,g),b&2048&&tl(9,l);break;case 1:As(r,l,d,g);break;case 3:As(r,l,d,g),b&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&Ho(r)));break;case 12:if(b&2048){As(r,l,d,g),r=l.stateNode;try{var A=l.memoizedProps,C=A.id,L=A.onPostCommit;typeof L=="function"&&L(C,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){ne(l,l.return,B)}}else As(r,l,d,g);break;case 31:As(r,l,d,g);break;case 13:As(r,l,d,g);break;case 23:break;case 22:A=l.stateNode,C=l.alternate,l.memoizedState!==null?A._visibility&2?As(r,l,d,g):il(r,l):A._visibility&2?As(r,l,d,g):(A._visibility|=2,Ra(r,l,d,g,(l.subtreeFlags&10256)!==0||!1)),b&2048&&zf(C,l);break;case 24:As(r,l,d,g),b&2048&&jf(l.alternate,l);break;default:As(r,l,d,g)}}function Ra(r,l,d,g,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var A=r,C=l,L=d,B=g,X=C.flags;switch(C.tag){case 0:case 11:case 15:Ra(A,C,L,B,b),tl(8,C);break;case 23:break;case 22:var J=C.stateNode;C.memoizedState!==null?J._visibility&2?Ra(A,C,L,B,b):il(A,C):(J._visibility|=2,Ra(A,C,L,B,b)),b&&X&2048&&zf(C.alternate,C);break;case 24:Ra(A,C,L,B,b),b&&X&2048&&jf(C.alternate,C);break;default:Ra(A,C,L,B,b)}l=l.sibling}}function il(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=r,g=l,b=g.flags;switch(g.tag){case 22:il(d,g),b&2048&&zf(g.alternate,g);break;case 24:il(d,g),b&2048&&jf(g.alternate,g);break;default:il(d,g)}l=l.sibling}}var sl=8192;function ka(r,l,d){if(r.subtreeFlags&sl)for(r=r.child;r!==null;)Ny(r,l,d),r=r.sibling}function Ny(r,l,d){switch(r.tag){case 26:ka(r,l,d),r.flags&sl&&r.memoizedState!==null&&L3(d,vs,r.memoizedState,r.memoizedProps);break;case 5:ka(r,l,d);break;case 3:case 4:var g=vs;vs=Th(r.stateNode.containerInfo),ka(r,l,d),vs=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=sl,sl=16777216,ka(r,l,d),sl=g):ka(r,l,d));break;default:ka(r,l,d)}}function Fy(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function nl(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Je=g,By(g,r)}Fy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Iy(r),r=r.sibling}function Iy(r){switch(r.tag){case 0:case 11:case 15:nl(r),r.flags&2048&&Fn(9,r,r.return);break;case 3:nl(r);break;case 12:nl(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,ph(r)):nl(r);break;default:nl(r)}}function ph(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Je=g,By(g,r)}Fy(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:Fn(8,l,l.return),ph(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,ph(l));break;default:ph(l)}r=r.sibling}}function By(r,l){for(;Je!==null;){var d=Je;switch(d.tag){case 0:case 11:case 15:Fn(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Ho(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Je=g;else t:for(d=r;Je!==null;){g=Je;var b=g.sibling,A=g.return;if(My(g),g===d){Je=null;break t}if(b!==null){b.return=A,Je=b;break t}Je=A}}}var XE={getCacheForType:function(r){var l=ni(Ne),d=l.data.get(r);return d===void 0&&(d=r(),l.data.set(r,d)),d},cacheSignal:function(){return ni(Ne).controller.signal}},YE=typeof WeakMap=="function"?WeakMap:Map,Zt=0,ce=null,Ft=null,Bt=0,se=0,Ui=null,In=!1,La=!1,Hf=!1,on=0,Te=0,Bn=0,Lr=0,Uf=0,$i=0,Oa=0,rl=null,Ri=null,$f=!1,gh=0,zy=0,mh=1/0,yh=null,zn=null,Ge=0,jn=null,Pa=null,ln=0,Gf=0,Vf=null,jy=null,al=0,qf=null;function Gi(){return(Zt&2)!==0&&Bt!==0?Bt&-Bt:O.T!==null?Zf():i0()}function Hy(){if($i===0)if((Bt&536870912)===0||jt){var r=xc;xc<<=1,(xc&3932160)===0&&(xc=262144),$i=r}else $i=536870912;return r=ji.current,r!==null&&(r.flags|=32),$i}function ki(r,l,d){(r===ce&&(se===2||se===9)||r.cancelPendingCommit!==null)&&(Na(r,0),Hn(r,Bt,$i,!1)),To(r,d),((Zt&2)===0||r!==ce)&&(r===ce&&((Zt&2)===0&&(Lr|=d),Te===4&&Hn(r,Bt,$i,!1)),Ms(r))}function Uy(r,l,d){if((Zt&6)!==0)throw Error(i(327));var g=!d&&(l&127)===0&&(l&r.expiredLanes)===0||Co(r,l),b=g?QE(r,l):Yf(r,l,!0),A=g;do{if(b===0){La&&!g&&Hn(r,l,0,!1);break}else{if(d=r.current.alternate,A&&!WE(d)){b=Yf(r,l,!1),A=!1;continue}if(b===2){if(A=l,r.errorRecoveryDisabledLanes&A)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;t:{var L=r;b=rl;var B=L.current.memoizedState.isDehydrated;if(B&&(Na(L,C).flags|=256),C=Yf(L,C,!1),C!==2){if(Hf&&!B){L.errorRecoveryDisabledLanes|=A,Lr|=A,b=4;break t}A=Ri,Ri=b,A!==null&&(Ri===null?Ri=A:Ri.push.apply(Ri,A))}b=C}if(A=!1,b!==2)continue}}if(b===1){Na(r,0),Hn(r,l,0,!0);break}t:{switch(g=r,A=b,A){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Hn(g,l,$i,!In);break t;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(b=gh+300-Qe(),10<b)){if(Hn(g,l,$i,!In),Tc(g,0,!0)!==0)break t;ln=l,g.timeoutHandle=vb($y.bind(null,g,d,Ri,yh,$f,l,$i,Lr,Oa,In,A,"Throttled",-0,0),b);break t}$y(g,d,Ri,yh,$f,l,$i,Lr,Oa,In,A,null,-0,0)}}break}while(!0);Ms(r)}function $y(r,l,d,g,b,A,C,L,B,X,J,st,Y,Q){if(r.timeoutHandle=-1,st=l.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qs},Ny(l,A,st);var ft=(A&62914560)===A?gh-Qe():(A&4194048)===A?zy-Qe():0;if(ft=O3(st,ft),ft!==null){ln=A,r.cancelPendingCommit=ft(Qy.bind(null,r,l,A,d,g,b,C,L,B,J,st,null,Y,Q)),Hn(r,A,C,!X);return}}Qy(r,l,A,d,g,b,C,L,B)}function WE(r){for(var l=r;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var b=d[g],A=b.getSnapshot;b=b.value;try{if(!Bi(A(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Hn(r,l,d,g){l&=~Uf,l&=~Lr,r.suspendedLanes|=l,r.pingedLanes&=~l,g&&(r.warmLanes|=l),g=r.expirationTimes;for(var b=l;0<b;){var A=31-Ii(b),C=1<<A;g[A]=-1,b&=~C}d!==0&&Jm(r,d,l)}function bh(){return(Zt&6)===0?(ol(0),!1):!0}function Xf(){if(Ft!==null){if(se===0)var r=Ft.return;else r=Ft,Ks=Sr=null,cf(r),xa=null,$o=0,r=Ft;for(;r!==null;)Ay(r.alternate,r),r=r.return;Ft=null}}function Na(r,l){var d=r.timeoutHandle;d!==-1&&(r.timeoutHandle=-1,g3(d)),d=r.cancelPendingCommit,d!==null&&(r.cancelPendingCommit=null,d()),ln=0,Xf(),ce=r,Ft=d=Ys(r.current,null),Bt=l,se=0,Ui=null,In=!1,La=Co(r,l),Hf=!1,Oa=$i=Uf=Lr=Bn=Te=0,Ri=rl=null,$f=!1,(l&8)!==0&&(l|=l&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=l;0<g;){var b=31-Ii(g),A=1<<b;l|=r[b],g&=~A}return on=l,zc(),d}function Gy(r,l){Rt=null,O.H=Qo,l===Ea||l===Xc?(l=a1(),se=3):l===Kd?(l=a1(),se=4):se=l===xf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ui=l,Ft===null&&(Te=1,oh(r,es(l,r.current)))}function Vy(){var r=ji.current;return r===null?!0:(Bt&4194048)===Bt?rs===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?r===rs:!1}function qy(){var r=O.H;return O.H=Qo,r===null?Qo:r}function Xy(){var r=O.A;return O.A=XE,r}function vh(){Te=4,In||(Bt&4194048)!==Bt&&ji.current!==null||(La=!0),(Bn&134217727)===0&&(Lr&134217727)===0||ce===null||Hn(ce,Bt,$i,!1)}function Yf(r,l,d){var g=Zt;Zt|=2;var b=qy(),A=Xy();(ce!==r||Bt!==l)&&(yh=null,Na(r,l)),l=!1;var C=Te;t:do try{if(se!==0&&Ft!==null){var L=Ft,B=Ui;switch(se){case 8:Xf(),C=6;break t;case 3:case 2:case 9:case 6:ji.current===null&&(l=!0);var X=se;if(se=0,Ui=null,Fa(r,L,B,X),d&&La){C=0;break t}break;default:X=se,se=0,Ui=null,Fa(r,L,B,X)}}KE(),C=Te;break}catch(J){Gy(r,J)}while(!0);return l&&r.shellSuspendCounter++,Ks=Sr=null,Zt=g,O.H=b,O.A=A,Ft===null&&(ce=null,Bt=0,zc()),C}function KE(){for(;Ft!==null;)Yy(Ft)}function QE(r,l){var d=Zt;Zt|=2;var g=qy(),b=Xy();ce!==r||Bt!==l?(yh=null,mh=Qe()+500,Na(r,l)):La=Co(r,l);t:do try{if(se!==0&&Ft!==null){l=Ft;var A=Ui;e:switch(se){case 1:se=0,Ui=null,Fa(r,l,A,1);break;case 2:case 9:if(n1(A)){se=0,Ui=null,Wy(l);break}l=function(){se!==2&&se!==9||ce!==r||(se=7),Ms(r)},A.then(l,l);break t;case 3:se=7;break t;case 4:se=5;break t;case 7:n1(A)?(se=0,Ui=null,Wy(l)):(se=0,Ui=null,Fa(r,l,A,7));break;case 5:var C=null;switch(Ft.tag){case 26:C=Ft.memoizedState;case 5:case 27:var L=Ft;if(C?Pb(C):L.stateNode.complete){se=0,Ui=null;var B=L.sibling;if(B!==null)Ft=B;else{var X=L.return;X!==null?(Ft=X,Ah(X)):Ft=null}break e}}se=0,Ui=null,Fa(r,l,A,5);break;case 6:se=0,Ui=null,Fa(r,l,A,6);break;case 8:Xf(),Te=6;break t;default:throw Error(i(462))}}ZE();break}catch(J){Gy(r,J)}while(!0);return Ks=Sr=null,O.H=g,O.A=b,Zt=d,Ft!==null?0:(ce=null,Bt=0,zc(),Te)}function ZE(){for(;Ft!==null&&!ur();)Yy(Ft)}function Yy(r){var l=by(r.alternate,r,on);r.memoizedProps=r.pendingProps,l===null?Ah(r):Ft=l}function Wy(r){var l=r,d=l.alternate;switch(l.tag){case 15:case 0:l=dy(d,l,l.pendingProps,l.type,void 0,Bt);break;case 11:l=dy(d,l,l.pendingProps,l.type.render,l.ref,Bt);break;case 5:cf(l);default:Ay(d,l),l=Ft=X0(l,on),l=by(d,l,on)}r.memoizedProps=r.pendingProps,l===null?Ah(r):Ft=l}function Fa(r,l,d,g){Ks=Sr=null,cf(l),xa=null,$o=0;var b=l.return;try{if(jE(r,b,l,d,Bt)){Te=1,oh(r,es(d,r.current)),Ft=null;return}}catch(A){if(b!==null)throw Ft=b,A;Te=1,oh(r,es(d,r.current)),Ft=null;return}l.flags&32768?(jt||g===1?r=!0:La||(Bt&536870912)!==0?r=!1:(In=r=!0,(g===2||g===9||g===3||g===6)&&(g=ji.current,g!==null&&g.tag===13&&(g.flags|=16384))),Ky(l,r)):Ah(l)}function Ah(r){var l=r;do{if((l.flags&32768)!==0){Ky(l,In);return}r=l.return;var d=$E(l.alternate,l,on);if(d!==null){Ft=d;return}if(l=l.sibling,l!==null){Ft=l;return}Ft=l=r}while(l!==null);Te===0&&(Te=5)}function Ky(r,l){do{var d=GE(r.alternate,r);if(d!==null){d.flags&=32767,Ft=d;return}if(d=r.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(r=r.sibling,r!==null)){Ft=r;return}Ft=r=d}while(r!==null);Te=6,Ft=null}function Qy(r,l,d,g,b,A,C,L,B){r.cancelPendingCommit=null;do wh();while(Ge!==0);if((Zt&6)!==0)throw Error(i(327));if(l!==null){if(l===r.current)throw Error(i(177));if(A=l.lanes|l.childLanes,A|=Nd,kS(r,d,A,C,L,B),r===ce&&(Ft=ce=null,Bt=0),Pa=l,jn=r,ln=d,Gf=A,Vf=b,jy=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,i3(Gs,function(){return ib(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=O.T,O.T=null,b=$.p,$.p=2,C=Zt,Zt|=4;try{VE(r,l,d)}finally{Zt=C,$.p=b,O.T=g}}Ge=1,Zy(),Jy(),tb()}}function Zy(){if(Ge===1){Ge=0;var r=jn,l=Pa,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=O.T,O.T=null;var g=$.p;$.p=2;var b=Zt;Zt|=4;try{Ly(l,r);var A=ap,C=B0(r.containerInfo),L=A.focusedElem,B=A.selectionRange;if(C!==L&&L&&L.ownerDocument&&I0(L.ownerDocument.documentElement,L)){if(B!==null&&Rd(L)){var X=B.start,J=B.end;if(J===void 0&&(J=X),"selectionStart"in L)L.selectionStart=X,L.selectionEnd=Math.min(J,L.value.length);else{var st=L.ownerDocument||document,Y=st&&st.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),ft=L.textContent.length,At=Math.min(B.start,ft),oe=B.end===void 0?At:Math.min(B.end,ft);!Q.extend&&At>oe&&(C=oe,oe=At,At=C);var V=F0(L,At),U=F0(L,oe);if(V&&U&&(Q.rangeCount!==1||Q.anchorNode!==V.node||Q.anchorOffset!==V.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var q=st.createRange();q.setStart(V.node,V.offset),Q.removeAllRanges(),At>oe?(Q.addRange(q),Q.extend(U.node,U.offset)):(q.setEnd(U.node,U.offset),Q.addRange(q))}}}}for(st=[],Q=L;Q=Q.parentNode;)Q.nodeType===1&&st.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<st.length;L++){var it=st[L];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}Oh=!!rp,ap=rp=null}finally{Zt=b,$.p=g,O.T=d}}r.current=l,Ge=2}}function Jy(){if(Ge===2){Ge=0;var r=jn,l=Pa,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=O.T,O.T=null;var g=$.p;$.p=2;var b=Zt;Zt|=4;try{Ty(r,l.alternate,l)}finally{Zt=b,$.p=g,O.T=d}}Ge=3}}function tb(){if(Ge===4||Ge===3){Ge=0,dr();var r=jn,l=Pa,d=ln,g=jy;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ge=5:(Ge=0,Pa=jn=null,eb(r,r.pendingLanes));var b=r.pendingLanes;if(b===0&&(zn=null),ud(d),l=l.stateNode,Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(pr,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=O.T,b=$.p,$.p=2,O.T=null;try{for(var A=r.onRecoverableError,C=0;C<g.length;C++){var L=g[C];A(L.value,{componentStack:L.stack})}}finally{O.T=l,$.p=b}}(ln&3)!==0&&wh(),Ms(r),b=r.pendingLanes,(d&261930)!==0&&(b&42)!==0?r===qf?al++:(al=0,qf=r):al=0,ol(0)}}function eb(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,Ho(l)))}function wh(){return Zy(),Jy(),tb(),ib()}function ib(){if(Ge!==5)return!1;var r=jn,l=Gf;Gf=0;var d=ud(ln),g=O.T,b=$.p;try{$.p=32>d?32:d,O.T=null,d=Vf,Vf=null;var A=jn,C=ln;if(Ge=0,Pa=jn=null,ln=0,(Zt&6)!==0)throw Error(i(331));var L=Zt;if(Zt|=4,Iy(A.current),Py(A,A.current,C,d),Zt=L,ol(0,!1),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(pr,A)}catch{}return!0}finally{$.p=b,O.T=g,eb(r,l)}}function sb(r,l,d){l=es(d,l),l=Ef(r.stateNode,l,2),r=On(r,l,2),r!==null&&(To(r,2),Ms(r))}function ne(r,l,d){if(r.tag===3)sb(r,r,d);else for(;l!==null;){if(l.tag===3){sb(l,r,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(zn===null||!zn.has(g))){r=es(d,r),d=ny(2),g=On(l,d,2),g!==null&&(ry(d,g,l,r),To(g,2),Ms(g));break}}l=l.return}}function Wf(r,l,d){var g=r.pingCache;if(g===null){g=r.pingCache=new YE;var b=new Set;g.set(l,b)}else b=g.get(l),b===void 0&&(b=new Set,g.set(l,b));b.has(d)||(Hf=!0,b.add(d),r=JE.bind(null,r,l,d),l.then(r,r))}function JE(r,l,d){var g=r.pingCache;g!==null&&g.delete(l),r.pingedLanes|=r.suspendedLanes&d,r.warmLanes&=~d,ce===r&&(Bt&d)===d&&(Te===4||Te===3&&(Bt&62914560)===Bt&&300>Qe()-gh?(Zt&2)===0&&Na(r,0):Uf|=d,Oa===Bt&&(Oa=0)),Ms(r)}function nb(r,l){l===0&&(l=Zm()),r=Ar(r,l),r!==null&&(To(r,l),Ms(r))}function t3(r){var l=r.memoizedState,d=0;l!==null&&(d=l.retryLane),nb(r,d)}function e3(r,l){var d=0;switch(r.tag){case 31:case 13:var g=r.stateNode,b=r.memoizedState;b!==null&&(d=b.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(l),nb(r,d)}function i3(r,l){return hr(r,l)}var _h=null,Ia=null,Kf=!1,Sh=!1,Qf=!1,Un=0;function Ms(r){r!==Ia&&r.next===null&&(Ia===null?_h=Ia=r:Ia=Ia.next=r),Sh=!0,Kf||(Kf=!0,n3())}function ol(r,l){if(!Qf&&Sh){Qf=!0;do for(var d=!1,g=_h;g!==null;){if(r!==0){var b=g.pendingLanes;if(b===0)var A=0;else{var C=g.suspendedLanes,L=g.pingedLanes;A=(1<<31-Ii(42|r)+1)-1,A&=b&~(C&~L),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(d=!0,lb(g,A))}else A=Bt,A=Tc(g,g===ce?A:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(A&3)===0||Co(g,A)||(d=!0,lb(g,A));g=g.next}while(d);Qf=!1}}function s3(){rb()}function rb(){Sh=Kf=!1;var r=0;Un!==0&&p3()&&(r=Un);for(var l=Qe(),d=null,g=_h;g!==null;){var b=g.next,A=ab(g,l);A===0?(g.next=null,d===null?_h=b:d.next=b,b===null&&(Ia=d)):(d=g,(r!==0||(A&3)!==0)&&(Sh=!0)),g=b}Ge!==0&&Ge!==5||ol(r),Un!==0&&(Un=0)}function ab(r,l){for(var d=r.suspendedLanes,g=r.pingedLanes,b=r.expirationTimes,A=r.pendingLanes&-62914561;0<A;){var C=31-Ii(A),L=1<<C,B=b[C];B===-1?((L&d)===0||(L&g)!==0)&&(b[C]=RS(L,l)):B<=l&&(r.expiredLanes|=L),A&=~L}if(l=ce,d=Bt,d=Tc(r,r===l?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,d===0||r===l&&(se===2||se===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&Sn(g),r.callbackNode=null,r.callbackPriority=0;if((d&3)===0||Co(r,d)){if(l=d&-d,l===r.callbackPriority)return l;switch(g!==null&&Sn(g),ud(d)){case 2:case 8:d=Qi;break;case 32:d=Gs;break;case 268435456:d=ia;break;default:d=Gs}return g=ob.bind(null,r),d=hr(d,g),r.callbackPriority=l,r.callbackNode=d,l}return g!==null&&g!==null&&Sn(g),r.callbackPriority=2,r.callbackNode=null,2}function ob(r,l){if(Ge!==0&&Ge!==5)return r.callbackNode=null,r.callbackPriority=0,null;var d=r.callbackNode;if(wh()&&r.callbackNode!==d)return null;var g=Bt;return g=Tc(r,r===ce?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(Uy(r,g,l),ab(r,Qe()),r.callbackNode!=null&&r.callbackNode===d?ob.bind(null,r):null)}function lb(r,l){if(wh())return null;Uy(r,l,!0)}function n3(){m3(function(){(Zt&6)!==0?hr(Nt,s3):rb()})}function Zf(){if(Un===0){var r=_a;r===0&&(r=Ec,Ec<<=1,(Ec&261888)===0&&(Ec=256)),Un=r}return Un}function cb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:kc(""+r)}function hb(r,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,r.id&&d.setAttribute("form",r.id),l.parentNode.insertBefore(d,l),r=new FormData(r),d.parentNode.removeChild(d),r}function r3(r,l,d,g,b){if(l==="submit"&&d&&d.stateNode===b){var A=cb((b[xi]||null).action),C=g.submitter;C&&(l=(l=C[xi]||null)?cb(l.formAction):C.getAttribute("formAction"),l!==null&&(A=l,C=null));var L=new Nc("action","action",null,g,b);r.push({event:L,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Un!==0){var B=C?hb(b,C):new FormData(b);bf(d,{pending:!0,data:B,method:b.method,action:A},null,B)}}else typeof A=="function"&&(L.preventDefault(),B=C?hb(b,C):new FormData(b),bf(d,{pending:!0,data:B,method:b.method,action:A},A,B))},currentTarget:b}]})}}for(var Jf=0;Jf<Pd.length;Jf++){var tp=Pd[Jf],a3=tp.toLowerCase(),o3=tp[0].toUpperCase()+tp.slice(1);bs(a3,"on"+o3)}bs(H0,"onAnimationEnd"),bs(U0,"onAnimationIteration"),bs($0,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(SE,"onTransitionRun"),bs(EE,"onTransitionStart"),bs(xE,"onTransitionCancel"),bs(G0,"onTransitionEnd"),la("onMouseEnter",["mouseout","mouseover"]),la("onMouseLeave",["mouseout","mouseover"]),la("onPointerEnter",["pointerout","pointerover"]),la("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function ub(r,l){l=(l&4)!==0;for(var d=0;d<r.length;d++){var g=r[d],b=g.event;g=g.listeners;t:{var A=void 0;if(l)for(var C=g.length-1;0<=C;C--){var L=g[C],B=L.instance,X=L.currentTarget;if(L=L.listener,B!==A&&b.isPropagationStopped())break t;A=L,b.currentTarget=X;try{A(b)}catch(J){Bc(J)}b.currentTarget=null,A=B}else for(C=0;C<g.length;C++){if(L=g[C],B=L.instance,X=L.currentTarget,L=L.listener,B!==A&&b.isPropagationStopped())break t;A=L,b.currentTarget=X;try{A(b)}catch(J){Bc(J)}b.currentTarget=null,A=B}}}}function It(r,l){var d=l[dd];d===void 0&&(d=l[dd]=new Set);var g=r+"__bubble";d.has(g)||(db(l,r,2,!1),d.add(g))}function ep(r,l,d){var g=0;l&&(g|=4),db(d,r,g,l)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function ip(r){if(!r[Eh]){r[Eh]=!0,r0.forEach(function(d){d!=="selectionchange"&&(l3.has(d)||ep(d,!1,r),ep(d,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[Eh]||(l[Eh]=!0,ep("selectionchange",!1,l))}}function db(r,l,d,g){switch(Hb(l)){case 2:var b=F3;break;case 8:b=I3;break;default:b=yp}d=b.bind(null,l,d,r),b=void 0,!wd||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),g?b!==void 0?r.addEventListener(l,d,{capture:!0,passive:b}):r.addEventListener(l,d,!0):b!==void 0?r.addEventListener(l,d,{passive:b}):r.addEventListener(l,d,!1)}function sp(r,l,d,g,b){var A=g;if((l&1)===0&&(l&2)===0&&g!==null)t:for(;;){if(g===null)return;var C=g.tag;if(C===3||C===4){var L=g.stateNode.containerInfo;if(L===b)break;if(C===4)for(C=g.return;C!==null;){var B=C.tag;if((B===3||B===4)&&C.stateNode.containerInfo===b)return;C=C.return}for(;L!==null;){if(C=ra(L),C===null)return;if(B=C.tag,B===5||B===6||B===26||B===27){g=A=C;continue t}L=L.parentNode}}g=g.return}y0(function(){var X=A,J=vd(d),st=[];t:{var Y=V0.get(r);if(Y!==void 0){var Q=Nc,ft=r;switch(r){case"keypress":if(Oc(d)===0)break t;case"keydown":case"keyup":Q=eE;break;case"focusin":ft="focus",Q=xd;break;case"focusout":ft="blur",Q=xd;break;case"beforeblur":case"afterblur":Q=xd;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=$S;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=nE;break;case H0:case U0:case $0:Q=qS;break;case G0:Q=aE;break;case"scroll":case"scrollend":Q=HS;break;case"wheel":Q=lE;break;case"copy":case"cut":case"paste":Q=YS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=_0;break;case"toggle":case"beforetoggle":Q=hE}var At=(l&4)!==0,oe=!At&&(r==="scroll"||r==="scrollend"),V=At?Y!==null?Y+"Capture":null:Y;At=[];for(var U=X,q;U!==null;){var it=U;if(q=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||q===null||V===null||(it=Ro(U,V),it!=null&&At.push(cl(U,it,q))),oe)break;U=U.return}0<At.length&&(Y=new Q(Y,ft,null,d,J),st.push({event:Y,listeners:At}))}}if((l&7)===0){t:{if(Y=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",Y&&d!==bd&&(ft=d.relatedTarget||d.fromElement)&&(ra(ft)||ft[na]))break t;if((Q||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(ft=d.relatedTarget||d.toElement,Q=X,ft=ft?ra(ft):null,ft!==null&&(oe=n(ft),At=ft.tag,ft!==oe||At!==5&&At!==27&&At!==6)&&(ft=null)):(Q=null,ft=X),Q!==ft)){if(At=A0,it="onMouseLeave",V="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(At=_0,it="onPointerLeave",V="onPointerEnter",U="pointer"),oe=Q==null?Y:Do(Q),q=ft==null?Y:Do(ft),Y=new At(it,U+"leave",Q,d,J),Y.target=oe,Y.relatedTarget=q,it=null,ra(J)===X&&(At=new At(V,U+"enter",ft,d,J),At.target=q,At.relatedTarget=oe,it=At),oe=it,Q&&ft)e:{for(At=c3,V=Q,U=ft,q=0,it=V;it;it=At(it))q++;it=0;for(var bt=U;bt;bt=At(bt))it++;for(;0<q-it;)V=At(V),q--;for(;0<it-q;)U=At(U),it--;for(;q--;){if(V===U||U!==null&&V===U.alternate){At=V;break e}V=At(V),U=At(U)}At=null}else At=null;Q!==null&&fb(st,Y,Q,At,!1),ft!==null&&oe!==null&&fb(st,oe,ft,At,!0)}}t:{if(Y=X?Do(X):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var Yt=R0;else if(M0(Y))if(k0)Yt=AE;else{Yt=bE;var yt=yE}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?X&&yd(X.elementType)&&(Yt=R0):Yt=vE;if(Yt&&(Yt=Yt(r,X))){D0(st,Yt,d,J);break t}yt&&yt(r,Y,X),r==="focusout"&&X&&Y.type==="number"&&X.memoizedProps.value!=null&&md(Y,"number",Y.value)}switch(yt=X?Do(X):window,r){case"focusin":(M0(yt)||yt.contentEditable==="true")&&(pa=yt,kd=X,Bo=null);break;case"focusout":Bo=kd=pa=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,z0(st,d,J);break;case"selectionchange":if(_E)break;case"keydown":case"keyup":z0(st,d,J)}var kt;if(Td)t:{switch(r){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else fa?C0(r,d)&&(zt="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(zt="onCompositionStart");zt&&(S0&&d.locale!=="ko"&&(fa||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&fa&&(kt=b0()):(Cn=J,_d="value"in Cn?Cn.value:Cn.textContent,fa=!0)),yt=xh(X,zt),0<yt.length&&(zt=new w0(zt,r,null,d,J),st.push({event:zt,listeners:yt}),kt?zt.data=kt:(kt=T0(d),kt!==null&&(zt.data=kt)))),(kt=dE?fE(r,d):pE(r,d))&&(zt=xh(X,"onBeforeInput"),0<zt.length&&(yt=new w0("onBeforeInput","beforeinput",null,d,J),st.push({event:yt,listeners:zt}),yt.data=kt)),r3(st,r,X,d,J)}ub(st,l)})}function cl(r,l,d){return{instance:r,listener:l,currentTarget:d}}function xh(r,l){for(var d=l+"Capture",g=[];r!==null;){var b=r,A=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||A===null||(b=Ro(r,d),b!=null&&g.unshift(cl(r,b,A)),b=Ro(r,l),b!=null&&g.push(cl(r,b,A))),r.tag===3)return g;r=r.return}return[]}function c3(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function fb(r,l,d,g,b){for(var A=l._reactName,C=[];d!==null&&d!==g;){var L=d,B=L.alternate,X=L.stateNode;if(L=L.tag,B!==null&&B===g)break;L!==5&&L!==26&&L!==27||X===null||(B=X,b?(X=Ro(d,A),X!=null&&C.unshift(cl(d,X,B))):b||(X=Ro(d,A),X!=null&&C.push(cl(d,X,B)))),d=d.return}C.length!==0&&r.push({event:l,listeners:C})}var h3=/\r\n?/g,u3=/\u0000|\uFFFD/g;function pb(r){return(typeof r=="string"?r:""+r).replace(h3,`
`).replace(u3,"")}function gb(r,l){return l=pb(l),pb(r)===l}function ae(r,l,d,g,b,A){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||ha(r,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&ha(r,""+g);break;case"className":Dc(r,"class",g);break;case"tabIndex":Dc(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Dc(r,d,g);break;case"style":g0(r,g,A);break;case"data":if(l!=="object"){Dc(r,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){r.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(d);break}g=kc(""+g),r.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(d==="formAction"?(l!=="input"&&ae(r,l,"name",b.name,b,null),ae(r,l,"formEncType",b.formEncType,b,null),ae(r,l,"formMethod",b.formMethod,b,null),ae(r,l,"formTarget",b.formTarget,b,null)):(ae(r,l,"encType",b.encType,b,null),ae(r,l,"method",b.method,b,null),ae(r,l,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(d);break}g=kc(""+g),r.setAttribute(d,g);break;case"onClick":g!=null&&(r.onclick=qs);break;case"onScroll":g!=null&&It("scroll",r);break;case"onScrollEnd":g!=null&&It("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=d}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}d=kc(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(d,""+g):r.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(d,""):r.removeAttribute(d);break;case"capture":case"download":g===!0?r.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(d,g):r.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(d,g):r.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(d):r.setAttribute(d,g);break;case"popover":It("beforetoggle",r),It("toggle",r),Mc(r,"popover",g);break;case"xlinkActuate":Vs(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Vs(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Vs(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Vs(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Vs(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Vs(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Vs(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Vs(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Vs(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Mc(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=zS.get(d)||d,Mc(r,d,g))}}function np(r,l,d,g,b,A){switch(d){case"style":g0(r,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=d}}break;case"children":typeof g=="string"?ha(r,g):(typeof g=="number"||typeof g=="bigint")&&ha(r,""+g);break;case"onScroll":g!=null&&It("scroll",r);break;case"onScrollEnd":g!=null&&It("scrollend",r);break;case"onClick":g!=null&&(r.onclick=qs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!a0.hasOwnProperty(d))t:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),A=r[xi]||null,A=A!=null?A[d]:null,typeof A=="function"&&r.removeEventListener(l,A,b),typeof g=="function")){typeof A!="function"&&A!==null&&(d in r?r[d]=null:r.hasAttribute(d)&&r.removeAttribute(d)),r.addEventListener(l,g,b);break t}d in r?r[d]=g:g===!0?r.setAttribute(d,""):Mc(r,d,g)}}}function ai(r,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",r),It("load",r);var g=!1,b=!1,A;for(A in d)if(d.hasOwnProperty(A)){var C=d[A];if(C!=null)switch(A){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:ae(r,l,A,C,d,null)}}b&&ae(r,l,"srcSet",d.srcSet,d,null),g&&ae(r,l,"src",d.src,d,null);return;case"input":It("invalid",r);var L=A=C=b=null,B=null,X=null;for(g in d)if(d.hasOwnProperty(g)){var J=d[g];if(J!=null)switch(g){case"name":b=J;break;case"type":C=J;break;case"checked":B=J;break;case"defaultChecked":X=J;break;case"value":A=J;break;case"defaultValue":L=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,l));break;default:ae(r,l,g,J,d,null)}}u0(r,A,L,B,X,C,b,!1);return;case"select":It("invalid",r),g=C=A=null;for(b in d)if(d.hasOwnProperty(b)&&(L=d[b],L!=null))switch(b){case"value":A=L;break;case"defaultValue":C=L;break;case"multiple":g=L;default:ae(r,l,b,L,d,null)}l=A,d=C,r.multiple=!!g,l!=null?ca(r,!!g,l,!1):d!=null&&ca(r,!!g,d,!0);return;case"textarea":It("invalid",r),A=b=g=null;for(C in d)if(d.hasOwnProperty(C)&&(L=d[C],L!=null))switch(C){case"value":g=L;break;case"defaultValue":b=L;break;case"children":A=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:ae(r,l,C,L,d,null)}f0(r,g,b,A);return;case"option":for(B in d)d.hasOwnProperty(B)&&(g=d[B],g!=null)&&(B==="selected"?r.selected=g&&typeof g!="function"&&typeof g!="symbol":ae(r,l,B,g,d,null));return;case"dialog":It("beforetoggle",r),It("toggle",r),It("cancel",r),It("close",r);break;case"iframe":case"object":It("load",r);break;case"video":case"audio":for(g=0;g<ll.length;g++)It(ll[g],r);break;case"image":It("error",r),It("load",r);break;case"details":It("toggle",r);break;case"embed":case"source":case"link":It("error",r),It("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in d)if(d.hasOwnProperty(X)&&(g=d[X],g!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:ae(r,l,X,g,d,null)}return;default:if(yd(l)){for(J in d)d.hasOwnProperty(J)&&(g=d[J],g!==void 0&&np(r,l,J,g,d,void 0));return}}for(L in d)d.hasOwnProperty(L)&&(g=d[L],g!=null&&ae(r,l,L,g,d,null))}function d3(r,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,A=null,C=null,L=null,B=null,X=null,J=null;for(Q in d){var st=d[Q];if(d.hasOwnProperty(Q)&&st!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":B=st;default:g.hasOwnProperty(Q)||ae(r,l,Q,null,g,st)}}for(var Y in g){var Q=g[Y];if(st=d[Y],g.hasOwnProperty(Y)&&(Q!=null||st!=null))switch(Y){case"type":A=Q;break;case"name":b=Q;break;case"checked":X=Q;break;case"defaultChecked":J=Q;break;case"value":C=Q;break;case"defaultValue":L=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,l));break;default:Q!==st&&ae(r,l,Y,Q,g,st)}}gd(r,C,L,B,X,J,A,b);return;case"select":Q=C=L=Y=null;for(A in d)if(B=d[A],d.hasOwnProperty(A)&&B!=null)switch(A){case"value":break;case"multiple":Q=B;default:g.hasOwnProperty(A)||ae(r,l,A,null,g,B)}for(b in g)if(A=g[b],B=d[b],g.hasOwnProperty(b)&&(A!=null||B!=null))switch(b){case"value":Y=A;break;case"defaultValue":L=A;break;case"multiple":C=A;default:A!==B&&ae(r,l,b,A,g,B)}l=L,d=C,g=Q,Y!=null?ca(r,!!d,Y,!1):!!g!=!!d&&(l!=null?ca(r,!!d,l,!0):ca(r,!!d,d?[]:"",!1));return;case"textarea":Q=Y=null;for(L in d)if(b=d[L],d.hasOwnProperty(L)&&b!=null&&!g.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:ae(r,l,L,null,g,b)}for(C in g)if(b=g[C],A=d[C],g.hasOwnProperty(C)&&(b!=null||A!=null))switch(C){case"value":Y=b;break;case"defaultValue":Q=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==A&&ae(r,l,C,b,g,A)}d0(r,Y,Q);return;case"option":for(var ft in d)Y=d[ft],d.hasOwnProperty(ft)&&Y!=null&&!g.hasOwnProperty(ft)&&(ft==="selected"?r.selected=!1:ae(r,l,ft,null,g,Y));for(B in g)Y=g[B],Q=d[B],g.hasOwnProperty(B)&&Y!==Q&&(Y!=null||Q!=null)&&(B==="selected"?r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":ae(r,l,B,Y,g,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in d)Y=d[At],d.hasOwnProperty(At)&&Y!=null&&!g.hasOwnProperty(At)&&ae(r,l,At,null,g,Y);for(X in g)if(Y=g[X],Q=d[X],g.hasOwnProperty(X)&&Y!==Q&&(Y!=null||Q!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,l));break;default:ae(r,l,X,Y,g,Q)}return;default:if(yd(l)){for(var oe in d)Y=d[oe],d.hasOwnProperty(oe)&&Y!==void 0&&!g.hasOwnProperty(oe)&&np(r,l,oe,void 0,g,Y);for(J in g)Y=g[J],Q=d[J],!g.hasOwnProperty(J)||Y===Q||Y===void 0&&Q===void 0||np(r,l,J,Y,g,Q);return}}for(var V in d)Y=d[V],d.hasOwnProperty(V)&&Y!=null&&!g.hasOwnProperty(V)&&ae(r,l,V,null,g,Y);for(st in g)Y=g[st],Q=d[st],!g.hasOwnProperty(st)||Y===Q||Y==null&&Q==null||ae(r,l,st,Y,g,Q)}function mb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f3(){if(typeof performance.getEntriesByType=="function"){for(var r=0,l=0,d=performance.getEntriesByType("resource"),g=0;g<d.length;g++){var b=d[g],A=b.transferSize,C=b.initiatorType,L=b.duration;if(A&&L&&mb(C)){for(C=0,L=b.responseEnd,g+=1;g<d.length;g++){var B=d[g],X=B.startTime;if(X>L)break;var J=B.transferSize,st=B.initiatorType;J&&mb(st)&&(B=B.responseEnd,C+=J*(B<L?1:(L-X)/(B-X)))}if(--g,l+=8*(A+C)/(b.duration/1e3),r++,10<r)break}}if(0<r)return l/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var rp=null,ap=null;function Ch(r){return r.nodeType===9?r:r.ownerDocument}function yb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bb(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function op(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var lp=null;function p3(){var r=window.event;return r&&r.type==="popstate"?r===lp?!1:(lp=r,!0):(lp=null,!1)}var vb=typeof setTimeout=="function"?setTimeout:void 0,g3=typeof clearTimeout=="function"?clearTimeout:void 0,Ab=typeof Promise=="function"?Promise:void 0,m3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ab<"u"?function(r){return Ab.resolve(null).then(r).catch(y3)}:vb;function y3(r){setTimeout(function(){throw r})}function $n(r){return r==="head"}function wb(r,l){var d=l,g=0;do{var b=d.nextSibling;if(r.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(g===0){r.removeChild(b),Ha(l);return}g--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")g++;else if(d==="html")hl(r.ownerDocument.documentElement);else if(d==="head"){d=r.ownerDocument.head,hl(d);for(var A=d.firstChild;A;){var C=A.nextSibling,L=A.nodeName;A[Mo]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&A.rel.toLowerCase()==="stylesheet"||d.removeChild(A),A=C}}else d==="body"&&hl(r.ownerDocument.body);d=b}while(d);Ha(l)}function _b(r,l){var d=r;r=0;do{var g=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(r===0)break;r--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||r++;d=g}while(d)}function cp(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":cp(d),fd(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}r.removeChild(d)}}function b3(r,l,d,g){for(;r.nodeType===1;){var b=d;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[Mo])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(A=r.getAttribute("rel"),A==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(A!==b.rel||r.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||r.getAttribute("title")!==(b.title==null?null:b.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(A=r.getAttribute("src"),(A!==(b.src==null?null:b.src)||r.getAttribute("type")!==(b.type==null?null:b.type)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&A&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var A=b.name==null?null:""+b.name;if(b.type==="hidden"&&r.getAttribute("name")===A)return r}else return r;if(r=as(r.nextSibling),r===null)break}return null}function v3(r,l,d){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!d||(r=as(r.nextSibling),r===null))return null;return r}function Sb(r,l){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=as(r.nextSibling),r===null))return null;return r}function hp(r){return r.data==="$?"||r.data==="$~"}function up(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function A3(r,l){var d=r.ownerDocument;if(r.data==="$~")r._reactRetry=l;else if(r.data!=="$?"||d.readyState!=="loading")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function as(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return r}var dp=null;function Eb(r){r=r.nextSibling;for(var l=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"||d==="/&"){if(l===0)return as(r.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}r=r.nextSibling}return null}function xb(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return r;l--}else d!=="/$"&&d!=="/&"||l++}r=r.previousSibling}return null}function Cb(r,l,d){switch(l=Ch(d),r){case"html":if(r=l.documentElement,!r)throw Error(i(452));return r;case"head":if(r=l.head,!r)throw Error(i(453));return r;case"body":if(r=l.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function hl(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);fd(r)}var os=new Map,Tb=new Set;function Th(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var cn=$.d;$.d={f:w3,r:_3,D:S3,C:E3,L:x3,m:C3,X:M3,S:T3,M:D3};function w3(){var r=cn.f(),l=bh();return r||l}function _3(r){var l=aa(r);l!==null&&l.tag===5&&l.type==="form"?G1(l):cn.r(r)}var Ba=typeof document>"u"?null:document;function Mb(r,l,d){var g=Ba;if(g&&typeof l=="string"&&l){var b=Ji(l);b='link[rel="'+r+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),Tb.has(b)||(Tb.add(b),r={rel:r,crossOrigin:d,href:l},g.querySelector(b)===null&&(l=g.createElement("link"),ai(l,"link",r),Ze(l),g.head.appendChild(l)))}}function S3(r){cn.D(r),Mb("dns-prefetch",r,null)}function E3(r,l){cn.C(r,l),Mb("preconnect",r,l)}function x3(r,l,d){cn.L(r,l,d);var g=Ba;if(g&&r&&l){var b='link[rel="preload"][as="'+Ji(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Ji(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Ji(d.imageSizes)+'"]')):b+='[href="'+Ji(r)+'"]';var A=b;switch(l){case"style":A=za(r);break;case"script":A=ja(r)}os.has(A)||(r=p({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:r,as:l},d),os.set(A,r),g.querySelector(b)!==null||l==="style"&&g.querySelector(ul(A))||l==="script"&&g.querySelector(dl(A))||(l=g.createElement("link"),ai(l,"link",r),Ze(l),g.head.appendChild(l)))}}function C3(r,l){cn.m(r,l);var d=Ba;if(d&&r){var g=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Ji(g)+'"][href="'+Ji(r)+'"]',A=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=ja(r)}if(!os.has(A)&&(r=p({rel:"modulepreload",href:r},l),os.set(A,r),d.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(dl(A)))return}g=d.createElement("link"),ai(g,"link",r),Ze(g),d.head.appendChild(g)}}}function T3(r,l,d){cn.S(r,l,d);var g=Ba;if(g&&r){var b=oa(g).hoistableStyles,A=za(r);l=l||"default";var C=b.get(A);if(!C){var L={loading:0,preload:null};if(C=g.querySelector(ul(A)))L.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":l},d),(d=os.get(A))&&fp(r,d);var B=C=g.createElement("link");Ze(B),ai(B,"link",r),B._p=new Promise(function(X,J){B.onload=X,B.onerror=J}),B.addEventListener("load",function(){L.loading|=1}),B.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Mh(C,l,g)}C={type:"stylesheet",instance:C,count:1,state:L},b.set(A,C)}}}function M3(r,l){cn.X(r,l);var d=Ba;if(d&&r){var g=oa(d).hoistableScripts,b=ja(r),A=g.get(b);A||(A=d.querySelector(dl(b)),A||(r=p({src:r,async:!0},l),(l=os.get(b))&&pp(r,l),A=d.createElement("script"),Ze(A),ai(A,"link",r),d.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(b,A))}}function D3(r,l){cn.M(r,l);var d=Ba;if(d&&r){var g=oa(d).hoistableScripts,b=ja(r),A=g.get(b);A||(A=d.querySelector(dl(b)),A||(r=p({src:r,async:!0,type:"module"},l),(l=os.get(b))&&pp(r,l),A=d.createElement("script"),Ze(A),ai(A,"link",r),d.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(b,A))}}function Db(r,l,d,g){var b=(b=Z.current)?Th(b):null;if(!b)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=za(d.href),d=oa(b).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){r=za(d.href);var A=oa(b).hoistableStyles,C=A.get(r);if(C||(b=b.ownerDocument||b,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(r,C),(A=b.querySelector(ul(r)))&&!A._p&&(C.instance=A,C.state.loading=5),os.has(r)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},os.set(r,d),A||R3(b,r,d,C.state))),l&&g===null)throw Error(i(528,""));return C}if(l&&g!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ja(d),d=oa(b).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function za(r){return'href="'+Ji(r)+'"'}function ul(r){return'link[rel="stylesheet"]['+r+"]"}function Rb(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function R3(r,l,d,g){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=r.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),ai(l,"link",d),Ze(l),r.head.appendChild(l))}function ja(r){return'[src="'+Ji(r)+'"]'}function dl(r){return"script[async]"+r}function kb(r,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=r.querySelector('style[data-href~="'+Ji(d.href)+'"]');if(g)return l.instance=g,Ze(g),g;var b=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),Ze(g),ai(g,"style",b),Mh(g,d.precedence,r),l.instance=g;case"stylesheet":b=za(d.href);var A=r.querySelector(ul(b));if(A)return l.state.loading|=4,l.instance=A,Ze(A),A;g=Rb(d),(b=os.get(b))&&fp(g,b),A=(r.ownerDocument||r).createElement("link"),Ze(A);var C=A;return C._p=new Promise(function(L,B){C.onload=L,C.onerror=B}),ai(A,"link",g),l.state.loading|=4,Mh(A,d.precedence,r),l.instance=A;case"script":return A=ja(d.src),(b=r.querySelector(dl(A)))?(l.instance=b,Ze(b),b):(g=d,(b=os.get(A))&&(g=p({},d),pp(g,b)),r=r.ownerDocument||r,b=r.createElement("script"),Ze(b),ai(b,"link",g),r.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,Mh(g,d.precedence,r));return l.instance}function Mh(r,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,A=b,C=0;C<g.length;C++){var L=g[C];if(L.dataset.precedence===l)A=L;else if(A!==b)break}A?A.parentNode.insertBefore(r,A.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(r,l.firstChild))}function fp(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function pp(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var Dh=null;function Lb(r,l,d){if(Dh===null){var g=new Map,b=Dh=new Map;b.set(d,g)}else b=Dh,g=b.get(d),g||(g=new Map,b.set(d,g));if(g.has(r))return g;for(g.set(r,null),d=d.getElementsByTagName(r),b=0;b<d.length;b++){var A=d[b];if(!(A[Mo]||A[ii]||r==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var C=A.getAttribute(l)||"";C=r+C;var L=g.get(C);L?L.push(A):g.set(C,[A])}}return g}function Ob(r,l,d){r=r.ownerDocument||r,r.head.insertBefore(d,l==="title"?r.querySelector("head > title"):null)}function k3(r,l,d){if(d===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(r=l.disabled,typeof l.precedence=="string"&&r==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Pb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function L3(r,l,d,g){if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=za(g.href),A=l.querySelector(ul(b));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(r.count++,r=Rh.bind(r),l.then(r,r)),d.state.loading|=4,d.instance=A,Ze(A);return}A=l.ownerDocument||l,g=Rb(g),(b=os.get(b))&&fp(g,b),A=A.createElement("link"),Ze(A);var C=A;C._p=new Promise(function(L,B){C.onload=L,C.onerror=B}),ai(A,"link",g),d.instance=A}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(r.count++,d=Rh.bind(r),l.addEventListener("load",d),l.addEventListener("error",d))}}var gp=0;function O3(r,l){return r.stylesheets&&r.count===0&&Lh(r,r.stylesheets),0<r.count||0<r.imgCount?function(d){var g=setTimeout(function(){if(r.stylesheets&&Lh(r,r.stylesheets),r.unsuspend){var A=r.unsuspend;r.unsuspend=null,A()}},6e4+l);0<r.imgBytes&&gp===0&&(gp=62500*f3());var b=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Lh(r,r.stylesheets),r.unsuspend)){var A=r.unsuspend;r.unsuspend=null,A()}},(r.imgBytes>gp?50:800)+l);return r.unsuspend=d,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var kh=null;function Lh(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,kh=new Map,l.forEach(P3,r),kh=null,Rh.call(r))}function P3(r,l){if(!(l.state.loading&4)){var d=kh.get(r);if(d)var g=d.get(null);else{d=new Map,kh.set(r,d);for(var b=r.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<b.length;A++){var C=b[A];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(d.set(C.dataset.precedence,C),g=C)}g&&d.set(null,g)}b=l.instance,C=b.getAttribute("data-precedence"),A=d.get(C)||g,A===g&&d.set(null,b),d.set(C,b),this.count++,g=Rh.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),A?A.parentNode.insertBefore(b,A.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(b,r.firstChild)),l.state.loading|=4}}var fl={$$typeof:E,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function N3(r,l,d,g,b,A,C,L,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.hiddenUpdates=cd(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=A,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Nb(r,l,d,g,b,A,C,L,B,X,J,st){return r=new N3(r,l,d,C,B,X,J,st,L),l=1,A===!0&&(l|=24),A=zi(3,null,null,l),r.current=A,A.stateNode=r,l=Xd(),l.refCount++,r.pooledCache=l,l.refCount++,A.memoizedState={element:g,isDehydrated:d,cache:l},Qd(A),r}function Fb(r){return r?(r=ya,r):ya}function Ib(r,l,d,g,b,A){b=Fb(b),g.context===null?g.context=b:g.pendingContext=b,g=Ln(l),g.payload={element:d},A=A===void 0?null:A,A!==null&&(g.callback=A),d=On(r,g,l),d!==null&&(ki(d,r,l),Vo(d,r,l))}function Bb(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<l?d:l}}function mp(r,l){Bb(r,l),(r=r.alternate)&&Bb(r,l)}function zb(r){if(r.tag===13||r.tag===31){var l=Ar(r,67108864);l!==null&&ki(l,r,67108864),mp(r,67108864)}}function jb(r){if(r.tag===13||r.tag===31){var l=Gi();l=hd(l);var d=Ar(r,l);d!==null&&ki(d,r,l),mp(r,l)}}var Oh=!0;function F3(r,l,d,g){var b=O.T;O.T=null;var A=$.p;try{$.p=2,yp(r,l,d,g)}finally{$.p=A,O.T=b}}function I3(r,l,d,g){var b=O.T;O.T=null;var A=$.p;try{$.p=8,yp(r,l,d,g)}finally{$.p=A,O.T=b}}function yp(r,l,d,g){if(Oh){var b=bp(g);if(b===null)sp(r,l,g,Ph,d),Ub(r,g);else if(z3(b,r,l,d,g))g.stopPropagation();else if(Ub(r,g),l&4&&-1<B3.indexOf(r)){for(;b!==null;){var A=aa(b);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var C=gr(A.pendingLanes);if(C!==0){var L=A;for(L.pendingLanes|=2,L.entangledLanes|=2;C;){var B=1<<31-Ii(C);L.entanglements[1]|=B,C&=~B}Ms(A),(Zt&6)===0&&(mh=Qe()+500,ol(0))}}break;case 31:case 13:L=Ar(A,2),L!==null&&ki(L,A,2),bh(),mp(A,2)}if(A=bp(g),A===null&&sp(r,l,g,Ph,d),A===b)break;b=A}b!==null&&g.stopPropagation()}else sp(r,l,g,null,d)}}function bp(r){return r=vd(r),vp(r)}var Ph=null;function vp(r){if(Ph=null,r=ra(r),r!==null){var l=n(r);if(l===null)r=null;else{var d=l.tag;if(d===13){if(r=a(l),r!==null)return r;r=null}else if(d===31){if(r=o(l),r!==null)return r;r=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return Ph=r,null}function Hb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case Nt:return 2;case Qi:return 8;case Gs:case od:return 32;case ia:return 268435456;default:return 32}default:return 32}}var Ap=!1,Gn=null,Vn=null,qn=null,pl=new Map,gl=new Map,Xn=[],B3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ub(r,l){switch(r){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":pl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(l.pointerId)}}function ml(r,l,d,g,b,A){return r===null||r.nativeEvent!==A?(r={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:A,targetContainers:[b]},l!==null&&(l=aa(l),l!==null&&zb(l)),r):(r.eventSystemFlags|=g,l=r.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),r)}function z3(r,l,d,g,b){switch(l){case"focusin":return Gn=ml(Gn,r,l,d,g,b),!0;case"dragenter":return Vn=ml(Vn,r,l,d,g,b),!0;case"mouseover":return qn=ml(qn,r,l,d,g,b),!0;case"pointerover":var A=b.pointerId;return pl.set(A,ml(pl.get(A)||null,r,l,d,g,b)),!0;case"gotpointercapture":return A=b.pointerId,gl.set(A,ml(gl.get(A)||null,r,l,d,g,b)),!0}return!1}function $b(r){var l=ra(r.target);if(l!==null){var d=n(l);if(d!==null){if(l=d.tag,l===13){if(l=a(d),l!==null){r.blockedOn=l,s0(r.priority,function(){jb(d)});return}}else if(l===31){if(l=o(d),l!==null){r.blockedOn=l,s0(r.priority,function(){jb(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nh(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var d=bp(r.nativeEvent);if(d===null){d=r.nativeEvent;var g=new d.constructor(d.type,d);bd=g,d.target.dispatchEvent(g),bd=null}else return l=aa(d),l!==null&&zb(l),r.blockedOn=d,!1;l.shift()}return!0}function Gb(r,l,d){Nh(r)&&d.delete(l)}function j3(){Ap=!1,Gn!==null&&Nh(Gn)&&(Gn=null),Vn!==null&&Nh(Vn)&&(Vn=null),qn!==null&&Nh(qn)&&(qn=null),pl.forEach(Gb),gl.forEach(Gb)}function Fh(r,l){r.blockedOn===l&&(r.blockedOn=null,Ap||(Ap=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,j3)))}var Ih=null;function Vb(r){Ih!==r&&(Ih=r,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Ih===r&&(Ih=null);for(var l=0;l<r.length;l+=3){var d=r[l],g=r[l+1],b=r[l+2];if(typeof g!="function"){if(vp(g||d)===null)continue;break}var A=aa(d);A!==null&&(r.splice(l,3),l-=3,bf(A,{pending:!0,data:b,method:d.method,action:g},g,b))}}))}function Ha(r){function l(B){return Fh(B,r)}Gn!==null&&Fh(Gn,r),Vn!==null&&Fh(Vn,r),qn!==null&&Fh(qn,r),pl.forEach(l),gl.forEach(l);for(var d=0;d<Xn.length;d++){var g=Xn[d];g.blockedOn===r&&(g.blockedOn=null)}for(;0<Xn.length&&(d=Xn[0],d.blockedOn===null);)$b(d),d.blockedOn===null&&Xn.shift();if(d=(r.ownerDocument||r).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var b=d[g],A=d[g+1],C=b[xi]||null;if(typeof A=="function")C||Vb(d);else if(C){var L=null;if(A&&A.hasAttribute("formAction")){if(b=A,C=A[xi]||null)L=C.formAction;else if(vp(b)!==null)continue}else L=C.action;typeof L=="function"?d[g+1]=L:(d.splice(g,3),g-=3),Vb(d)}}}function qb(){function r(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(C){return b=C})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),g||setTimeout(d,20)}function d(){if(!g&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function wp(r){this._internalRoot=r}Bh.prototype.render=wp.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,g=Gi();Ib(d,g,r,l,null,null)},Bh.prototype.unmount=wp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;Ib(r.current,2,null,r,null,null),bh(),l[na]=null}};function Bh(r){this._internalRoot=r}Bh.prototype.unstable_scheduleHydration=function(r){if(r){var l=i0();r={blockedOn:null,target:r,priority:l};for(var d=0;d<Xn.length&&l!==0&&l<Xn[d].priority;d++);Xn.splice(d,0,r),d===0&&$b(r)}};var Xb=t.version;if(Xb!=="19.2.3")throw Error(i(527,Xb,"19.2.3"));$.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=u(l),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var H3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{pr=zh.inject(H3),Fi=zh}catch{}}return bl.createRoot=function(r,l){if(!s(r))throw Error(i(299));var d=!1,g="",b=ty,A=ey,C=iy;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=Nb(r,1,!1,null,null,d,g,null,b,A,C,qb),r[na]=l.current,ip(r),new wp(l)},bl.hydrateRoot=function(r,l,d){if(!s(r))throw Error(i(299));var g=!1,b="",A=ty,C=ey,L=iy,B=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(A=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&(L=d.onRecoverableError),d.formState!==void 0&&(B=d.formState)),l=Nb(r,1,!0,l,d??null,g,b,B,A,C,L,qb),l.context=Fb(null),d=l.current,g=Gi(),g=hd(g),b=Ln(g),b.callback=null,On(d,b,g),d=g,l.current.lanes=d,To(l,d),Ms(l),r[na]=l.current,ip(r),new Bh(l)},bl.version="19.2.3",bl}var nv;function Z3(){if(nv)return Cp.exports;nv=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),Cp.exports=Q3(),Cp.exports}var J3=Z3(),tx=oA();const to=rc(tx);function ql(){return ql=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},ql.apply(this,arguments)}var sr;(function(c){c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE"})(sr||(sr={}));const rv="popstate";function ex(c){c===void 0&&(c={});function t(i,s){let{pathname:n,search:a,hash:o}=i.location;return vg("",{pathname:n,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:lA(s)}return sx(t,e,null,c)}function $e(c,t){if(c===!1||c===null||typeof c>"u")throw new Error(t)}function cm(c,t){if(!c){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ix(){return Math.random().toString(36).substr(2,8)}function av(c,t){return{usr:c.state,key:c.key,idx:t}}function vg(c,t,e,i){return e===void 0&&(e=null),ql({pathname:typeof c=="string"?c:c.pathname,search:"",hash:""},typeof t=="string"?wo(t):t,{state:e,key:t&&t.key||i||ix()})}function lA(c){let{pathname:t="/",search:e="",hash:i=""}=c;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function wo(c){let t={};if(c){let e=c.indexOf("#");e>=0&&(t.hash=c.substr(e),c=c.substr(0,e));let i=c.indexOf("?");i>=0&&(t.search=c.substr(i),c=c.substr(0,i)),c&&(t.pathname=c)}return t}function sx(c,t,e,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:n=!1}=i,a=s.history,o=sr.Pop,h=null,u=f();u==null&&(u=0,a.replaceState(ql({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function p(){o=sr.Pop;let S=f(),_=S==null?null:S-u;u=S,h&&h({action:o,location:v.location,delta:_})}function m(S,_){o=sr.Push;let x=vg(v.location,S,_);u=f()+1;let E=av(x,u),R=v.createHref(x);try{a.pushState(E,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(R)}n&&h&&h({action:o,location:v.location,delta:1})}function y(S,_){o=sr.Replace;let x=vg(v.location,S,_);u=f();let E=av(x,u),R=v.createHref(x);a.replaceState(E,"",R),n&&h&&h({action:o,location:v.location,delta:0})}function w(S){let _=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof S=="string"?S:lA(S);return x=x.replace(/ $/,"%20"),$e(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let v={get action(){return o},get location(){return c(s,a)},listen(S){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(rv,p),h=S,()=>{s.removeEventListener(rv,p),h=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let _=w(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(S){return a.go(S)}};return v}var ov;(function(c){c.data="data",c.deferred="deferred",c.redirect="redirect",c.error="error"})(ov||(ov={}));function nx(c,t,e){return e===void 0&&(e="/"),rx(c,t,e)}function rx(c,t,e,i){let s=typeof t=="string"?wo(t):t,n=uA(s.pathname||"/",e);if(n==null)return null;let a=cA(c);ax(a);let o=null;for(let h=0;o==null&&h<a.length;++h){let u=bx(n);o=gx(a[h],u)}return o}function cA(c,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let s=(n,a,o)=>{let h={relativePath:o===void 0?n.path||"":o,caseSensitive:n.caseSensitive===!0,childrenIndex:a,route:n};h.relativePath.startsWith("/")&&($e(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let u=$r([i,h.relativePath]),f=e.concat(h);n.children&&n.children.length>0&&($e(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cA(n.children,t,f,u)),!(n.path==null&&!n.index)&&t.push({path:u,score:fx(u,n.index),routesMeta:f})};return c.forEach((n,a)=>{var o;if(n.path===""||!((o=n.path)!=null&&o.includes("?")))s(n,a);else for(let h of hA(n.path))s(n,a,h)}),t}function hA(c){let t=c.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),n=e.replace(/\?$/,"");if(i.length===0)return s?[n,""]:[n];let a=hA(i.join("/")),o=[];return o.push(...a.map(h=>h===""?n:[n,h].join("/"))),s&&o.push(...a),o.map(h=>c.startsWith("/")&&h===""?"/":h)}function ax(c){c.sort((t,e)=>t.score!==e.score?e.score-t.score:px(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const ox=/^:[\w-]+$/,lx=3,cx=2,hx=1,ux=10,dx=-2,lv=c=>c==="*";function fx(c,t){let e=c.split("/"),i=e.length;return e.some(lv)&&(i+=dx),t&&(i+=cx),e.filter(s=>!lv(s)).reduce((s,n)=>s+(ox.test(n)?lx:n===""?hx:ux),i)}function px(c,t){return c.length===t.length&&c.slice(0,-1).every((i,s)=>i===t[s])?c[c.length-1]-t[t.length-1]:0}function gx(c,t,e){let{routesMeta:i}=c,s={},n="/",a=[];for(let o=0;o<i.length;++o){let h=i[o],u=o===i.length-1,f=n==="/"?t:t.slice(n.length)||"/",p=mx({path:h.relativePath,caseSensitive:h.caseSensitive,end:u},f),m=h.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:$r([n,p.pathname]),pathnameBase:Sx($r([n,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(n=$r([n,p.pathnameBase]))}return a}function mx(c,t){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[e,i]=yx(c.path,c.caseSensitive,c.end),s=t.match(e);if(!s)return null;let n=s[0],a=n.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:i.reduce((u,f,p)=>{let{paramName:m,isOptional:y}=f;if(m==="*"){let v=o[p]||"";a=n.slice(0,n.length-v.length).replace(/(.)\/+$/,"$1")}const w=o[p];return y&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:n,pathnameBase:a,pattern:c}}function yx(c,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),cm(c==="*"||!c.endsWith("*")||c.endsWith("/*"),'Route path "'+c+'" will be treated as if it were '+('"'+c.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+c.replace(/\*$/,"/*")+'".'));let i=[],s="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,h)=>(i.push({paramName:o,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(i.push({paramName:"*"}),s+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":c!==""&&c!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function bx(c){try{return c.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cm(!1,'The URL path "'+c+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),c}}function uA(c,t){if(t==="/")return c;if(!c.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=c.charAt(e);return i&&i!=="/"?null:c.slice(e)||"/"}const vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ax=c=>vx.test(c);function wx(c,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:s=""}=typeof c=="string"?wo(c):c,n;if(e)if(Ax(e))n=e;else{if(e.includes("//")){let a=e;e=e.replace(/\/\/+/g,"/"),cm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+e))}e.startsWith("/")?n=cv(e.substring(1),"/"):n=cv(e,t)}else n=t;return{pathname:n,search:Ex(i),hash:xx(s)}}function cv(c,t){let e=t.replace(/\/+$/,"").split("/");return c.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Rp(c,t,e,i){return"Cannot include a '"+c+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _x(c){return c.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function dA(c,t){let e=_x(c);return t?e.map((i,s)=>s===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function fA(c,t,e,i){i===void 0&&(i=!1);let s;typeof c=="string"?s=wo(c):(s=ql({},c),$e(!s.pathname||!s.pathname.includes("?"),Rp("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),Rp("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),Rp("#","search","hash",s)));let n=c===""||s.pathname==="",a=n?"/":s.pathname,o;if(a==null)o=e;else{let p=t.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}o=p>=0?t[p]:"/"}let h=wx(s,o),u=a&&a!=="/"&&a.endsWith("/"),f=(n||a===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(u||f)&&(h.pathname+="/"),h}const $r=c=>c.join("/").replace(/\/\/+/g,"/"),Sx=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),Ex=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,xx=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function Cx(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}const pA=["post","put","patch","delete"];new Set(pA);const Tx=["get",...pA];new Set(Tx);function Xl(){return Xl=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},Xl.apply(this,arguments)}const hm=F.createContext(null),Mx=F.createContext(null),ac=F.createContext(null),Fu=F.createContext(null),Qr=F.createContext({outlet:null,matches:[],isDataRoute:!1}),gA=F.createContext(null);function oc(){return F.useContext(Fu)!=null}function Iu(){return oc()||$e(!1),F.useContext(Fu).location}function mA(c){F.useContext(ac).static||F.useLayoutEffect(c)}function Dx(){let{isDataRoute:c}=F.useContext(Qr);return c?Ux():Rx()}function Rx(){oc()||$e(!1);let c=F.useContext(hm),{basename:t,future:e,navigator:i}=F.useContext(ac),{matches:s}=F.useContext(Qr),{pathname:n}=Iu(),a=JSON.stringify(dA(s,e.v7_relativeSplatPath)),o=F.useRef(!1);return mA(()=>{o.current=!0}),F.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){i.go(u);return}let p=fA(u,JSON.parse(a),n,f.relative==="path");c==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:$r([t,p.pathname])),(f.replace?i.replace:i.push)(p,f.state,f)},[t,i,a,n,c])}function kx(c,t){return Lx(c,t)}function Lx(c,t,e,i){oc()||$e(!1);let{navigator:s}=F.useContext(ac),{matches:n}=F.useContext(Qr),a=n[n.length-1],o=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let u=Iu(),f;if(t){var p;let S=typeof t=="string"?wo(t):t;h==="/"||(p=S.pathname)!=null&&p.startsWith(h)||$e(!1),f=S}else f=u;let m=f.pathname||"/",y=m;if(h!=="/"){let S=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=nx(c,{pathname:y}),v=Ix(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:$r([h,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:$r([h,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),n,e,i);return t&&v?F.createElement(Fu.Provider,{value:{location:Xl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:sr.Pop}},v):v}function Ox(){let c=Hx(),t=Cx(c)?c.status+" "+c.statusText:c instanceof Error?c.message:JSON.stringify(c),e=c instanceof Error?c.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),e?F.createElement("pre",{style:s},e):null,null)}const Px=F.createElement(Ox,null);class Nx extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?F.createElement(Qr.Provider,{value:this.props.routeContext},F.createElement(gA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fx(c){let{routeContext:t,match:e,children:i}=c,s=F.useContext(hm);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Qr.Provider,{value:t},i)}function Ix(c,t,e,i){var s;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),c==null){var n;if(!e)return null;if(e.errors)c=e.matches;else if((n=i)!=null&&n.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)c=e.matches;else return null}let a=c,o=(s=e)==null?void 0:s.errors;if(o!=null){let f=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);f>=0||$e(!1),a=a.slice(0,Math.min(a.length,f+1))}let h=!1,u=-1;if(e&&i&&i.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:m,errors:y}=e,w=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||w){h=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let y,w=!1,v=null,S=null;e&&(y=o&&p.route.id?o[p.route.id]:void 0,v=p.route.errorElement||Px,h&&(u<0&&m===0?($x("route-fallback"),w=!0,S=null):u===m&&(w=!0,S=p.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,m+1)),x=()=>{let E;return y?E=v:w?E=S:p.route.Component?E=F.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,F.createElement(Fx,{match:p,routeContext:{outlet:f,matches:_,isDataRoute:e!=null},children:E})};return e&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?F.createElement(Nx,{location:e.location,revalidation:e.revalidation,component:v,error:y,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var yA=(function(c){return c.UseBlocker="useBlocker",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c})(yA||{}),bA=(function(c){return c.UseBlocker="useBlocker",c.UseLoaderData="useLoaderData",c.UseActionData="useActionData",c.UseRouteError="useRouteError",c.UseNavigation="useNavigation",c.UseRouteLoaderData="useRouteLoaderData",c.UseMatches="useMatches",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c.UseRouteId="useRouteId",c})(bA||{});function Bx(c){let t=F.useContext(hm);return t||$e(!1),t}function zx(c){let t=F.useContext(Mx);return t||$e(!1),t}function jx(c){let t=F.useContext(Qr);return t||$e(!1),t}function vA(c){let t=jx(),e=t.matches[t.matches.length-1];return e.route.id||$e(!1),e.route.id}function Hx(){var c;let t=F.useContext(gA),e=zx(),i=vA();return t!==void 0?t:(c=e.errors)==null?void 0:c[i]}function Ux(){let{router:c}=Bx(yA.UseNavigateStable),t=vA(bA.UseNavigateStable),e=F.useRef(!1);return mA(()=>{e.current=!0}),F.useCallback(function(s,n){n===void 0&&(n={}),e.current&&(typeof s=="number"?c.navigate(s):c.navigate(s,Xl({fromRouteId:t},n)))},[c,t])}const hv={};function $x(c,t,e){hv[c]||(hv[c]=!0)}function Gx(c,t){c?.v7_startTransition,c?.v7_relativeSplatPath}function Vx(c){let{to:t,replace:e,state:i,relative:s}=c;oc()||$e(!1);let{future:n,static:a}=F.useContext(ac),{matches:o}=F.useContext(Qr),{pathname:h}=Iu(),u=Dx(),f=fA(t,dA(o,n.v7_relativeSplatPath),h,s==="path"),p=JSON.stringify(f);return F.useEffect(()=>u(JSON.parse(p),{replace:e,state:i,relative:s}),[u,p,s,e,i]),null}function hn(c){$e(!1)}function qx(c){let{basename:t="/",children:e=null,location:i,navigationType:s=sr.Pop,navigator:n,static:a=!1,future:o}=c;oc()&&$e(!1);let h=t.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:h,navigator:n,static:a,future:Xl({v7_relativeSplatPath:!1},o)}),[h,o,n,a]);typeof i=="string"&&(i=wo(i));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:w="default"}=i,v=F.useMemo(()=>{let S=uA(f,h);return S==null?null:{location:{pathname:S,search:p,hash:m,state:y,key:w},navigationType:s}},[h,f,p,m,y,w,s]);return v==null?null:F.createElement(ac.Provider,{value:u},F.createElement(Fu.Provider,{children:e,value:v}))}function Xx(c){let{children:t,location:e}=c;return kx(Ag(t),e)}new Promise(()=>{});function Ag(c,t){t===void 0&&(t=[]);let e=[];return F.Children.forEach(c,(i,s)=>{if(!F.isValidElement(i))return;let n=[...t,s];if(i.type===F.Fragment){e.push.apply(e,Ag(i.props.children,n));return}i.type!==hn&&$e(!1),!i.props.index||!i.props.children||$e(!1);let a={id:i.props.id||n.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Ag(i.props.children,n)),e.push(a)}),e}const Yx="6";try{window.__reactRouterVersion=Yx}catch{}const Wx="startTransition",uv=X3[Wx];function Kx(c){let{basename:t,children:e,future:i,window:s}=c,n=F.useRef();n.current==null&&(n.current=ex({window:s,v5Compat:!0}));let a=n.current,[o,h]=F.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},f=F.useCallback(p=>{u&&uv?uv(()=>h(p)):h(p)},[h,u]);return F.useLayoutEffect(()=>a.listen(f),[a,f]),F.useEffect(()=>Gx(i),[i]),F.createElement(qx,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,future:i})}var dv;(function(c){c.UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState"})(dv||(dv={}));var fv;(function(c){c.UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration"})(fv||(fv={}));function Qx(c){return T.jsx("div",{id:c.load?"preloader":"preloader-none"})}var kp={exports:{}};var pv;function Zx(){return pv||(pv=1,(function(c){(function(){var t={}.hasOwnProperty;function e(){for(var n="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(n=s(n,i(o)))}return n}function i(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return e.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var a="";for(var o in n)t.call(n,o)&&n[o]&&(a=s(a,o));return a}function s(n,a){return a?n?n+" "+a:n+a:n}c.exports?(e.default=e,c.exports=e):window.classNames=e})()})(kp)),kp.exports}var Jx=Zx();const Ot=rc(Jx),Au=F.createContext(null),um=(c,t=null)=>c!=null?String(c):t||null;function wg(){return wg=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},wg.apply(null,arguments)}function AA(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)!==-1)continue;e[i]=c[i]}return e}function gv(c){return"default"+c.charAt(0).toUpperCase()+c.substr(1)}function tC(c){var t=eC(c,"string");return typeof t=="symbol"?t:String(t)}function eC(c,t){if(typeof c!="object"||c===null)return c;var e=c[Symbol.toPrimitive];if(e!==void 0){var i=e.call(c,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}function iC(c,t,e){var i=F.useRef(c!==void 0),s=F.useState(t),n=s[0],a=s[1],o=c!==void 0,h=i.current;return i.current=o,!o&&h&&n!==t&&a(t),[o?c:n,F.useCallback(function(u){for(var f=arguments.length,p=new Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];e&&e.apply(void 0,[u].concat(p)),a(u)},[e])]}function wA(c,t){return Object.keys(t).reduce(function(e,i){var s,n=e,a=n[gv(i)],o=n[i],h=AA(n,[gv(i),i].map(tC)),u=t[i],f=iC(o,a,c[u]),p=f[0],m=f[1];return wg({},h,(s={},s[i]=p,s[u]=m,s))},c)}function _g(c,t){return _g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},_g(c,t)}function sC(c,t){c.prototype=Object.create(t.prototype),c.prototype.constructor=c,_g(c,t)}const nC=["xxl","xl","lg","md","sm","xs"],rC="xs",lc=F.createContext({prefixes:{},breakpoints:nC,minBreakpoint:rC}),{Consumer:VL,Provider:qL}=lc;function Xt(c,t){const{prefixes:e}=F.useContext(lc);return c||e[t]||t}function _A(){const{breakpoints:c}=F.useContext(lc);return c}function SA(){const{minBreakpoint:c}=F.useContext(lc);return c}function aC(){const{dir:c}=F.useContext(lc);return c==="rtl"}const EA=F.forwardRef(({bsPrefix:c,className:t,as:e,...i},s)=>{c=Xt(c,"navbar-brand");const n=e||(i.href?"a":"span");return T.jsx(n,{...i,ref:s,className:Ot(t,c)})});EA.displayName="NavbarBrand";function Bu(c){return c&&c.ownerDocument||document}function oC(c){var t=Bu(c);return t&&t.defaultView||window}function lC(c,t){return oC(c).getComputedStyle(c,t)}var cC=/([A-Z])/g;function hC(c){return c.replace(cC,"-$1").toLowerCase()}var uC=/^ms-/;function jh(c){return hC(c).replace(uC,"-ms-")}var dC=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function fC(c){return!!(c&&dC.test(c))}function vn(c,t){var e="",i="";if(typeof t=="string")return c.style.getPropertyValue(jh(t))||lC(c).getPropertyValue(jh(t));Object.keys(t).forEach(function(s){var n=t[s];!n&&n!==0?c.style.removeProperty(jh(s)):fC(s)?i+=s+"("+n+") ":e+=jh(s)+": "+n+";"}),i&&(e+="transform: "+i+";"),c.style.cssText+=";"+e}var Lp={exports:{}},Op,mv;function pC(){if(mv)return Op;mv=1;var c="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Op=c,Op}var Pp,yv;function gC(){if(yv)return Pp;yv=1;var c=pC();function t(){}function e(){}return e.resetWarningCache=t,Pp=function(){function i(a,o,h,u,f,p){if(p!==c){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function s(){return i}var n={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:e,resetWarningCache:t};return n.PropTypes=n,n},Pp}var bv;function mC(){return bv||(bv=1,Lp.exports=gC()()),Lp.exports}var yC=mC();const Np=rc(yC),vv={disabled:!1},xA=We.createContext(null);var bC=function(t){return t.scrollTop},kl="unmounted",Zn="exited",Ss="entering",yn="entered",Yl="exiting",_n=(function(c){sC(t,c);function t(i,s){var n;n=c.call(this,i,s)||this;var a=s,o=a&&!a.isMounting?i.enter:i.appear,h;return n.appearStatus=null,i.in?o?(h=Zn,n.appearStatus=Ss):h=yn:i.unmountOnExit||i.mountOnEnter?h=kl:h=Zn,n.state={status:h},n.nextCallback=null,n}t.getDerivedStateFromProps=function(s,n){var a=s.in;return a&&n.status===kl?{status:Zn}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(s){var n=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==Ss&&a!==yn&&(n=Ss):(a===Ss||a===yn)&&(n=Yl)}this.updateStatus(!1,n)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var s=this.props.timeout,n,a,o;return n=a=o=s,s!=null&&typeof s!="number"&&(n=s.exit,a=s.enter,o=s.appear!==void 0?s.appear:a),{exit:n,enter:a,appear:o}},e.updateStatus=function(s,n){if(s===void 0&&(s=!1),n!==null)if(this.cancelNextCallback(),n===Ss){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:to.findDOMNode(this);a&&bC(a)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zn&&this.setState({status:kl})},e.performEnter=function(s){var n=this,a=this.props.enter,o=this.context?this.context.isMounting:s,h=this.props.nodeRef?[o]:[to.findDOMNode(this),o],u=h[0],f=h[1],p=this.getTimeouts(),m=o?p.appear:p.enter;if(!s&&!a||vv.disabled){this.safeSetState({status:yn},function(){n.props.onEntered(u)});return}this.props.onEnter(u,f),this.safeSetState({status:Ss},function(){n.props.onEntering(u,f),n.onTransitionEnd(m,function(){n.safeSetState({status:yn},function(){n.props.onEntered(u,f)})})})},e.performExit=function(){var s=this,n=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:to.findDOMNode(this);if(!n||vv.disabled){this.safeSetState({status:Zn},function(){s.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Yl},function(){s.props.onExiting(o),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:Zn},function(){s.props.onExited(o)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(s,n){n=this.setNextCallback(n),this.setState(s,n)},e.setNextCallback=function(s){var n=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,n.nextCallback=null,s(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(s,n){this.setNextCallback(n);var a=this.props.nodeRef?this.props.nodeRef.current:to.findDOMNode(this),o=s==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=h[0],f=h[1];this.props.addEndListener(u,f)}s!=null&&setTimeout(this.nextCallback,s)},e.render=function(){var s=this.state.status;if(s===kl)return null;var n=this.props,a=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var o=AA(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return We.createElement(xA.Provider,{value:null},typeof a=="function"?a(s,o):We.cloneElement(We.Children.only(a),o))},t})(We.Component);_n.contextType=xA;_n.propTypes={};function Ua(){}_n.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ua,onEntering:Ua,onEntered:Ua,onExit:Ua,onExiting:Ua,onExited:Ua};_n.UNMOUNTED=kl;_n.EXITED=Zn;_n.ENTERING=Ss;_n.ENTERED=yn;_n.EXITING=Yl;function vC(c){return c.code==="Escape"||c.keyCode===27}function AC(){const c=F.version.split(".");return{major:+c[0],minor:+c[1],patch:+c[2]}}function _o(c){if(!c||typeof c=="function")return null;const{major:t}=AC();return t>=19?c.props.ref:c.ref}const So=!!(typeof window<"u"&&window.document&&window.document.createElement);var Sg=!1,Eg=!1;try{var Fp={get passive(){return Sg=!0},get once(){return Eg=Sg=!0}};So&&(window.addEventListener("test",Fp,Fp),window.removeEventListener("test",Fp,!0))}catch{}function CA(c,t,e,i){if(i&&typeof i!="boolean"&&!Eg){var s=i.once,n=i.capture,a=e;!Eg&&s&&(a=e.__once||function o(h){this.removeEventListener(t,o,n),e.call(this,h)},e.__once=a),c.addEventListener(t,a,Sg?i:n)}c.addEventListener(t,e,i)}function xg(c,t,e,i){var s=i&&typeof i!="boolean"?i.capture:i;c.removeEventListener(t,e,s),e.__once&&c.removeEventListener(t,e.__once,s)}function wu(c,t,e,i){return CA(c,t,e,i),function(){xg(c,t,e,i)}}function wC(c,t,e,i){if(i===void 0&&(i=!0),c){var s=document.createEvent("HTMLEvents");s.initEvent(t,e,i),c.dispatchEvent(s)}}function _C(c){var t=vn(c,"transitionDuration")||"",e=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*e}function SC(c,t,e){e===void 0&&(e=5);var i=!1,s=setTimeout(function(){i||wC(c,"transitionend",!0)},t+e),n=wu(c,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(s),n()}}function TA(c,t,e,i){e==null&&(e=_C(c)||0);var s=SC(c,e,i),n=wu(c,"transitionend",t);return function(){s(),n()}}function Av(c,t){const e=vn(c,t)||"",i=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*i}function dm(c,t){const e=Av(c,"transitionDuration"),i=Av(c,"transitionDelay"),s=TA(c,n=>{n.target===c&&(s(),t(n))},e+i)}function vl(...c){return c.filter(t=>t!=null).reduce((t,e)=>{if(typeof e!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?e:function(...s){t.apply(this,s),e.apply(this,s)}},null)}function MA(c){c.offsetHeight}const wv=c=>!c||typeof c=="function"?c:t=>{c.current=t};function EC(c,t){const e=wv(c),i=wv(t);return s=>{e&&e(s),i&&i(s)}}function DA(c,t){return F.useMemo(()=>EC(c,t),[c,t])}function xC(c){return c&&"setState"in c?to.findDOMNode(c):c??null}const zu=We.forwardRef(({onEnter:c,onEntering:t,onEntered:e,onExit:i,onExiting:s,onExited:n,addEndListener:a,children:o,childRef:h,...u},f)=>{const p=F.useRef(null),m=DA(p,h),y=M=>{m(xC(M))},w=M=>k=>{M&&p.current&&M(p.current,k)},v=F.useCallback(w(c),[c]),S=F.useCallback(w(t),[t]),_=F.useCallback(w(e),[e]),x=F.useCallback(w(i),[i]),E=F.useCallback(w(s),[s]),R=F.useCallback(w(n),[n]),D=F.useCallback(w(a),[a]);return T.jsx(_n,{ref:f,...u,onEnter:v,onEntered:_,onEntering:S,onExit:x,onExited:R,onExiting:E,addEndListener:D,nodeRef:p,children:typeof o=="function"?(M,k)=>o(M,{...k,ref:y}):We.cloneElement(o,{ref:y})})});zu.displayName="TransitionWrapper";const CC={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function TC(c,t){const e=`offset${c[0].toUpperCase()}${c.slice(1)}`,i=t[e],s=CC[c];return i+parseInt(vn(t,s[0]),10)+parseInt(vn(t,s[1]),10)}const MC={[Zn]:"collapse",[Yl]:"collapsing",[Ss]:"collapsing",[yn]:"collapse show"},RA=We.forwardRef(({onEnter:c,onEntering:t,onEntered:e,onExit:i,onExiting:s,className:n,children:a,dimension:o="height",in:h=!1,timeout:u=300,mountOnEnter:f=!1,unmountOnExit:p=!1,appear:m=!1,getDimensionValue:y=TC,...w},v)=>{const S=typeof o=="function"?o():o,_=F.useMemo(()=>vl(M=>{M.style[S]="0"},c),[S,c]),x=F.useMemo(()=>vl(M=>{const k=`scroll${S[0].toUpperCase()}${S.slice(1)}`;M.style[S]=`${M[k]}px`},t),[S,t]),E=F.useMemo(()=>vl(M=>{M.style[S]=null},e),[S,e]),R=F.useMemo(()=>vl(M=>{M.style[S]=`${y(S,M)}px`,MA(M)},i),[i,y,S]),D=F.useMemo(()=>vl(M=>{M.style[S]=null},s),[S,s]);return T.jsx(zu,{ref:v,addEndListener:dm,...w,"aria-expanded":w.role?h:null,onEnter:_,onEntering:x,onEntered:E,onExit:R,onExiting:D,childRef:_o(a),in:h,timeout:u,mountOnEnter:f,unmountOnExit:p,appear:m,children:(M,k)=>We.cloneElement(a,{...k,className:Ot(n,a.props.className,MC[M],S==="width"&&"collapse-horizontal")})})});RA.displayName="Collapse";const Eo=F.createContext(null);Eo.displayName="NavbarContext";const kA=F.forwardRef(({children:c,bsPrefix:t,...e},i)=>{t=Xt(t,"navbar-collapse");const s=F.useContext(Eo);return T.jsx(RA,{in:!!(s&&s.expanded),...e,children:T.jsx("div",{ref:i,className:t,children:c})})});kA.displayName="NavbarCollapse";function DC(c){const t=F.useRef(c);return F.useEffect(()=>{t.current=c},[c]),t}function mo(c){const t=DC(c);return F.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const LA=F.forwardRef(({bsPrefix:c,className:t,children:e,label:i="Toggle navigation",as:s="button",onClick:n,...a},o)=>{c=Xt(c,"navbar-toggler");const{onToggle:h,expanded:u}=F.useContext(Eo)||{},f=mo(p=>{n&&n(p),h&&h()});return s==="button"&&(a.type="button"),T.jsx(s,{...a,ref:o,onClick:f,"aria-label":i,className:Ot(t,c,!u&&"collapsed"),children:e||T.jsx("span",{className:`${c}-icon`})})});LA.displayName="NavbarToggle";const RC=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",kC=typeof document<"u",LC=kC||RC?F.useLayoutEffect:F.useEffect,Cg=new WeakMap,_v=(c,t)=>{if(!c||!t)return;const e=Cg.get(t)||new Map;Cg.set(t,e);let i=e.get(c);return i||(i=t.matchMedia(c),i.refCount=0,e.set(i.media,i)),i};function OC(c,t=typeof window>"u"?void 0:window){const e=_v(c,t),[i,s]=F.useState(()=>e?e.matches:!1);return LC(()=>{let n=_v(c,t);if(!n)return s(!1);let a=Cg.get(t);const o=()=>{s(n.matches)};return n.refCount++,n.addListener(o),o(),()=>{n.removeListener(o),n.refCount--,n.refCount<=0&&a?.delete(n.media),n=void 0}},[c]),i}function PC(c){const t=Object.keys(c);function e(o,h){return o===h?h:o?`${o} and ${h}`:h}function i(o){return t[Math.min(t.indexOf(o)+1,t.length-1)]}function s(o){const h=i(o);let u=c[h];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function n(o){let h=c[o];return typeof h=="number"&&(h=`${h}px`),`(min-width: ${h})`}function a(o,h,u){let f;typeof o=="object"?(f=o,u=h,h=!0):(h=h||!0,f={[o]:h});let p=F.useMemo(()=>Object.entries(f).reduce((m,[y,w])=>((w==="up"||w===!0)&&(m=e(m,n(y))),(w==="down"||w===!0)&&(m=e(m,s(y))),m),""),[JSON.stringify(f)]);return OC(p,u)}return a}const NC=PC({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function Ip(c){c===void 0&&(c=Bu());try{var t=c.activeElement;return!t||!t.nodeName?null:t}catch{return c.body}}function Sv(c,t){if(c.contains)return c.contains(t);if(c.compareDocumentPosition)return c===t||!!(c.compareDocumentPosition(t)&16)}function FC(){const c=F.useRef(!0),t=F.useRef(()=>c.current);return F.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]),t.current}function IC(c){const t=F.useRef(c);return t.current=c,t}function BC(c){const t=IC(c);F.useEffect(()=>()=>t.current(),[])}function zC(c){const t=F.useRef(null);return F.useEffect(()=>{t.current=c}),t.current}function jC(c){const t=F.useRef(c);return F.useEffect(()=>{t.current=c},[c]),t}function bn(c){const t=jC(c);return F.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const HC="data-rr-ui-",UC="rrUi";function ju(c){return`${HC}${c}`}function $C(c){return`${UC}${c}`}function GC(c=document){const t=c.defaultView;return Math.abs(t.innerWidth-c.documentElement.clientWidth)}const Ev=ju("modal-open");class fm{constructor({ownerDocument:t,handleContainerOverflow:e=!0,isRTL:i=!1}={}){this.handleContainerOverflow=e,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return GC(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[i]:s.style[i]},t.scrollBarWidth&&(e[i]=`${parseInt(vn(s,i)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(Ev,""),vn(s,e)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(Ev),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return e!==-1||(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),e!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e}remove(t){const e=this.modals.indexOf(t);e!==-1&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const OA=F.createContext(So?window:void 0);OA.Provider;function pm(){return F.useContext(OA)}const Bp=(c,t)=>So?c==null?(t||Bu()).body:(typeof c=="function"&&(c=c()),c&&"current"in c&&(c=c.current),c&&("nodeType"in c||c.getBoundingClientRect)?c:null):null;function VC(c,t){const e=pm(),[i,s]=F.useState(()=>Bp(c,e?.document));if(!i){const n=Bp(c);n&&s(n)}return F.useEffect(()=>{},[t,i]),F.useEffect(()=>{const n=Bp(c);n!==i&&s(n)},[c,i]),i}const xv=c=>!c||typeof c=="function"?c:t=>{c.current=t};function qC(c,t){const e=xv(c),i=xv(t);return s=>{e&&e(s),i&&i(s)}}function Hu(c,t){return F.useMemo(()=>qC(c,t),[c,t])}const XC=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",YC=typeof document<"u",Cv=YC||XC?F.useLayoutEffect:F.useEffect;function WC({children:c,in:t,onExited:e,mountOnEnter:i,unmountOnExit:s}){const n=F.useRef(null),a=F.useRef(t),o=bn(e);F.useEffect(()=>{t?a.current=!0:o(n.current)},[t,o]);const h=Hu(n,_o(c)),u=F.cloneElement(c,{ref:h});return t?u:s||!a.current&&i?null:u}const KC=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function QC(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function ZC(c){let{onEnter:t,onEntering:e,onEntered:i,onExit:s,onExiting:n,onExited:a,addEndListener:o,children:h}=c,u=QC(c,KC);const f=F.useRef(null),p=Hu(f,_o(h)),m=R=>D=>{R&&f.current&&R(f.current,D)},y=F.useCallback(m(t),[t]),w=F.useCallback(m(e),[e]),v=F.useCallback(m(i),[i]),S=F.useCallback(m(s),[s]),_=F.useCallback(m(n),[n]),x=F.useCallback(m(a),[a]),E=F.useCallback(m(o),[o]);return Object.assign({},u,{nodeRef:f},t&&{onEnter:y},e&&{onEntering:w},i&&{onEntered:v},s&&{onExit:S},n&&{onExiting:_},a&&{onExited:x},o&&{addEndListener:E},{children:typeof h=="function"?(R,D)=>h(R,Object.assign({},D,{ref:p})):F.cloneElement(h,{ref:p})})}const JC=["component"];function tT(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}const eT=F.forwardRef((c,t)=>{let{component:e}=c,i=tT(c,JC);const s=ZC(i);return T.jsx(e,Object.assign({ref:t},s))});function iT({in:c,onTransition:t}){const e=F.useRef(null),i=F.useRef(!0),s=bn(t);return Cv(()=>{if(!e.current)return;let n=!1;return s({in:c,element:e.current,initial:i.current,isStale:()=>n}),()=>{n=!0}},[c,s]),Cv(()=>(i.current=!1,()=>{i.current=!0}),[]),e}function sT({children:c,in:t,onExited:e,onEntered:i,transition:s}){const[n,a]=F.useState(!t);t&&n&&a(!1);const o=iT({in:!!t,onTransition:u=>{const f=()=>{u.isStale()||(u.in?i?.(u.element,u.initial):(a(!0),e?.(u.element)))};Promise.resolve(s(u)).then(f,p=>{throw u.in||a(!0),p})}}),h=Hu(o,_o(c));return n&&!t?null:F.cloneElement(c,{ref:h})}function Tv(c,t,e){return c?T.jsx(eT,Object.assign({},e,{component:c})):t?T.jsx(sT,Object.assign({},e,{transition:t})):T.jsx(WC,Object.assign({},e))}const nT=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function rT(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}let zp;function aT(c){return zp||(zp=new fm({ownerDocument:c?.document})),zp}function oT(c){const t=pm(),e=c||aT(t),i=F.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>e.add(i.current),remove:()=>e.remove(i.current),isTopModal:()=>e.isTopModal(i.current),setDialogRef:F.useCallback(s=>{i.current.dialog=s},[]),setBackdropRef:F.useCallback(s=>{i.current.backdrop=s},[])})}const PA=F.forwardRef((c,t)=>{let{show:e=!1,role:i="dialog",className:s,style:n,children:a,backdrop:o=!0,keyboard:h=!0,onBackdropClick:u,onEscapeKeyDown:f,transition:p,runTransition:m,backdropTransition:y,runBackdropTransition:w,autoFocus:v=!0,enforceFocus:S=!0,restoreFocus:_=!0,restoreFocusOptions:x,renderDialog:E,renderBackdrop:R=Qt=>T.jsx("div",Object.assign({},Qt)),manager:D,container:M,onShow:k,onHide:N=()=>{},onExit:I,onExited:G,onExiting:j,onEnter:tt,onEntering:ot,onEntered:rt}=c,lt=rT(c,nT);const O=pm(),$=VC(M),K=oT(D),at=FC(),nt=zC(e),[P,H]=F.useState(!e),W=F.useRef(null);F.useImperativeHandle(t,()=>K,[K]),So&&!nt&&e&&(W.current=Ip(O?.document)),e&&P&&H(!1);const z=bn(()=>{if(K.add(),Tt.current=wu(document,"keydown",mt),gt.current=wu(document,"focus",()=>setTimeout(Z),!0),k&&k(),v){var Qt,Ei;const $s=Ip((Qt=(Ei=K.dialog)==null?void 0:Ei.ownerDocument)!=null?Qt:O?.document);K.dialog&&$s&&!Sv(K.dialog,$s)&&(W.current=$s,K.dialog.focus())}}),ct=bn(()=>{if(K.remove(),Tt.current==null||Tt.current(),gt.current==null||gt.current(),_){var Qt;(Qt=W.current)==null||Qt.focus==null||Qt.focus(x),W.current=null}});F.useEffect(()=>{!e||!$||z()},[e,$,z]),F.useEffect(()=>{P&&ct()},[P,ct]),BC(()=>{ct()});const Z=bn(()=>{if(!S||!at()||!K.isTopModal())return;const Qt=Ip(O?.document);K.dialog&&Qt&&!Sv(K.dialog,Qt)&&K.dialog.focus()}),et=bn(Qt=>{Qt.target===Qt.currentTarget&&(u?.(Qt),o===!0&&N())}),mt=bn(Qt=>{h&&vC(Qt)&&K.isTopModal()&&(f?.(Qt),Qt.defaultPrevented||N())}),gt=F.useRef(),Tt=F.useRef(),qt=(...Qt)=>{H(!0),G?.(...Qt)};if(!$)return null;const ie=Object.assign({role:i,ref:K.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},lt,{style:n,className:s,tabIndex:-1});let Pe=E?E(ie):T.jsx("div",Object.assign({},ie,{children:F.cloneElement(a,{role:"document"})}));Pe=Tv(p,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!e,onExit:I,onExiting:j,onExited:qt,onEnter:tt,onEntering:ot,onEntered:rt,children:Pe});let be=null;return o&&(be=R({ref:K.setBackdropRef,onClick:et}),be=Tv(y,w,{in:!!e,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:be})),T.jsx(T.Fragment,{children:to.createPortal(T.jsxs(T.Fragment,{children:[be,Pe]}),$)})});PA.displayName="Modal";const NA=Object.assign(PA,{Manager:fm}),lT={[Ss]:"show",[yn]:"show"},Uu=F.forwardRef(({className:c,children:t,transitionClasses:e={},onEnter:i,...s},n)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},o=F.useCallback((h,u)=>{MA(h),i?.(h,u)},[i]);return T.jsx(zu,{ref:n,addEndListener:dm,...a,onEnter:o,childRef:_o(t),children:(h,u)=>F.cloneElement(t,{...u,className:Ot("fade",c,t.props.className,lT[h],e[h])})})});Uu.displayName="Fade";const FA=F.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},s)=>(t=Xt(t,"offcanvas-body"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));FA.displayName="OffcanvasBody";const cT={[Ss]:"show",[yn]:"show"},IA=F.forwardRef(({bsPrefix:c,className:t,children:e,in:i=!1,mountOnEnter:s=!1,unmountOnExit:n=!1,appear:a=!1,...o},h)=>(c=Xt(c,"offcanvas"),T.jsx(zu,{ref:h,addEndListener:dm,in:i,mountOnEnter:s,unmountOnExit:n,appear:a,...o,childRef:_o(e),children:(u,f)=>F.cloneElement(e,{...f,className:Ot(t,e.props.className,(u===Ss||u===Yl)&&`${c}-toggling`,cT[u])})})));IA.displayName="OffcanvasToggling";const gm=F.createContext({onHide(){}}),hT={"aria-label":Np.string,onClick:Np.func,variant:Np.oneOf(["white"])},mm=F.forwardRef(({className:c,variant:t,"aria-label":e="Close",...i},s)=>T.jsx("button",{ref:s,type:"button",className:Ot("btn-close",t&&`btn-close-${t}`,c),"aria-label":e,...i}));mm.displayName="CloseButton";mm.propTypes=hT;const ym=F.forwardRef(({closeLabel:c="Close",closeVariant:t,closeButton:e=!1,onHide:i,children:s,...n},a)=>{const o=F.useContext(gm),h=mo(()=>{o?.onHide(),i?.()});return T.jsxs("div",{ref:a,...n,children:[s,e&&T.jsx(mm,{"aria-label":c,variant:t,onClick:h})]})});ym.displayName="AbstractModalHeader";const BA=F.forwardRef(({bsPrefix:c,className:t,closeLabel:e="Close",closeButton:i=!1,...s},n)=>(c=Xt(c,"offcanvas-header"),T.jsx(ym,{ref:n,...s,className:Ot(t,c),closeLabel:e,closeButton:i})));BA.displayName="OffcanvasHeader";const $u=(c=>F.forwardRef((t,e)=>T.jsx("div",{...t,ref:e,className:Ot(t.className,c)}))),uT=$u("h5"),zA=F.forwardRef(({className:c,bsPrefix:t,as:e=uT,...i},s)=>(t=Xt(t,"offcanvas-title"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));zA.displayName="OffcanvasTitle";function dT(c,t){return c.classList?c.classList.contains(t):(" "+(c.className.baseVal||c.className)+" ").indexOf(" "+t+" ")!==-1}function fT(c,t){c.classList?c.classList.add(t):dT(c,t)||(typeof c.className=="string"?c.className=c.className+" "+t:c.setAttribute("class",(c.className&&c.className.baseVal||"")+" "+t))}var pT=Function.prototype.bind.call(Function.prototype.call,[].slice);function Nr(c,t){return pT(c.querySelectorAll(t))}function Mv(c,t){return c.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function gT(c,t){c.classList?c.classList.remove(t):typeof c.className=="string"?c.className=Mv(c.className,t):c.setAttribute("class",Mv(c.className&&c.className.baseVal||"",t))}const $a={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class jA extends fm{adjustAndStore(t,e,i){const s=e.style[t];e.dataset[t]=s,vn(e,{[t]:`${parseFloat(vn(e,t))+i}px`})}restore(t,e){const i=e.dataset[t];i!==void 0&&(delete e.dataset[t],vn(e,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();if(fT(e,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Nr(e,$a.FIXED_CONTENT).forEach(n=>this.adjustAndStore(i,n,t.scrollBarWidth)),Nr(e,$a.STICKY_CONTENT).forEach(n=>this.adjustAndStore(s,n,-t.scrollBarWidth)),Nr(e,$a.NAVBAR_TOGGLER).forEach(n=>this.adjustAndStore(s,n,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();gT(e,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Nr(e,$a.FIXED_CONTENT).forEach(n=>this.restore(i,n)),Nr(e,$a.STICKY_CONTENT).forEach(n=>this.restore(s,n)),Nr(e,$a.NAVBAR_TOGGLER).forEach(n=>this.restore(s,n))}}let jp;function HA(c){return jp||(jp=new jA(c)),jp}function mT(c){return T.jsx(IA,{...c})}function yT(c){return T.jsx(Uu,{...c})}const UA=F.forwardRef(({bsPrefix:c,className:t,children:e,"aria-labelledby":i,placement:s="start",responsive:n,show:a=!1,backdrop:o=!0,keyboard:h=!0,scroll:u=!1,onEscapeKeyDown:f,onShow:p,onHide:m,container:y,autoFocus:w=!0,enforceFocus:v=!0,restoreFocus:S=!0,restoreFocusOptions:_,onEntered:x,onExit:E,onExiting:R,onEnter:D,onEntering:M,onExited:k,backdropClassName:N,manager:I,renderStaticNode:G=!1,...j},tt)=>{const ot=F.useRef();c=Xt(c,"offcanvas");const[rt,lt]=F.useState(!1),O=mo(m),$=NC(n||"xs","up");F.useEffect(()=>{lt(n?a&&!$:a)},[a,n,$]);const K=F.useMemo(()=>({onHide:O}),[O]);function at(){return I||(u?(ot.current||(ot.current=new jA({handleContainerOverflow:!1})),ot.current):HA())}const nt=(z,...ct)=>{z&&(z.style.visibility="visible"),D?.(z,...ct)},P=(z,...ct)=>{z&&(z.style.visibility=""),k?.(...ct)},H=F.useCallback(z=>T.jsx("div",{...z,className:Ot(`${c}-backdrop`,N)}),[N,c]),W=z=>T.jsx("div",{...z,...j,className:Ot(t,n?`${c}-${n}`:c,`${c}-${s}`),"aria-labelledby":i,children:e});return T.jsxs(T.Fragment,{children:[!rt&&(n||G)&&W({}),T.jsx(gm.Provider,{value:K,children:T.jsx(NA,{show:rt,ref:tt,backdrop:o,container:y,keyboard:h,autoFocus:w,enforceFocus:v&&!u,restoreFocus:S,restoreFocusOptions:_,onEscapeKeyDown:f,onShow:p,onHide:O,onEnter:nt,onEntering:M,onEntered:x,onExit:E,onExiting:R,onExited:P,manager:at(),transition:mT,backdropTransition:yT,renderBackdrop:H,renderDialog:W})})]})});UA.displayName="Offcanvas";const bT=Object.assign(UA,{Body:FA,Header:BA,Title:zA}),$A=F.forwardRef(({onHide:c,...t},e)=>{const i=F.useContext(Eo),s=mo(()=>{i==null||i.onToggle==null||i.onToggle(),c?.()});return T.jsx(bT,{ref:e,show:!!(i!=null&&i.expanded),...t,renderStaticNode:!0,onHide:s})});$A.displayName="NavbarOffcanvas";const GA=F.forwardRef(({className:c,bsPrefix:t,as:e="span",...i},s)=>(t=Xt(t,"navbar-text"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));GA.displayName="NavbarText";const VA=F.forwardRef((c,t)=>{const{bsPrefix:e,expand:i=!0,variant:s="light",bg:n,fixed:a,sticky:o,className:h,as:u="nav",expanded:f,onToggle:p,onSelect:m,collapseOnSelect:y=!1,...w}=wA(c,{expanded:"onToggle"}),v=Xt(e,"navbar"),S=F.useCallback((...E)=>{m?.(...E),y&&f&&p?.(!1)},[m,y,f,p]);w.role===void 0&&u!=="nav"&&(w.role="navigation");let _=`${v}-expand`;typeof i=="string"&&(_=`${_}-${i}`);const x=F.useMemo(()=>({onToggle:()=>p?.(!f),bsPrefix:v,expanded:!!f,expand:i}),[v,f,i,p]);return T.jsx(Eo.Provider,{value:x,children:T.jsx(Au.Provider,{value:S,children:T.jsx(u,{ref:t,...w,className:Ot(h,v,i&&_,s&&`${v}-${s}`,n&&`bg-${n}`,o&&`sticky-${o}`,a&&`fixed-${a}`)})})})});VA.displayName="Navbar";const Hp=Object.assign(VA,{Brand:EA,Collapse:kA,Offcanvas:$A,Text:GA,Toggle:LA});function vT(){const[,c]=F.useReducer(t=>t+1,0);return c}const bm=F.createContext(null);bm.displayName="NavContext";const qA=F.createContext(null),AT=["as","disabled"];function wT(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function _T(c){return!c||c.trim()==="#"}function vm({tagName:c,disabled:t,href:e,target:i,rel:s,role:n,onClick:a,tabIndex:o=0,type:h}){c||(e!=null||i!=null||s!=null?c="a":c="button");const u={tagName:c};if(c==="button")return[{type:h||"button",disabled:t},u];const f=m=>{if((t||c==="a"&&_T(e))&&m.preventDefault(),t){m.stopPropagation();return}a?.(m)},p=m=>{m.key===" "&&(m.preventDefault(),f(m))};return c==="a"&&(e||(e="#"),t&&(e=void 0)),[{role:n??"button",disabled:void 0,tabIndex:t?void 0:o,href:e,target:c==="a"?i:void 0,"aria-disabled":t||void 0,rel:c==="a"?s:void 0,onClick:f,onKeyDown:p},u]}const XA=F.forwardRef((c,t)=>{let{as:e,disabled:i}=c,s=wT(c,AT);const[n,{tagName:a}]=vm(Object.assign({tagName:e,disabled:i},s));return T.jsx(a,Object.assign({},s,n,{ref:t}))});XA.displayName="Button";const ST=["as","active","eventKey"];function ET(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function YA({key:c,onClick:t,active:e,id:i,role:s,disabled:n}){const a=F.useContext(Au),o=F.useContext(bm),h=F.useContext(qA);let u=e;const f={role:s};if(o){!s&&o.role==="tablist"&&(f.role="tab");const p=o.getControllerId(c??null),m=o.getControlledId(c??null);f[ju("event-key")]=c,f.id=p||i,u=e==null&&c!=null?o.activeKey===c:e,(u||!(h!=null&&h.unmountOnExit)&&!(h!=null&&h.mountOnEnter))&&(f["aria-controls"]=m)}return f.role==="tab"&&(f["aria-selected"]=u,u||(f.tabIndex=-1),n&&(f.tabIndex=-1,f["aria-disabled"]=!0)),f.onClick=bn(p=>{n||(t?.(p),c!=null&&a&&!p.isPropagationStopped()&&a(c,p))}),[f,{isActive:u}]}const WA=F.forwardRef((c,t)=>{let{as:e=XA,active:i,eventKey:s}=c,n=ET(c,ST);const[a,o]=YA(Object.assign({key:um(s,n.href),active:i},n));return a[ju("active")]=o.isActive,T.jsx(e,Object.assign({},n,a,{ref:t}))});WA.displayName="NavItem";const xT=["as","onSelect","activeKey","role","onKeyDown"];function CT(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}const Dv=()=>{},Rv=ju("event-key"),KA=F.forwardRef((c,t)=>{let{as:e="div",onSelect:i,activeKey:s,role:n,onKeyDown:a}=c,o=CT(c,xT);const h=vT(),u=F.useRef(!1),f=F.useContext(Au),p=F.useContext(qA);let m,y;p&&(n=n||"tablist",s=p.activeKey,m=p.getControlledId,y=p.getControllerId);const w=F.useRef(null),v=E=>{const R=w.current;if(!R)return null;const D=Nr(R,`[${Rv}]:not([aria-disabled=true])`),M=R.querySelector("[aria-selected=true]");if(!M||M!==document.activeElement)return null;const k=D.indexOf(M);if(k===-1)return null;let N=k+E;return N>=D.length&&(N=0),N<0&&(N=D.length-1),D[N]},S=(E,R)=>{E!=null&&(i?.(E,R),f?.(E,R))},_=E=>{if(a?.(E),!p)return;let R;switch(E.key){case"ArrowLeft":case"ArrowUp":R=v(-1);break;case"ArrowRight":case"ArrowDown":R=v(1);break;default:return}R&&(E.preventDefault(),S(R.dataset[$C("EventKey")]||null,E),u.current=!0,h())};F.useEffect(()=>{if(w.current&&u.current){const E=w.current.querySelector(`[${Rv}][aria-selected=true]`);E?.focus()}u.current=!1});const x=Hu(t,w);return T.jsx(Au.Provider,{value:S,children:T.jsx(bm.Provider,{value:{role:n,activeKey:um(s),getControlledId:m||Dv,getControllerId:y||Dv},children:T.jsx(e,Object.assign({},o,{onKeyDown:_,ref:x,role:n}))})})});KA.displayName="Nav";const TT=Object.assign(KA,{Item:WA}),Am=F.createContext(null);Am.displayName="CardHeaderContext";const QA=F.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},s)=>(t=Xt(t,"nav-item"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));QA.displayName="NavItem";const MT=["onKeyDown"];function DT(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function RT(c){return!c||c.trim()==="#"}const ZA=F.forwardRef((c,t)=>{let{onKeyDown:e}=c,i=DT(c,MT);const[s]=vm(Object.assign({tagName:"a"},i)),n=bn(a=>{s.onKeyDown(a),e?.(a)});return RT(i.href)||i.role==="button"?T.jsx("a",Object.assign({ref:t},i,s,{onKeyDown:n})):T.jsx("a",Object.assign({ref:t},i,{onKeyDown:e}))});ZA.displayName="Anchor";const JA=F.forwardRef(({bsPrefix:c,className:t,as:e=ZA,active:i,eventKey:s,disabled:n=!1,...a},o)=>{c=Xt(c,"nav-link");const[h,u]=YA({key:um(s,a.href),active:i,disabled:n,...a});return T.jsx(e,{...a,...h,ref:o,disabled:n,className:Ot(t,c,n&&"disabled",u.isActive&&"active")})});JA.displayName="NavLink";const tw=F.forwardRef((c,t)=>{const{as:e="div",bsPrefix:i,variant:s,fill:n=!1,justify:a=!1,navbar:o,navbarScroll:h,className:u,activeKey:f,...p}=wA(c,{activeKey:"onSelect"}),m=Xt(i,"nav");let y,w,v=!1;const S=F.useContext(Eo),_=F.useContext(Am);return S?(y=S.bsPrefix,v=o??!0):_&&({cardHeaderBsPrefix:w}=_),T.jsx(TT,{as:e,ref:t,activeKey:f,className:Ot(u,{[m]:!v,[`${y}-nav`]:v,[`${y}-nav-scroll`]:v&&h,[`${w}-${s}`]:!!w,[`${m}-${s}`]:!!s,[`${m}-fill`]:n,[`${m}-justified`]:a}),...p})});tw.displayName="Nav";const yi=Object.assign(tw,{Item:QA,Link:JA}),zs=F.forwardRef(({bsPrefix:c,fluid:t=!1,as:e="div",className:i,...s},n)=>{const a=Xt(c,"container"),o=typeof t=="string"?`-${t}`:"-fluid";return T.jsx(e,{ref:n,...s,className:Ot(i,t?`${a}${o}`:a)})});zs.displayName="Container";var ew={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kv=We.createContext&&We.createContext(ew),kT=["attr","size","title"];function LT(c,t){if(c==null)return{};var e=OT(c,t),i,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(c);for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(c,i)&&(e[i]=c[i])}return e}function OT(c,t){if(c==null)return{};var e={};for(var i in c)if(Object.prototype.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function _u(){return _u=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},_u.apply(this,arguments)}function Lv(c,t){var e=Object.keys(c);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(c);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(c,s).enumerable})),e.push.apply(e,i)}return e}function Su(c){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Lv(Object(e),!0).forEach(function(i){PT(c,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(e)):Lv(Object(e)).forEach(function(i){Object.defineProperty(c,i,Object.getOwnPropertyDescriptor(e,i))})}return c}function PT(c,t,e){return t=NT(t),t in c?Object.defineProperty(c,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):c[t]=e,c}function NT(c){var t=FT(c,"string");return typeof t=="symbol"?t:t+""}function FT(c,t){if(typeof c!="object"||!c)return c;var e=c[Symbol.toPrimitive];if(e!==void 0){var i=e.call(c,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(c)}function iw(c){return c&&c.map((t,e)=>We.createElement(t.tag,Su({key:e},t.attr),iw(t.child)))}function Pt(c){return t=>We.createElement(IT,_u({attr:Su({},c.attr)},t),iw(c.child))}function IT(c){var t=e=>{var{attr:i,size:s,title:n}=c,a=LT(c,kT),o=s||e.size||"1em",h;return e.className&&(h=e.className),c.className&&(h=(h?h+" ":"")+c.className),We.createElement("svg",_u({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,a,{className:h,style:Su(Su({color:c.color||e.color},e.style),c.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),n&&We.createElement("title",null,n),c.children)};return kv!==void 0?We.createElement(kv.Consumer,null,e=>t(e)):t(ew)}function BT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"},child:[]}]})(c)}function zT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 378.7c-73.4 0-133.3 59.9-133.3 133.3S438.6 645.3 512 645.3 645.3 585.4 645.3 512 585.4 378.7 512 378.7zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zM512 717.1c-113.5 0-205.1-91.6-205.1-205.1S398.5 306.9 512 306.9 717.1 398.5 717.1 512 625.5 717.1 512 717.1zm213.5-370.7c-26.5 0-47.9-21.4-47.9-47.9s21.4-47.9 47.9-47.9 47.9 21.4 47.9 47.9a47.84 47.84 0 0 1-47.9 47.9z"},child:[]}]})(c)}function jT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M505.7 661a8 8 0 0 0 12.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"},child:[]}]})(c)}function HT(c){return Pt({attr:{t:"1569683753031",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"path",attr:{d:"M312.1 591.5c3.1 3.1 8.2 3.1 11.3 0l101.8-101.8 86.1 86.2c3.1 3.1 8.2 3.1 11.3 0l226.3-226.5c3.1-3.1 3.1-8.2 0-11.3l-36.8-36.8c-3.1-3.1-8.2-3.1-11.3 0L517 485.3l-86.1-86.2c-3.1-3.1-8.2-3.1-11.3 0L275.3 543.4c-3.1 3.1-3.1 8.2 0 11.3l36.8 36.8z"},child:[]},{tag:"path",attr:{d:"M904 160H548V96c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H120c-17.7 0-32 14.3-32 32v520c0 17.7 14.3 32 32 32h356.4v32L311.6 884.1c-3.7 2.4-4.7 7.3-2.3 11l30.3 47.2v0.1c2.4 3.7 7.4 4.7 11.1 2.3L512 838.9l161.3 105.8c3.7 2.4 8.7 1.4 11.1-2.3v-0.1l30.3-47.2c2.4-3.7 1.3-8.6-2.3-11L548 776.3V744h356c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 512H160V232h704v440z"},child:[]}]})(c)}function UT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"},child:[]}]})(c)}function $T(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 0 0 324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z"},child:[]}]})(c)}function GT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M688 264c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48zm-8 136H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM480 544H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 308H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm356.8-74.4c29-26.3 47.2-64.3 47.2-106.6 0-79.5-64.5-144-144-144s-144 64.5-144 144c0 42.3 18.2 80.3 47.2 106.6-57 32.5-96.2 92.7-99.2 162.1-.2 4.5 3.5 8.3 8 8.3h48.1c4.2 0 7.7-3.3 8-7.6C564 871.2 621.7 816 692 816s128 55.2 131.9 124.4c.2 4.2 3.7 7.6 8 7.6H880c4.6 0 8.2-3.8 8-8.3-2.9-69.5-42.2-129.6-99.2-162.1zM692 591c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"},child:[]}]})(c)}function VT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 0 1 144-53.5L537 318.9a32.05 32.05 0 0 0 0 45.3l124.5 124.5a32.05 32.05 0 0 0 45.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"},child:[]}]})(c)}function qT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0 0 75-94 336.64 336.64 0 0 1-108.2 41.2A170.1 170.1 0 0 0 672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 0 0-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 0 1-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 0 1-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"},child:[]}]})(c)}function XT(c){return Pt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"},child:[]}]})(c)}function YT(c){return Pt({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M7 18H17V16H7V18Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M17 14H7V12H17V14Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M7 10H11V8H7V10Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z",fill:"currentColor"},child:[]}]})(c)}function WT(c){return Pt({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7C13.4477 7 13 7.44772 13 8V16C13 16.5523 13.4477 17 14 17H18C18.5523 17 19 16.5523 19 16V8C19 7.44772 18.5523 7 18 7H14ZM17 9H15V15H17V9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M6 7C5.44772 7 5 7.44772 5 8C5 8.55228 5.44772 9 6 9H10C10.5523 9 11 8.55228 11 8C11 7.44772 10.5523 7 10 7H6Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M6 11C5.44772 11 5 11.4477 5 12C5 12.5523 5.44772 13 6 13H10C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11H6Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M5 16C5 15.4477 5.44772 15 6 15H10C10.5523 15 11 15.4477 11 16C11 16.5523 10.5523 17 10 17H6C5.44772 17 5 16.5523 5 16Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3C2.34315 3 1 4.34315 1 6V18C1 19.6569 2.34315 21 4 21H20C21.6569 21 23 19.6569 23 18V6C23 4.34315 21.6569 3 20 3H4ZM20 5H4C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19H20C20.5523 19 21 18.5523 21 18V6C21 5.44772 20.5523 5 20 5Z",fill:"currentColor"},child:[]}]})(c)}function KT(){const[c,t]=F.useState(!1),[e,i]=F.useState(!1);function s(){window.scrollY>=20?i(!0):i(!1)}return window.addEventListener("scroll",s),T.jsx(Hp,{expanded:c,fixed:"top",expand:"md",className:e?"sticky":"navbar",children:T.jsxs(zs,{children:[T.jsxs(Hp.Toggle,{"aria-controls":"responsive-navbar-nav",onClick:()=>{t(c?!1:"expanded")},children:[T.jsx("span",{}),T.jsx("span",{}),T.jsx("span",{})]}),T.jsx(Hp.Collapse,{id:"responsive-navbar-nav",children:T.jsxs(yi,{className:"ms-auto",defaultActiveKey:"#home",children:[T.jsx(yi.Item,{children:T.jsxs(yi.Link,{href:"#home",onClick:()=>t(!1),children:[T.jsx(UT,{style:{marginBottom:"2px"}})," ",T.jsx("span",{children:"Home"})]})}),T.jsx(yi.Item,{children:T.jsxs(yi.Link,{href:"#about",onClick:()=>t(!1),children:[T.jsx(XT,{style:{marginBottom:"2px"}})," About"]})}),T.jsx(yi.Item,{children:T.jsxs(yi.Link,{href:"#experience",onClick:()=>t(!1),children:[T.jsx(GT,{style:{marginBottom:"2px"}})," ","Experience"]})}),T.jsx(yi.Item,{children:T.jsxs(yi.Link,{href:"#projects",onClick:()=>t(!1),children:[T.jsx(HT,{style:{marginBottom:"2px"}})," ","Projects"]})}),T.jsx(yi.Item,{children:T.jsxs(yi.Link,{href:"#skills",onClick:()=>t(!1),children:[T.jsx(VT,{style:{marginBottom:"2px"}})," ","Skills"]})}),T.jsx(yi.Item,{children:T.jsxs(yi.Link,{href:"#education",onClick:()=>t(!1),children:[T.jsx($T,{style:{marginBottom:"2px"}})," ","Education"]})}),T.jsx(yi.Item,{children:T.jsxs(yi.Link,{href:"#resume",onClick:()=>t(!1),children:[T.jsx(YT,{style:{marginBottom:"2px"}})," Resume"]})})]})})]})})}const Hl=F.forwardRef(({as:c,bsPrefix:t,variant:e="primary",size:i,active:s=!1,disabled:n=!1,className:a,...o},h)=>{const u=Xt(t,"btn"),[f,{tagName:p}]=vm({tagName:c,disabled:n,...o}),m=p;return T.jsx(m,{...f,...o,ref:h,disabled:n,className:Ot(a,u,s&&"active",e&&`${u}-${e}`,i&&`${u}-${i}`,o.href&&n&&"disabled")})});Hl.displayName="Button";const wm=F.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},s)=>(t=Xt(t,"card-body"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));wm.displayName="CardBody";const sw=F.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},s)=>(t=Xt(t,"card-footer"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));sw.displayName="CardFooter";const nw=F.forwardRef(({bsPrefix:c,className:t,as:e="div",...i},s)=>{const n=Xt(c,"card-header"),a=F.useMemo(()=>({cardHeaderBsPrefix:n}),[n]);return T.jsx(Am.Provider,{value:a,children:T.jsx(e,{ref:s,...i,className:Ot(t,n)})})});nw.displayName="CardHeader";const rw=F.forwardRef(({bsPrefix:c,className:t,variant:e,as:i="img",...s},n)=>{const a=Xt(c,"card-img");return T.jsx(i,{ref:n,className:Ot(e?`${a}-${e}`:a,t),...s})});rw.displayName="CardImg";const aw=F.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},s)=>(t=Xt(t,"card-img-overlay"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));aw.displayName="CardImgOverlay";const ow=F.forwardRef(({className:c,bsPrefix:t,as:e="a",...i},s)=>(t=Xt(t,"card-link"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));ow.displayName="CardLink";const QT=$u("h6"),lw=F.forwardRef(({className:c,bsPrefix:t,as:e=QT,...i},s)=>(t=Xt(t,"card-subtitle"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));lw.displayName="CardSubtitle";const cw=F.forwardRef(({className:c,bsPrefix:t,as:e="p",...i},s)=>(t=Xt(t,"card-text"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));cw.displayName="CardText";const ZT=$u("h5"),hw=F.forwardRef(({className:c,bsPrefix:t,as:e=ZT,...i},s)=>(t=Xt(t,"card-title"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));hw.displayName="CardTitle";const uw=F.forwardRef(({bsPrefix:c,className:t,bg:e,text:i,border:s,body:n=!1,children:a,as:o="div",...h},u)=>{const f=Xt(c,"card");return T.jsx(o,{ref:u,...h,className:Ot(t,f,e&&`bg-${e}`,i&&`text-${i}`,s&&`border-${s}`),children:n?T.jsx(wm,{children:a}):a})});uw.displayName="Card";const Fs=Object.assign(uw,{Img:rw,Title:hw,Subtitle:lw,Body:wm,Link:ow,Text:cw,Header:nw,Footer:sw,ImgOverlay:aw});function JT(c){const t=F.useRef(c);return t.current=c,t}function t4(c){const t=JT(c);F.useEffect(()=>()=>t.current(),[])}function e4({as:c,bsPrefix:t,className:e,...i}){t=Xt(t,"col");const s=_A(),n=SA(),a=[],o=[];return s.forEach(h=>{const u=i[h];delete i[h];let f,p,m;typeof u=="object"&&u!=null?{span:f,offset:p,order:m}=u:f=u;const y=h!==n?`-${h}`:"";f&&a.push(f===!0?`${t}${y}`:`${t}${y}-${f}`),m!=null&&o.push(`order${y}-${m}`),p!=null&&o.push(`offset${y}-${p}`)}),[{...i,className:Ot(e,...a,...o)},{as:c,bsPrefix:t,spans:a}]}const Ht=F.forwardRef((c,t)=>{const[{className:e,...i},{as:s="div",bsPrefix:n,spans:a}]=e4(c);return T.jsx(s,{...i,ref:t,className:Ot(e,!a.length&&n)})});Ht.displayName="Col";var Hh;function Ov(c){if((!Hh&&Hh!==0||c)&&So){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Hh=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Hh}function i4(){return F.useState(null)}const dw=F.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},s)=>(t=Xt(t,"modal-body"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));dw.displayName="ModalBody";const _m=F.forwardRef(({bsPrefix:c,className:t,contentClassName:e,centered:i,size:s,fullscreen:n,children:a,scrollable:o,...h},u)=>{c=Xt(c,"modal");const f=`${c}-dialog`,p=typeof n=="string"?`${c}-fullscreen-${n}`:`${c}-fullscreen`;return T.jsx("div",{...h,ref:u,className:Ot(f,t,s&&`${c}-${s}`,i&&`${f}-centered`,o&&`${f}-scrollable`,n&&p),children:T.jsx("div",{className:Ot(`${c}-content`,e),children:a})})});_m.displayName="ModalDialog";const fw=F.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},s)=>(t=Xt(t,"modal-footer"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));fw.displayName="ModalFooter";const pw=F.forwardRef(({bsPrefix:c,className:t,closeLabel:e="Close",closeButton:i=!1,...s},n)=>(c=Xt(c,"modal-header"),T.jsx(ym,{ref:n,...s,className:Ot(t,c),closeLabel:e,closeButton:i})));pw.displayName="ModalHeader";const s4=$u("h4"),gw=F.forwardRef(({className:c,bsPrefix:t,as:e=s4,...i},s)=>(t=Xt(t,"modal-title"),T.jsx(e,{ref:s,className:Ot(c,t),...i})));gw.displayName="ModalTitle";function n4(c){return T.jsx(Uu,{...c,timeout:null})}function r4(c){return T.jsx(Uu,{...c,timeout:null})}const mw=F.forwardRef(({bsPrefix:c,className:t,style:e,dialogClassName:i,contentClassName:s,children:n,dialogAs:a=_m,"data-bs-theme":o,"aria-labelledby":h,"aria-describedby":u,"aria-label":f,show:p=!1,animation:m=!0,backdrop:y=!0,keyboard:w=!0,onEscapeKeyDown:v,onShow:S,onHide:_,container:x,autoFocus:E=!0,enforceFocus:R=!0,restoreFocus:D=!0,restoreFocusOptions:M,onEntered:k,onExit:N,onExiting:I,onEnter:G,onEntering:j,onExited:tt,backdropClassName:ot,manager:rt,...lt},O)=>{const[$,K]=F.useState({}),[at,nt]=F.useState(!1),P=F.useRef(!1),H=F.useRef(!1),W=F.useRef(null),[z,ct]=i4(),Z=DA(O,ct),et=mo(_),mt=aC();c=Xt(c,"modal");const gt=F.useMemo(()=>({onHide:et}),[et]);function Tt(){return rt||HA({isRTL:mt})}function qt(Nt){if(!So)return;const Qi=Tt().getScrollbarWidth()>0,Gs=Nt.scrollHeight>Bu(Nt).documentElement.clientHeight;K({paddingRight:Qi&&!Gs?Ov():void 0,paddingLeft:!Qi&&Gs?Ov():void 0})}const ie=mo(()=>{z&&qt(z.dialog)});t4(()=>{xg(window,"resize",ie),W.current==null||W.current()});const Pe=()=>{P.current=!0},be=Nt=>{P.current&&z&&Nt.target===z.dialog&&(H.current=!0),P.current=!1},Qt=()=>{nt(!0),W.current=TA(z.dialog,()=>{nt(!1)})},Ei=Nt=>{Nt.target===Nt.currentTarget&&Qt()},$s=Nt=>{if(y==="static"){Ei(Nt);return}if(H.current||Nt.target!==Nt.currentTarget){H.current=!1;return}_?.()},lr=Nt=>{w?v?.(Nt):(Nt.preventDefault(),y==="static"&&Qt())},cr=(Nt,Qi)=>{Nt&&qt(Nt),G?.(Nt,Qi)},hr=Nt=>{W.current==null||W.current(),N?.(Nt)},Sn=(Nt,Qi)=>{j?.(Nt,Qi),CA(window,"resize",ie)},ur=Nt=>{Nt&&(Nt.style.display=""),tt?.(Nt),xg(window,"resize",ie)},dr=F.useCallback(Nt=>T.jsx("div",{...Nt,className:Ot(`${c}-backdrop`,ot,!m&&"show")}),[m,ot,c]),Qe={...e,...$};Qe.display="block";const fr=Nt=>T.jsx("div",{role:"dialog",...Nt,style:Qe,className:Ot(t,c,at&&`${c}-static`,!m&&"show"),onClick:y?$s:void 0,onMouseUp:be,"data-bs-theme":o,"aria-label":f,"aria-labelledby":h,"aria-describedby":u,children:T.jsx(a,{...lt,onMouseDown:Pe,className:i,contentClassName:s,children:n})});return T.jsx(gm.Provider,{value:gt,children:T.jsx(NA,{show:p,ref:Z,backdrop:y,container:x,keyboard:!0,autoFocus:E,enforceFocus:R,restoreFocus:D,restoreFocusOptions:M,onEscapeKeyDown:lr,onShow:S,onHide:_,onEnter:cr,onEntering:Sn,onEntered:k,onExit:hr,onExiting:I,onExited:ur,manager:Tt(),transition:m?n4:void 0,backdropTransition:m?r4:void 0,renderBackdrop:dr,renderDialog:fr})})});mw.displayName="Modal";const Al=Object.assign(mw,{Body:dw,Header:pw,Title:gw,Footer:fw,Dialog:_m,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),An=F.forwardRef(({bsPrefix:c,className:t,as:e="div",...i},s)=>{const n=Xt(c,"row"),a=_A(),o=SA(),h=`${n}-cols`,u=[];return a.forEach(f=>{const p=i[f];delete i[f];let m;p!=null&&typeof p=="object"?{cols:m}=p:m=p;const y=f!==o?`-${f}`:"";m!=null&&u.push(`${h}${y}-${m}`)}),T.jsx(e,{ref:s,...i,className:Ot(t,n,...u)})});An.displayName="Row";const a4="/assets/home-main-D1v7QOab.svg",Ul="generated",o4="pointerdown",l4="pointerup",Pv="pointerleave",c4="pointerout",Nv="pointermove",h4="touchstart",Fv="touchend",u4="touchmove",d4="touchcancel",f4="resize",p4="visibilitychange",Gr="tsParticles - Error";class Vi{constructor(t,e,i){if(this._updateFromAngle=(s,n)=>{this.x=Math.cos(s)*n,this.y=Math.sin(s)*n},!Es(t)&&t){this.x=t.x,this.y=t.y;const s=t;this.z=s.z?s.z:0}else if(t!==void 0&&e!==void 0)this.x=t,this.y=e,this.z=i??0;else throw new Error(`${Gr} Vector3d not initialized correctly`)}static get origin(){return Vi.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return Vi.create(t.x,t.y,t.z)}static create(t,e,i){return new Vi(t,e,i)}add(t){return Vi.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return Vi.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return Vi.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**2+this.y**2}mult(t){return Vi.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=0&&this.multTo(1/t)}rotate(t){return Vi.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),0)}setTo(t){this.x=t.x,this.y=t.y;const e=t;this.z=e.z?e.z:0}sub(t){return Vi.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class ao extends Vi{constructor(t,e){super(t,e,0)}static get origin(){return ao.create(0,0)}static clone(t){return ao.create(t.x,t.y)}static create(t,e){return new ao(t,e)}}let g4=Math.random;function wn(){return yw(g4(),0,1-1e-16)}function yw(c,t,e){return Math.min(Math.max(c,t),e)}function oo(c){const t=Em(c);let e=Sm(c);return t===e&&(e=0),wn()*(t-e)+e}function ge(c){return Es(c)?c:oo(c)}function Sm(c){return Es(c)?c:c.min}function Em(c){return Es(c)?c:c.max}function Kt(c,t){if(c===t||t===void 0&&Es(c))return c;const e=Sm(c),i=Em(c);return t!==void 0?{min:Math.min(e,t),max:Math.max(i,t)}:Kt(e,i)}function m4(c){const t=c.random,{enable:e,minimumValue:i}=nr(t)?{enable:t,minimumValue:0}:t;return ge(e?Kt(c.value,i):c.value)}function y4(c,t){const e=c.x-t.x,i=c.y-t.y;return{dx:e,dy:i,distance:Math.sqrt(e**2+i**2)}}function xm(c,t){return y4(c,t).distance}function b4(c,t,e){if(Es(c))return c*Math.PI/180;switch(c){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(e.y-t.y,e.x-t.x);case"outside":return Math.atan2(t.y-e.y,t.x-e.x);default:return wn()*Math.PI*2}}function v4(c){const t=ao.origin;return t.length=1,t.angle=c,t}function A4(c){return{x:c.position?.x??wn()*c.size.width,y:c.position?.y??wn()*c.size.height}}function bw(c){return c?c.endsWith("%")?parseFloat(c)/100:parseFloat(c):1}const w4={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function Wl(){return w4}function Gu(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function _4(){return!Gu()&&typeof matchMedia<"u"}function vw(c){if(_4())return matchMedia(c)}function S4(c){if(!(Gu()||typeof MutationObserver>"u"))return new MutationObserver(c)}function E4(c,t){return c===t||Bs(t)&&t.indexOf(c)>-1}function x4(c){return Math.floor(wn()*c.length)}function Cm(c,t,e=!0){return c[t!==void 0&&e?t%c.length:x4(c)]}function gi(c,...t){for(const e of t){if(e==null)continue;if(!Ll(e)){c=e;continue}const i=Array.isArray(e);i&&(Ll(c)||!c||!Array.isArray(c))?c=[]:!i&&(Ll(c)||!c||Array.isArray(c))&&(c={});for(const s in e){if(s==="__proto__")continue;const n=e,a=n[s],o=c;o[s]=Ll(a)&&Array.isArray(a)?a.map(h=>gi(o[s],h)):gi(o[s],a)}}return c}function Vr(c,t){return Bs(c)?c.map((e,i)=>t(e,i)):t(c,0)}function $l(c,t,e){return Bs(c)?Cm(c,t,e):c}function C4(c,t){const e=c.value,i=c.animation,s={delayTime:ge(i.delay)*1e3,enable:i.enable,value:ge(c.value)*t,max:Em(e)*t,min:Sm(e)*t,loops:0,maxLoops:ge(i.count),time:0};if(i.enable){switch(s.decay=1-ge(i.decay),i.mode){case"increase":s.status="increasing";break;case"decrease":s.status="decreasing";break;case"random":s.status=wn()>=.5?"increasing":"decreasing";break}const n=i.mode==="auto";switch(i.startValue){case"min":s.value=s.min,n&&(s.status="increasing");break;case"max":s.value=s.max,n&&(s.status="decreasing");break;default:s.value=oo(s),n&&(s.status=wn()>=.5?"increasing":"decreasing");break}}return s.initialValue=s.value,s}function T4(c,t){if(!(c.mode==="percent")){const{mode:s,...n}=c;return n}return"x"in c?{x:c.x/100*t.width,y:c.y/100*t.height}:{width:c.width/100*t.width,height:c.height/100*t.height}}function Aw(c,t){return T4(c,t)}function nr(c){return typeof c=="boolean"}function Is(c){return typeof c=="string"}function Es(c){return typeof c=="number"}function ww(c){return typeof c=="function"}function Ll(c){return typeof c=="object"&&c!==null}function Bs(c){return Array.isArray(c)}const M4="random",Vu=new Map;function Iv(c){Vu.set(c.key,c)}function Up(c,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?c+(t-c)*6*e:e<1/2?t:e<2/3?c+(t-c)*(2/3-e)*6:c}function D4(c){for(const[,n]of Vu)if(c.startsWith(n.stringPrefix))return n.parseString(c);const t=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,e=c.replace(t,(n,a,o,h,u)=>a+a+o+o+h+h+(u!==void 0?u+u:"")),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=i.exec(e);return s?{a:s[4]!==void 0?parseInt(s[4],16)/255:1,b:parseInt(s[3],16),g:parseInt(s[2],16),r:parseInt(s[1],16)}:void 0}function lo(c,t,e=!0){if(!c)return;const i=Is(c)?{value:c}:c;if(Is(i.value))return _w(i.value,t,e);if(Bs(i.value))return lo({value:Cm(i.value,t,e)});for(const[,s]of Vu){const n=s.handleRangeColor(i);if(n)return n}}function _w(c,t,e=!0){if(!c)return;const i=Is(c)?{value:c}:c;if(Is(i.value))return i.value===M4?O4():k4(i.value);if(Bs(i.value))return _w({value:Cm(i.value,t,e)});for(const[,s]of Vu){const n=s.handleColor(i);if(n)return n}}function Bv(c,t,e=!0){const i=lo(c,t,e);return i?R4(i):void 0}function R4(c){const t=c.r/255,e=c.g/255,i=c.b/255,s=Math.max(t,e,i),n=Math.min(t,e,i),a={h:0,l:(s+n)/2,s:0};return s!==n&&(a.s=a.l<.5?(s-n)/(s+n):(s-n)/(2-s-n),a.h=t===s?(e-i)/(s-n):a.h=e===s?2+(i-t)/(s-n):4+(t-e)/(s-n)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a.h>=360&&(a.h-=360),a}function k4(c){return D4(c)}function Tg(c){const t={b:0,g:0,r:0},e={h:c.h/360,l:c.l/100,s:c.s/100};if(!e.s)t.r=t.g=t.b=e.l;else{const i=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,s=2*e.l-i;t.r=Up(s,i,e.h+1/3),t.g=Up(s,i,e.h),t.b=Up(s,i,e.h-1/3)}return t.r=Math.floor(t.r*255),t.g=Math.floor(t.g*255),t.b=Math.floor(t.b*255),t}function L4(c){const t=Tg(c);return{a:c.a,b:t.b,g:t.g,r:t.r}}function O4(c){return{b:Math.floor(oo(Kt(0,256))),g:Math.floor(oo(Kt(0,256))),r:Math.floor(oo(Kt(0,256)))}}function lu(c,t){return`rgba(${c.r}, ${c.g}, ${c.b}, ${t??1})`}function zv(c,t){return`hsla(${c.h}, ${c.s}%, ${c.l}%, ${t??1})`}function jv(c){return c!==void 0?{h:c.h.value,s:c.s.value,l:c.l.value}:void 0}function P4(c,t,e){c.fillStyle=e??"rgba(0,0,0,0)",c.fillRect(0,0,t.width,t.height)}function N4(c,t,e,i){e&&(c.globalAlpha=i,c.drawImage(e,0,0,t.width,t.height),c.globalAlpha=1)}function $p(c,t){c.clearRect(0,0,t.width,t.height)}function F4(c){const{container:t,context:e,particle:i,delta:s,colorStyles:n,backgroundMask:a,composite:o,radius:h,opacity:u,shadow:f,transform:p}=c,m=i.getPosition(),y=i.rotation+(i.pathRotation?i.velocity.angle:0),w={sin:Math.sin(y),cos:Math.cos(y)},v={a:w.cos*(p.a??1),b:w.sin*(p.b??1),c:-w.sin*(p.c??1),d:w.cos*(p.d??1)};e.setTransform(v.a,v.b,v.c,v.d,m.x,m.y),e.beginPath(),a&&(e.globalCompositeOperation=o);const S=i.shadowColor;f.enable&&S&&(e.shadowBlur=f.blur,e.shadowColor=lu(S),e.shadowOffsetX=f.offset.x,e.shadowOffsetY=f.offset.y),n.fill&&(e.fillStyle=n.fill);const _=i.strokeWidth??0;e.lineWidth=_,n.stroke&&(e.strokeStyle=n.stroke),I4(t,e,i,h,u,s),_>0&&e.stroke(),i.close&&e.closePath(),i.fill&&e.fill(),B4(t,e,i,h,u,s),e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0)}function I4(c,t,e,i,s,n){if(!e.shape)return;const a=c.drawers.get(e.shape);a&&a.draw(t,e,i,s,n,c.retina.pixelRatio)}function B4(c,t,e,i,s,n){if(!e.shape)return;const a=c.drawers.get(e.shape);!a||!a.afterEffect||a.afterEffect(t,e,i,s,n,c.retina.pixelRatio)}function z4(c,t,e){t.draw&&t.draw(c,e)}function j4(c,t,e,i){t.drawParticle&&t.drawParticle(c,e,i)}function H4(c,t,e){return{h:c.h,s:c.s,l:c.l+(t==="darken"?-1:1)*e}}function U4(c,t,e){const i=t[e];i!==void 0&&(c[e]=(c[e]??1)*i)}class $4{constructor(t){this.container=t,this._applyPostDrawUpdaters=e=>{for(const i of this._postDrawUpdaters)i.afterDraw&&i.afterDraw(e)},this._applyPreDrawUpdaters=(e,i,s,n,a,o)=>{for(const h of this._preDrawUpdaters){if(h.getColorStyles){const{fill:u,stroke:f}=h.getColorStyles(i,e,s,n);u&&(a.fill=u),f&&(a.stroke=f)}if(h.getTransformValues){const u=h.getTransformValues(i);for(const f in u)U4(o,u,f)}h.beforeDraw&&h.beforeDraw(i)}},this._applyResizePlugins=()=>{for(const e of this._resizePlugins)e.resize&&e.resize()},this._getPluginParticleColors=e=>{let i,s;for(const n of this._colorPlugins)if(!i&&n.particleFillColor&&(i=Bv(n.particleFillColor(e))),!s&&n.particleStrokeColor&&(s=Bv(n.particleStrokeColor(e))),i&&s)break;return[i,s]},this._initCover=()=>{const e=this.container.actualOptions,i=e.backgroundMask.cover,s=i.color,n=lo(s);if(n){const a={...n,a:i.opacity};this._coverColorStyle=lu(a,a.a)}},this._initStyle=()=>{const e=this.element,i=this.container.actualOptions;if(e){this._fullScreen?(this._originalStyle=gi({},e.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const s in i.style){if(!s||!i.style)continue;const n=i.style[s];n&&e.style.setProperty(s,n,"important")}}},this._initTrail=async()=>{const e=this.container.actualOptions,i=e.particles.move.trail,s=i.fill;if(i.enable)if(s.color){const n=lo(s.color);if(!n)return;const a=e.particles.move.trail;this._trailFill={color:{...n},opacity:1/a.length}}else await new Promise((n,a)=>{if(!s.image)return;const o=document.createElement("img");o.addEventListener("load",()=>{this._trailFill={image:o,opacity:1/i.length},n()}),o.addEventListener("error",h=>{a(h.error)}),o.src=s.image})},this._paintBase=e=>{this.draw(i=>P4(i,this.size,e))},this._paintImage=(e,i)=>{this.draw(s=>N4(s,this.size,e,i))},this._repairStyle=()=>{const e=this.element;e&&(this._safeMutationObserver(i=>i.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(i=>i.observe(e,{attributes:!0})))},this._resetOriginalStyle=()=>{const e=this.element,i=this._originalStyle;if(!(e&&i))return;const s=e.style;s.position=i.position,s.zIndex=i.zIndex,s.top=i.top,s.left=i.left,s.width=i.width,s.height=i.height},this._safeMutationObserver=e=>{this._mutationObserver&&e(this._mutationObserver)},this._setFullScreenStyle=()=>{const e=this.element;if(!e)return;const i="important",s=e.style;s.setProperty("position","fixed",i),s.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),i),s.setProperty("top","0",i),s.setProperty("left","0",i),s.setProperty("width","100%",i),s.setProperty("height","100%",i)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const t=this.container.actualOptions,e=t.particles.move.trail,i=this._trailFill;t.backgroundMask.enable?this.paint():e.enable&&e.length>0&&i?i.color?this._paintBase(lu(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):this.draw(s=>{$p(s,this.size)})}destroy(){if(this.stop(),this._generated){const t=this.element;t&&t.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(t){const e=this._context;if(e)return t(e)}drawParticle(t,e){if(t.spawning||t.destroyed)return;const i=t.getRadius();if(i<=0)return;const s=t.getFillColor(),n=t.getStrokeColor()??s;let[a,o]=this._getPluginParticleColors(t);a||(a=s),o||(o=n),!(!a&&!o)&&this.draw(h=>{const u=this.container,f=u.actualOptions,p=t.options.zIndex,m=(1-t.zIndexFactor)**p.opacityRate,y=t.bubble.opacity??t.opacity?.value??1,w=t.strokeOpacity??y,v=y*m,S=w*m,_={},x={fill:a?zv(a,v):void 0};x.stroke=o?zv(o,S):x.fill,this._applyPreDrawUpdaters(h,t,i,v,x,_),F4({container:u,context:h,particle:t,delta:e,colorStyles:x,backgroundMask:f.backgroundMask.enable,composite:f.backgroundMask.composite,radius:i*(1-t.zIndexFactor)**p.sizeRate,opacity:v,shadow:t.options.shadow,transform:_}),this._applyPostDrawUpdaters(t)})}drawParticlePlugin(t,e,i){this.draw(s=>j4(s,t,e,i))}drawPlugin(t,e){this.draw(i=>z4(i,t,e))}async init(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=S4(t=>{for(const e of t)e.type==="attributes"&&e.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(t){Wl().error(t)}this.initBackground(),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const t=this.container.actualOptions,e=t.background,i=this.element;if(!i)return;const s=i.style;if(s){if(e.color){const n=lo(e.color);s.backgroundColor=n?lu(n,e.opacity):""}else s.backgroundColor="";s.backgroundImage=e.image||"",s.backgroundPosition=e.position||"",s.backgroundRepeat=e.repeat||"",s.backgroundSize=e.size||""}}initPlugins(){this._resizePlugins=[];for(const[,t]of this.container.plugins)t.resize&&this._resizePlugins.push(t),(t.particleFillColor||t.particleStrokeColor)&&this._colorPlugins.push(t)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const t of this.container.particles.updaters)t.afterDraw&&this._postDrawUpdaters.push(t),(t.getColorStyles||t.getTransformValues||t.beforeDraw)&&this._preDrawUpdaters.push(t)}loadCanvas(t){this._generated&&this.element&&this.element.remove(),this._generated=t.dataset&&Ul in t.dataset?t.dataset[Ul]==="true":this._generated,this.element=t,this.element.ariaHidden="true",this._originalStyle=gi({},this.element.style),this.size.height=t.offsetHeight,this.size.width=t.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(e=>{this.element&&e.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const t=this.container.actualOptions;this.draw(e=>{t.backgroundMask.enable&&t.backgroundMask.cover?($p(e,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const t=this.container,e=t.retina.pixelRatio,i=t.canvas.size,s={width:this.element.offsetWidth*e,height:this.element.offsetHeight*e};if(s.height===i.height&&s.width===i.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const n={...i};return this.element.width=i.width=this.element.offsetWidth*e,this.element.height=i.height=this.element.offsetHeight*e,this.container.started&&(this.resizeFactor={width:i.width/n.width,height:i.height/n.height}),!0}stop(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=void 0,this.draw(t=>$p(t,this.size))}async windowResize(){if(!this.element||!this.resize())return;const t=this.container,e=t.updateActualOptions();t.particles.setDensity(),this._applyResizePlugins(),e&&await t.refresh()}}function ls(c,t,e,i,s){if(i){let n={passive:!0};nr(s)?n.capture=s:s!==void 0&&(n=s),c.addEventListener(t,e,n)}else{const n=s;c.removeEventListener(t,e,n)}}class G4{constructor(t){this.container=t,this._doMouseTouchClick=e=>{const i=this.container,s=i.actualOptions;if(this._canPush){const n=i.interactivity.mouse,a=n.position;if(!a)return;n.clickPosition={...a},n.clickTime=new Date().getTime();const o=s.interactivity.events.onClick;Vr(o.mode,h=>this.container.handleClickMode(h))}e.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=e=>{const i=e,s=this.container,n=s.options,a=n.defaultThemes,o=i.matches?a.dark:a.light,h=n.themes.find(u=>u.name===o);h&&h.default.auto&&s.loadTheme(o)},this._handleVisibilityChange=()=>{const e=this.container,i=e.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document&&document.hidden?(e.pageHidden=!0,e.pause()):(e.pageHidden=!1,e.getAnimationStatus()?e.play(!0):e.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const e=this.container.canvas;e&&await e.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(e,i)=>{const s=this._handlers,n=this.container,a=n.actualOptions,o=n.interactivity.element;if(!o)return;const h=o,u=n.canvas.element;u&&(u.style.pointerEvents=h===u?"initial":"none"),(a.interactivity.events.onHover.enable||a.interactivity.events.onClick.enable)&&(ls(o,Nv,s.mouseMove,i),ls(o,h4,s.touchStart,i),ls(o,u4,s.touchMove,i),a.interactivity.events.onClick.enable?(ls(o,Fv,s.touchEndClick,i),ls(o,l4,s.mouseUp,i),ls(o,o4,s.mouseDown,i)):ls(o,Fv,s.touchEnd,i),ls(o,e,s.mouseLeave,i),ls(o,d4,s.touchCancel,i))},this._manageListeners=e=>{const i=this._handlers,s=this.container,n=s.actualOptions,a=n.interactivity.detectsOn,o=s.canvas.element;let h=Pv;a==="window"?(s.interactivity.element=window,h=c4):a==="parent"&&o?s.interactivity.element=o.parentElement??o.parentNode:s.interactivity.element=o,this._manageMediaMatch(e),this._manageResize(e),this._manageInteractivityListeners(h,e),document&&ls(document,p4,i.visibilityChange,e,!1)},this._manageMediaMatch=e=>{const i=this._handlers,s=vw("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){ls(s,"change",i.themeChange,e);return}s.addListener!==void 0&&(e?s.addListener(i.oldThemeChange):s.removeListener(i.oldThemeChange))}},this._manageResize=e=>{const i=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){ls(window,f4,i.resize,e);return}const a=s.canvas.element;this._resizeObserver&&!e?(a&&this._resizeObserver.unobserve(a),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&e&&a&&(this._resizeObserver=new ResizeObserver(async o=>{o.find(u=>u.target===a)&&await this._handleWindowResize()}),this._resizeObserver.observe(a))},this._mouseDown=()=>{const{interactivity:e}=this.container;if(!e)return;const{mouse:i}=e;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=e=>{const i=this.container,s=i.actualOptions,{mouse:n}=i.interactivity;n.inside=!0;let a=!1;const o=n.position;if(!(!o||!s.interactivity.events.onClick.enable)){for(const[,h]of i.plugins)if(h.clickPositionValid&&(a=h.clickPositionValid(o),a))break;a||this._doMouseTouchClick(e),n.clicking=!1}},this._mouseTouchFinish=()=>{const e=this.container.interactivity;if(!e)return;const i=e.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,e.status=Pv,i.inside=!1,i.clicking=!1},this._mouseTouchMove=e=>{const i=this.container,s=i.actualOptions,n=i.interactivity,a=i.canvas.element;if(!n||!n.element)return;n.mouse.inside=!0;let o;if(e.type.startsWith("pointer")){this._canPush=!0;const u=e;if(n.element===window){if(a){const f=a.getBoundingClientRect();o={x:u.clientX-f.left,y:u.clientY-f.top}}}else if(s.interactivity.detectsOn==="parent"){const f=u.target,p=u.currentTarget;if(f&&p&&a){const m=f.getBoundingClientRect(),y=p.getBoundingClientRect(),w=a.getBoundingClientRect();o={x:u.offsetX+2*m.left-(y.left+w.left),y:u.offsetY+2*m.top-(y.top+w.top)}}else o={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY}}else u.target===a&&(o={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY})}else if(this._canPush=e.type!=="touchmove",a){const u=e,f=u.touches[u.touches.length-1],p=a.getBoundingClientRect();o={x:f.clientX-(p.left??0),y:f.clientY-(p.top??0)}}const h=i.retina.pixelRatio;o&&(o.x*=h,o.y*=h),n.mouse.position=o,n.status=Nv},this._touchEnd=e=>{const i=e,s=Array.from(i.changedTouches);for(const n of s)this._touches.delete(n.identifier);this._mouseTouchFinish()},this._touchEndClick=e=>{const i=e,s=Array.from(i.changedTouches);for(const n of s)this._touches.delete(n.identifier);this._mouseTouchClick(e)},this._touchStart=e=>{const i=e,s=Array.from(i.changedTouches);for(const n of s)this._touches.set(n.identifier,performance.now());this._mouseTouchMove(e)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:e=>this._mouseTouchMove(e),mouseUp:e=>this._mouseTouchClick(e),touchStart:e=>this._touchStart(e),touchMove:e=>this._mouseTouchMove(e),touchEnd:e=>this._touchEnd(e),touchCancel:e=>this._touchEnd(e),touchEndClick:e=>this._touchEndClick(e),visibilityChange:()=>this._handleVisibilityChange(),themeChange:e=>this._handleThemeChange(e),oldThemeChange:e=>this._handleThemeChange(e),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class js{constructor(){this.value=""}static create(t,e){const i=new js;return i.load(t),e!==void 0&&(Is(e)||Bs(e)?i.load({value:e}):i.load(e)),i}load(t){t?.value!==void 0&&(this.value=t.value)}}class V4{constructor(){this.color=new js,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=js.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image),t.position!==void 0&&(this.position=t.position),t.repeat!==void 0&&(this.repeat=t.repeat),t.size!==void 0&&(this.size=t.size),t.opacity!==void 0&&(this.opacity=t.opacity))}}class q4{constructor(){this.color=new js,this.color.value="#fff",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=js.create(this.color,t.color)),t.opacity!==void 0&&(this.opacity=t.opacity))}}class X4{constructor(){this.composite="destination-out",this.cover=new q4,this.enable=!1}load(t){if(t){if(t.composite!==void 0&&(this.composite=t.composite),t.cover!==void 0){const e=t.cover,i=Is(t.cover)?{color:t.cover}:t.cover;this.cover.load(e.color!==void 0?e:{color:i})}t.enable!==void 0&&(this.enable=t.enable)}}}class Y4{constructor(){this.enable=!0,this.zIndex=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.zIndex!==void 0&&(this.zIndex=t.zIndex))}}class W4{constructor(){this.enable=!1,this.mode=[]}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode))}}class Hv{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(t){this.elementId=t}get elementId(){return this.ids}set elementId(t){this.ids=t}get ids(){return Vr(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=Vr(t,e=>`#${e}`)}load(t){if(!t)return;const e=t.ids??t.elementId??t.el;e!==void 0&&(this.ids=e),t.selectors!==void 0&&(this.selectors=t.selectors),t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),t.type!==void 0&&(this.type=t.type)}}class K4{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.force!==void 0&&(this.force=t.force),t.smooth!==void 0&&(this.smooth=t.smooth))}}class Q4{constructor(){this.enable=!1,this.mode=[],this.parallax=new K4}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),this.parallax.load(t.parallax))}}class Z4{constructor(){this.delay=.5,this.enable=!0}load(t){t!==void 0&&(t.delay!==void 0&&(this.delay=t.delay),t.enable!==void 0&&(this.enable=t.enable))}}class J4{constructor(){this.onClick=new W4,this.onDiv=new Hv,this.onHover=new Q4,this.resize=new Z4}get onclick(){return this.onClick}set onclick(t){this.onClick=t}get ondiv(){return this.onDiv}set ondiv(t){this.onDiv=t}get onhover(){return this.onHover}set onhover(t){this.onHover=t}load(t){if(!t)return;this.onClick.load(t.onClick??t.onclick);const e=t.onDiv??t.ondiv;e!==void 0&&(this.onDiv=Vr(e,i=>{const s=new Hv;return s.load(i),s})),this.onHover.load(t.onHover??t.onhover),nr(t.resize)?this.resize.enable=t.resize:this.resize.load(t.resize)}}class t5{constructor(t,e){this._engine=t,this._container=e}load(t){if(!t||!this._container)return;const e=this._engine.plugins.interactors.get(this._container);if(e)for(const i of e)i.loadModeOptions&&i.loadModeOptions(this,t)}}class Sw{constructor(t,e){this.detectsOn="window",this.events=new J4,this.modes=new t5(t,e)}get detect_on(){return this.detectsOn}set detect_on(t){this.detectsOn=t}load(t){if(!t)return;const e=t.detectsOn??t.detect_on;e!==void 0&&(this.detectsOn=e),this.events.load(t.events),this.modes.load(t.modes)}}class e5{load(t){t&&(t.position&&(this.position={x:t.position.x??50,y:t.position.y??50,mode:t.position.mode??"percent"}),t.options&&(this.options=gi({},t.options)))}}class i5{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(t){t&&(t.maxWidth!==void 0&&(this.maxWidth=t.maxWidth),t.mode!==void 0&&(t.mode==="screen"?this.mode="screen":this.mode="canvas"),t.options!==void 0&&(this.options=gi({},t.options)))}}class s5{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(t){t&&(t.auto!==void 0&&(this.auto=t.auto),t.mode!==void 0&&(this.mode=t.mode),t.value!==void 0&&(this.value=t.value))}}class n5{constructor(){this.name="",this.default=new s5}load(t){t&&(t.name!==void 0&&(this.name=t.name),this.default.load(t.default),t.options!==void 0&&(this.options=gi({},t.options)))}}class Gp{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(t){t&&(t.count!==void 0&&(this.count=Kt(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(this.offset=Kt(t.offset)),t.speed!==void 0&&(this.speed=Kt(t.speed)),t.decay!==void 0&&(this.decay=Kt(t.decay)),t.delay!==void 0&&(this.delay=Kt(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class r5{constructor(){this.h=new Gp,this.s=new Gp,this.l=new Gp}load(t){t&&(this.h.load(t.h),this.s.load(t.s),this.l.load(t.l))}}class Kl extends js{constructor(){super(),this.animation=new r5}static create(t,e){const i=new Kl;return i.load(t),e!==void 0&&(Is(e)||Bs(e)?i.load({value:e}):i.load(e)),i}load(t){if(super.load(t),!t)return;const e=t.animation;e!==void 0&&(e.enable!==void 0?this.animation.h.load(e):this.animation.load(t.animation))}}class a5{constructor(){this.speed=2}load(t){t&&t.speed!==void 0&&(this.speed=t.speed)}}class o5{constructor(){this.enable=!0,this.retries=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.retries!==void 0&&(this.retries=t.retries))}}class l5{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(t){t&&(t.count!==void 0&&(this.count=Kt(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=Kt(t.speed)),t.decay!==void 0&&(this.decay=Kt(t.decay)),t.delay!==void 0&&(this.delay=Kt(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class Ew extends l5{constructor(){super(),this.mode="auto",this.startValue="random"}load(t){super.load(t),t&&(t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue),t.mode!==void 0&&(this.mode=t.mode),t.startValue!==void 0&&(this.startValue=t.startValue))}}class c5{constructor(){this.enable=!1,this.minimumValue=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue))}}class cc{constructor(){this.random=new c5,this.value=0}load(t){t&&(nr(t.random)?this.random.enable=t.random:this.random.load(t.random),t.value!==void 0&&(this.value=Kt(t.value,this.random.enable?this.random.minimumValue:void 0)))}}class Uv extends cc{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class xw{constructor(){this.horizontal=new Uv,this.vertical=new Uv}load(t){t&&(this.horizontal.load(t.horizontal),this.vertical.load(t.vertical))}}class h5{constructor(){this.absorb=new a5,this.bounce=new xw,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new o5}load(t){t&&(this.absorb.load(t.absorb),this.bounce.load(t.bounce),t.enable!==void 0&&(this.enable=t.enable),t.maxSpeed!==void 0&&(this.maxSpeed=Kt(t.maxSpeed)),t.mode!==void 0&&(this.mode=t.mode),this.overlap.load(t.overlap))}}class u5{constructor(){this.offset=0,this.value=90}load(t){t&&(t.offset!==void 0&&(this.offset=Kt(t.offset)),t.value!==void 0&&(this.value=Kt(t.value)))}}class d5{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(t){this.rotate.x=t}get rotateY(){return this.rotate.y}set rotateY(t){this.rotate.y=t}load(t){if(!t)return;t.distance!==void 0&&(this.distance=Kt(t.distance)),t.enable!==void 0&&(this.enable=t.enable);const e=t.rotate?.x??t.rotateX;e!==void 0&&(this.rotate.x=e);const i=t.rotate?.y??t.rotateY;i!==void 0&&(this.rotate.y=i)}}class f5{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(t){t&&(t.x!==void 0&&(this.x=t.x),t.y!==void 0&&(this.y=t.y),t.mode!==void 0&&(this.mode=t.mode),t.radius!==void 0&&(this.radius=t.radius))}}class p5{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=Kt(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.inverse!==void 0&&(this.inverse=t.inverse),t.maxSpeed!==void 0&&(this.maxSpeed=Kt(t.maxSpeed)))}}class g5{constructor(){this.clamp=!0,this.delay=new cc,this.enable=!1,this.options={}}load(t){t&&(t.clamp!==void 0&&(this.clamp=t.clamp),this.delay.load(t.delay),t.enable!==void 0&&(this.enable=t.enable),this.generator=t.generator,t.options&&(this.options=gi(this.options,t.options)))}}class m5{load(t){t&&(t.color!==void 0&&(this.color=js.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image))}}class y5{constructor(){this.enable=!1,this.length=10,this.fill=new m5}get fillColor(){return this.fill.color}set fillColor(t){this.fill.load({color:t})}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),(t.fill!==void 0||t.fillColor!==void 0)&&this.fill.load(t.fill||{color:t.fillColor}),t.length!==void 0&&(this.length=t.length))}}class b5{constructor(){this.default="out"}load(t){t&&(t.default!==void 0&&(this.default=t.default),this.bottom=t.bottom??t.default,this.left=t.left??t.default,this.right=t.right??t.default,this.top=t.top??t.default)}}class v5{constructor(){this.acceleration=0,this.enable=!1}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=Kt(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.position&&(this.position=gi({},t.position)))}}class A5{constructor(){this.angle=new u5,this.attract=new d5,this.center=new f5,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new p5,this.path=new g5,this.outModes=new b5,this.random=!1,this.size=!1,this.speed=2,this.spin=new v5,this.straight=!1,this.trail=new y5,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(t){this.collisions=t}get collisions(){return!1}set collisions(t){}get noise(){return this.path}set noise(t){this.path=t}get outMode(){return this.outModes.default}set outMode(t){this.outModes.default=t}get out_mode(){return this.outMode}set out_mode(t){this.outMode=t}load(t){if(!t)return;this.angle.load(Es(t.angle)?{value:t.angle}:t.angle),this.attract.load(t.attract),this.center.load(t.center),t.decay!==void 0&&(this.decay=Kt(t.decay)),t.direction!==void 0&&(this.direction=t.direction),t.distance!==void 0&&(this.distance=Es(t.distance)?{horizontal:t.distance,vertical:t.distance}:{...t.distance}),t.drift!==void 0&&(this.drift=Kt(t.drift)),t.enable!==void 0&&(this.enable=t.enable),this.gravity.load(t.gravity);const e=t.outModes??t.outMode??t.out_mode;e!==void 0&&(Ll(e)?this.outModes.load(e):this.outModes.load({default:e})),this.path.load(t.path??t.noise),t.random!==void 0&&(this.random=t.random),t.size!==void 0&&(this.size=t.size),t.speed!==void 0&&(this.speed=Kt(t.speed)),this.spin.load(t.spin),t.straight!==void 0&&(this.straight=t.straight),this.trail.load(t.trail),t.vibrate!==void 0&&(this.vibrate=t.vibrate),t.warp!==void 0&&(this.warp=t.warp)}}class w5 extends Ew{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(t){this.minimumValue=t}load(t){t?.opacity_min!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.opacity_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class _5 extends cc{constructor(){super(),this.animation=new w5,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(!t)return;super.load(t);const e=t.animation??t.anim;e!==void 0&&(this.animation.load(e),this.value=Kt(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class S5{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(t){this.width=t}get factor(){return this.height}set factor(t){this.height=t}get value_area(){return this.area}set value_area(t){this.area=t}load(t){if(!t)return;t.enable!==void 0&&(this.enable=t.enable);const e=t.width??t.area??t.value_area;e!==void 0&&(this.width=e);const i=t.height??t.factor;i!==void 0&&(this.height=i)}}class E5{constructor(){this.density=new S5,this.limit=0,this.value=0}get max(){return this.limit}set max(t){this.limit=t}load(t){if(!t)return;this.density.load(t.density);const e=t.limit??t.max;e!==void 0&&(this.limit=e),t.value!==void 0&&(this.value=t.value)}}class x5{constructor(){this.blur=0,this.color=new js,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=js.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(t.offset.x!==void 0&&(this.offset.x=t.offset.x),t.offset.y!==void 0&&(this.offset.y=t.offset.y)))}}const Vp="character",qp="char",Xp="image",Yp="images",Wp="polygon",Kp="star";class C5{constructor(){this.loadShape=(t,e,i,s)=>{if(!t)return;const n=Bs(t),a=n?[]:{},o=n!==Bs(this.options[e]),h=n!==Bs(this.options[i]);o&&(this.options[e]=a),h&&s&&(this.options[i]=a),this.options[e]=gi(this.options[e]??a,t),(!this.options[i]||s)&&(this.options[i]=gi(this.options[i]??a,t))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[Vp]??this.options[qp]}set character(t){this.options[qp]=this.options[Vp]=t}get custom(){return this.options}set custom(t){this.options=t}get image(){return this.options[Xp]??this.options[Yp]}set image(t){this.options[Yp]=this.options[Xp]=t}get images(){return this.image}set images(t){this.image=t}get polygon(){return this.options[Wp]??this.options[Kp]}set polygon(t){this.options[Kp]=this.options[Wp]=t}get stroke(){return[]}set stroke(t){}load(t){if(!t)return;const e=t.options??t.custom;if(e!==void 0)for(const i in e){const s=e[i];s&&(this.options[i]=gi(this.options[i]??{},s))}this.loadShape(t.character,Vp,qp,!0),this.loadShape(t.polygon,Wp,Kp,!1),this.loadShape(t.image??t.images,Xp,Yp,!0),t.close!==void 0&&(this.close=t.close),t.fill!==void 0&&(this.fill=t.fill),t.type!==void 0&&(this.type=t.type)}}class T5 extends Ew{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(t){this.minimumValue=t}load(t){t?.size_min!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.size_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class M5 extends cc{constructor(){super(),this.animation=new T5,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(super.load(t),!t)return;const e=t.animation??t.anim;e!==void 0&&(this.animation.load(e),this.value=Kt(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class $v{constructor(){this.width=0}load(t){t&&(t.color!==void 0&&(this.color=Kl.create(this.color,t.color)),t.width!==void 0&&(this.width=Kt(t.width)),t.opacity!==void 0&&(this.opacity=Kt(t.opacity)))}}class D5 extends cc{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(t){super.load(t),t&&(t.opacityRate!==void 0&&(this.opacityRate=t.opacityRate),t.sizeRate!==void 0&&(this.sizeRate=t.sizeRate),t.velocityRate!==void 0&&(this.velocityRate=t.velocityRate))}}class R5{constructor(t,e){this._engine=t,this._container=e,this.bounce=new xw,this.collisions=new h5,this.color=new Kl,this.color.value="#fff",this.groups={},this.move=new A5,this.number=new E5,this.opacity=new _5,this.reduceDuplicates=!1,this.shadow=new x5,this.shape=new C5,this.size=new M5,this.stroke=new $v,this.zIndex=new D5}load(t){if(!t)return;if(this.bounce.load(t.bounce),this.color.load(Kl.create(this.color,t.color)),t.groups!==void 0)for(const s in t.groups){const n=t.groups[s];n!==void 0&&(this.groups[s]=gi(this.groups[s]??{},n))}this.move.load(t.move),this.number.load(t.number),this.opacity.load(t.opacity),t.reduceDuplicates!==void 0&&(this.reduceDuplicates=t.reduceDuplicates),this.shape.load(t.shape),this.size.load(t.size),this.shadow.load(t.shadow),this.zIndex.load(t.zIndex);const e=t.move?.collisions??t.move?.bounce;e!==void 0&&(this.collisions.enable=e),this.collisions.load(t.collisions),t.interactivity!==void 0&&(this.interactivity=gi({},t.interactivity));const i=t.stroke??t.shape?.stroke;if(i&&(this.stroke=Vr(i,s=>{const n=new $v;return n.load(s),n})),this._container){const s=this._engine.plugins.updaters.get(this._container);if(s)for(const a of s)a.loadOptions&&a.loadOptions(this,t);const n=this._engine.plugins.interactors.get(this._container);if(n)for(const a of n)a.loadParticlesOptions&&a.loadParticlesOptions(this,t)}}}function Cw(c,...t){for(const e of t)c.load(e)}function Tw(c,t,...e){const i=new R5(c,t);return Cw(i,...e),i}class k5{constructor(t,e){this._findDefaultTheme=i=>this.themes.find(s=>s.default.value&&s.default.mode===i)??this.themes.find(s=>s.default.value&&s.default.mode==="any"),this._importPreset=i=>{this.load(this._engine.plugins.getPreset(i))},this._engine=t,this._container=e,this.autoPlay=!0,this.background=new V4,this.backgroundMask=new X4,this.defaultThemes={},this.delay=0,this.fullScreen=new Y4,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new Sw(t,e),this.manualParticles=[],this.particles=Tw(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(t){this.fullScreen.load(t)}get fps_limit(){return this.fpsLimit}set fps_limit(t){this.fpsLimit=t}get retina_detect(){return this.detectRetina}set retina_detect(t){this.detectRetina=t}load(t){if(!t)return;t.preset!==void 0&&Vr(t.preset,a=>this._importPreset(a)),t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.delay!==void 0&&(this.delay=Kt(t.delay));const e=t.detectRetina??t.retina_detect;e!==void 0&&(this.detectRetina=e),t.duration!==void 0&&(this.duration=Kt(t.duration));const i=t.fpsLimit??t.fps_limit;i!==void 0&&(this.fpsLimit=i),t.pauseOnBlur!==void 0&&(this.pauseOnBlur=t.pauseOnBlur),t.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=t.pauseOnOutsideViewport),t.zLayers!==void 0&&(this.zLayers=t.zLayers),this.background.load(t.background);const s=t.fullScreen??t.backgroundMode;nr(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(t.backgroundMask),this.interactivity.load(t.interactivity),t.manualParticles&&(this.manualParticles=t.manualParticles.map(a=>{const o=new e5;return o.load(a),o})),this.particles.load(t.particles),this.style=gi(this.style,t.style),this._engine.plugins.loadOptions(this,t),t.smooth!==void 0&&(this.smooth=t.smooth);const n=this._engine.plugins.interactors.get(this._container);if(n)for(const a of n)a.loadOptions&&a.loadOptions(this,t);if(t.responsive!==void 0)for(const a of t.responsive){const o=new i5;o.load(a),this.responsive.push(o)}if(this.responsive.sort((a,o)=>a.maxWidth-o.maxWidth),t.themes!==void 0)for(const a of t.themes){const o=this.themes.find(h=>h.name===a.name);if(o)o.load(a);else{const h=new n5;h.load(a),this.themes.push(h)}}this.defaultThemes.dark=this._findDefaultTheme("dark")?.name,this.defaultThemes.light=this._findDefaultTheme("light")?.name}setResponsive(t,e,i){this.load(i);const s=this.responsive.find(n=>n.mode==="screen"&&screen?n.maxWidth>screen.availWidth:n.maxWidth*e>t);return this.load(s?.options),s?.maxWidth}setTheme(t){if(t){const e=this.themes.find(i=>i.name===t);e&&this.load(e.options)}else{const e=vw("(prefers-color-scheme: dark)"),i=e&&e.matches,s=this._findDefaultTheme(i?"dark":"light");s&&this.load(s.options)}}}class L5{constructor(t,e){this.container=e,this._engine=t,this._interactors=t.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(t){for(const e of this._externalInteractors)e.isEnabled()&&await e.interact(t)}handleClickMode(t){for(const e of this._externalInteractors)e.handleClickMode&&e.handleClickMode(t)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const t of this._interactors){switch(t.type){case"external":this._externalInteractors.push(t);break;case"particles":this._particleInteractors.push(t);break}t.init()}}async particlesInteract(t,e){for(const i of this._externalInteractors)i.clear(t,e);for(const i of this._particleInteractors)i.isEnabled(t)&&await i.interact(t,e)}async reset(t){for(const e of this._externalInteractors)e.isEnabled()&&e.reset(t);for(const e of this._particleInteractors)e.isEnabled(t)&&e.reset(t)}}const Gv=c=>{if(!E4(c.outMode,c.checkModes))return;const t=c.radius*2;c.coord>c.maxCoord-t?c.setCb(-c.radius):c.coord<t&&c.setCb(c.radius)};let O5=class{constructor(t,e,i,s,n,a){this.container=i,this._calcPosition=(o,h,u,f=0)=>{for(const[,x]of o.plugins){const E=x.particlePosition!==void 0?x.particlePosition(h,this):void 0;if(E)return Vi.create(E.x,E.y,u)}const p=o.canvas.size,m=A4({size:p,position:h}),y=Vi.create(m.x,m.y,u),w=this.getRadius(),v=this.options.move.outModes,S=x=>{Gv({outMode:x,checkModes:["bounce","bounce-horizontal"],coord:y.x,maxCoord:o.canvas.size.width,setCb:E=>y.x+=E,radius:w})},_=x=>{Gv({outMode:x,checkModes:["bounce","bounce-vertical"],coord:y.y,maxCoord:o.canvas.size.height,setCb:E=>y.y+=E,radius:w})};return S(v.left??v.default),S(v.right??v.default),_(v.top??v.default),_(v.bottom??v.default),this._checkOverlap(y,f)?this._calcPosition(o,void 0,u,f+1):y},this._calculateVelocity=()=>{const o=v4(this.direction),h=o.copy(),u=this.options.move;if(u.direction==="inside"||u.direction==="outside")return h;const f=Math.PI/180*ge(u.angle.value),p=Math.PI/180*ge(u.angle.offset),m={left:p-f/2,right:p+f/2};return u.straight||(h.angle+=oo(Kt(m.left,m.right))),u.random&&typeof u.speed=="number"&&(h.length*=wn()),h},this._checkOverlap=(o,h=0)=>{const u=this.options.collisions,f=this.getRadius();if(!u.enable)return!1;const p=u.overlap;if(p.enable)return!1;const m=p.retries;if(m>=0&&h>m)throw new Error(`${Gr} particle is overlapping and can't be placed`);return!!this.container.particles.find(y=>xm(o,y.position)<f+y.getRadius())},this._getRollColor=o=>{if(!o||!this.roll||!this.backColor&&!this.roll.alter)return o;const h=this.roll.horizontal&&this.roll.vertical?2:1,u=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+u)/(Math.PI/h))%2?this.backColor?this.backColor:this.roll.alter?H4(o,this.roll.alter.type,this.roll.alter.value):o:o},this._initPosition=o=>{const h=this.container,u=ge(this.options.zIndex.value);this.position=this._calcPosition(h,o,yw(u,0,h.zLayers)),this.initialPosition=this.position.copy();const f=h.canvas.size;switch(this.moveCenter={...Aw(this.options.move.center,f),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=b4(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=ao.origin},this._loadShapeData=(o,h)=>{const u=o.options[this.shape];if(u)return gi({close:o.close,fill:o.fill},$l(u,this.id,h))},this._engine=t,this.init(e,s,n,a)}destroy(t){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const e=this.container,i=this.pathGenerator;for(const[,s]of e.plugins)s.particleDestroyed&&s.particleDestroyed(this,t);for(const s of e.particles.updaters)s.particleDestroyed&&s.particleDestroyed(this,t);i&&i.reset(this)}draw(t){const e=this.container;for(const[,i]of e.plugins)e.canvas.drawParticlePlugin(i,this,t);e.canvas.drawParticle(this,t)}getFillColor(){return this._getRollColor(this.bubble.color??jv(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??jv(this.strokeColor))}init(t,e,i,s){const n=this.container,a=this._engine;this.id=t,this.group=s,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const o=n.retina.pixelRatio,h=n.actualOptions,u=Tw(this._engine,n,h.particles),f=u.shape.type,{reduceDuplicates:p}=u;this.shape=$l(f,this.id,p);const m=u.shape;if(i&&i.shape&&i.shape.type){const E=i.shape.type,R=$l(E,this.id,p);R&&(this.shape=R,m.load(i.shape))}this.shapeData=this._loadShapeData(m,p),u.load(i);const y=this.shapeData;y&&u.load(y.particles);const w=new Sw(a,n);w.load(n.actualOptions.interactivity),w.load(u.interactivity),this.interactivity=w,this.fill=y?.fill??u.shape.fill,this.close=y?.close??u.shape.close,this.options=u;const v=this.options.move.path;this.pathDelay=m4(v.delay)*1e3,v.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(v.generator),this.pathGenerator&&n.addPath(v.generator,this.pathGenerator)&&this.pathGenerator.init(n)),n.retina.initParticle(this),this.size=C4(this.options.size,o),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(e),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-ge(this.options.move.decay);const S=n.particles;S.needsSort=S.needsSort||S.lastZIndex<this.position.z,S.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/n.zLayers,this.sides=24;let _=n.drawers.get(this.shape);_||(_=this._engine.plugins.getShapeDrawer(this.shape),_&&n.drawers.set(this.shape,_)),_&&_.loadShape&&_.loadShape(this);const x=_?.getSidesCount;x&&(this.sides=x(this)),this.spawning=!1,this.shadowColor=lo(this.options.shadow.color);for(const E of n.particles.updaters)E.init(this);for(const E of n.particles.movers)E.init&&E.init(this);_&&_.particleInit&&_.particleInit(n,this);for(const[,E]of n.plugins)E.particleCreated&&E.particleCreated(this)}isInsideCanvas(){const t=this.getRadius(),e=this.container.canvas.size,i=this.position;return i.x>=-t&&i.y>=-t&&i.y<=e.height+t&&i.x<=e.width+t}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const t of this.container.particles.updaters)t.reset&&t.reset(this)}};class P5{constructor(t,e){this.position=t,this.particle=e}}let Mw=class{constructor(t,e){this.position={x:t,y:e}}};class yo extends Mw{constructor(t,e,i,s){super(t,e),this.size={height:s,width:i}}contains(t){const e=this.size.width,i=this.size.height,s=this.position;return t.x>=s.x&&t.x<=s.x+e&&t.y>=s.y&&t.y<=s.y+i}intersects(t){t instanceof qu&&t.intersects(this);const e=this.size.width,i=this.size.height,s=this.position,n=t.position,a=t instanceof yo?t.size:{width:0,height:0},o=a.width,h=a.height;return n.x<s.x+e&&n.x+o>s.x&&n.y<s.y+i&&n.y+h>s.y}}class qu extends Mw{constructor(t,e,i){super(t,e),this.radius=i}contains(t){return xm(t,this.position)<=this.radius}intersects(t){const e=this.position,i=t.position,s={x:Math.abs(i.x-e.x),y:Math.abs(i.y-e.y)},n=this.radius;if(t instanceof qu){const a=n+t.radius,o=Math.sqrt(s.x**2+s.y**2);return a>o}else if(t instanceof yo){const{width:a,height:o}=t.size;return Math.pow(s.x-a,2)+Math.pow(s.y-o,2)<=n**2||s.x<=n+a&&s.y<=n+o||s.x<=a||s.y<=o}return!1}}class Eu{constructor(t,e){this.rectangle=t,this.capacity=e,this._subdivide=()=>{const{x:i,y:s}=this.rectangle.position,{width:n,height:a}=this.rectangle.size,{capacity:o}=this;for(let h=0;h<4;h++)this._subs.push(new Eu(new yo(i+n/2*(h%2),s+a/2*(Math.round(h/2)-h%2),n/2,a/2),o));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(t){return this.rectangle.contains(t.position)?this._points.length<this.capacity?(this._points.push(t),!0):(this._divided||this._subdivide(),this._subs.some(e=>e.insert(t))):!1}query(t,e,i){const s=i||[];if(!t.intersects(this.rectangle))return[];for(const n of this._points)!t.contains(n.position)&&xm(t.position,n.position)>n.particle.getRadius()&&(!e||e(n.particle))||s.push(n.particle);if(this._divided)for(const n of this._subs)n.query(t,e,s);return s}queryCircle(t,e,i){return this.query(new qu(t.x,t.y,e),i)}queryRectangle(t,e,i){return this.query(new yo(t.x,t.y,e.width,e.height),i)}}const Vv=4,qv=c=>new yo(-c.width/4,-c.height/4,c.width*3/2,c.height*3/2);let N5=class{constructor(t,e){this._applyDensity=(s,n,a)=>{if(!s.number.density?.enable)return;const o=s.number,h=this._initDensityFactor(o.density),u=o.value,f=o.limit>0?o.limit:u,p=Math.min(u,f)*h+n,m=Math.min(this.count,this.filter(y=>y.group===a).length);this.limit=o.limit*h,m<p?this.push(Math.abs(p-m),void 0,s,a):m>p&&this.removeQuantity(m-p,a)},this._initDensityFactor=s=>{const n=this._container;if(!n.canvas.element||!s.enable)return 1;const a=n.canvas.element,o=n.retina.pixelRatio;return a.width*a.height/(s.factor*o**2*s.area)},this._pushParticle=(s,n,a,o)=>{try{let h=this.pool.pop();h?h.init(this._nextId,s,n,a):h=new O5(this._engine,this._nextId,this._container,s,n,a);let u=!0;return o&&(u=o(h)),u?(this._array.push(h),this._zArray.push(h),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:h}}),h):void 0}catch(h){Wl().warning(`${Gr} adding particle: ${h}`);return}},this._removeParticle=(s,n,a)=>{const o=this._array[s];if(!o||o.group!==n)return!1;o.destroy(a);const h=this._zArray.indexOf(o);return this._array.splice(s,1),this._zArray.splice(h,1),this.pool.push(o),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:o}}),!0},this._engine=t,this._container=e,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new L5(t,e);const i=e.canvas.size;this.quadTree=new Eu(qv(i),Vv),this.movers=this._engine.plugins.getMovers(e,!0),this.updaters=this._engine.plugins.getUpdaters(e,!0)}get count(){return this._array.length}addManualParticles(){const t=this._container,e=t.actualOptions;for(const i of e.manualParticles)this.addParticle(i.position?Aw(i.position,t.canvas.size):void 0,i.options)}addParticle(t,e,i,s){const n=this._container,a=n.actualOptions,o=a.particles.number.limit;if(o>0){const h=this.count+1-o;h>0&&this.removeQuantity(h)}return this._pushParticle(t,e,i,s)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(t){const e=this._container;e.canvas.clear(),await this.update(t);for(const[,i]of e.plugins)e.canvas.drawPlugin(i,t);for(const i of this._zArray)i.draw(t)}filter(t){return this._array.filter(t)}find(t){return this._array.find(t)}handleClickMode(t){this._interactionManager.handleClickMode(t)}init(){const t=this._container,e=t.actualOptions;this.lastZIndex=0,this.needsSort=!1;let i=!1;this.updaters=this._engine.plugins.getUpdaters(t,!0),this._interactionManager.init();for(const[,s]of t.plugins)if(s.particlesInitialization!==void 0&&(i=s.particlesInitialization()),i)break;this._interactionManager.init();for(const[,s]of t.pathGenerators)s.init(t);if(this.addManualParticles(),!i){for(const s in e.particles.groups){const n=e.particles.groups[s];for(let a=this.count,o=0;o<n.number?.value&&a<e.particles.number.value;a++,o++)this.addParticle(void 0,n,s)}for(let s=this.count;s<e.particles.number.value;s++)this.addParticle()}}push(t,e,i,s){this.pushing=!0;for(let n=0;n<t;n++)this.addParticle(e?.position,i,s);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(t,e,i){this.removeAt(this._array.indexOf(t),void 0,e,i)}removeAt(t,e=1,i,s){if(t<0||t>this.count)return;let n=0;for(let a=t;n<e&&a<this.count;a++)this._removeParticle(a--,i,s)&&n++}removeQuantity(t,e){this.removeAt(0,t,e)}setDensity(){const t=this._container.actualOptions,e=t.particles.groups;for(const i in e)this._applyDensity(e[i],0,i);this._applyDensity(t.particles,t.manualParticles.length)}async update(t){const e=this._container,i=new Set;this.quadTree=new Eu(qv(e.canvas.size),Vv);for(const[,s]of e.pathGenerators)s.update();for(const[,s]of e.plugins)s.update&&s.update(t);for(const s of this._array){const n=e.canvas.resizeFactor;n&&!s.ignoresResizeRatio&&(s.position.x*=n.width,s.position.y*=n.height,s.initialPosition.x*=n.width,s.initialPosition.y*=n.height),s.ignoresResizeRatio=!1,await this._interactionManager.reset(s);for(const[,a]of this._container.plugins){if(s.destroyed)break;a.particleUpdate&&a.particleUpdate(s,t)}for(const a of this.movers)a.isEnabled(s)&&a.move(s,t);if(s.destroyed){i.add(s);continue}this.quadTree.insert(new P5(s.getPosition(),s))}if(i.size){const s=n=>!i.has(n);this._array=this.filter(s),this._zArray=this._zArray.filter(s),this.pool.push(...i)}await this._interactionManager.externalInteract(t);for(const s of this._array){for(const n of this.updaters)n.update(s,t);!s.destroyed&&!s.spawning&&await this._interactionManager.particlesInteract(s,t)}if(delete e.canvas.resizeFactor,this.needsSort){const s=this._zArray;s.sort((n,a)=>a.position.z-n.position.z||n.id-a.id),this.lastZIndex=s[s.length-1].position.z,this.needsSort=!1}}};class F5{constructor(t){this.container=t,this.pixelRatio=1,this.reduceFactor=1}init(){const t=this.container,e=t.actualOptions;this.pixelRatio=!e.detectRetina||Gu()?1:window.devicePixelRatio,this.reduceFactor=1;const i=this.pixelRatio;if(t.canvas.element){const a=t.canvas.element;t.canvas.size.width=a.offsetWidth*i,t.canvas.size.height=a.offsetHeight*i}const s=e.particles,n=s.move;this.attractDistance=ge(n.attract.distance)*i,this.maxSpeed=ge(n.gravity.maxSpeed)*i,this.sizeAnimationSpeed=ge(s.size.animation.speed)*i}initParticle(t){const e=t.options,i=this.pixelRatio,s=e.move,n=s.distance,a=t.retina;a.attractDistance=ge(s.attract.distance)*i,a.moveDrift=ge(s.drift)*i,a.moveSpeed=ge(s.speed)*i,a.sizeAnimationSpeed=ge(e.size.animation.speed)*i;const o=a.maxDistance;o.horizontal=n.horizontal!==void 0?n.horizontal*i:void 0,o.vertical=n.vertical!==void 0?n.vertical*i:void 0,a.maxSpeed=ge(s.gravity.maxSpeed)*i}}function _e(c){return c&&!c.destroyed}function I5(c,t=60,e=!1){return{value:c,factor:e?60/t:60*c/1e3}}function Ga(c,t,...e){const i=new k5(c,t);return Cw(i,...e),i}const B5="default",Xv={generate:c=>c.velocity,init:()=>{},update:()=>{},reset:()=>{}};class z5{constructor(t,e,i){this.id=e,this._intersectionManager=s=>{if(!(!_e(this)||!this.actualOptions.pauseOnOutsideViewport))for(const n of s)n.target===this.interactivity.element&&(n.isIntersecting?this.play:this.pause)()},this._nextFrame=async s=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&s<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??=s;const n=I5(s-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(n.value),this.lastFrameTime=s,n.value>1e3){this.draw(!1);return}if(await this.particles.draw(n),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(n){Wl().error(`${Gr} in animation loop`,n)}},this._engine=t,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new F5(this),this.canvas=new $4(this),this.particles=new N5(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Ga(this._engine,this),this.actualOptions=Ga(this._engine,this),this._eventListeners=new G4(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(s=>this._intersectionManager(s))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(t){if(!_e(this))return;const e=this.interactivity.element;if(!e)return;const i=(p,m,y)=>{if(!_e(this))return;const w=this.retina.pixelRatio,v={x:m.x*w,y:m.y*w},S=this.particles.quadTree.queryCircle(v,y*w);t(p,S)},s=p=>{if(!_e(this))return;const m=p,y={x:m.offsetX||m.clientX,y:m.offsetY||m.clientY};i(p,y,1)},n=()=>{_e(this)&&(u=!0,f=!1)},a=()=>{_e(this)&&(f=!0)},o=p=>{if(_e(this)){if(u&&!f){const m=p;let y=m.touches[m.touches.length-1];if(!y&&(y=m.changedTouches[m.changedTouches.length-1],!y))return;const w=this.canvas.element,v=w?w.getBoundingClientRect():void 0,S={x:y.clientX-(v?v.left:0),y:y.clientY-(v?v.top:0)};i(p,S,Math.max(y.radiusX,y.radiusY))}u=!1,f=!1}},h=()=>{_e(this)&&(u=!1,f=!1)};let u=!1,f=!1;e.addEventListener("click",s),e.addEventListener("touchstart",n),e.addEventListener("touchmove",a),e.addEventListener("touchend",o),e.addEventListener("touchcancel",h)}addLifeTime(t){this._lifeTime+=t}addPath(t,e,i=!1){return!_e(this)||!i&&this.pathGenerators.has(t)?!1:(this.pathGenerators.set(t,e??Xv),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!_e(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,i]of this.drawers)i.destroy&&i.destroy(this);for(const i of this.drawers.keys())this.drawers.delete(i);this._engine.plugins.destroy(this),this.destroyed=!0;const t=this._engine.dom(),e=t.findIndex(i=>i===this);e>=0&&t.splice(e,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(t){if(!_e(this))return;let e=t;this._drawAnimationFrame=requestAnimationFrame(async i=>{e&&(this.lastFrameTime=void 0,e=!1),await this._nextFrame(i)})}async export(t,e={}){for(const[,i]of this.plugins){if(!i.export)continue;const s=await i.export(t,e);if(s.supported)return s.blob}Wl().error(`${Gr} - Export plugin with type ${t} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&_e(this)}handleClickMode(t){if(_e(this)){this.particles.handleClickMode(t);for(const[,e]of this.plugins)e.handleClickMode&&e.handleClickMode(t)}}async init(){if(!_e(this))return;const t=this._engine.plugins.getSupportedShapes();for(const i of t){const s=this._engine.plugins.getShapeDrawer(i);s&&this.drawers.set(i,s)}this._options=Ga(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Ga(this._engine,this,this._options);const e=this._engine.plugins.getAvailablePlugins(this);for(const[i,s]of e)this.plugins.set(i,s);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=ge(this.actualOptions.duration)*1e3,this._delay=ge(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,i]of this.drawers)i.init&&await i.init(this);for(const[,i]of this.plugins)i.init&&await i.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,i]of this.plugins)i.particlesSetup&&i.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(t){_e(this)&&(this._currentTheme=t,await this.refresh())}pause(){if(_e(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,t]of this.plugins)t.pause&&t.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(t){if(!_e(this))return;const e=this._paused||t;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),e)for(const[,i]of this.plugins)i.play&&i.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(e||!1)}async refresh(){if(_e(this))return this.stop(),this.start()}async reset(){if(_e(this))return this._initialSourceOptions=void 0,this._options=Ga(this._engine,this),this.actualOptions=Ga(this._engine,this,this._options),this.refresh()}setNoise(t,e,i){_e(this)&&this.setPath(t,e,i)}setPath(t,e,i){if(!t||!_e(this))return;const s={...Xv};if(ww(t))s.generate=t,e&&(s.init=e),i&&(s.update=i);else{const n=s;s.generate=t.generate||n.generate,s.init=t.init||n.init,s.update=t.update||n.update}this.addPath(B5,s,!0)}async start(){!_e(this)||this.started||(await this.init(),this.started=!0,await new Promise(t=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,e]of this.plugins)e.start&&await e.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),t()},this._delay)}))}stop(){if(!(!_e(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,t]of this.plugins)t.stop&&t.stop();for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const t=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===t?!1:(this.responsiveMaxWidth=t,!0)}}class j5{constructor(){this._listeners=new Map}addEventListener(t,e){this.removeEventListener(t,e);let i=this._listeners.get(t);i||(i=[],this._listeners.set(t,i)),i.push(e)}dispatchEvent(t,e){const i=this._listeners.get(t);i&&i.forEach(s=>s(e))}hasEventListener(t){return!!this._listeners.get(t)}removeAllEventListeners(t){t?this._listeners.delete(t):this._listeners=new Map}removeEventListener(t,e){const i=this._listeners.get(t);if(!i)return;const s=i.length,n=i.indexOf(e);n<0||(s===1?this._listeners.delete(t):i.splice(n,1))}}function Qp(c,t,e,i=!1){let s=t.get(c);return(!s||i)&&(s=[...e.values()].map(n=>n(c)),t.set(c,s)),s}class H5{constructor(t){this._engine=t,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(t,e){this._initializers.interactors.set(t,e)}addParticleMover(t,e){this._initializers.movers.set(t,e)}addParticleUpdater(t,e){this._initializers.updaters.set(t,e)}addPathGenerator(t,e){!this.getPathGenerator(t)&&this.pathGenerators.set(t,e)}addPlugin(t){!this.getPlugin(t.id)&&this.plugins.push(t)}addPreset(t,e,i=!1){(i||!this.getPreset(t))&&this.presets.set(t,e)}addShapeDrawer(t,e){Vr(t,i=>{!this.getShapeDrawer(i)&&this.drawers.set(i,e)})}destroy(t){this.updaters.delete(t),this.movers.delete(t),this.interactors.delete(t)}getAvailablePlugins(t){const e=new Map;for(const i of this.plugins)i.needsPlugin(t.actualOptions)&&e.set(i.id,i.getPlugin(t));return e}getInteractors(t,e=!1){return Qp(t,this.interactors,this._initializers.interactors,e)}getMovers(t,e=!1){return Qp(t,this.movers,this._initializers.movers,e)}getPathGenerator(t){return this.pathGenerators.get(t)}getPlugin(t){return this.plugins.find(e=>e.id===t)}getPreset(t){return this.presets.get(t)}getShapeDrawer(t){return this.drawers.get(t)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(t,e=!1){return Qp(t,this.updaters,this._initializers.updaters,e)}loadOptions(t,e){for(const i of this.plugins)i.loadOptions(t,e)}loadParticlesOptions(t,e,...i){const s=this.updaters.get(t);if(s)for(const n of s)n.loadOptions&&n.loadOptions(e,...i)}}async function U5(c){const t=$l(c.url,c.index);if(!t)return c.fallback;const e=await fetch(t);return e.ok?e.json():(Wl().error(`${Gr} ${e.status} while retrieving config file`),c.fallback)}function $5(c){return!c.id&&!c.element&&!c.url&&!c.options}function G5(c){return!$5(c)}class V5{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new j5,this._initialized=!1,this.plugins=new H5(this)}get configs(){const t={};for(const[e,i]of this._configs)t[e]=i;return t}get version(){return"2.12.0"}addConfig(t,e){Is(t)?e&&(e.name=t,this._configs.set(t,e)):this._configs.set(t.name??"default",t)}addEventListener(t,e){this._eventDispatcher.addEventListener(t,e)}async addInteractor(t,e,i=!0){this.plugins.addInteractor(t,e),await this.refresh(i)}async addMover(t,e,i=!0){this.plugins.addParticleMover(t,e),await this.refresh(i)}async addParticleUpdater(t,e,i=!0){this.plugins.addParticleUpdater(t,e),await this.refresh(i)}async addPathGenerator(t,e,i=!0){this.plugins.addPathGenerator(t,e),await this.refresh(i)}async addPlugin(t,e=!0){this.plugins.addPlugin(t),await this.refresh(e)}async addPreset(t,e,i=!1,s=!0){this.plugins.addPreset(t,e,i),await this.refresh(s)}async addShape(t,e,i,s,n,a=!0){let o,h=a,u,f,p;nr(i)?(h=i,u=void 0):u=i,nr(s)?(h=s,f=void 0):f=s,nr(n)?(h=n,p=void 0):p=n,ww(e)?o={afterEffect:f,destroy:p,draw:e,init:u}:o=e,this.plugins.addShapeDrawer(t,o),await this.refresh(h)}dispatchEvent(t,e){this._eventDispatcher.dispatchEvent(t,e)}dom(){return this._domArray}domItem(t){const e=this.dom(),i=e[t];if(!i||i.destroyed){e.splice(t,1);return}return i}init(){this._initialized||(this._initialized=!0)}async load(t,e){return this.loadFromArray(t,e)}async loadFromArray(t,e,i){let s;return G5(t)?s=t:(s={},Is(t)?s.id=t:s.options=t,Es(e)?s.index=e:s.options=e??s.options,s.index=i??s.index),this._loadParams(s)}async loadJSON(t,e,i){let s,n;return Es(e)||e===void 0?s=t:(n=t,s=e),this._loadParams({id:n,url:s,index:i})}async refresh(t=!0){t&&this.dom().forEach(e=>e.refresh())}removeEventListener(t,e){this._eventDispatcher.removeEventListener(t,e)}async set(t,e,i,s){const n={index:s};return Is(t)?n.id=t:n.element=t,e instanceof HTMLElement?n.element=e:n.options=e,Es(i)?n.index=i:n.options=i??n.options,this._loadParams(n)}async setJSON(t,e,i,s){const n={};return t instanceof HTMLElement?(n.element=t,n.url=e,n.index=i):(n.id=t,n.element=e,n.url=i,n.index=s),this._loadParams(n)}setOnClickHandler(t){const e=this.dom();if(!e.length)throw new Error(`${Gr} can only set click handlers after calling tsParticles.load()`);for(const i of e)i.addClickHandler(t)}async _loadParams(t){const e=t.id??`tsparticles${Math.floor(wn()*1e4)}`,{index:i,url:s}=t,n=s?await U5({fallback:t.options,url:s,index:i}):t.options;let a=t.element??document.getElementById(e);a||(a=document.createElement("div"),a.id=e,document.body.append(a));const o=$l(n,i),h=this.dom(),u=h.findIndex(m=>m.id===e);if(u>=0){const m=this.domItem(u);m&&!m.destroyed&&(m.destroy(),h.splice(u,1))}let f;if(a.tagName.toLowerCase()==="canvas")f=a,f.dataset[Ul]="false";else{const m=a.getElementsByTagName("canvas");m.length?(f=m[0],f.dataset[Ul]="false"):(f=document.createElement("canvas"),f.dataset[Ul]="true",a.appendChild(f))}f.style.width||(f.style.width="100%"),f.style.height||(f.style.height="100%");const p=new z5(this,e,o);return u>=0?h.splice(u,0,p):h.push(p),p.canvas.loadCanvas(f),await p.start(),p}}class q5{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(t){const e=t.value,i=e.hsl??t.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return Tg(i)}handleRangeColor(t){const e=t.value,i=e.hsl??t.value;if(i.h!==void 0&&i.l!==void 0)return Tg({h:ge(i.h),l:ge(i.l),s:ge(i.s)})}parseString(t){if(!t.startsWith("hsl"))return;const e=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,i=e.exec(t);return i?L4({a:i.length>4?bw(i[5]):1,h:parseInt(i[1],10),l:parseInt(i[3],10),s:parseInt(i[2],10)}):void 0}}class X5{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(t){const e=t.value,i=e.rgb??t.value;if(i.r!==void 0)return i}handleRangeColor(t){const e=t.value,i=e.rgb??t.value;if(i.r!==void 0)return{r:ge(i.r),g:ge(i.g),b:ge(i.b)}}parseString(t){if(!t.startsWith(this.stringPrefix))return;const e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,i=e.exec(t);return i?{a:i.length>4?bw(i[5]):1,b:parseInt(i[3],10),g:parseInt(i[2],10),r:parseInt(i[1],10)}:void 0}}function Y5(){const c=new X5,t=new q5;Iv(c),Iv(t);const e=new V5;return e.init(),e}const Mg=Y5();Gu()||(window.tsParticles=Mg);const eo=c=>typeof c=="object"&&c!==null;function xu(c,t,e=()=>!1){if(!eo(c)||!eo(t))return c===t;const i=Object.keys(c).filter(n=>!e(n)),s=Object.keys(t).filter(n=>!e(n));if(i.length!==s.length)return!1;for(const n of i){const a=c[n],o=t[n];if(eo(a)&&eo(o)){if(a===t&&o===c)continue;if(!xu(a,o,e))return!1}else if(Array.isArray(a)&&Array.isArray(o)){if(!Dw(a,o,e))return!1}else if(a!==o)return!1}return!0}function Dw(c,t,e){if(c.length!==t.length)return!1;for(let i=0;i<c.length;i++){const s=c[i],n=t[i];if(Array.isArray(s)&&Array.isArray(n)){if(!Dw(s,n,e))return!1}else if(eo(s)&&eo(n)){if(!xu(s,n,e))return!1}else if(s!==n)return!1}return!0}const Rw="tsparticles";class Xu extends F.Component{constructor(t){super(t),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(t){const e=t.options??t.params,i=this.props.options??this.props.params;return t.url!==this.props.url||t.id!==this.props.id||t.canvasClassName!==this.props.canvasClassName||t.className!==this.props.className||t.height!==this.props.height||t.width!==this.props.width||!xu(t.style,this.props.style)||t.init!==this.props.init||t.loaded!==this.props.loaded||!xu(e,i,s=>s.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(Mg),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:t,height:e,className:i,canvasClassName:s,id:n}=this.props;return We.createElement("div",{className:i,id:n},We.createElement("canvas",{className:s,style:{...this.props.style,width:t,height:e}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const t=this.props.id??Xu.defaultProps.id??Rw,e=await Mg.load({url:this.props.url,id:t,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=e),this.setState({library:e}),this.props.loaded&&await this.props.loaded(e)}}Xu.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:Rw};function Yu(){return T.jsx(Xu,{id:"tsparticles",params:{particles:{number:{value:160,density:{enable:!0,value_area:1500}},line_linked:{enable:!1,opacity:.03},move:{direction:"right",speed:.05},size:{value:1},opacity:{anim:{enable:!0,speed:1,opacity_min:.05}}},interactivity:{events:{onclick:{enable:!0,mode:"push"}},modes:{push:{particles_nb:1}}},retina_detect:!0}})}var cu={exports:{}},W5=cu.exports,Yv;function K5(){return Yv||(Yv=1,(function(c,t){(function(e,i){c.exports=i(Nu())})(typeof self<"u"?self:W5,(e=>(()=>{var i={2:(o,h,u)=>{var f=u(2199),p=u(4664),m=u(5950);o.exports=function(y){return f(y,m,p)}},79:(o,h,u)=>{var f=u(3702),p=u(80),m=u(4739),y=u(8655),w=u(1175);function v(S){var _=-1,x=S==null?0:S.length;for(this.clear();++_<x;){var E=S[_];this.set(E[0],E[1])}}v.prototype.clear=f,v.prototype.delete=p,v.prototype.get=m,v.prototype.has=y,v.prototype.set=w,o.exports=v},80:(o,h,u)=>{var f=u(6025),p=Array.prototype.splice;o.exports=function(m){var y=this.__data__,w=f(y,m);return!(w<0||(w==y.length-1?y.pop():p.call(y,w,1),--this.size,0))}},270:(o,h,u)=>{var f=u(7068),p=u(346);o.exports=function m(y,w,v,S,_){return y===w||(y==null||w==null||!p(y)&&!p(w)?y!=y&&w!=w:f(y,w,v,S,m,_))}},289:(o,h,u)=>{var f=u(2651);o.exports=function(p){return f(this,p).get(p)}},294:o=>{o.exports=function(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=9007199254740991}},317:o=>{o.exports=function(h){var u=-1,f=Array(h.size);return h.forEach((function(p,m){f[++u]=[m,p]})),f}},346:o=>{o.exports=function(h){return h!=null&&typeof h=="object"}},361:o=>{var h=/^(?:0|[1-9]\d*)$/;o.exports=function(u,f){var p=typeof u;return!!(f=f??9007199254740991)&&(p=="number"||p!="symbol"&&h.test(u))&&u>-1&&u%1==0&&u<f}},392:o=>{o.exports=function(h,u){return h?.[u]}},659:(o,h,u)=>{var f=u(1873),p=Object.prototype,m=p.hasOwnProperty,y=p.toString,w=f?f.toStringTag:void 0;o.exports=function(v){var S=m.call(v,w),_=v[w];try{v[w]=void 0;var x=!0}catch{}var E=y.call(v);return x&&(S?v[w]=_:delete v[w]),E}},689:(o,h,u)=>{var f=u(2),p=Object.prototype.hasOwnProperty;o.exports=function(m,y,w,v,S,_){var x=1&w,E=f(m),R=E.length;if(R!=f(y).length&&!x)return!1;for(var D=R;D--;){var M=E[D];if(!(x?M in y:p.call(y,M)))return!1}var k=_.get(m),N=_.get(y);if(k&&N)return k==y&&N==m;var I=!0;_.set(m,y),_.set(y,m);for(var G=x;++D<R;){var j=m[M=E[D]],tt=y[M];if(v)var ot=x?v(tt,j,M,y,m,_):v(j,tt,M,m,y,_);if(!(ot===void 0?j===tt||S(j,tt,w,v,_):ot)){I=!1;break}G||(G=M=="constructor")}if(I&&!G){var rt=m.constructor,lt=y.constructor;rt==lt||!("constructor"in m)||!("constructor"in y)||typeof rt=="function"&&rt instanceof rt&&typeof lt=="function"&&lt instanceof lt||(I=!1)}return _.delete(m),_.delete(y),I}},695:(o,h,u)=>{var f=u(8096),p=u(2428),m=u(6449),y=u(3656),w=u(361),v=u(7167),S=Object.prototype.hasOwnProperty;o.exports=function(_,x){var E=m(_),R=!E&&p(_),D=!E&&!R&&y(_),M=!E&&!R&&!D&&v(_),k=E||R||D||M,N=k?f(_.length,String):[],I=N.length;for(var G in _)!x&&!S.call(_,G)||k&&(G=="length"||D&&(G=="offset"||G=="parent")||M&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||w(G,I))||N.push(G);return N}},938:o=>{o.exports=function(h){var u=this.__data__,f=u.delete(h);return this.size=u.size,f}},945:(o,h,u)=>{var f=u(79),p=u(8223),m=u(3661);o.exports=function(y,w){var v=this.__data__;if(v instanceof f){var S=v.__data__;if(!p||S.length<199)return S.push([y,w]),this.size=++v.size,this;v=this.__data__=new m(S)}return v.set(y,w),this.size=v.size,this}},1042:(o,h,u)=>{var f=u(6110)(Object,"create");o.exports=f},1175:(o,h,u)=>{var f=u(6025);o.exports=function(p,m){var y=this.__data__,w=f(y,p);return w<0?(++this.size,y.push([p,m])):y[w][1]=m,this}},1380:o=>{o.exports=function(h){return this.__data__.set(h,"__lodash_hash_undefined__"),this}},1420:(o,h,u)=>{var f=u(79);o.exports=function(){this.__data__=new f,this.size=0}},1459:o=>{o.exports=function(h){return this.__data__.has(h)}},1549:(o,h,u)=>{var f=u(2032),p=u(3862),m=u(6721),y=u(2749),w=u(5749);function v(S){var _=-1,x=S==null?0:S.length;for(this.clear();++_<x;){var E=S[_];this.set(E[0],E[1])}}v.prototype.clear=f,v.prototype.delete=p,v.prototype.get=m,v.prototype.has=y,v.prototype.set=w,o.exports=v},1873:(o,h,u)=>{var f=u(9325).Symbol;o.exports=f},1882:(o,h,u)=>{var f=u(2552),p=u(3805);o.exports=function(m){if(!p(m))return!1;var y=f(m);return y=="[object Function]"||y=="[object GeneratorFunction]"||y=="[object AsyncFunction]"||y=="[object Proxy]"}},1986:(o,h,u)=>{var f=u(1873),p=u(7828),m=u(5288),y=u(5911),w=u(317),v=u(4247),S=f?f.prototype:void 0,_=S?S.valueOf:void 0;o.exports=function(x,E,R,D,M,k,N){switch(R){case"[object DataView]":if(x.byteLength!=E.byteLength||x.byteOffset!=E.byteOffset)return!1;x=x.buffer,E=E.buffer;case"[object ArrayBuffer]":return!(x.byteLength!=E.byteLength||!k(new p(x),new p(E)));case"[object Boolean]":case"[object Date]":case"[object Number]":return m(+x,+E);case"[object Error]":return x.name==E.name&&x.message==E.message;case"[object RegExp]":case"[object String]":return x==E+"";case"[object Map]":var I=w;case"[object Set]":var G=1&D;if(I||(I=v),x.size!=E.size&&!G)return!1;var j=N.get(x);if(j)return j==E;D|=2,N.set(x,E);var tt=y(I(x),I(E),D,M,k,N);return N.delete(x),tt;case"[object Symbol]":if(_)return _.call(x)==_.call(E)}return!1}},2032:(o,h,u)=>{var f=u(1042);o.exports=function(){this.__data__=f?f(null):{},this.size=0}},2199:(o,h,u)=>{var f=u(4528),p=u(6449);o.exports=function(m,y,w){var v=y(m);return p(m)?v:f(v,w(m))}},2404:(o,h,u)=>{var f=u(270);o.exports=function(p,m){return f(p,m)}},2428:(o,h,u)=>{var f=u(7534),p=u(346),m=Object.prototype,y=m.hasOwnProperty,w=m.propertyIsEnumerable,v=f((function(){return arguments})())?f:function(S){return p(S)&&y.call(S,"callee")&&!w.call(S,"callee")};o.exports=v},2552:(o,h,u)=>{var f=u(1873),p=u(659),m=u(9350),y=f?f.toStringTag:void 0;o.exports=function(w){return w==null?w===void 0?"[object Undefined]":"[object Null]":y&&y in Object(w)?p(w):m(w)}},2651:(o,h,u)=>{var f=u(4218);o.exports=function(p,m){var y=p.__data__;return f(m)?y[typeof m=="string"?"string":"hash"]:y.map}},2749:(o,h,u)=>{var f=u(1042),p=Object.prototype.hasOwnProperty;o.exports=function(m){var y=this.__data__;return f?y[m]!==void 0:p.call(y,m)}},2804:(o,h,u)=>{var f=u(6110)(u(9325),"Promise");o.exports=f},2949:(o,h,u)=>{var f=u(2651);o.exports=function(p,m){var y=f(this,p),w=y.size;return y.set(p,m),this.size+=y.size==w?0:1,this}},3040:(o,h,u)=>{var f=u(1549),p=u(79),m=u(8223);o.exports=function(){this.size=0,this.__data__={hash:new f,map:new(m||p),string:new f}}},3146:(o,h,u)=>{for(var f=u(3491),p=typeof window>"u"?u.g:window,m=["moz","webkit"],y="AnimationFrame",w=p["request"+y],v=p["cancel"+y]||p["cancelRequest"+y],S=0;!w&&S<m.length;S++)w=p[m[S]+"Request"+y],v=p[m[S]+"Cancel"+y]||p[m[S]+"CancelRequest"+y];if(!w||!v){var _=0,x=0,E=[],R=1e3/60;w=function(D){if(E.length===0){var M=f(),k=Math.max(0,R-(M-_));_=k+M,setTimeout((function(){var N=E.slice(0);E.length=0;for(var I=0;I<N.length;I++)if(!N[I].cancelled)try{N[I].callback(_)}catch(G){setTimeout((function(){throw G}),0)}}),Math.round(k))}return E.push({handle:++x,callback:D,cancelled:!1}),x},v=function(D){for(var M=0;M<E.length;M++)E[M].handle===D&&(E[M].cancelled=!0)}}o.exports=function(D){return w.call(p,D)},o.exports.cancel=function(){v.apply(p,arguments)},o.exports.polyfill=function(D){D||(D=p),D.requestAnimationFrame=w,D.cancelAnimationFrame=v}},3345:o=>{o.exports=function(){return[]}},3491:function(o){(function(){var h,u,f,p,m,y;typeof performance<"u"&&performance!==null&&performance.now?o.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(o.exports=function(){return(h()-m)/1e6},u=process.hrtime,p=(h=function(){var w;return 1e9*(w=u())[0]+w[1]})(),y=1e9*process.uptime(),m=p-y):Date.now?(o.exports=function(){return Date.now()-f},f=Date.now()):(o.exports=function(){return new Date().getTime()-f},f=new Date().getTime())}).call(this)},3605:o=>{o.exports=function(h){return this.__data__.get(h)}},3650:(o,h,u)=>{var f=u(4335)(Object.keys,Object);o.exports=f},3656:(o,h,u)=>{o=u.nmd(o);var f=u(9325),p=u(9935),m=h&&!h.nodeType&&h,y=m&&o&&!o.nodeType&&o,w=y&&y.exports===m?f.Buffer:void 0,v=(w?w.isBuffer:void 0)||p;o.exports=v},3661:(o,h,u)=>{var f=u(3040),p=u(7670),m=u(289),y=u(4509),w=u(2949);function v(S){var _=-1,x=S==null?0:S.length;for(this.clear();++_<x;){var E=S[_];this.set(E[0],E[1])}}v.prototype.clear=f,v.prototype.delete=p,v.prototype.get=m,v.prototype.has=y,v.prototype.set=w,o.exports=v},3702:o=>{o.exports=function(){this.__data__=[],this.size=0}},3805:o=>{o.exports=function(h){var u=typeof h;return h!=null&&(u=="object"||u=="function")}},3862:o=>{o.exports=function(h){var u=this.has(h)&&delete this.__data__[h];return this.size-=u?1:0,u}},4218:o=>{o.exports=function(h){var u=typeof h;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?h!=="__proto__":h===null}},4247:o=>{o.exports=function(h){var u=-1,f=Array(h.size);return h.forEach((function(p){f[++u]=p})),f}},4248:o=>{o.exports=function(h,u){for(var f=-1,p=h==null?0:h.length;++f<p;)if(u(h[f],f,h))return!0;return!1}},4335:o=>{o.exports=function(h,u){return function(f){return h(u(f))}}},4509:(o,h,u)=>{var f=u(2651);o.exports=function(p){return f(this,p).has(p)}},4528:o=>{o.exports=function(h,u){for(var f=-1,p=u.length,m=h.length;++f<p;)h[m+f]=u[f];return h}},4664:(o,h,u)=>{var f=u(9770),p=u(3345),m=Object.prototype.propertyIsEnumerable,y=Object.getOwnPropertySymbols,w=y?function(v){return v==null?[]:(v=Object(v),f(y(v),(function(S){return m.call(v,S)})))}:p;o.exports=w},4739:(o,h,u)=>{var f=u(6025);o.exports=function(p){var m=this.__data__,y=f(m,p);return y<0?void 0:m[y][1]}},4840:(o,h,u)=>{var f=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g;o.exports=f},4894:(o,h,u)=>{var f=u(1882),p=u(294);o.exports=function(m){return m!=null&&p(m.length)&&!f(m)}},4901:(o,h,u)=>{var f=u(2552),p=u(294),m=u(346),y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y["[object Arguments]"]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y["[object Map]"]=y["[object Number]"]=y["[object Object]"]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1,o.exports=function(w){return m(w)&&p(w.length)&&!!y[f(w)]}},5083:(o,h,u)=>{var f=u(1882),p=u(7296),m=u(3805),y=u(7473),w=/^\[object .+?Constructor\]$/,v=Function.prototype,S=Object.prototype,_=v.toString,x=S.hasOwnProperty,E=RegExp("^"+_.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");o.exports=function(R){return!(!m(R)||p(R))&&(f(R)?E:w).test(y(R))}},5288:o=>{o.exports=function(h,u){return h===u||h!=h&&u!=u}},5481:(o,h,u)=>{var f=u(9325)["__core-js_shared__"];o.exports=f},5527:o=>{var h=Object.prototype;o.exports=function(u){var f=u&&u.constructor;return u===(typeof f=="function"&&f.prototype||h)}},5580:(o,h,u)=>{var f=u(6110)(u(9325),"DataView");o.exports=f},5749:(o,h,u)=>{var f=u(1042);o.exports=function(p,m){var y=this.__data__;return this.size+=this.has(p)?0:1,y[p]=f&&m===void 0?"__lodash_hash_undefined__":m,this}},5861:(o,h,u)=>{var f=u(5580),p=u(8223),m=u(2804),y=u(6545),w=u(8303),v=u(2552),S=u(7473),_="[object Map]",x="[object Promise]",E="[object Set]",R="[object WeakMap]",D="[object DataView]",M=S(f),k=S(p),N=S(m),I=S(y),G=S(w),j=v;(f&&j(new f(new ArrayBuffer(1)))!=D||p&&j(new p)!=_||m&&j(m.resolve())!=x||y&&j(new y)!=E||w&&j(new w)!=R)&&(j=function(tt){var ot=v(tt),rt=ot=="[object Object]"?tt.constructor:void 0,lt=rt?S(rt):"";if(lt)switch(lt){case M:return D;case k:return _;case N:return x;case I:return E;case G:return R}return ot}),o.exports=j},5911:(o,h,u)=>{var f=u(8859),p=u(4248),m=u(9219);o.exports=function(y,w,v,S,_,x){var E=1&v,R=y.length,D=w.length;if(R!=D&&!(E&&D>R))return!1;var M=x.get(y),k=x.get(w);if(M&&k)return M==w&&k==y;var N=-1,I=!0,G=2&v?new f:void 0;for(x.set(y,w),x.set(w,y);++N<R;){var j=y[N],tt=w[N];if(S)var ot=E?S(tt,j,N,w,y,x):S(j,tt,N,y,w,x);if(ot!==void 0){if(ot)continue;I=!1;break}if(G){if(!p(w,(function(rt,lt){if(!m(G,lt)&&(j===rt||_(j,rt,v,S,x)))return G.push(lt)}))){I=!1;break}}else if(j!==tt&&!_(j,tt,v,S,x)){I=!1;break}}return x.delete(y),x.delete(w),I}},5950:(o,h,u)=>{var f=u(695),p=u(8984),m=u(4894);o.exports=function(y){return m(y)?f(y):p(y)}},6009:(o,h,u)=>{o=u.nmd(o);var f=u(4840),p=h&&!h.nodeType&&h,m=p&&o&&!o.nodeType&&o,y=m&&m.exports===p&&f.process,w=(function(){try{return m&&m.require&&m.require("util").types||y&&y.binding&&y.binding("util")}catch{}})();o.exports=w},6025:(o,h,u)=>{var f=u(5288);o.exports=function(p,m){for(var y=p.length;y--;)if(f(p[y][0],m))return y;return-1}},6110:(o,h,u)=>{var f=u(5083),p=u(392);o.exports=function(m,y){var w=p(m,y);return f(w)?w:void 0}},6449:o=>{var h=Array.isArray;o.exports=h},6545:(o,h,u)=>{var f=u(6110)(u(9325),"Set");o.exports=f},6721:(o,h,u)=>{var f=u(1042),p=Object.prototype.hasOwnProperty;o.exports=function(m){var y=this.__data__;if(f){var w=y[m];return w==="__lodash_hash_undefined__"?void 0:w}return p.call(y,m)?y[m]:void 0}},7068:(o,h,u)=>{var f=u(7217),p=u(5911),m=u(1986),y=u(689),w=u(5861),v=u(6449),S=u(3656),_=u(7167),x="[object Arguments]",E="[object Array]",R="[object Object]",D=Object.prototype.hasOwnProperty;o.exports=function(M,k,N,I,G,j){var tt=v(M),ot=v(k),rt=tt?E:w(M),lt=ot?E:w(k),O=(rt=rt==x?R:rt)==R,$=(lt=lt==x?R:lt)==R,K=rt==lt;if(K&&S(M)){if(!S(k))return!1;tt=!0,O=!1}if(K&&!O)return j||(j=new f),tt||_(M)?p(M,k,N,I,G,j):m(M,k,rt,N,I,G,j);if(!(1&N)){var at=O&&D.call(M,"__wrapped__"),nt=$&&D.call(k,"__wrapped__");if(at||nt){var P=at?M.value():M,H=nt?k.value():k;return j||(j=new f),G(P,H,N,I,j)}}return!!K&&(j||(j=new f),y(M,k,N,I,G,j))}},7167:(o,h,u)=>{var f=u(4901),p=u(7301),m=u(6009),y=m&&m.isTypedArray,w=y?p(y):f;o.exports=w},7217:(o,h,u)=>{var f=u(79),p=u(1420),m=u(938),y=u(3605),w=u(9817),v=u(945);function S(_){var x=this.__data__=new f(_);this.size=x.size}S.prototype.clear=p,S.prototype.delete=m,S.prototype.get=y,S.prototype.has=w,S.prototype.set=v,o.exports=S},7296:(o,h,u)=>{var f,p=u(5481),m=(f=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"";o.exports=function(y){return!!m&&m in y}},7301:o=>{o.exports=function(h){return function(u){return h(u)}}},7473:o=>{var h=Function.prototype.toString;o.exports=function(u){if(u!=null){try{return h.call(u)}catch{}try{return u+""}catch{}}return""}},7534:(o,h,u)=>{var f=u(2552),p=u(346);o.exports=function(m){return p(m)&&f(m)=="[object Arguments]"}},7670:(o,h,u)=>{var f=u(2651);o.exports=function(p){var m=f(this,p).delete(p);return this.size-=m?1:0,m}},7828:(o,h,u)=>{var f=u(9325).Uint8Array;o.exports=f},8096:o=>{o.exports=function(h,u){for(var f=-1,p=Array(h);++f<h;)p[f]=u(f);return p}},8223:(o,h,u)=>{var f=u(6110)(u(9325),"Map");o.exports=f},8303:(o,h,u)=>{var f=u(6110)(u(9325),"WeakMap");o.exports=f},8655:(o,h,u)=>{var f=u(6025);o.exports=function(p){return f(this.__data__,p)>-1}},8859:(o,h,u)=>{var f=u(3661),p=u(1380),m=u(1459);function y(w){var v=-1,S=w==null?0:w.length;for(this.__data__=new f;++v<S;)this.add(w[v])}y.prototype.add=y.prototype.push=p,y.prototype.has=m,o.exports=y},8984:(o,h,u)=>{var f=u(5527),p=u(3650),m=Object.prototype.hasOwnProperty;o.exports=function(y){if(!f(y))return p(y);var w=[];for(var v in Object(y))m.call(y,v)&&v!="constructor"&&w.push(v);return w}},9155:o=>{o.exports=e},9219:o=>{o.exports=function(h,u){return h.has(u)}},9325:(o,h,u)=>{var f=u(4840),p=typeof self=="object"&&self&&self.Object===Object&&self,m=f||p||Function("return this")();o.exports=m},9350:o=>{var h=Object.prototype.toString;o.exports=function(u){return h.call(u)}},9770:o=>{o.exports=function(h,u){for(var f=-1,p=h==null?0:h.length,m=0,y=[];++f<p;){var w=h[f];u(w,f,h)&&(y[m++]=w)}return y}},9817:o=>{o.exports=function(h){return this.__data__.has(h)}},9905:(o,h,u)=>{u.d(h,{default:()=>K});var f=u(3146),p=u.n(f);const m=function(at){return new RegExp(/<[a-z][\s\S]*>/i).test(at)},y=function(at,nt){return Math.floor(Math.random()*(nt-at+1))+at};var w="TYPE_CHARACTER",v="REMOVE_CHARACTER",S="REMOVE_ALL",_="REMOVE_LAST_VISIBLE_NODE",x="PAUSE_FOR",E="CALL_FUNCTION",R="ADD_HTML_TAG_ELEMENT",D="CHANGE_DELETE_SPEED",M="CHANGE_DELAY",k="CHANGE_CURSOR",N="PASTE_STRING",I="HTML_TAG";function G(at){return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},G(at)}function j(at,nt){var P=Object.keys(at);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(at);nt&&(H=H.filter((function(W){return Object.getOwnPropertyDescriptor(at,W).enumerable}))),P.push.apply(P,H)}return P}function tt(at){for(var nt=1;nt<arguments.length;nt++){var P=arguments[nt]!=null?arguments[nt]:{};nt%2?j(Object(P),!0).forEach((function(H){O(at,H,P[H])})):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(P)):j(Object(P)).forEach((function(H){Object.defineProperty(at,H,Object.getOwnPropertyDescriptor(P,H))}))}return at}function ot(at){return(function(nt){if(Array.isArray(nt))return rt(nt)})(at)||(function(nt){if(typeof Symbol<"u"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)})(at)||(function(nt,P){if(nt){if(typeof nt=="string")return rt(nt,P);var H={}.toString.call(nt).slice(8,-1);return H==="Object"&&nt.constructor&&(H=nt.constructor.name),H==="Map"||H==="Set"?Array.from(nt):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?rt(nt,P):void 0}})(at)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function rt(at,nt){(nt==null||nt>at.length)&&(nt=at.length);for(var P=0,H=Array(nt);P<nt;P++)H[P]=at[P];return H}function lt(at,nt){for(var P=0;P<nt.length;P++){var H=nt[P];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(at,$(H.key),H)}}function O(at,nt,P){return(nt=$(nt))in at?Object.defineProperty(at,nt,{value:P,enumerable:!0,configurable:!0,writable:!0}):at[nt]=P,at}function $(at){var nt=(function(P){if(G(P)!="object"||!P)return P;var H=P[Symbol.toPrimitive];if(H!==void 0){var W=H.call(P,"string");if(G(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(P)})(at);return G(nt)=="symbol"?nt:nt+""}const K=(function(){function at(H,W){var z=this;if((function(Z,et){if(!(Z instanceof et))throw new TypeError("Cannot call a class as a function")})(this,at),O(this,"state",{cursorAnimation:null,lastFrameTime:null,pauseUntil:null,eventQueue:[],eventLoop:null,eventLoopPaused:!1,reverseCalledEvents:[],calledEvents:[],visibleNodes:[],initialOptions:null,elements:{container:null,wrapper:document.createElement("span"),cursor:document.createElement("span")}}),O(this,"options",{strings:null,cursor:"|",delay:"natural",pauseFor:1500,deleteSpeed:"natural",loop:!1,autoStart:!1,devMode:!1,skipAddStyles:!1,wrapperClassName:"Typewriter__wrapper",cursorClassName:"Typewriter__cursor",stringSplitter:null,onCreateTextNode:null,onRemoveNode:null}),O(this,"setupWrapperElement",(function(){z.state.elements.container&&(z.state.elements.wrapper.className=z.options.wrapperClassName,z.state.elements.cursor.className=z.options.cursorClassName,z.state.elements.cursor.innerHTML=z.options.cursor,z.state.elements.container.innerHTML="",z.state.elements.container.appendChild(z.state.elements.wrapper),z.state.elements.container.appendChild(z.state.elements.cursor))})),O(this,"start",(function(){return z.state.eventLoopPaused=!1,z.runEventLoop(),z})),O(this,"pause",(function(){return z.state.eventLoopPaused=!0,z})),O(this,"stop",(function(){return z.state.eventLoop&&((0,f.cancel)(z.state.eventLoop),z.state.eventLoop=null),z})),O(this,"pauseFor",(function(Z){return z.addEventToQueue(x,{ms:Z}),z})),O(this,"typeOutAllStrings",(function(){return typeof z.options.strings=="string"?(z.typeString(z.options.strings).pauseFor(z.options.pauseFor),z):(z.options.strings.forEach((function(Z){z.typeString(Z).pauseFor(z.options.pauseFor).deleteAll(z.options.deleteSpeed)})),z)})),O(this,"typeString",(function(Z){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(m(Z))return z.typeOutHTMLString(Z,et);if(Z){var mt=(z.options||{}).stringSplitter,gt=typeof mt=="function"?mt(Z):Z.split("");z.typeCharacters(gt,et)}return z})),O(this,"pasteString",(function(Z){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return m(Z)?z.typeOutHTMLString(Z,et,!0):(Z&&z.addEventToQueue(N,{character:Z,node:et}),z)})),O(this,"typeOutHTMLString",(function(Z){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,mt=arguments.length>2?arguments[2]:void 0,gt=(function(Pe){var be=document.createElement("div");return be.innerHTML=Pe,be.childNodes})(Z);if(gt.length>0)for(var Tt=0;Tt<gt.length;Tt++){var qt=gt[Tt],ie=qt.innerHTML;qt&&qt.nodeType!==3?(qt.innerHTML="",z.addEventToQueue(R,{node:qt,parentNode:et}),mt?z.pasteString(ie,qt):z.typeString(ie,qt)):qt.textContent&&(mt?z.pasteString(qt.textContent,et):z.typeString(qt.textContent,et))}return z})),O(this,"deleteAll",(function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"natural";return z.addEventToQueue(S,{speed:Z}),z})),O(this,"changeDeleteSpeed",(function(Z){if(!Z)throw new Error("Must provide new delete speed");return z.addEventToQueue(D,{speed:Z}),z})),O(this,"changeDelay",(function(Z){if(!Z)throw new Error("Must provide new delay");return z.addEventToQueue(M,{delay:Z}),z})),O(this,"changeCursor",(function(Z){if(!Z)throw new Error("Must provide new cursor");return z.addEventToQueue(k,{cursor:Z}),z})),O(this,"deleteChars",(function(Z){if(!Z)throw new Error("Must provide amount of characters to delete");for(var et=0;et<Z;et++)z.addEventToQueue(v);return z})),O(this,"callFunction",(function(Z,et){if(!Z||typeof Z!="function")throw new Error("Callback must be a function");return z.addEventToQueue(E,{cb:Z,thisArg:et}),z})),O(this,"typeCharacters",(function(Z){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Z||!Array.isArray(Z))throw new Error("Characters must be an array");return Z.forEach((function(mt){z.addEventToQueue(w,{character:mt,node:et})})),z})),O(this,"removeCharacters",(function(Z){if(!Z||!Array.isArray(Z))throw new Error("Characters must be an array");return Z.forEach((function(){z.addEventToQueue(v)})),z})),O(this,"addEventToQueue",(function(Z,et){var mt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return z.addEventToStateProperty(Z,et,mt,"eventQueue")})),O(this,"addReverseCalledEvent",(function(Z,et){var mt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return z.options.loop?z.addEventToStateProperty(Z,et,mt,"reverseCalledEvents"):z})),O(this,"addEventToStateProperty",(function(Z,et){var mt=arguments.length>2&&arguments[2]!==void 0&&arguments[2],gt=arguments.length>3?arguments[3]:void 0,Tt={eventName:Z,eventArgs:et||{}};return z.state[gt]=mt?[Tt].concat(ot(z.state[gt])):[].concat(ot(z.state[gt]),[Tt]),z})),O(this,"runEventLoop",(function(){z.state.lastFrameTime||(z.state.lastFrameTime=Date.now());var Z=Date.now(),et=Z-z.state.lastFrameTime;if(!z.state.eventQueue.length){if(!z.options.loop)return;z.state.eventQueue=ot(z.state.calledEvents),z.state.calledEvents=[],z.options=tt({},z.state.initialOptions)}if(z.state.eventLoop=p()(z.runEventLoop),!z.state.eventLoopPaused){if(z.state.pauseUntil){if(Z<z.state.pauseUntil)return;z.state.pauseUntil=null}var mt,gt=ot(z.state.eventQueue),Tt=gt.shift();if(!(et<=(mt=Tt.eventName===_||Tt.eventName===v?z.options.deleteSpeed==="natural"?y(40,80):z.options.deleteSpeed:z.options.delay==="natural"?y(120,160):z.options.delay))){var qt=Tt.eventName,ie=Tt.eventArgs;switch(z.logInDevMode({currentEvent:Tt,state:z.state,delay:mt}),qt){case N:case w:var Pe=ie.character,be=ie.node,Qt=document.createTextNode(Pe),Ei=Qt;z.options.onCreateTextNode&&typeof z.options.onCreateTextNode=="function"&&(Ei=z.options.onCreateTextNode(Pe,Qt)),Ei&&(be?be.appendChild(Ei):z.state.elements.wrapper.appendChild(Ei)),z.state.visibleNodes=[].concat(ot(z.state.visibleNodes),[{type:"TEXT_NODE",character:Pe,node:Ei}]);break;case v:gt.unshift({eventName:_,eventArgs:{removingCharacterNode:!0}});break;case x:var $s=Tt.eventArgs.ms;z.state.pauseUntil=Date.now()+parseInt($s);break;case E:var lr=Tt.eventArgs,cr=lr.cb,hr=lr.thisArg;cr.call(hr,{elements:z.state.elements});break;case R:var Sn=Tt.eventArgs,ur=Sn.node,dr=Sn.parentNode;dr?dr.appendChild(ur):z.state.elements.wrapper.appendChild(ur),z.state.visibleNodes=[].concat(ot(z.state.visibleNodes),[{type:I,node:ur,parentNode:dr||z.state.elements.wrapper}]);break;case S:var Qe=z.state.visibleNodes,fr=ie.speed,Nt=[];fr&&Nt.push({eventName:D,eventArgs:{speed:fr,temp:!0}});for(var Qi=0,Gs=Qe.length;Qi<Gs;Qi++)Nt.push({eventName:_,eventArgs:{removingCharacterNode:!1}});fr&&Nt.push({eventName:D,eventArgs:{speed:z.options.deleteSpeed,temp:!0}}),gt.unshift.apply(gt,Nt);break;case _:var od=Tt.eventArgs.removingCharacterNode;if(z.state.visibleNodes.length){var ia=z.state.visibleNodes.pop(),ld=ia.type,sa=ia.node,pr=ia.character;z.options.onRemoveNode&&typeof z.options.onRemoveNode=="function"&&z.options.onRemoveNode({node:sa,character:pr}),sa&&sa.parentNode.removeChild(sa),ld===I&&od&&gt.unshift({eventName:_,eventArgs:{}})}break;case D:z.options.deleteSpeed=Tt.eventArgs.speed;break;case M:z.options.delay=Tt.eventArgs.delay;break;case k:z.options.cursor=Tt.eventArgs.cursor,z.state.elements.cursor.innerHTML=Tt.eventArgs.cursor}z.options.loop&&(Tt.eventName===_||Tt.eventArgs&&Tt.eventArgs.temp||(z.state.calledEvents=[].concat(ot(z.state.calledEvents),[Tt]))),z.state.eventQueue=gt,z.state.lastFrameTime=Z}}})),H)if(typeof H=="string"){var ct=document.querySelector(H);if(!ct)throw new Error("Could not find container element");this.state.elements.container=ct}else this.state.elements.container=H;W&&(this.options=tt(tt({},this.options),W)),this.state.initialOptions=tt({},this.options),this.init()}var nt,P;return nt=at,(P=[{key:"init",value:function(){var H,W;this.setupWrapperElement(),this.addEventToQueue(k,{cursor:this.options.cursor},!0),this.addEventToQueue(S,null,!0),!window||window.___TYPEWRITER_JS_STYLES_ADDED___||this.options.skipAddStyles||(H=".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}",(W=document.createElement("style")).appendChild(document.createTextNode(H)),document.head.appendChild(W),window.___TYPEWRITER_JS_STYLES_ADDED___=!0),this.options.autoStart===!0&&this.options.strings&&this.typeOutAllStrings().start()}},{key:"logInDevMode",value:function(H){this.options.devMode&&console.log(H)}}])&&lt(nt.prototype,P),Object.defineProperty(nt,"prototype",{writable:!1}),at})()},9935:o=>{o.exports=function(){return!1}}},s={};function n(o){var h=s[o];if(h!==void 0)return h.exports;var u=s[o]={id:o,loaded:!1,exports:{}};return i[o].call(u.exports,u,u.exports,n),u.loaded=!0,u.exports}n.n=o=>{var h=o&&o.__esModule?()=>o.default:()=>o;return n.d(h,{a:h}),h},n.d=(o,h)=>{for(var u in h)n.o(h,u)&&!n.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:h[u]})},n.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),n.o=(o,h)=>Object.prototype.hasOwnProperty.call(o,h),n.nmd=o=>(o.paths=[],o.children||(o.children=[]),o);var a={};return(()=>{n.d(a,{default:()=>R});var o=n(9155),h=n.n(o),u=n(9905),f=n(2404),p=n.n(f);function m(D){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},m(D)}function y(D,M){for(var k=0;k<M.length;k++){var N=M[k];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,x(N.key),N)}}function w(D,M){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,N){return k.__proto__=N,k},w(D,M)}function v(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function S(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(S=function(){return!!D})()}function _(D){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},_(D)}function x(D){var M=(function(k){if(m(k)!="object"||!k)return k;var N=k[Symbol.toPrimitive];if(N!==void 0){var I=N.call(k,"string");if(m(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)})(D);return m(M)=="symbol"?M:M+""}var E=(function(D){(function(G,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(j&&j.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),j&&w(G,j)})(I,D);var M,k,N=(function(G){var j=S();return function(){var tt,ot=_(G);if(j){var rt=_(this).constructor;tt=Reflect.construct(ot,arguments,rt)}else tt=ot.apply(this,arguments);return(function(lt,O){if(O&&(m(O)=="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(lt)})(this,tt)}})(I);function I(){var G,j,tt,ot;(function($,K){if(!($ instanceof K))throw new TypeError("Cannot call a class as a function")})(this,I);for(var rt=arguments.length,lt=new Array(rt),O=0;O<rt;O++)lt[O]=arguments[O];return j=v(G=N.call.apply(N,[this].concat(lt))),ot={instance:null},(tt=x(tt="state"))in j?Object.defineProperty(j,tt,{value:ot,enumerable:!0,configurable:!0,writable:!0}):j[tt]=ot,G}return M=I,(k=[{key:"componentDidMount",value:function(){var G=this,j=new u.default(this.typewriter,this.props.options);this.setState({instance:j},(function(){var tt=G.props.onInit;tt&&tt(j)}))}},{key:"componentDidUpdate",value:function(G){p()(this.props.options,G.options)||this.setState({instance:new u.default(this.typewriter,this.props.options)})}},{key:"componentWillUnmount",value:function(){this.state.instance&&this.state.instance.stop()}},{key:"render",value:function(){var G=this,j=this.props.component;return h().createElement(j,{ref:function(tt){return G.typewriter=tt},className:"Typewriter","data-testid":"typewriter-wrapper"})}}])&&y(M.prototype,k),Object.defineProperty(M,"prototype",{writable:!1}),I})(o.Component);E.defaultProps={component:"div"};const R=E})(),a.default})()))})(cu)),cu.exports}var Q5=K5();const Z5=rc(Q5);function J5(){return T.jsx(Z5,{options:{strings:["Software Engineer","Mobile App Developer","Backend Engineer"],autoStart:!0,loop:!0,deleteSpeed:50}})}function tM(){return T.jsx(Fs,{className:"quote-card-view",children:T.jsx(Fs.Body,{children:T.jsxs("blockquote",{className:"blockquote mb-0",children:[T.jsxs("p",{style:{textAlign:"justify"},children:["I am ",T.jsx("span",{className:"purple",children:"Muluken Zewge, "}),"a Software Engineer with a solid background in ",T.jsx("span",{className:"purple",children:"programming principles "})," and ",T.jsx("span",{className:"purple",children:"best practices."}),T.jsx("br",{}),"I am currently employed as a ",T.jsx("span",{className:"purple",children:"Mobile Application developer "}),"at ",T.jsx("a",{href:"https://2f-capital.com/",target:"_blank",rel:"noreferrer",children:"Two F Capital"}),".",T.jsx("br",{}),"I have completed BSc degree in ",T.jsx("span",{className:"purple",children:"Computer Engineering"}),", followed by an intensive ",T.jsx("span",{className:"purple",children:"Andvanced Algorithms and Software Development"})," education from the renowned ",T.jsx("a",{href:"https://a2sv.org/",target:"_blank",rel:"noreferrer",children:"A2SV(Africa To Silicon Valley)"}),".",T.jsx("br",{}),"Proficient in ",T.jsx("span",{className:"purple",children:"Dart"}),", ",T.jsx("span",{className:"purple",children:"Python"}),", and ",T.jsx("span",{className:"purple",children:"Go"}),", I am always eager to learn new technologies and expand my skillset."]}),T.jsxs("p",{style:{color:"rgb(155 126 172)"},children:['"Excellence is my benchmark!"'," "]}),T.jsx("footer",{className:"blockquote-footer",children:"Muluken"})]})})})}const eM="/assets/profile-image-BGBhJjhu.jpg";function kw(){const c={width:"300px",borderRadius:"15px",transform:"rotate(5deg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"};return T.jsxs(zs,{fluid:!0,className:"about-section",id:"about",children:[T.jsx(Yu,{}),T.jsx(zs,{children:T.jsxs(An,{style:{justifyContent:"center",padding:"10px"},children:[T.jsxs(Ht,{md:7,style:{justifyContent:"center",paddingBottom:"50px"},children:[T.jsxs("h1",{style:{fontSize:"2.1em",paddingBottom:"20px"},children:["About ",T.jsx("strong",{className:"purple",children:"Me"})]}),T.jsx(tM,{})]}),T.jsx(Ht,{md:5,style:{paddingTop:"120px",paddingBottom:"50px"},className:"about-img",children:T.jsx("img",{src:eM,alt:"ProfileImage",style:c})})]})})]})}function iM(c){return Pt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"},child:[]}]})(c)}function Va(c){const[t,e]=F.useState(!1);return T.jsxs(T.Fragment,{children:[T.jsxs(Fs,{className:"project-card-view",children:[T.jsx("div",{style:{textAlign:"center",marginBottom:"10px",marginTop:"20px"},children:T.jsx("img",{src:c.imgPath,alt:"project-screenshot",style:{width:"50%",height:"auto",objectFit:"cover"}})}),T.jsxs(Fs.Body,{children:[T.jsx(Fs.Title,{children:c.title}),T.jsx(Fs.Text,{style:{textAlign:"justify"},children:c.description}),T.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[T.jsxs(Hl,{variant:"primary",onClick:()=>e(!0),style:{marginLeft:"10px",marginBottom:"15px"},children:[T.jsx(WT,{})," ","See More"]}),`
`,`
`,T.jsxs(Hl,{variant:"primary",href:c.ghLink,target:"_blank",children:[T.jsx(iM,{})," ","GitHub"]})]})]})]}),T.jsxs(Al,{contentClassName:"custom-modal",show:t,onHide:()=>e(!1),size:"lg",centered:!0,children:[T.jsx(Al.Header,{closeButton:!0,className:"custom-modal-header",children:T.jsx(Al.Title,{className:"purple",children:c.title})}),T.jsxs(Al.Body,{children:[T.jsx("h6",{className:"purple",children:"Overview"}),T.jsx("p",{children:c.details.overview}),T.jsx("h6",{className:"purple",children:"Key Features"}),T.jsx("ul",{children:Array.isArray(c.details.keyFeatures)&&c.details.keyFeatures.length>0&&typeof c.details.keyFeatures[0]=="object"?c.details.keyFeatures.map((i,s)=>T.jsxs("li",{children:[T.jsx("span",{children:i.category}),T.jsx("ul",{style:{fontSize:"0.9rem"},children:i.features.map((n,a)=>T.jsx("li",{children:n.includes(":")?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"purple",children:n.split(":")[0]}),`: ${n.split(":")[1]}`]}):T.jsx("span",{children:n})},a))})]},s)):c.details.keyFeatures.map((i,s)=>T.jsxs("li",{children:[T.jsx("strong",{children:i.split(":")[0]}),i.includes(":")&&`: ${i.split(":")[1]}`]},s))}),T.jsx("h6",{children:"Tech Stack"}),T.jsx("ul",{style:{fontSize:"0.9rem"},children:c.details.techStack.map((i,s)=>T.jsxs("li",{children:[T.jsx("span",{className:"purple",children:i.split(":")[0]}),i.includes(":")&&`: ${i.split(":")[1]}`]},s))}),T.jsx("h6",{className:"purple",children:T.jsx("strong",{children:"Development Details"})}),T.jsxs("p",{style:{fontSize:"0.9rem"},children:[T.jsx("span",{className:"purple",children:"Project Type"}),": ",c.details.projectType]}),T.jsxs("p",{style:{fontSize:"0.9rem"},children:[T.jsx("span",{className:"purple",children:"My Role"}),": ",c.details.role]}),T.jsxs("p",{children:[T.jsx("span",{style:{fontSize:"0.9rem"},className:"purple",children:"Skills Developed"}),T.jsx("ul",{style:{fontSize:"0.9rem"},children:c.details.skillsDeveloped.map((i,s)=>T.jsx("li",{children:i},s))})]}),T.jsxs("p",{children:[T.jsx("span",{style:{fontSize:"0.9rem"},className:"purple",children:"Challenges"}),T.jsx("ul",{style:{fontSize:"0.9rem"},children:c.details.challenges.map((i,s)=>T.jsx("li",{children:i},s))})]}),T.jsx("h6",{className:"purple",children:"Screenshots"}),T.jsx("div",{className:"modal-screenshots",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",justifyContent:"center"},children:c.details.screenshots.map((i,s)=>T.jsx("img",{src:i,alt:`Screenshot-${s}`,style:{width:"100%",maxWidth:"300px",marginBottom:"15px",borderRadius:"8px"}},s))})]}),T.jsx(Al.Footer,{children:T.jsx(Hl,{variant:"secondary",onClick:()=>e(!1),children:"Close"})})]})]})}const sM="/assets/EMMS1-CegpMrhi.png",nM="/assets/EMMS10-Cb74IDCB.png",rM="/assets/EMMS11-xOhsuZ6r.png",aM="/assets/EMMS12-Dzwo448e.png",oM="/assets/EMMS2-DrQh152f.png",lM="/assets/EMMS3-DhgJhCUJ.png",cM="/assets/EMMS4-C5UzoD08.png",hM="/assets/EMMS5-BTn51QTX.png",uM="/assets/EMMS6-CpYuvfQD.png",dM="/assets/EMMS7-DPUJ3Kpa.png",fM="/assets/EMMS8-Blskdjvl.png",pM="/assets/EMMS9-CyszA60d.png",gM="/assets/blogApp1-8dxKFman.png",mM="/assets/blogApp2-8Pu_wg8_.png",yM="/assets/blogApp3-BApCkkvu.png",bM="/assets/blogApp4-KUJIgVrD.png",vM="/assets/blogApp5-Br7zD-7H.png",AM="/assets/busTrackingApp1-BXrg4vYC.png",wM="/assets/busTrackingApp2-7FKgwwHH.png",_M="/assets/busTrackingApp3-Dl_xrADM.png",SM="/assets/busTrackingApp4-DNIhlF4D.png",EM="/assets/busTrackingApp5-BVVFuRkh.png",xM="/assets/busTrackingApp6-BvSStoPZ.png",CM="/assets/busTrackingApp7-BXVhM5bg.png",TM="/assets/busTrackingApp8-CLgzNSPk.png",MM="/assets/collabHub1-CdUZ0gOE.png",DM="/assets/collabHub10-DsaXMvDa.png",RM="/assets/collabHub11-Dh4yDFa2.png",kM="/assets/collabHub12-CrOEFEGP.png",LM="/assets/collabHub2-92IaKNcR.png",OM="/assets/collabHub3-UgXs0qz5.png",PM="/assets/collabHub4-CXW-bScJ.png",NM="/assets/collabHub5-Dbst4Xzu.png",FM="/assets/collabHub6-CynRz5ve.png",IM="/assets/collabHub7-GHoekj70.png",BM="/assets/collabHub8-DdbntWlC.png",zM="/assets/collabHub9-Cz7e80X3.png",jM="/assets/quizApp1-BLBM8pj3.png",HM="/assets/quizApp2-BGru1F86.png",UM="/assets/quizApp3-Cu6OIeUn.png",$M="/assets/quizApp4-B_hIm0lR.png",GM="/assets/quizApp5-sSluNfg4.png",VM="/assets/quizApp6-DTObFPtS.png",qM="/assets/quizApp7-AkHJXO7n.png",XM="/assets/quizApp8-C7D4nde_.png",YM="/assets/weatherApp1-hrSxzigj.png",WM="/assets/weatherApp2-Dz5X-WMT.png",KM="/assets/weatherApp3-DE1yNWs2.png",QM="/assets/weatherApp4-CCjIgZlf.png",xo=(c,t)=>Array.from({length:t},(e,i)=>new URL(Object.assign({"../../Assets/Projects/EMMS/EMMS1.png":sM,"../../Assets/Projects/EMMS/EMMS10.png":nM,"../../Assets/Projects/EMMS/EMMS11.png":rM,"../../Assets/Projects/EMMS/EMMS12.png":aM,"../../Assets/Projects/EMMS/EMMS2.png":oM,"../../Assets/Projects/EMMS/EMMS3.png":lM,"../../Assets/Projects/EMMS/EMMS4.png":cM,"../../Assets/Projects/EMMS/EMMS5.png":hM,"../../Assets/Projects/EMMS/EMMS6.png":uM,"../../Assets/Projects/EMMS/EMMS7.png":dM,"../../Assets/Projects/EMMS/EMMS8.png":fM,"../../Assets/Projects/EMMS/EMMS9.png":pM,"../../Assets/Projects/blogApp/blogApp1.png":gM,"../../Assets/Projects/blogApp/blogApp2.png":mM,"../../Assets/Projects/blogApp/blogApp3.png":yM,"../../Assets/Projects/blogApp/blogApp4.png":bM,"../../Assets/Projects/blogApp/blogApp5.png":vM,"../../Assets/Projects/busTrackingApp/busTrackingApp1.png":AM,"../../Assets/Projects/busTrackingApp/busTrackingApp2.png":wM,"../../Assets/Projects/busTrackingApp/busTrackingApp3.png":_M,"../../Assets/Projects/busTrackingApp/busTrackingApp4.png":SM,"../../Assets/Projects/busTrackingApp/busTrackingApp5.png":EM,"../../Assets/Projects/busTrackingApp/busTrackingApp6.png":xM,"../../Assets/Projects/busTrackingApp/busTrackingApp7.png":CM,"../../Assets/Projects/busTrackingApp/busTrackingApp8.png":TM,"../../Assets/Projects/collabHub/collabHub1.png":MM,"../../Assets/Projects/collabHub/collabHub10.png":DM,"../../Assets/Projects/collabHub/collabHub11.png":RM,"../../Assets/Projects/collabHub/collabHub12.png":kM,"../../Assets/Projects/collabHub/collabHub2.png":LM,"../../Assets/Projects/collabHub/collabHub3.png":OM,"../../Assets/Projects/collabHub/collabHub4.png":PM,"../../Assets/Projects/collabHub/collabHub5.png":NM,"../../Assets/Projects/collabHub/collabHub6.png":FM,"../../Assets/Projects/collabHub/collabHub7.png":IM,"../../Assets/Projects/collabHub/collabHub8.png":BM,"../../Assets/Projects/collabHub/collabHub9.png":zM,"../../Assets/Projects/quizApp/quizApp1.png":jM,"../../Assets/Projects/quizApp/quizApp2.png":HM,"../../Assets/Projects/quizApp/quizApp3.png":UM,"../../Assets/Projects/quizApp/quizApp4.png":$M,"../../Assets/Projects/quizApp/quizApp5.png":GM,"../../Assets/Projects/quizApp/quizApp6.png":VM,"../../Assets/Projects/quizApp/quizApp7.png":qM,"../../Assets/Projects/quizApp/quizApp8.png":XM,"../../Assets/Projects/weatherApp/weatherApp1.png":YM,"../../Assets/Projects/weatherApp/weatherApp2.png":WM,"../../Assets/Projects/weatherApp/weatherApp3.png":KM,"../../Assets/Projects/weatherApp/weatherApp4.png":QM})[`../../Assets/Projects/${c}/${c}${i+1}.png`],import.meta.url).href),ZM=xo("collabHub",12),JM=xo("EMMS",12),t6=xo("busTrackingApp",8),e6=xo("quizApp",8),i6=xo("blogApp",5),s6=xo("weatherApp",4),cs={collabHub:ZM,EMMS:JM,busTrackingApp:t6,quizApp:e6,blogApp:i6,weatherApp:s6};function Lw(){return T.jsxs(zs,{fluid:!0,className:"project-section",id:"projects",children:[T.jsx(Yu,{}),T.jsxs(zs,{children:[T.jsxs("h1",{className:"project-heading",children:["My Recent ",T.jsx("strong",{className:"purple",children:"Works "})]}),T.jsx("p",{style:{color:"white"},children:"Here are a few projects I've worked on recently."}),T.jsxs(An,{style:{justifyContent:"center",paddingBottom:"10px"},children:[T.jsx(Ht,{md:4,className:"project-card",children:T.jsx(Va,{imgPath:cs.collabHub[5],title:"CollabHub",description:"A mobile application built using Flutter that combines task management with real-time chat features. Users can manage tasks, collaborate on todos, and communicate through private and group chats with support for multimedia sharing.",ghLink:"https://github.com/Muluken-Zewge/Collaborative-Todo-App-with-Chat-Functionality",details:{overview:"A mobile application built using Flutter that combines task management with a real-time chat feature. Users can manage tasks, collaborate on todos, and communicate through private and group chats seamlessly.",keyFeatures:[{category:"Todo Features",features:["Create, Update, and Delete Todos: Manage tasks with descriptions, due dates, reminders, and color codes.","Collaborate on Todos: Invite collaborators via email to edit tasks collaboratively.","Pin Todos: Highlight important tasks by pinning them to the top.","Task Notifications: Receive timely notifications and reminders."]},{category:"Chat Features",features:["Real-time Messaging: Communicate instantly with other users using Firebase.","Private and Group Chats: Engage in one-on-one or group conversations.","User Presence: View online status indicators for active users in chats.","Media Sharing: Share images, text, and audio messages in chats.","Message Search: Quickly locate specific messages in both private and group chats."]}],techStack:["Flutter: Cross-platform framework for building the mobile application.","Firebase: Real-time database, Firestore for data storage, Firebase Auth for authentication, and Firebase Cloud Messaging for notifications.","Dartz Package: Utilized for functional programming and error handling.","BLoC State Management: Structured the app's state management with clean architecture principles."],projectType:"Personal Project",role:"Developed the project independently, handling both the frontend and backend.",skillsDeveloped:["Deepened knowledge of Flutter and Firebase integration.","Gained expertise in BLoC state management and clean architecture.","Improved UI/UX design skills for interactive and collaborative apps."],challenges:["Implementing real-time collaboration for todos: Drew inspiration from Google Keep to design seamless task sharing and editing.","Developing an intuitive chat interface: Modeled after Telegram, ensuring smooth messaging, media sharing, and presence indicators."],screenshots:cs.collabHub}})}),T.jsx(Ht,{md:4,className:"project-card",children:T.jsx(Va,{imgPath:cs.EMMS[6],title:"EMMS",description:"EMMS (Electronics Maintenence Management Syatem) is a Flutter application designed to digitalize the maintenance system at Hawassa University ICT Center. The app features Firebase integration for authentication and data storage, along with real-time chat for seamless communication.",ghLink:"https://github.com/Muluken-Zewge/Maintenance-Management-App",details:{overview:"A Flutter-based mobile application developed to digitalize the maintenance system at Hawassa University's ICT center. The app facilitates streamlined maintenance requests, approvals, task assignments, and real-time communication, enhancing efficiency and collaboration.",keyFeatures:[{category:"Admin Features",features:["Add and delete user accounts","Approve maintenance requests","Assign Technicians to maintenance tasks","Monitor the status of all tasks (Requested, Assigned, Completed)"]},{category:"Client Features",features:["Submit maintenance requests","Track request statuses (Requested, Pending, Completed)","Communicate with assigned Technicians in real-time","Approve task completion after maintenance is performed"]},{category:"Technician Features",features:["View assigned tasks","Collaborate with Clients via real-time chat","Handle tasks one at a time to ensure focus and quality"]}],techStack:["Frontend: Flutter (Dart)","Backend: Firebase Firestore for data storage","Authentication: Firebase Authentication for secure user login","Real-Time Communication: Firebase Firestore for chat functionality"],projectType:"Internship Project",role:"Collaborated with one team member and contributed to both frontend and backend development",skillsDeveloped:["Strengthened expertise in Flutter and Firebase integration","Gained hands-on experience in role-based system design and implementation","Developed skills in real-time communication and scalable task management solutions"],challenges:["Designing role-based functionality: Ensured smooth workflows and permission management for Admins, Clients, and Technicians","Managing task assignment logic: Enforced a mechanism to allow Technicians to work on only one task at a time, improving workflow management"],screenshots:cs.EMMS}})}),T.jsx(Ht,{md:4,className:"project-card",children:T.jsx(Va,{imgPath:cs.busTrackingApp[1],title:"Bus Tracking App",description:"A mobile application for public transportation that tracks the nearest bus, showing its distance and estimated arrival time. The app is integrated with Google Maps API and is complemented by a website for real-time tracking and over-speed recording.",ghLink:"https://github.com/Muluken-Zewge/Bus-Tracking-App",details:{overview:"A Flutter-based mobile application that tracks public buses, displaying the nearest bus's distance and estimated arrival time. Integrated with Google Maps and real-time data from hardware installed on buses, the app assists users in planning their journeys more efficiently.",keyFeatures:["Bus Tracking: Displays the nearest buss distance and estimated time of arrival.","Route Planning: Allows users to input their start and destination points using an auto-complete feature.","Recommendations: Suggests the closest bus for the selected route if available.","Google Maps Integration: Visualizes bus locations and routes in real time.","Real-Time Communication: Communicates with hardware installed on buses to fetch live data."],techStack:["Frontend: Flutter (Dart)","API Integration: Google Maps API for real-time map visualization and route guidance","Hardware Communication: Interfaces with hardware installed on buses for tracking data"],projectType:"Final-year project for completing BSc in Computer Engineering",role:"Focused on developing the mobile app while teammates worked on the website and hardware integration",skillsDeveloped:["Advanced skills in Flutter development","Experience with Google Maps API integration for live tracking","Team collaboration and interfacing mobile applications with hardware systems"],challenges:["Hardware Communication: Ensured seamless communication between the app and hardware for accurate tracking data"],screenshots:cs.busTrackingApp}})}),T.jsx(Ht,{md:4,className:"project-card",children:T.jsx(Va,{imgPath:cs.quizApp[5],title:"Quiz App",description:"A quiz application built using Flutter that fetches multiple-choice questions from The Trivia API. Users can test their knowledge on various topics with an engaging interface that provides instant feedback and a detailed results summary.",ghLink:"https://github.com/Muluken-Zewge/Quiz-APP-with-Cubit",details:{overview:"A Flutter-based quiz application that fetches multiple-choice questions from The Trivia API, offering users an engaging platform to test their knowledge on various topics. The app delivers an interactive and intuitive user experience with instant feedback and visually appealing design elements.",keyFeatures:[{category:"Interactive Quiz Interface",features:["Users can answer multiple-choice questions with real-time feedback"]},{category:"Visual Feedback",features:["Correct answers are marked with a green checkmark ().","Incorrect answers are marked with a red cross (), and the correct answer is highlighted."]},{category:"Results Summary",features:["Displays the number of correct answers.","Provides detailed feedback for each question, highlighting correct and user-selected answers."]},{category:"Elegant UI",features:["Incorporates gradients, animations, and user-friendly layouts for a seamless experience."]}],techStack:["Frontend: Flutter (Dart)","API Integration: The Trivia API for fetching quiz questions","State Management: Cubit/Bloc for managing app state","Architecture: Clean architecture with Data Layer to Handles API calls and repositories, Domain Layer that Contains core business logic and use cases and Presentation Layer to Manages UI components with Cubit for state management."],projectType:"Personal Project",role:"Sole developer responsible for designing, developing, and implementing the app's logic.",skillsDeveloped:["Advanced Flutter and Dart programming.","Implementation of Cubit for efficient state management.","Applying clean architecture principles to organize and structure code.","API integration and data handling for dynamic quiz content."],challenges:["State Management: Ensured smooth transitions and accurate feedback using Cubit."],screenshots:cs.quizApp}})}),T.jsx(Ht,{md:4,className:"project-card",children:T.jsx(Va,{imgPath:cs.blogApp[0],title:"WordPress Blog App",description:"A Flutter app that fetches posts from a WordPress API and integrates ads for monetization. The app displays a test ad banner after every five posts and shows an interstitial ad when navigating from the homepage to the detail page.",ghLink:"https://github.com/Muluken-Zewge/WordPress-blog-App",details:{overview:"A mobile application built using Flutter that fetches and displays blog posts from a WordPress API. The app presents blogs in a user-friendly interface while integrating Google Ads for monetization. It enhances the reading experience with seamless navigation and visually appealing layouts.",keyFeatures:[{category:"Fetch Blogs",features:["Retrieves blog posts dynamically from the WordPress API"]},{category:"User-Friendly Interface",features:["Displays blog content in a visually appealing and easy-to-navigate design"]},{category:"Google Ads Integration",features:["Banner Ads: Shows a Google test banner ad after every five blog posts","Interstitial Ads: Displays an interstitial ad when navigating from the homepage to the blog detail page"]},{category:"Optimized Performance",features:["Ensures smooth scrolling and quick loading of blog posts for an uninterrupted user experience"]}],techStack:["Frontend: Flutter (Dart)","API Integration: WordPress API for fetching blog content","Monetization: Google Mobile Ads SDK for displaying banner and interstitial ads"],projectType:"Side Project",role:"Sole developer responsible for the design, development, and implementation of all functionalities.",skillsDeveloped:["WordPress API integration for dynamic content retrieval.","Implementation of Google Ads in a Flutter app, including banner and interstitial ads.","Managing asynchronous data fetching and API handling."],challenges:["Ad Placement: Strategically integrated Google Ads without compromising the user experience."],screenshots:cs.blogApp}})}),T.jsx(Ht,{md:4,className:"project-card",children:T.jsx(Va,{imgPath:cs.weatherApp[0],title:"Weather App",description:"A Flutter weather application that fetches real-time weather data from the OpenWeatherMap API. The app shows weather conditions for the user's current location and allows searching for weather in any city using BLoC state management.",ghLink:"https://github.com/Muluken-Zewge/Weather-App-With-BLoc",details:{overview:"A Flutter-based mobile application that provides real-time weather information. The app fetches current weather data from the OpenWeatherMap API and displays weather details for the user's location or any searched city worldwide. It utilizes BLoC state management for handling app states effectively.",keyFeatures:[{category:"Current Location Weather",features:["Fetches and displays weather data for the user's current location using geolocation."]},{category:"Search Weather by City",features:["Allows users to search for any city in the world with an autocomplete feature that suggests city names as the user types."]},{category:"BLoC State Management",features:["Efficiently manages app states, including loading, success, and error states, ensuring a seamless user experience."]}],techStack:["Frontend: Flutter (Dart)","API Integration: OpenWeatherMap API for real-time weather data","Geolocation: Geolocator Plugin for fetching the user's current location","Weather Package: Used for interfacing with the OpenWeatherMap API","State Management: BLoC for handling app states and ensuring clean architecture"],projectType:"Personal Project",role:"Sole developer responsible for designing and implementing all functionalities",skillsDeveloped:["Geolocation integration for weather-based features","API integration and handling asynchronous data in Flutter","Implementation of BLoC state management for clean and efficient state handling","UI design and optimization for displaying real-time weather data in a user-friendly manner"],challenges:["Dynamic Data Handling: Ensured real-time updates when fetching weather data for the user's location or searched cities","State Management: Seamlessly handled transitions between loading, success, and error states using BLoC"],screenshots:cs.weatherApp}})})]})]})]})}const n6="/assets/Muluken-Zewge-Resume-GhOFKFE1.pdf",bi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Dg=[.001,0,0,.001,0,0],Zp=1.35,qi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Jn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ql="pdfjs_internal_editor_",Mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ut={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},r6={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},oi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},hu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},He={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ya={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Wu={ERRORS:0,WARNINGS:1,INFOS:5},Zl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Uh={moveTo:0,lineTo:1,curveTo:2,closePath:3},a6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ku=Wu.WARNINGS;function o6(c){Number.isInteger(c)&&(Ku=c)}function l6(){return Ku}function Qu(c){Ku>=Wu.INFOS&&console.info(`Info: ${c}`)}function Et(c){Ku>=Wu.WARNINGS&&console.warn(`Warning: ${c}`)}function de(c){throw new Error(c)}function $t(c,t){c||de(t)}function c6(c){switch(c?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ow(c,t=null,e=null){if(!c)return null;if(e&&typeof c=="string"&&(e.addDefaultProtocol&&c.startsWith("www.")&&c.match(/\./g)?.length>=2&&(c=`http://${c}`),e.tryConvertEncoding))try{c=p6(c)}catch{}const i=t?URL.parse(c,t):URL.parse(c);return c6(i)?i:null}function Pw(c,t,e=!1){const i=URL.parse(c);return i?(i.hash=t,i.href):e&&Ow(c,"http://example.com")?c.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Lt(c,t,e,i=!1){return Object.defineProperty(c,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Zr=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();let Wv=class extends Zr{constructor(t,e){super(t,"PasswordException"),this.code=e}},Jp=class extends Zr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},Rg=class extends Zr{constructor(t){super(t,"InvalidPDFException")}},Cu=class extends Zr{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}},h6=class extends Zr{constructor(t){super(t,"FormatError")}},rr=class extends Zr{constructor(t){super(t,"AbortException")}};function Nw(c){(typeof c!="object"||c?.length===void 0)&&de("Invalid argument for bytesToString");const t=c.length,e=8192;if(t<e)return String.fromCharCode.apply(null,c);const i=[];for(let s=0;s<t;s+=e){const n=Math.min(s+e,t),a=c.subarray(s,n);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function hc(c){typeof c!="string"&&de("Invalid argument for stringToBytes");const t=c.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=c.charCodeAt(i)&255;return e}function u6(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function d6(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function f6(){try{return new Function(""),!0}catch{return!1}}let di=class{static get isLittleEndian(){return Lt(this,"isLittleEndian",d6())}static get isEvalSupported(){return Lt(this,"isEvalSupported",f6())}static get isOffscreenCanvasSupported(){return Lt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Lt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Lt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Lt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const tg=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));let pt=class{static makeHexColor(t,e,i){return`#${tg[t]}${tg[e]}${tg[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const s=t[i],n=t[i+1];t[i]=s*e[0]+n*e[2]+e[4],t[i+1]=s*e[1]+n*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],n=e[1],a=e[2],o=e[3],h=e[4],u=e[5];for(let f=0;f<6;f+=2){const p=t[i+f],m=t[i+f+1];t[i+f]=p*s+m*a+h,t[i+f+1]=p*n+m*o+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],n=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/n,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/n}static axialAlignedBoundingBox(t,e,i){const s=e[0],n=e[1],a=e[2],o=e[3],h=e[4],u=e[5],f=t[0],p=t[1],m=t[2],y=t[3];let w=s*f+h,v=w,S=s*m+h,_=S,x=o*p+u,E=x,R=o*y+u,D=R;if(n!==0||a!==0){const M=n*f,k=n*m,N=a*p,I=a*y;w+=N,_+=N,S+=I,v+=I,x+=M,D+=M,R+=k,E+=k}i[0]=Math.min(i[0],w,S,v,_),i[1]=Math.min(i[1],x,R,E,D),i[2]=Math.max(i[2],w,S,v,_),i[3]=Math.max(i[3],x,R,E,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],n=t[2],a=t[3],o=i**2+s**2,h=i*n+s*a,u=n**2+a**2,f=(o+u)/2,p=Math.sqrt(f**2-(o*u-h**2));e[0]=Math.sqrt(f+p||1),e[1]=Math.sqrt(f-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>a?null:[i,n,s,a]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,n){n[0]=Math.min(n[0],t,i),n[1]=Math.min(n[1],e,s),n[2]=Math.max(n[2],t,i),n[3]=Math.max(n[3],e,s)}static#t(t,e,i,s,n,a,o,h,u,f){if(u<=0||u>=1)return;const p=1-u,m=u*u,y=m*u,w=p*(p*(p*t+3*u*e)+3*m*i)+y*s,v=p*(p*(p*n+3*u*a)+3*m*o)+y*h;f[0]=Math.min(f[0],w),f[1]=Math.min(f[1],v),f[2]=Math.max(f[2],w),f[3]=Math.max(f[3],v)}static#e(t,e,i,s,n,a,o,h,u,f,p,m){if(Math.abs(u)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,i,s,n,a,o,h,-p/f,m);return}const y=f**2-4*p*u;if(y<0)return;const w=Math.sqrt(y),v=2*u;this.#t(t,e,i,s,n,a,o,h,(-f+w)/v,m),this.#t(t,e,i,s,n,a,o,h,(-f-w)/v,m)}static bezierBoundingBox(t,e,i,s,n,a,o,h,u){u[0]=Math.min(u[0],t,o),u[1]=Math.min(u[1],e,h),u[2]=Math.max(u[2],t,o),u[3]=Math.max(u[3],e,h),this.#e(t,i,n,o,e,s,a,h,3*(-t+3*(i-n)+o),6*(t-2*i+n),3*(i-t),u),this.#e(t,i,n,o,e,s,a,h,3*(-e+3*(s-a)+h),6*(e-2*s+a),3*(s-e),u)}};function p6(c){return decodeURIComponent(escape(c))}let eg=null,Kv=null;function g6(c){return eg||(eg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Kv=new Map([["","t"]])),c.replaceAll(eg,(t,e,i)=>e?e.normalize("NFKC"):Kv.get(i))}function Fw(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const c=new Uint8Array(32);return crypto.getRandomValues(c),Nw(c)}const Tm="pdfjs_internal_id_";function m6(c,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...n]=e;if(!c(i)&&!Number.isInteger(i)||!t(s))return!1;const a=n.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const h of n)if(!(typeof h=="number"||o&&h===null))return!1;return!0}function vi(c,t,e){return Math.min(Math.max(c,t),e)}function Iw(c){return Uint8Array.prototype.toBase64?c.toBase64():btoa(Nw(c))}function y6(c){return Uint8Array.fromBase64?Uint8Array.fromBase64(c):hc(atob(c))}typeof Promise.try!="function"&&(Promise.try=function(c,...t){return new Promise(e=>{e(c(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(c){return c.reduce((t,e)=>t+e,0)});let kg=class Bw{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(n){if(!n)return;let a=null;const o=n.name;if(o==="#text")a=n.value;else if(Bw.shouldBuildText(o))n?.attributes?.textContent?a=n.attributes.textContent:n.value&&(a=n.value);else return;if(a!==null&&e.push({str:a}),!!n.children)for(const h of n.children)s(h)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},zw=class{static setupStorage(t,e,i,s,n){const a=s.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),n==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),n==="print")break;t.addEventListener("change",o=>{s.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),n==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const h=o.target.options,u=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:n}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[h,u]of Object.entries(a))if(u!=null)switch(h){case"class":u.length&&t.setAttribute(h,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!o||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,u)}o&&n.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,n=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:n,linkService:i});const o=n!=="richText",h=t.div;if(h.append(a),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=p}o&&h.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),o&&kg.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const f=[[s,-1,a]];for(;f.length>0;){const[p,m,y]=f.at(-1);if(m+1===p.children.length){f.pop();continue}const w=p.children[++f.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const _=document.createTextNode(w.value);u.push(_),y.append(_);continue}const S=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(y.append(S),w.attributes&&this.setAttributes({html:S,element:w,storage:e,intent:n,linkService:i}),w.children?.length>0)f.push([w,-1,S]);else if(w.value){const _=document.createTextNode(w.value);o&&kg.shouldBuildText(v)&&u.push(_),S.append(_)}}for(const p of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}};const un="http://www.w3.org/2000/svg";let bo=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};async function uc(c,t="text"){if(Ol(c,document.baseURI)){const e=await fetch(c);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",c,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}let Mm=class jw{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=n,this.offsetY=a,i*=e;const h=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let f,p,m,y;switch(s%=360,s<0&&(s+=360),s){case 180:f=-1,p=0,m=0,y=1;break;case 90:f=0,p=1,m=1,y=0;break;case 270:f=0,p=-1,m=-1,y=0;break;case 0:f=1,p=0,m=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(m=-m,y=-y);let w,v,S,_;f===0?(w=Math.abs(u-t[1])*i+n,v=Math.abs(h-t[0])*i+a,S=(t[3]-t[1])*i,_=(t[2]-t[0])*i):(w=Math.abs(h-t[0])*i+n,v=Math.abs(u-t[1])*i+a,S=(t[2]-t[0])*i,_=(t[3]-t[1])*i),this.transform=[f*i,p*i,m*i,y*i,w-f*i*h-m*i*u,v-p*i*h-y*i*u],this.width=S,this.height=_}get rawDims(){const t=this.viewBox;return Lt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:n=!1}={}){return new jw({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}convertToViewportPoint(t,e){const i=[t,e];return pt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];pt.applyTransform(e,this.transform);const i=[t[2],t[3]];return pt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return pt.applyInverseTransform(i,this.transform),i}},Dm=class extends Zr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function Zu(c){const t=c.length;let e=0;for(;e<t&&c[e].trim()==="";)e++;return c.substring(e,e+5).toLowerCase()==="data:"}function Rm(c){return typeof c=="string"&&/\.pdf$/i.test(c)}function b6(c){return[c]=c.split(/[#?]/,1),c.substring(c.lastIndexOf("/")+1)}function v6(c,t="document.pdf"){if(typeof c!="string")return t;if(Zu(c))return Et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(c);if(!i)return t;const s=o=>{try{let h=decodeURIComponent(o);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:o):h}catch{return o}},n=/\.pdf$/i,a=i.pathname.split("/").at(-1);if(n.test(a))return s(a);if(i.searchParams.size>0){const o=Array.from(i.searchParams.values()).reverse();for(const u of o)if(n.test(u))return s(u);const h=Array.from(i.searchParams.keys()).reverse();for(const u of h)if(n.test(u))return s(u)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return s(h[0])}return t}let Qv=class{started=Object.create(null);times=[];time(t){t in this.started&&Et(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Et(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:n}of this.times)t.push(`${i.padEnd(e)} ${n-s}ms
`);return t.join("")}};function Ol(c,t){const e=t?URL.parse(c,t):URL.parse(c);return e?.protocol==="http:"||e?.protocol==="https:"}function ms(c){c.preventDefault()}function Me(c){c.preventDefault(),c.stopPropagation()}function A6(c){console.log("Deprecated API usage: "+c)}let Lg=class{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let n=parseInt(e[3],10);n=n>=1&&n<=31?n:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const u=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,u==="-"?(a+=f,o+=p):u==="+"&&(a-=f,o-=p),new Date(Date.UTC(i,s,n,a,o,h))}};function w6(c,{scale:t=1,rotation:e=0}){const{width:i,height:s}=c.attributes.style,n=[0,0,parseInt(i),parseInt(s)];return new Mm({viewBox:n,userUnit:1,scale:t,rotation:e})}function dc(c){if(c.startsWith("#")){const t=parseInt(c.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return c.startsWith("rgb(")?c.slice(4,-1).split(",").map(t=>parseInt(t)):c.startsWith("rgba(")?c.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Et(`Not a valid color format: "${c}"`),[0,0,0])}function _6(c){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of c.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;c.set(e,dc(i))}t.remove()}function Se(c){const{a:t,b:e,c:i,d:s,e:n,f:a}=c.getTransform();return[t,e,i,s,n,a]}function Ds(c){const{a:t,b:e,c:i,d:s,e:n,f:a}=c.getTransform().invertSelf();return[t,e,i,s,n,a]}function qr(c,t,e=!1,i=!0){if(t instanceof Mm){const{pageWidth:s,pageHeight:n}=t.rawDims,{style:a}=c,o=di.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${n}px`,f=o?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,p=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(a.width=f,a.height=p):(a.width=p,a.height=f)}i&&c.setAttribute("data-main-rotation",t.rotation)}let Xr=class Og{constructor(){const{pixelRatio:t}=Og;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,n=-1){let a=1/0,o=1/0,h=1/0;i=Og.capPixels(i,n),i>0&&(a=Math.sqrt(i/(t*e))),s!==-1&&(o=s/t,h=s/e);const u=Math.min(a,o,h);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}};const Pg=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];let S6=class{static get isDarkMode(){return Lt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}},E6=class{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),Lt(this,"commentForegroundColor",dc(i))}};function x6(c,t,e,i){i=Math.min(Math.max(i??1,0),1);const s=255*(1-i);return c=Math.round(c*i+s),t=Math.round(t*i+s),e=Math.round(e*i+s),[c,t,e]}function Zv(c,t){const e=c[0]/255,i=c[1]/255,s=c[2]/255,n=Math.max(e,i,s),a=Math.min(e,i,s),o=(n+a)/2;if(n===a)t[0]=t[1]=0;else{const h=n-a;switch(t[1]=o<.5?h/(n+a):h/(2-n-a),n){case e:t[0]=((i-s)/h+(i<s?6:0))*60;break;case i:t[0]=((s-e)/h+2)*60;break;case s:t[0]=((e-i)/h+4)*60;break}}t[2]=o}function Ng(c,t){const e=c[0],i=c[1],s=c[2],n=(1-Math.abs(2*s-1))*i,a=n*(1-Math.abs(e/60%2-1)),o=s-n/2;switch(Math.floor(e/60)){case 0:t[0]=n+o,t[1]=a+o,t[2]=o;break;case 1:t[0]=a+o,t[1]=n+o,t[2]=o;break;case 2:t[0]=o,t[1]=n+o,t[2]=a+o;break;case 3:t[0]=o,t[1]=a+o,t[2]=n+o;break;case 4:t[0]=a+o,t[1]=o,t[2]=n+o;break;case 5:case 6:t[0]=n+o,t[1]=o,t[2]=a+o;break}}function Jv(c){return c<=.03928?c/12.92:((c+.055)/1.055)**2.4}function t2(c,t,e){Ng(c,e),e.map(Jv);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];Ng(t,e),e.map(Jv);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const e2=new Map;function C6(c,t){const e=c[0]+c[1]*256+c[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=e2.get(e);if(i)return i;const s=new Float32Array(9),n=s.subarray(0,3),a=s.subarray(3,6);Zv(c,a);const o=s.subarray(6,9);Zv(t,o);const h=o[2]<.5,u=h?12:4.5;if(a[2]=h?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),t2(a,o,n)<u){let f,p;h?(f=a[2],p=1):(f=0,p=a[2]);const m=.005;for(;p-f>m;){const y=a[2]=(f+p)/2;h===t2(a,o,n)<u?f=y:p=y}a[2]=h?p:f}return Ng(a,n),i=pt.makeHexColor(Math.round(n[0]*255),Math.round(n[1]*255),Math.round(n[2]*255)),e2.set(e,i),i}function Hw({html:c,dir:t,className:e},i){const s=document.createDocumentFragment();if(typeof c=="string"){const n=document.createElement("p");n.dir=t||"auto";const a=c.split(/(?:\r\n?|\n)/);for(let o=0,h=a.length;o<h;++o){const u=a[o];n.append(document.createTextNode(u)),o<h-1&&n.append(document.createElement("br"))}s.append(n)}else zw.render({xfaHtml:c,div:s,intent:"richText"});s.firstChild.classList.add("richText",e),i.append(s)}let T6=class uu{#t=null;#e=null;#s;#i=null;#a=null;#n=null;#r=null;#o=null;static#c=null;constructor(t){this.#s=t,uu.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ms,{signal:e}),t.addEventListener("pointerdown",uu.#l,{signal:e}));const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const s=this.#s.toolbarPosition;if(s){const{style:n}=t,a=this.#s._uiManager.direction==="ltr"?1-s[0]:s[0];n.insetInlineEnd=`${100*a}%`,n.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#s._focusEventsAllowed=!1,Me(t)}#u(t){this.#s._focusEventsAllowed=!0,Me(t)}#f(t){const e=this.#s._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ms,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#n?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",uu.#c[t]),this.#f(i)&&i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#i.append(e,this.#m),this.#a=t}addComment(t,e=null){if(this.#n)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const s=this.#r=this.#m;e?(this.#i.insertBefore(i,e),this.#i.insertBefore(s,e)):this.#i.append(i,s),this.#n=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#i.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#s);this.#f(e),this.#i.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#n?.removeToolbarCommentButton(),this.#n=null,this.#r?.remove(),this.#r=null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const s=this.#i.querySelector(i);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},M6=class{#t=null;#e=null;#s;constructor(t){this.#s=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#s._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ms,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#s.hasCommentManager()&&this.#n("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#n("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),t}#a(t,e){let i=0,s=0;for(const n of t){const a=n.y+n.height;if(a<i)continue;const o=n.x+(e?n.width:0);if(a>i){s=o,i=a;continue}e?o>s&&(s=o):o<s&&(s=o)}return[e?1-s:s,i]}show(t,e,i){const[s,n]=this.#a(e,i),{style:a}=this.#e||=this.#i();t.append(this.#e),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#n(t,e,i,s){const n=document.createElement("button");n.classList.add("basic",t),n.tabIndex=0,n.setAttribute("data-l10n-id",e);const a=document.createElement("span");n.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",i);const o=this.#s._signal;o instanceof AbortSignal&&!o.aborted&&(n.addEventListener("contextmenu",ms,{signal:o}),n.addEventListener("click",s,{signal:o})),this.#t.append(n)}};function Uw(c,t,e){for(const i of e)t.addEventListener(i,c[i].bind(c))}let D6=class{#t=0;get id(){return`${Ql}${this.#t++}`}},R6=class $w{#t=Fw();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const n=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Lt(this,"_isSVGFittingCanvas",n)}async#i(t,e){this.#s||=new Map;let i=this.#s.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(i.url=e,s=await uc(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const n=$w._isSVGFittingCanvas,a=new FileReader,o=new Image,h=new Promise((u,f)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const p=i.svgUrl=a.result;o.src=await n?`${p}#svgView(preserveAspectRatio(none))`:p},o.onerror=a.onerror=f});a.readAsDataURL(s),await h}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){Et(s),i=null}return this.#s.set(t,i),i&&this.#s.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:s,type:n}=t;return this.#i(`${e}_${i}_${s}_${n}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let i=this.#s.get(t);if(i?.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,i),this.#s.set(i.id,i),i}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=s.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}},k6=class{#t=[];#e=!1;#s;#i=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:i,mustExec:s,type:n=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&t(),this.#e)return;const h={cmd:t,undo:e,post:i,type:n};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(a&&this.#t[this.#i].type===n){o&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const u=this.#i+1;u===this.#s?this.#t.splice(0,1):(this.#i=u,u<this.#t.length&&this.#t.splice(u)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}},fc=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=di.platform;for(const[i,s,n={}]of t)for(const a of i){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:s,options:n}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:s,options:n}),this.allKeys.add(a.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:s,options:{bubbles:n=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(s.bind(t,...a,e)(),n||Me(e))}},L6=class Gw{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return _6(t),Lt(this,"_colors",t)}convert(t){const e=dc(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((n,a)=>n===e[a]))return Gw._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?pt.makeHexColor(...e):t}},Jl=class Fg{#t=new AbortController;#e=null;#s=null;#i=new Map;#a=new Map;#n=null;#r=null;#o=null;#c=new k6;#l=null;#d=null;#u=null;#f=0;#m=new Set;#g=null;#h=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#x=null;#S=null;#A=null;#T=null;#w=!1;#E=null;#R=new D6;#M=!1;#D=!1;#I=!1;#L=null;#P=null;#B=null;#N=null;#G=null;#C=Mt.NONE;#_=new Set;#O=null;#z=null;#H=null;#X=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#F=null;#V=null;#Z=null;#J=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Fg.prototype,e=a=>a.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:h}=o;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return Lt(this,"_keyboardManager",new fc([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#V.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}]]))}constructor(t,e,i,s,n,a,o,h,u,f,p,m,y,w,v,S){const _=this._signal=this.#t.signal;this.#V=t,this.#Z=e,this.#J=i,this.#n=s,this.#l=n,this.#z=a,this.#q=h,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:_}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),o._on("setpreference",this.onSetPreference.bind(this),{signal:_}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:_}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:_}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:_}),this.#lt(),this.#dt(),this.#et(),this.#r=h.annotationStorage,this.#x=h.filterFactory,this.#H=u,this.#T=f||null,this.#y=p,this.#v=m,this.#b=y,this.#G=w||null,this.viewParameters={realScale:bo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1,n?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#N?.clear(),this.#e=null,this.#_.clear(),this.#c.destroy(),this.#n?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#E?.hide(),this.#E=null,this.#B?.destroy(),this.#B=null,this.#s=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#F&&(clearTimeout(this.#F),this.#F=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Lt(this,"hcmFilter",this.#H?this.#x.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Lt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Lt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Lt(this,"highlightColors",null);const e=new Map,i=!!this.#H;for(const[s,n]of t){const a=s.endsWith("_HCM");if(i&&a){e.set(s.replace("_HCM",""),n);continue}!i&&!a&&e.set(s,n)}return Lt(this,"highlightColors",e)}get highlightColorNames(){return Lt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#n?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,s){this.#l?.showDialog(this,t,e,i,s)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),s=n=>{n.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await i}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const i of this.#a.values()){const{x:s,y:n,width:a,height:o}=i.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=n&&e<=n+o)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*bo.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#a.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:a,focusOffset:o}=i,h=i.toString(),f=this.#Q(i).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;i.empty();const m=this.#tt(f),y=this.#C===Mt.NONE,w=()=>{const v=m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:s,anchorOffset:n,focusNode:a,focusOffset:o,text:h});y&&this.showAllEditors("highlight",!0,!0),e&&v?.editComment()};if(y){this.switchToMode(Mt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#E||=new M6(this),this.#E.show(i,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#r)return null;const e=`${Ql}${t}`,i=this.#r.getRawValue(e);return i&&this.#r.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#E?.hide(),this.#O=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const s=this.#Q(t).closest(".textLayer");if(!s){this.#O&&(this.#E?.hide(),this.#O=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#O=e,this.#k({hasSelectedText:!0}),!(this.#C!==Mt.HIGHLIGHT&&this.#C!==Mt.NONE)&&(this.#C===Mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const n=this.#C===Mt.HIGHLIGHT?this.#tt(s):null;if(n?.toggleDrawing(),this.#D){const a=new AbortController,o=this.combinedSignal(a),h=u=>{u.type==="pointerup"&&u.button!==0||(a.abort(),n?.toggleDrawing(!0),u.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}else n?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#C===Mt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ht(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#_)if(e.div.contains(t)){this.#P=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[t,e]=this.#P;this.#P=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#L)return;this.#L=new AbortController;const t=this.combinedSignal(this.#L);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ut(){this.#L?.abort(),this.#L=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#rt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ut(),this.#rt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#_){const s=i.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const n of e.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(n.type)){a.paste(n,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(n){Et(`paste: "${n.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const n=[];for(const h of i){const u=await s.deserialize(h);if(!u)return;n.push(u)}const a=()=>{for(const h of n)this.#it(h);this.#st(n)},o=()=>{for(const h of n)h.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(n){Et(`paste: "${n.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==Mt.NONE&&!this.isEditorHandlingKeyboard&&Fg._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(t){Object.entries(t).some(([i,s])=>this.#Y[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#C===Mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#$([[Ut.HIGHLIGHT_FREE,!0]]))}#$(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#k({isEditing:this.#C!==Mt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ht(),this.#rt(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const e of this.#h)this.#$(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,s=!1,n=!1){if(this.#C!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#C===Mt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===Mt.NONE){this.setEditingState(!1),this.#pt();for(const a of this.#i.values())a.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const a of this.#i.values())a.addStandaloneCommentButton();t===Mt.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const a of this.#a.values())a.updateMode(t);if(t===Mt.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#h.map(h=>h._editorType)));const a=new Set,o=[];for(const h of this.#i.values()){const{annotationElementId:u,hasComment:f,deleted:p}=h;u&&a.add(u),f&&!p&&o.push(h.getData())}for(const h of this.#s){const{id:u,popupRef:f,contentsObj:p}=h;f&&p?.str&&!a.has(u)&&!this.#m.has(u)&&o.push(h)}this.#l?.showSidebar(o)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const a of this.#i.values())a.uid===e?(this.setSelected(a),n?a.editComment():s?a.enterInEditMode():a.focus()):a.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#h){switch(t){case Ut.CREATE:this.currentLayer.addNewEditor(e);return;case Ut.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#_)i.updateParams(t,e);else for(const i of this.#h)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const n of this.#i.values())n.editorType===t&&n.show(e);(this.#X?.get(Ut.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#$([[Ut.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const e of this.#i.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#N?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#$(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#gt===t&&this.#$(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#$(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#u?.commitOrRemove();for(const e of this.#_)e!==t&&e.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#_],i=()=>{this._editorUndoBar?.show(s,e.length===1?e[0].editorType:e.length);for(const n of e)n.remove()},s=()=>{for(const n of e)this.#it(n)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#_)e.unselect();this.#_.clear();for(const e of t)e.isEmpty()||(this.#_.add(e),e.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#st(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==Mt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=e;const[s,n]=this.#U,a=[...this.#_],o=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const h of a)this.#i.has(h.id)&&(h.translateInPage(s,n),h.translationDone())},undo:()=>{for(const h of a)this.#i.has(h.id)&&(h.translateInPage(-s,-n),h.translationDone())},mustExec:!1})},o);for(const h of a)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#_)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:s,y:n,pageIndex:a},o]of t)o.newX=s,o.newY=n,o.newPageIndex=a,e||=s!==o.savedX||n!==o.savedY||a!==o.savedPageIndex;if(!e)return!1;const i=(s,n,a,o)=>{if(this.#i.has(s.id)){const h=this.#a.get(o);h?s._setParentAndPosition(h,n,a):(s.pageIndex=o,s.x=n,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:n,newY:a,newPageIndex:o}]of t)i(s,n,a,o)},undo:()=>{for(const[s,{savedX:n,savedY:a,savedPageIndex:o}]of t)i(s,n,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const i of this.#g.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==Mt.NONE}get imageManager(){return Lt(this,"imageManager",new R6)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,f=e.rangeCount;u<f;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:n,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(u,f,p,m)=>({x:(f-s)/a,y:1-(u+p-i)/n,width:m/a,height:p/n});break;case"180":o=(u,f,p,m)=>({x:1-(u+p-i)/n,y:1-(f+m-s)/a,width:p/n,height:m/a});break;case"270":o=(u,f,p,m)=>({x:1-(f+m-s)/a,y:(u-i)/n,width:m/a,height:p/n});break;default:o=(u,f,p,m)=>({x:(u-i)/n,y:(f-s)/a,width:p/n,height:m/a});break}const h=[];for(let u=0,f=e.rangeCount;u<f;u++){const p=e.getRangeAt(u);if(!p.collapsed)for(const{x:m,y,width:w,height:v}of p.getClientRects())w===0||v===0||h.push(o(m,y,w,v))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#r.getRawValue(e);i&&(this.#C===Mt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const s=this.#N?.get(t);s&&(s.setCanvas(e,i),this.#N.delete(t))}addMissingCanvas(t,e){(this.#N||=new Map).set(t,e)}},i2=class Kn{#t=null;#e=!1;#s=null;#i=null;#a=null;#n=null;#r=!1;#o=null;#c=null;#l=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#u=t._uiManager.useNewAltTextFlow,Kn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Kn._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",Kn.#f.missing),e.setAttribute("data-l10n-id",Kn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",ms,{signal:i}),t.addEventListener("pointerdown",n=>n.stopPropagation(),{signal:i});const s=n=>{n.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",n=>{n.target===t&&n.key==="Enter"&&(this.#r=!0,s(n))},{signal:i}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Kn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:n=!1}){i&&(this.#l=i,this.#d=s),!(this.#t===t&&this.#e===e)&&(n||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#s&&(!t&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#s.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#s?.remove(),this.#s=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#s;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Kn.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Kn.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const s=100,n=this.#c._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:n}),t.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:n})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}},$h=class{#t=null;#e=null;#s=!1;#i=null;#a=null;#n=null;#r=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#i.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=this.#i.commentButtonColor;s&&(i.backgroundColor=s)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:s,y:n,width:a,height:o}=this.#i.parent.boundingClientRect;return[(t-s)/a,(e+i-n)/o]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#i._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",ms,{signal:i}),e&&(t.addEventListener("focusin",n=>{this.#i._focusEventsAllowed=!1,Me(n)},{capture:!0,signal:i}),t.addEventListener("focusout",n=>{this.#i._focusEventsAllowed=!0,Me(n)},{capture:!0,signal:i})),t.addEventListener("pointerdown",n=>n.stopPropagation(),{signal:i});const s=n=>{n.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",n=>{n.target===t&&n.key==="Enter"&&(this.#s=!0,s(n))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,s;if(e)[i,s]=e;else{[i,s]=this.#i.commentButtonPosition;const{width:f,height:p,x:m,y}=this.#i;i=m+i*f,s=y+s*p}const n=this.#i.parent.boundingClientRect,{x:a,y:o,width:h,height:u}=n;this.#i._uiManager.editComment(this.#i,a+i*h,o+s*u,{...t,parentDimensions:n})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#a}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#n,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#r&&(this.#n=null),t===null){this.#r="",this.#c=!0;return}this.#r=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#n=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#r="",this.#n=null,this.#o=null,this.#i=null,this.#s=!1,this.#c=!1}},Vw=class qw{#t;#e=!1;#s=null;#i;#a;#n;#r;#o=null;#c;#l=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:n=null,onPinchEnd:a=null,signal:o}){this.#t=t,this.#s=i,this.#i=e,this.#a=s,this.#n=n,this.#r=a,this.#d=new AbortController,this.#c=AbortSignal.any([o,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Xr.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,n=AbortSignal.any([this.#c,s.signal]),a=this.#t,o={capture:!0,signal:n,passive:!1},h=u=>{u.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};a.addEventListener("pointerdown",u=>{u.pointerType==="touch"&&(Me(u),h(u))},o),a.addEventListener("pointerup",h,o),a.addEventListener("pointercancel",h,o);return}if(!this.#u){this.#u=new AbortController;const s=AbortSignal.any([this.#c,this.#u.signal]),n=this.#t,a={signal:s,capture:!1,passive:!1};n.addEventListener("touchmove",this.#m.bind(this),a);const o=this.#g.bind(this);n.addEventListener("touchend",o,a),n.addEventListener("touchcancel",o,a),a.capture=!0,n.addEventListener("pointerdown",Me,a),n.addEventListener("pointermove",Me,a),n.addEventListener("pointercancel",Me,a),n.addEventListener("pointerup",Me,a),this.#a?.()}if(Me(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;Me(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:n}=e,{screenX:a,screenY:o}=i,h=this.#l,{touch0X:u,touch0Y:f,touch1X:p,touch1Y:m}=h,y=p-u,w=m-f,v=a-s,S=o-n,_=Math.hypot(v,S)||1,x=Math.hypot(y,w)||1;if(!this.#e&&Math.abs(x-_)<=qw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=n,h.touch1X=a,h.touch1Y=o,!this.#e){this.#e=!0;return}const E=[(s+a)/2,(n+o)/2];this.#n?.(E,x,_)}#g(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#r?.()),this.#l&&(Me(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}},we=class Jt{#t=null;#e=null;#s=null;#i=null;#a=null;#n=!1;#r=null;#o="";#c=null;#l=null;#d=null;#u=null;#f=null;#m="";#g=!1;#h=null;#p=!1;#y=!1;#v=!1;#b=null;#x=0;#S=0;#A=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#E=Jt._zIndex++;static _borderLineWidth=-1;static _colorManager=new L6;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Jt.prototype._resizeWithKeyboard,e=Jl.TRANSLATE_SMALL,i=Jl.TRANSLATE_BIG;return Lt(this,"_resizerKeyboardManager",new fc([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Jt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[n,a];const[o,h]=this.parentDimensions;this.x=t.x/o,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Lt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new O6({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Jt._l10n??=t,Jt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Jt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Jt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){de("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#F(),this.#u?.remove(),this.#u=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[n,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/n,this.y=(e+s)/a,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}#R([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#h||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#h||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[s,n]}=this;if(this.x+=t/s,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[h,u]=this.getBaseTranslation();a+=h,o+=u;const{style:f}=i;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}get _hasBeenResized(){return!!this.#h&&(this.#h[2]!==this.width||this.#h[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Jt,s=i/t,n=i/e;switch(this.rotation){case 90:return[-s,n];case 180:return[s,n];case 270:return[s,-n];default:return[-s,-n]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:n,y:a,width:o,height:h}=this;if(o*=i,h*=s,n*=i,a*=s,this._mustFixPosition)switch(t){case 0:n=vi(n,0,i-o),a=vi(a,0,s-h);break;case 90:n=vi(n,0,i-h),a=vi(a,o,s);break;case 180:n=vi(n,o,i),a=vi(a,h,s);break;case 270:n=vi(n,h,i),a=vi(a,0,s-o);break}this.x=n/=i,this.y=a/=s;const[u,f]=this.getBaseTranslation();n+=u,a+=f,e.left=`${(100*n).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#M(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Jt.#M(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Jt.#M(t,e,360-this.parentRotation)}#D(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");this.#c.append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",this.#L.bind(this,i),{signal:e}),s.addEventListener("contextmenu",ms,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#c)}#L(t,e){e.preventDefault();const{isMac:i}=di.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#s?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const n=new AbortController,a=this._uiManager.combinedSignal(n);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#N.bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Me,{passive:!1,signal:a}),window.addEventListener("contextmenu",ms,{signal:a}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{n.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=h,this.#B()};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}#P(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=this.#d;this.#d=null;const n=this.x,a=this.y,o=this.width,h=this.height;n===t&&a===e&&o===i&&h===s||this.addCommands({cmd:this.#P.bind(this,n,a,o,h),undo:this.#P.bind(this,t,e,i,s),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#N(t,e){const[i,s]=this.parentDimensions,n=this.x,a=this.y,o=this.width,h=this.height,u=Jt.MIN_SIZE/i,f=Jt.MIN_SIZE/s,p=this.#D(this.rotation),m=(O,$)=>[p[0]*O+p[2]*$,p[1]*O+p[3]*$],y=this.#D(360-this.rotation),w=(O,$)=>[y[0]*O+y[2]*$,y[1]*O+y[3]*$];let v,S,_=!1,x=!1;switch(t){case"topLeft":_=!0,v=(O,$)=>[0,0],S=(O,$)=>[O,$];break;case"topMiddle":v=(O,$)=>[O/2,0],S=(O,$)=>[O/2,$];break;case"topRight":_=!0,v=(O,$)=>[O,0],S=(O,$)=>[0,$];break;case"middleRight":x=!0,v=(O,$)=>[O,$/2],S=(O,$)=>[0,$/2];break;case"bottomRight":_=!0,v=(O,$)=>[O,$],S=(O,$)=>[0,0];break;case"bottomMiddle":v=(O,$)=>[O/2,$],S=(O,$)=>[O/2,0];break;case"bottomLeft":_=!0,v=(O,$)=>[0,$],S=(O,$)=>[O,0];break;case"middleLeft":x=!0,v=(O,$)=>[0,$/2],S=(O,$)=>[O,$/2];break}const E=v(o,h),R=S(o,h);let D=m(...R);const M=Jt._round(n+D[0]),k=Jt._round(a+D[1]);let N=1,I=1,G,j;if(e.fromKeyboard)({deltaX:G,deltaY:j}=e);else{const{screenX:O,screenY:$}=e,[K,at]=this.#l;[G,j]=this.screenToPageTranslation(O-K,$-at),this.#l[0]=O,this.#l[1]=$}if([G,j]=w(G/i,j/s),_){const O=Math.hypot(o,h);N=I=Math.max(Math.min(Math.hypot(R[0]-E[0]-G,R[1]-E[1]-j)/O,1/o,1/h),u/o,f/h)}else x?N=vi(Math.abs(R[0]-E[0]-G),u,1)/o:I=vi(Math.abs(R[1]-E[1]-j),f,1)/h;const tt=Jt._round(o*N),ot=Jt._round(h*I);D=m(...S(tt,ot));const rt=M-D[0],lt=k-D[1];this.#h||=[this.x,this.y,this.width,this.height],this.width=tt,this.height=ot,this.x=rt,this.y=lt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new T6(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(i2.initialize(Jt._l10n),this.#s=new i2(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.#i||=new $h(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:s}}=this.#i;return{text:e,richText:t,date:i,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new $h(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#i||=new $h(this),this.#i.setInitialText(t,i),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new $h(this),this.#i.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[n]=this.pageDimensions,[a]=this.pageTranslation,o=a+n+1,h=s-100,u=o+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,h,u,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#n?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,n]=this.getInitialTranslation();return this.translate(s,n),Uw(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Vw({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,e,i){let n=.7*(i/e)+1-.7;if(n===1)return;const a=this.#D(this.rotation),o=(M,k)=>[a[0]*M+a[2]*k,a[1]*M+a[3]*k],[h,u]=this.parentDimensions,f=this.x,p=this.y,m=this.width,y=this.height,w=Jt.MIN_SIZE/h,v=Jt.MIN_SIZE/u;n=Math.max(Math.min(n,1/m,1/y),w/m,v/y);const S=Jt._round(m*n),_=Jt._round(y*n);if(S===m&&_===y)return;this.#h||=[f,p,m,y];const x=o(m/2,y/2),E=Jt._round(f+x[0]),R=Jt._round(p+x[1]),D=o(S/2,_/2);this.x=E-D[0],this.y=R-D[1],this.width=S,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#z(t);return}this.#O(t)}#O(t){const{isMac:e}=di.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,n=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:n},o=u=>{s.abort(),this.#r=null,this.#g=!1,this._uiManager.endDragSession()||this.#O(u),i&&this._onStopDragging()};e&&(this.#x=t.clientX,this.#S=t.clientY,this.#r=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:m}=u;if(m!==this.#r){Me(u);return}const[y,w]=this.screenToPageTranslation(f-this.#x,p-this.#S);this.#x=f,this.#S=p,this._uiManager.dragSelectedEditors(y,w)},a),window.addEventListener("touchmove",Me,a),window.addEventListener("pointerdown",u=>{u.pointerType===this.#o&&(this.#T||u.isPrimary)&&o(u),Me(u)},a));const h=u=>{if(!this.#r||this.#r===u.pointerId){o(u);return}Me(u)};window.addEventListener("pointerup",h,{signal:n}),window.addEventListener("blur",h,{signal:n})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[n,a]=this.pageDimensions,[o,h]=this.pageTranslation,u=t/s,f=e/s,p=this.x*n,m=this.y*a,y=this.width*n,w=this.height*a;switch(i){case 0:return[p+u+o,a-m-f-w+h,p+u+y+o,a-m-f+h];case 90:return[p+f+o,a-m+u+h,p+f+w+o,a-m+u+y+h];case 180:return[p-u-y+o,a-m+f+h,p-u+o,a-m+f+w+h];case 270:return[p-f-w+o,a-m-u-y+h,p-f+o,a-m-u+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,n,a]=t,o=n-i,h=a-s;switch(this.rotation){case 0:return[i,e-a,o,h];case 90:return[i,e-s,h,o];case 180:return[n,e-s,o,h];case 270:return[n,e-a,h,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Jt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:s,deleted:n,richText:a},uid:o,pageIndex:h,creationDate:u,modificationDate:f}=this;return{id:o,pageIndex:h,rect:this.getPDFRect(),richText:a,contentsObj:{str:t},creationDate:u,modificationDate:i||f,popupRef:!n,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:n,innerWidth:a}=window;return e<a&&s>0&&t<n&&i>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,s.#t=t.accessibilityData,s._isCopy=t.isCopy||!1;const[n,a]=s.pageDimensions,[o,h,u,f]=s.getRectInCurrentCoords(t.rect,a);return s.x=o/n,s.y=h/a,s.width=u/n,s.height=f/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#F(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,s,n,a]=this.getPDFRect();return[Jt._round(i+(n-i)*t),Jt._round(s+(a-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const a=this.#X.bind(this),o=this.#q.bind(this),h=this._uiManager._signal;for(const u of this.#e){const f=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:h}),u.addEventListener("blur",o,{signal:h}),u.addEventListener("focus",this.#Y.bind(this,f),{signal:h}),u.setAttribute("data-l10n-id",Jt._l10nResizer[f])}}const i=this.#e[0];let s=0;for(const a of e){if(a===i)break;s++}const n=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(n!==s){if(n<s)for(let o=0;o<s-n;o++)this.#c.append(this.#c.firstChild);else if(n>s)for(let o=0;o<n-s;o++)this.#c.firstChild.before(this.#c.lastChild);let a=0;for(const o of e){const u=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Jt._l10nResizer[u])}}this.#U(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){Jt._resizerKeyboardManager.exec(this,t)}#q(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#F()}#Y(t){this.#m=this.#v?t:""}#U(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#N(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#F(){this.#v=!1,this.#U(-1),this.#B()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let s=this.#A.get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},Jt._telemetryTimeout),this.#A.set(i,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}updateFakeAnnotationElement(t){if(!this.#u&&!this.deleted){this.#u=t.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},O6=class extends we{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}};const s2=3285377520,hs=4294901760,Rs=65535;let Xw=class{constructor(t){this.h1=t?t&4294967295:s2,this.h2=t?t&4294967295:s2}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let v=0,S=t.length;v<S;v++){const _=t.charCodeAt(v);_<=255?e[i++]=_:(e[i++]=_>>>8,e[i++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,n=i-s*4,a=new Uint32Array(e.buffer,0,s);let o=0,h=0,u=this.h1,f=this.h2;const p=3432918353,m=461845907,y=p&Rs,w=m&Rs;for(let v=0;v<s;v++)v&1?(o=a[v],o=o*p&hs|o*y&Rs,o=o<<15|o>>>17,o=o*m&hs|o*w&Rs,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(h=a[v],h=h*p&hs|h*y&Rs,h=h<<15|h>>>17,h=h*m&hs|h*w&Rs,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(o=0,n){case 3:o^=e[s*4+2]<<16;case 2:o^=e[s*4+1]<<8;case 1:o^=e[s*4],o=o*p&hs|o*y&Rs,o=o<<15|o>>>17,o=o*m&hs|o*w&Rs,s&1?u^=o:f^=o}this.h1=u,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&hs|t*36045&Rs,e=e*4283543511&hs|((e<<16|t>>>16)*2950163797&hs)>>>16,t^=e>>>1,t=t*444984403&hs|t*60499&Rs,e=e*3301882366&hs|((e<<16|t>>>16)*3120437893&hs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}};const Ig=Object.freeze({map:null,hash:"",transfer:void 0});let km=class{#t=!1;#e=null;#s=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){const e=this.#i.get(t);if(e!==void 0&&(e instanceof we&&this.#s.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#i.values())if(i instanceof we)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#i.get(t);let s=!1;if(i!==void 0)for(const[n,a]of Object.entries(e))i[n]!==a&&(s=!0,i[n]=a);else s=!0,this.#i.set(t,e);s&&this.#a(),e instanceof we&&((this.#s||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Yw(this)}get serializable(){if(this.#i.size===0)return Ig;const t=new Map,e=new Xw,i=[],s=Object.create(null);let n=!1;for(const[a,o]of this.#i){const h=o instanceof we?o.serialize(!1,s):o;h&&(t.set(a,h),e.update(`${a}:${JSON.stringify(h)}`),n||=!!h.bitmap)}if(n)for(const a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Ig}get editorStats(){let t=null;const e=new Map;let i=0,s=0;for(const n of this.#i.values()){if(!(n instanceof we)){n.popup&&(n.popup.deleted?s+=1:i+=1);continue}n.isCommentDeleted?s+=1:n.hasEditedComment&&(i+=1);const a=n.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const h=t[o]||=new Map;for(const[u,f]of Object.entries(a)){if(u==="type")continue;let p=h.get(u);p||(p=new Map,h.set(u,p));const m=p.get(f)??0;p.set(f,m+1)}}if((s>0||i>0)&&(t||=Object.create(null),t.comments={deleted:s,edited:i}),!t)return null;for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#s?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#s?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#s)for(const e of this.#s.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}},Yw=class extends km{#t;constructor(t){super();const{map:e,hash:i,transfer:s}=t.serializable,n=structuredClone(e,s?{transfer:s}:null);this.#t={map:n,hash:i,transfer:s}}get print(){de("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Lt(this,"modifiedIds",{ids:new Set,hash:""})}},P6=class{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if($t(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:n,style:a}=t,o=new FontFace(s,n,a);this.addNativeFontFace(o);try{await o.load(),this.#t.add(s),i?.(t)}catch{Et(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}de("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw Et(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Lt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Lt(this,"isSyncFontLoadingSupported",bi||di.platform.isFirefox)}_queueLoadingCallback(t){function e(){for($t(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const n=i.shift();setTimeout(n.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Lt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function s(R,D,M,k){const N=R.substring(0,D),I=R.substring(D+M);return N+k+I}let n,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const h=o.getContext("2d");let u=0;function f(R,D){if(++u>30){Et("Load test font never loaded."),D();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(f.bind(null,R,D))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,p.length,p);const w=16,v=1482184792;let S=i(m,w);for(n=0,a=p.length-3;n<a;n+=4)S=S-v+i(p,n)|0;n<p.length&&(S=S-v+i(p+"XXX",n)|0),m=s(m,w,4,u6(S));const _=`url(data:font/opentype;base64,${btoa(m)});`,x=`@font-face {font-family:"${p}";src:${_}}`;this.insertRule(x);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const R of[t.loadedName,p]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,E.append(D)}this._document.body.append(E),f(p,()=>{E.remove(),e.complete()})}},N6=class{#t;constructor(t,e=null,i,s){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Iw(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(a){Et(`getPathGenerator - ignoring character: "${a}".`)}const n=new Path2D(s||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=n}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}};function F6(c){if(c instanceof URL)return c.href;if(typeof c=="string"){if(bi)return c;const t=URL.parse(c,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function I6(c){if(bi&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return hc(c);if(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="object"&&!isNaN(c?.length))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Gh(c){if(typeof c!="string")return null;if(c.endsWith("/"))return c;throw new Error(`Invalid factory url: "${c}" must include trailing slash.`)}const Bg=c=>typeof c=="object"&&Number.isInteger(c?.num)&&c.num>=0&&Number.isInteger(c?.gen)&&c.gen>=0,B6=c=>typeof c=="object"&&typeof c?.name=="string",z6=m6.bind(null,Bg,B6);let j6=class{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if(i?.signal instanceof AbortSignal){const{signal:n}=i;if(n.aborted){Et("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);s=()=>n.removeEventListener("abort",a),n.addEventListener("abort",a)}this.#t.set(e,s)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}};const Vh={DATA:1,ERROR:2},ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function n2(){}function Li(c){if(c instanceof rr||c instanceof Rg||c instanceof Wv||c instanceof Cu||c instanceof Jp)return c;switch(c instanceof Error||typeof c=="object"&&c!==null||de('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new rr(c.message);case"InvalidPDFException":return new Rg(c.message);case"PasswordException":return new Wv(c.message,c.code);case"ResponseException":return new Cu(c.message,c.status,c.missing);case"UnknownErrorException":return new Jp(c.message,c.details)}return new Jp(c.message,c.toString())}let Pl=class{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Vh.DATA)s.resolve(t.data);else if(t.callback===Vh.ERROR)s.reject(Li(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,n=this.comObj;Promise.try(e,t.data).then(function(a){n.postMessage({sourceName:i,targetName:s,callback:Vh.DATA,callbackId:t.callbackId,data:a})},function(a){n.postMessage({sourceName:i,targetName:s,callback:Vh.ERROR,callbackId:t.callbackId,reason:Li(a)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[s]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(a){n.reject(a)}return n.promise}sendWithStream(t,e,i,s){const n=this.streamId++,a=this.sourceName,o=this.targetName,h=this.comObj;return new ReadableStream({start:u=>{const f=Promise.withResolvers();return this.streamControllers[n]={controller:u,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:a,targetName:o,action:t,streamId:n,data:e,desiredSize:u.desiredSize},s),f.promise},pull:u=>{const f=Promise.withResolvers();return this.streamControllers[n].pullCall=f,h.postMessage({sourceName:a,targetName:o,stream:ze.PULL,streamId:n,desiredSize:u.desiredSize}),f.promise},cancel:u=>{$t(u instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[n].cancelCall=f,this.streamControllers[n].isClosed=!0,h.postMessage({sourceName:a,targetName:o,stream:ze.CANCEL,streamId:n,reason:Li(u)}),f.promise}},i)}#s(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,a=this,o=this.actionHandler[t.action],h={enqueue(u,f=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=f,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:s,stream:ze.ENQUEUE,streamId:e,chunk:u},p)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:ze.CLOSE,streamId:e}),delete a.streamSinks[e])},error(u){$t(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:ze.ERROR,streamId:e,reason:Li(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(o,t.data,h).then(function(){n.postMessage({sourceName:i,targetName:s,stream:ze.START_COMPLETE,streamId:e,success:!0})},function(u){n.postMessage({sourceName:i,targetName:s,stream:ze.START_COMPLETE,streamId:e,reason:Li(u)})})}#i(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case ze.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Li(t.reason));break;case ze.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Li(t.reason));break;case ze.PULL:if(!o){n.postMessage({sourceName:i,targetName:s,stream:ze.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||n2).then(function(){n.postMessage({sourceName:i,targetName:s,stream:ze.PULL_COMPLETE,streamId:e,success:!0})},function(u){n.postMessage({sourceName:i,targetName:s,stream:ze.PULL_COMPLETE,streamId:e,reason:Li(u)})});break;case ze.ENQUEUE:if($t(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case ze.CLOSE:if($t(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#a(a,e);break;case ze.ERROR:$t(a,"error should have stream controller"),a.controller.error(Li(t.reason)),this.#a(a,e);break;case ze.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Li(t.reason)),this.#a(a,e);break;case ze.CANCEL:if(!o)break;const h=Li(t.reason);Promise.try(o.onCancel||n2,h).then(function(){n.postMessage({sourceName:i,targetName:s,stream:ze.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){n.postMessage({sourceName:i,targetName:s,stream:ze.CANCEL_COMPLETE,streamId:e,reason:Li(u)})}),o.sinkCapability.reject(h),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}},Ww=class{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){de("Abstract method `_createCanvas` called.")}},H6=class extends Ww{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},Kw=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}},r2=class extends Kw{async _fetch(t){const e=await uc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):hc(e)}},Qw=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,n){return"none"}destroy(t=!1){}},U6=class extends Qw{#t;#e;#s;#i;#a;#n;#r=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#n||=new Map}get#l(){if(!this.#s){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS(un,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#s=this.#a.createElementNS(un,"defs"),t.append(i),i.append(this.#s),this.#a.body.append(t)}return this.#s}#d(t){if(t.length===1){const h=t[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=h[p]/255;const f=u.join(",");return[f,f,f]}const[e,i,s]=t,n=new Array(256),a=new Array(256),o=new Array(256);for(let h=0;h<256;h++)n[h]=e[h]/255,a[h]=i[h]/255,o[h]=s[h]/255;return[n.join(","),a.join(","),o.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(Zu(e)?Et('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Pw(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,s,n]=this.#d(t),a=t.length===1?i:`${i}${s}${n}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#i}_transfer_map_${this.#r++}`,h=this.#u(o);this.#o.set(t,h),this.#o.set(a,h);const u=this.#g(o);return this.#p(i,s,n,u),h}addHCMFilter(t,e){const i=`${t}-${e}`,s="base";let n=this.#c.get(s);if(n?.key===i||(n?(n.filter?.remove(),n.key=i,n.url="none",n.filter=null):(n={key:i,url:"none",filter:null},this.#c.set(s,n)),!t||!e))return n.url;const a=this.#v(t);t=pt.makeHexColor(...a);const o=this.#v(e);if(e=pt.makeHexColor(...o),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return n.url;const h=new Array(256);for(let y=0;y<=255;y++){const w=y/255;h[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=h.join(","),f=`g_${this.#i}_hcm_filter`,p=n.filter=this.#g(f);this.#p(u,u,u,p),this.#m(p);const m=(y,w)=>{const v=a[y]/255,S=o[y]/255,_=new Array(w+1);for(let x=0;x<=w;x++)_[x]=v+x/w*(S-v);return _.join(",")};return this.#p(m(0,5),m(1,5),m(2,5),p),n.url=this.#u(f),n.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),s=`alpha_${i}`;if(e=this.#o.get(s),e)return this.#o.set(t,e),e;const n=`g_${this.#i}_alpha_map_${this.#r++}`,a=this.#u(n);this.#o.set(t,a),this.#o.set(s,a);const o=this.#g(n);return this.#y(i,o),a}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,s;if(t?([i]=this.#d([t]),s=`luminosity_${i}`):s="luminosity",e=this.#o.get(s),e)return this.#o.set(t,e),e;const n=`g_${this.#i}_luminosity_map_${this.#r++}`,a=this.#u(n);this.#o.set(t,a),this.#o.set(s,a);const o=this.#g(n);return this.#f(o),t&&this.#y(i,o),a}addHighlightHCMFilter(t,e,i,s,n){const a=`${e}-${i}-${s}-${n}`;let o=this.#c.get(t);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#c.set(t,o)),!e||!i))return o.url;const[h,u]=[e,i].map(this.#v.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,y]=[s,n].map(this.#v.bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),this.#l.style.color="";const w=(_,x,E)=>{const R=new Array(256),D=(p-f)/E,M=_/255,k=(x-_)/(255*E);let N=0;for(let I=0;I<=E;I++){const G=Math.round(f+I*D),j=M+I*k;for(let tt=N;tt<=G;tt++)R[tt]=j;N=G+1}for(let I=N;I<256;I++)R[I]=R[N-1];return R.join(",")},v=`g_${this.#i}_hcm_${t}_filter`,S=o.filter=this.#g(v);return this.#m(S),this.#p(w(m[0],y[0],5),w(m[1],y[1],5),w(m[2],y[2],5),S),o.url=this.#u(v),o.url}destroy(t=!1){t&&this.#n?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#n?.clear(),this.#n=null,this.#r=0)}#f(t){const e=this.#a.createElementNS(un,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(un,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(un,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#h(t,e,i){const s=this.#a.createElementNS(un,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)}#p(t,e,i,s){const n=this.#a.createElementNS(un,"feComponentTransfer");s.append(n),this.#h(n,"feFuncR",t),this.#h(n,"feFuncG",e),this.#h(n,"feFuncB",i)}#y(t,e){const i=this.#a.createElementNS(un,"feComponentTransfer");e.append(i),this.#h(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,dc(getComputedStyle(this.#l).getPropertyValue("color"))}},Zw=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}},a2=class extends Zw{async _fetch(t){const e=await uc(t,"arraybuffer");return new Uint8Array(e)}},Jw=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}},o2=class extends Jw{async _fetch(t){const e=await uc(t,"arraybuffer");return new Uint8Array(e)}};bi&&Et("Please use the `legacy` build in Node.js environments.");async function Lm(c){const e=await process.getBuiltinModule("fs").promises.readFile(c);return new Uint8Array(e)}let $6=class extends Qw{},G6=class extends Ww{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}},V6=class extends Kw{async _fetch(t){return Lm(t)}},q6=class extends Zw{async _fetch(t){return Lm(t)}},X6=class extends Jw{async _fetch(t){return Lm(t)}};const qa="__forcedDependency",{floor:l2,ceil:c2}=Math;function qh(c,t,e,i,s,n){c[t*4+0]=Math.min(c[t*4+0],e),c[t*4+1]=Math.min(c[t*4+1],i),c[t*4+2]=Math.max(c[t*4+2],s),c[t*4+3]=Math.max(c[t*4+3],n)}const zg=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];let Y6=class{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===zg}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}};const Xh=(c,t)=>{if(!c)return;let e=c.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},c.set(t,e)),e};let W6=class{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[qa]:[]};#s=new Map;#i=[];#a=[];#n=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#u=new Map;#f;#m;#g;#h;#p;constructor(t,e,i=!1){this.#f=t.width,this.#m=t.height,this.#y(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#h.length&&this.#y(t,this.#h)}#y(t,e){const i=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(i),this.#h=new Uint32Array(i),e&&e.length>0?(this.#h.set(e),this.#h.fill(zg,e.length)):this.#h.fill(zg)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[qa]:{__proto__:this.#e[qa]}},this.#r={__proto__:this.#r},this.#i.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#r=Object.getPrototypeOf(this.#r);const i=this.#i.pop();return i!==void 0&&(Xh(this.#p,t)?.dependencies.add(i),this.#h[t]=this.#h[i]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(Xh(this.#p,t)?.dependencies.add(e),this.#h[t]=this.#h[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(Xh(this.#p,t)?.dependencies.add(e),this.#h[t]=this.#h[e]),this}pushBaseTransform(t){return this.#n.push(pt.multiplyByDOMMatrix(this.#n.at(-1),t.getTransform())),this}popBaseTransform(){return this.#n.length>1&&this.#n.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#s.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#s.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(qa,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(qa,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,s,n,a){const o=pt.multiplyByDOMMatrix(this.#n.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];pt.axialAlignedBoundingBox([i,n,s,a],o,h);const u=pt.intersect(this.#r,h);return u?(this.#r[0]=u[0],this.#r[1]=u[1],this.#r[2]=u[2],this.#r[3]=u[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(t,e,i,s,n,a){const o=this.#r;if(o[0]===1/0)return this;const h=pt.multiplyByDOMMatrix(this.#n.at(-1),e.getTransform());if(o[0]===-1/0)return pt.axialAlignedBoundingBox([i,n,s,a],h,this.#o),this;const u=[1/0,1/0,-1/0,-1/0];return pt.axialAlignedBoundingBox([i,n,s,a],h,u),this.#o[0]=Math.min(this.#o[0],Math.max(u[0],o[0])),this.#o[1]=Math.min(this.#o[1],Math.max(u[1],o[1])),this.#o[2]=Math.max(this.#o[2],Math.min(u[2],o[2])),this.#o[3]=Math.max(this.#o[3],Math.min(u[3],o[3])),this}recordCharacterBBox(t,e,i,s=1,n=0,a=0,o){const h=i.bbox;let u,f;if(h&&(u=h[2]!==h[0]&&h[3]!==h[1]&&this.#u.get(i),u!==!1&&(f=[0,0,0,0],pt.axialAlignedBoundingBox(h,i.fontMatrix,f),(s!==1||n!==0||a!==0)&&pt.scaleMinMax([s,0,0,-s,n,a],f),u)))return this.recordBBox(t,e,f[0],f[2],f[1],f[3]);if(!o)return this.recordFullPageBBox(t);const p=o();return h&&f&&u===void 0&&(u=f[0]<=n-p.actualBoundingBoxLeft&&f[2]>=n+p.actualBoundingBoxRight&&f[1]<=a-p.actualBoundingBoxAscent&&f[3]>=a+p.actualBoundingBoxDescent,this.#u.set(i,u),u)?this.recordBBox(t,e,f[0],f[2],f[1],f[3]):this.recordBBox(t,e,n-p.actualBoundingBoxLeft,n+p.actualBoundingBoxRight,a-p.actualBoundingBoxAscent,a+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#m,this.#r[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,s=this.#t,n=this.#e;for(const a of e)a in this.#t?i.add(s[a]):a in n&&n[a].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#s.has(e)&&this.#l.add(this.#s.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[qa]),this.#p){const i=Xh(this.#p,t),{dependencies:s}=i;this.#l.forEach(s.add,s),this.#i.forEach(s.add,s),this.#a.forEach(s.add,s),s.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=l2(this.#o[0]*256/this.#f),s=l2(this.#o[1]*256/this.#m),n=c2(this.#o[2]*256/this.#f),a=c2(this.#o[3]*256/this.#m);qh(this.#g,t,i,s,n,a);for(const o of this.#l)o!==t&&qh(this.#g,o,i,s,n,a);for(const o of this.#i)o!==t&&qh(this.#g,o,i,s,n,a);for(const o of this.#a)o!==t&&qh(this.#g,o,i,s,n,a);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of i)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#u.clear(),new Y6(this.#h,this.#g)}takeDebugMetadata(){return this.#p}},h2=class t_{#t;#e;#s;#i=0;#a=0;constructor(t,e,i){if(t instanceof t_&&t.#s===!!i)return t;this.#t=t,this.#e=e,this.#s=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#s||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,s,n,a){return this.#s||this.#t.recordClipBox(this.#e,e,i,s,n,a),this}recordBBox(t,e,i,s,n,a){return this.#s||this.#t.recordBBox(this.#e,e,i,s,n,a),this}recordCharacterBBox(t,e,i,s,n,a,o){return this.#s||this.#t.recordCharacterBBox(this.#e,e,i,s,n,a,o),this}recordFullPageBBox(t){return this.#s||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#s||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};const us={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},hi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function jg(c,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),c.clip(s)}let Om=class{isModifyingCurrentTransform(){return!1}getPattern(){de("Abstract method `getPattern` called.")}},K6=class extends Om{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let n;if(s===hi.STROKE||s===hi.FILL){const a=e.current.getClippedPathBoundingBox(s,Se(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,h=Math.ceil(a[3]-a[1])||1,u=e.cachedCanvases.getCanvas("pattern",o,h),f=u.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),i=pt.transform(i,[1,0,0,1,a[0],a[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),jg(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),n=t.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(i);n.setTransform(p)}else jg(t,this._bbox),n=this._createGradient(t);return n}};function ig(c,t,e,i,s,n,a,o){const h=t.coords,u=t.colors,f=c.data,p=c.width*4;let m;h[e+1]>h[i+1]&&(m=e,e=i,i=m,m=n,n=a,a=m),h[i+1]>h[s+1]&&(m=i,i=s,s=m,m=a,a=o,o=m),h[e+1]>h[i+1]&&(m=e,e=i,i=m,m=n,n=a,a=m);const y=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,v=(h[i]+t.offsetX)*t.scaleX,S=(h[i+1]+t.offsetY)*t.scaleY,_=(h[s]+t.offsetX)*t.scaleX,x=(h[s+1]+t.offsetY)*t.scaleY;if(w>=x)return;const E=u[n],R=u[n+1],D=u[n+2],M=u[a],k=u[a+1],N=u[a+2],I=u[o],G=u[o+1],j=u[o+2],tt=Math.round(w),ot=Math.round(x);let rt,lt,O,$,K,at,nt,P;for(let H=tt;H<=ot;H++){if(H<S){const et=H<w?0:(w-H)/(w-S);rt=y-(y-v)*et,lt=E-(E-M)*et,O=R-(R-k)*et,$=D-(D-N)*et}else{let et;H>x?et=1:S===x?et=0:et=(S-H)/(S-x),rt=v-(v-_)*et,lt=M-(M-I)*et,O=k-(k-G)*et,$=N-(N-j)*et}let W;H<w?W=0:H>x?W=1:W=(w-H)/(w-x),K=y-(y-_)*W,at=E-(E-I)*W,nt=R-(R-G)*W,P=D-(D-j)*W;const z=Math.round(Math.min(rt,K)),ct=Math.round(Math.max(rt,K));let Z=p*H+z*4;for(let et=z;et<=ct;et++)W=(rt-et)/(rt-K),W<0?W=0:W>1&&(W=1),f[Z++]=lt-(lt-at)*W|0,f[Z++]=O-(O-nt)*W|0,f[Z++]=$-($-P)*W|0,f[Z++]=255}}function Q6(c,t,e){const i=t.coords,s=t.colors;let n,a;switch(t.type){case"lattice":const o=t.verticesPerRow,h=Math.floor(i.length/o)-1,u=o-1;for(n=0;n<h;n++){let f=n*o;for(let p=0;p<u;p++,f++)ig(c,e,i[f],i[f+1],i[f+o],s[f],s[f+1],s[f+o]),ig(c,e,i[f+o+1],i[f+1],i[f+o],s[f+o+1],s[f+1],s[f+o])}break;case"triangles":for(n=0,a=i.length;n<a;n+=3)ig(c,e,i[n],i[n+1],i[n+2],s[n],s[n+1],s[n+2]);break;default:throw new Error("illegal figure")}}let Z6=class extends Om{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,f=Math.ceil(this._bounds[3])-h,p=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),y=u/p,w=f/m,v={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-h,scaleX:1/y,scaleY:1/w},S=p+4,_=m+4,x=i.getCanvas("mesh",S,_),E=x.context,R=E.createImageData(p,m);if(e){const M=R.data;for(let k=0,N=M.length;k<N;k+=4)M[k]=e[0],M[k+1]=e[1],M[k+2]=e[2],M[k+3]=255}for(const M of this._figures)Q6(R,M,v);return E.putImageData(R,2,2),{canvas:x.canvas,offsetX:o-2*y,offsetY:h-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){jg(t,this._bbox);const n=new Float32Array(2);if(s===hi.SHADING)pt.singularValueDecompose2dScale(Se(t),n);else if(this.matrix){pt.singularValueDecompose2dScale(this.matrix,n);const[o,h]=n;pt.singularValueDecompose2dScale(e.baseTransform,n),n[0]*=o,n[1]*=h}else pt.singularValueDecompose2dScale(e.baseTransform,n);const a=this._createMeshCanvas(n,s===hi.SHADING?null:this._background,e.cachedCanvases);return s!==hi.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}},J6=class extends Om{getPattern(){return"hotpink"}};function t8(c){switch(c[0]){case"RadialAxial":return new K6(c);case"Mesh":return new Z6(c);case"Dummy":return new J6}throw new Error(`Unknown IR type: ${c[0]}`)}const u2={COLORED:1,UNCOLORED:2};let e8=class e_{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t,e){const{bbox:i,operatorList:s,paintType:n,tilingType:a,color:o,canvasGraphicsFactory:h}=this;let{xstep:u,ystep:f}=this;u=Math.abs(u),f=Math.abs(f),Qu("TilingType: "+a);const p=i[0],m=i[1],y=i[2],w=i[3],v=y-p,S=w-m,_=new Float32Array(2);pt.singularValueDecompose2dScale(this.matrix,_);const[x,E]=_;pt.singularValueDecompose2dScale(this.baseTransform,_);const R=x*_[0],D=E*_[1];let M=v,k=S,N=!1,I=!1;const G=Math.ceil(u*R),j=Math.ceil(f*D),tt=Math.ceil(v*R),ot=Math.ceil(S*D);G>=tt?M=u:N=!0,j>=ot?k=f:I=!0;const rt=this.getSizeAndScale(M,this.ctx.canvas.width,R),lt=this.getSizeAndScale(k,this.ctx.canvas.height,D),O=t.cachedCanvases.getCanvas("pattern",rt.size,lt.size),$=O.context,K=h.createCanvasGraphics($,e);if(K.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(K,n,o),$.translate(-rt.scale*p,-lt.scale*m),K.transform(0,rt.scale,0,0,lt.scale,0,0),$.save(),K.dependencyTracker?.save(),this.clipBbox(K,p,m,y,w),K.baseTransform=Se(K.ctx),K.executeOperatorList(s),K.endDrawing(),K.dependencyTracker?.restore(),$.restore(),N||I){const at=O.canvas;N&&(M=u),I&&(k=f);const nt=this.getSizeAndScale(M,this.ctx.canvas.width,R),P=this.getSizeAndScale(k,this.ctx.canvas.height,D),H=nt.size,W=P.size,z=t.cachedCanvases.getCanvas("pattern-workaround",H,W),ct=z.context,Z=N?Math.floor(v/u):0,et=I?Math.floor(S/f):0;for(let mt=0;mt<=Z;mt++)for(let gt=0;gt<=et;gt++)ct.drawImage(at,H*mt,W*gt,H,W,0,0,H,W);return{canvas:z.canvas,scaleX:nt.scale,scaleY:P.scale,offsetX:p,offsetY:m}}return{canvas:O.canvas,scaleX:rt.scale,scaleY:lt.scale,offsetX:p,offsetY:m}}getSizeAndScale(t,e,i){const s=Math.max(e_.MAX_PATTERN_SIZE,e);let n=Math.ceil(t*i);return n>=s?n=s:i=n/t,{scale:i,size:n}}clipBbox(t,e,i,s,n){const a=s-e,o=n-i;t.ctx.rect(e,i,a,o),pt.axialAlignedBoundingBox([e,i,s,n],Se(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,n=t.current;switch(e){case u2.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;s.fillStyle=n.fillColor=a,s.strokeStyle=n.strokeColor=o;break;case u2.UNCOLORED:s.fillStyle=s.strokeStyle=i,n.fillColor=n.strokeColor=i;break;default:throw new h6(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s,n){let a=i;s!==hi.SHADING&&(a=pt.transform(a,e.baseTransform),this.matrix&&(a=pt.transform(a,this.matrix)));const o=this.createPatternCanvas(e,n);let h=new DOMMatrix(a);h=h.translate(o.offsetX,o.offsetY),h=h.scale(1/o.scaleX,1/o.scaleY);const u=t.createPattern(o.canvas,"repeat");return u.setTransform(h),u}};function i8({src:c,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:n=4294967295,inverseDecode:a=!1}){const o=di.isLittleEndian?4278190080:255,[h,u]=a?[n,o]:[o,n],f=i>>3,p=i&7,m=c.length;e=new Uint32Array(e.buffer);let y=0;for(let w=0;w<s;w++){for(const S=t+f;t<S;t++){const _=t<m?c[t]:255;e[y++]=_&128?u:h,e[y++]=_&64?u:h,e[y++]=_&32?u:h,e[y++]=_&16?u:h,e[y++]=_&8?u:h,e[y++]=_&4?u:h,e[y++]=_&2?u:h,e[y++]=_&1?u:h}if(p===0)continue;const v=t<m?c[t++]:255;for(let S=0;S<p;S++)e[y++]=v&1<<7-S?u:h}return{srcPos:t,destPos:y}}const d2=16,f2=100,s8=15,p2=10,Pi=16,sg=new DOMMatrix,Wi=new Float32Array(2),io=new Float32Array([1/0,1/0,-1/0,-1/0]);function n8(c,t){if(c._removeMirroring)throw new Error("Context is already forwarding operations.");c.__originalSave=c.save,c.__originalRestore=c.restore,c.__originalRotate=c.rotate,c.__originalScale=c.scale,c.__originalTranslate=c.translate,c.__originalTransform=c.transform,c.__originalSetTransform=c.setTransform,c.__originalResetTransform=c.resetTransform,c.__originalClip=c.clip,c.__originalMoveTo=c.moveTo,c.__originalLineTo=c.lineTo,c.__originalBezierCurveTo=c.bezierCurveTo,c.__originalRect=c.rect,c.__originalClosePath=c.closePath,c.__originalBeginPath=c.beginPath,c._removeMirroring=()=>{c.save=c.__originalSave,c.restore=c.__originalRestore,c.rotate=c.__originalRotate,c.scale=c.__originalScale,c.translate=c.__originalTranslate,c.transform=c.__originalTransform,c.setTransform=c.__originalSetTransform,c.resetTransform=c.__originalResetTransform,c.clip=c.__originalClip,c.moveTo=c.__originalMoveTo,c.lineTo=c.__originalLineTo,c.bezierCurveTo=c.__originalBezierCurveTo,c.rect=c.__originalRect,c.closePath=c.__originalClosePath,c.beginPath=c.__originalBeginPath,delete c._removeMirroring},c.save=function(){t.save(),this.__originalSave()},c.restore=function(){t.restore(),this.__originalRestore()},c.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},c.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},c.transform=function(e,i,s,n,a,o){t.transform(e,i,s,n,a,o),this.__originalTransform(e,i,s,n,a,o)},c.setTransform=function(e,i,s,n,a,o){t.setTransform(e,i,s,n,a,o),this.__originalSetTransform(e,i,s,n,a,o)},c.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},c.rotate=function(e){t.rotate(e),this.__originalRotate(e)},c.clip=function(e){t.clip(e),this.__originalClip(e)},c.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},c.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},c.bezierCurveTo=function(e,i,s,n,a,o){t.bezierCurveTo(e,i,s,n,a,o),this.__originalBezierCurveTo(e,i,s,n,a,o)},c.rect=function(e,i,s,n){t.rect(e,i,s,n),this.__originalRect(e,i,s,n)},c.closePath=function(){t.closePath(),this.__originalClosePath()},c.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}let r8=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function Yh(c,t,e,i,s,n,a,o,h,u){const[f,p,m,y,w,v]=Se(c);if(p===0&&m===0){const x=a*f+w,E=Math.round(x),R=o*y+v,D=Math.round(R),M=(a+h)*f+w,k=Math.abs(Math.round(M)-E)||1,N=(o+u)*y+v,I=Math.abs(Math.round(N)-D)||1;return c.setTransform(Math.sign(f),0,0,Math.sign(y),E,D),c.drawImage(t,e,i,s,n,0,0,k,I),c.setTransform(f,p,m,y,w,v),[k,I]}if(f===0&&y===0){const x=o*m+w,E=Math.round(x),R=a*p+v,D=Math.round(R),M=(o+u)*m+w,k=Math.abs(Math.round(M)-E)||1,N=(a+h)*p+v,I=Math.abs(Math.round(N)-D)||1;return c.setTransform(0,Math.sign(p),Math.sign(m),0,E,D),c.drawImage(t,e,i,s,n,0,0,I,k),c.setTransform(f,p,m,y,w,v),[I,k]}c.drawImage(t,e,i,s,n,a,o,h,u);const S=Math.hypot(f,p),_=Math.hypot(m,y);return[S*h,_*u]}let g2=class{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Dg;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=oi.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=io.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=hi.FILL,e=null){const i=this.minMax.slice();if(t===hi.STROKE){e||de("Stroke bounding box must include transform."),pt.singularValueDecompose2dScale(e,Wi);const s=Wi[0]*this.lineWidth/2,n=Wi[1]*this.lineWidth/2;i[0]-=s,i[1]-=n,i[2]+=s,i[3]+=n}return i}updateClipFromPath(){const t=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(io,0)}getClippedPathBoundingBox(t=hi.FILL,e=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function m2(c,t){if(t instanceof ImageData){c.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%Pi,n=(e-s)/Pi,a=s===0?n:n+1,o=c.createImageData(i,Pi);let h=0,u;const f=t.data,p=o.data;let m,y,w,v;if(t.kind===hu.GRAYSCALE_1BPP){const S=f.byteLength,_=new Uint32Array(p.buffer,0,p.byteLength>>2),x=_.length,E=i+7>>3,R=4294967295,D=di.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(w=m<n?Pi:s,u=0,y=0;y<w;y++){const M=S-h;let k=0;const N=M>E?i:M*8-7,I=N&-8;let G=0,j=0;for(;k<I;k+=8)j=f[h++],_[u++]=j&128?R:D,_[u++]=j&64?R:D,_[u++]=j&32?R:D,_[u++]=j&16?R:D,_[u++]=j&8?R:D,_[u++]=j&4?R:D,_[u++]=j&2?R:D,_[u++]=j&1?R:D;for(;k<N;k++)G===0&&(j=f[h++],G=128),_[u++]=j&G?R:D,G>>=1}for(;u<x;)_[u++]=0;c.putImageData(o,0,m*Pi)}}else if(t.kind===hu.RGBA_32BPP){for(y=0,v=i*Pi*4,m=0;m<n;m++)p.set(f.subarray(h,h+v)),h+=v,c.putImageData(o,0,y),y+=Pi;m<a&&(v=i*s*4,p.set(f.subarray(h,h+v)),c.putImageData(o,0,y))}else if(t.kind===hu.RGB_24BPP)for(w=Pi,v=i*w,m=0;m<a;m++){for(m>=n&&(w=s,v=i*w),u=0,y=v;y--;)p[u++]=f[h++],p[u++]=f[h++],p[u++]=f[h++],p[u++]=255;c.putImageData(o,0,m*Pi)}else throw new Error(`bad image kind: ${t.kind}`)}function y2(c,t){if(t.bitmap){c.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%Pi,n=(e-s)/Pi,a=s===0?n:n+1,o=c.createImageData(i,Pi);let h=0;const u=t.data,f=o.data;for(let p=0;p<a;p++){const m=p<n?Pi:s;({srcPos:h}=i8({src:u,srcPos:h,dest:f,width:i,height:m,nonBlackColor:0})),c.putImageData(o,0,p*Pi)}}function wl(c,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)c[i]!==void 0&&(t[i]=c[i]);c.setLineDash!==void 0&&(t.setLineDash(c.getLineDash()),t.lineDashOffset=c.lineDashOffset)}function Wh(c){c.strokeStyle=c.fillStyle="#000000",c.fillRule="nonzero",c.globalAlpha=1,c.lineWidth=1,c.lineCap="butt",c.lineJoin="miter",c.miterLimit=10,c.globalCompositeOperation="source-over",c.font="10px sans-serif",c.setLineDash!==void 0&&(c.setLineDash([]),c.lineDashOffset=0);const{filter:t}=c;t!=="none"&&t!==""&&(c.filter="none")}function b2(c,t){if(t)return!0;pt.singularValueDecompose2dScale(c,Wi);const e=Math.fround(Xr.pixelRatio*bo.PDF_TO_CSS_UNITS);return Wi[0]<=e&&Wi[1]<=e}const a8=["butt","round","square"],o8=["miter","round","bevel"],l8={},v2={};let du=class i_{constructor(t,e,i,s,n,{optionalContentConfig:a,markedContentStack:o=null},h,u,f){this.ctx=t,this.current=new g2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=n,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new r8(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const n=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,n,a),this.ctx.fillStyle=o,i){const h=this.cachedCanvases.getCanvas("transparent",n,a);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Se(this.compositeCtx))}this.ctx.save(),Wh(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Se(this.ctx)}executeOperatorList(t,e,i,s,n){const a=t.argsArray,o=t.fnArray;let h=e||0;const u=a.length;if(u===h)return h;const f=u-h>p2&&typeof i=="function",p=f?Date.now()+s8:0;let m=0;const y=this.commonObjs,w=this.objs;let v,S;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,i),h;if(!n||n(h))if(v=o[h],S=a[h]??null,v!==Zl.dependency)S===null?this[v](h):this[v](h,...S);else for(const _ of S){this.dependencyTracker?.recordNamedData(_,h);const x=_.startsWith("g_")?y:w;if(!x.has(_))return x.get(_,i),h}if(h++,h===u)return h;if(f&&++m>p2){if(Date.now()>p)return i(),h;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let n=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,h=s,u="prescale1",f,p;for(;n>2&&o>1||a>2&&h>1;){let m=o,y=h;n>2&&o>1&&(m=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),n/=o/m),a>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/y),f=this.cachedCanvases.getCanvas(u,m,y),p=f.context,p.clearRect(0,0,m,y),p.drawImage(t,0,0,o,h,0,0,m,y),t=f.canvas,o=m,h=y,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:h}}_createMaskCanvas(t,e){const i=this.ctx,{width:s,height:n}=e,a=this.current.fillColor,o=this.current.patternFill,h=Se(i);let u,f,p,m;if((e.bitmap||e.data)&&e.count>1){const G=e.bitmap||e.data.buffer;f=JSON.stringify(o?h:[h.slice(0,4),a]),u=this._cachedBitmapsMap.get(G),u||(u=new Map,this._cachedBitmapsMap.set(G,u));const j=u.get(f);if(j&&!o){const tt=Math.round(Math.min(h[0],h[2])+h[4]),ot=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,us.transformAndFill),{canvas:j,offsetX:tt,offsetY:ot}}p=j}p||(m=this.cachedCanvases.getCanvas("maskCanvas",s,n),y2(m.context,e));let y=pt.transform(h,[1/s,0,0,-1/n,0,0]);y=pt.transform(y,[1,0,0,1,0,-n]);const w=io.slice();pt.axialAlignedBoundingBox([0,0,s,n],y,w);const[v,S,_,x]=w,E=Math.round(_-v)||1,R=Math.round(x-S)||1,D=this.cachedCanvases.getCanvas("fillCanvas",E,R),M=D.context,k=v,N=S;M.translate(-k,-N),M.transform(...y),p||(p=this._scaleImage(m.canvas,Ds(M)),p=p.img,u&&o&&u.set(f,p)),M.imageSmoothingEnabled=b2(Se(M),e.interpolate),Yh(M,p,0,0,p.width,p.height,0,0,s,n),M.globalCompositeOperation="source-in";const I=pt.transform(Ds(M),[1,0,0,1,-k,-N]);return M.fillStyle=o?a.getPattern(i,this,I,hi.FILL,t):a,M.fillRect(0,0,s,n),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,D.canvas)),this.dependencyTracker?.recordDependencies(t,us.transformAndFill),{canvas:D.canvas,offsetX:Math.round(k),offsetY:Math.round(N)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=a8[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=o8[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,s]of e)switch(i){case"LW":this.setLineWidth(t,s);break;case"LC":this.setLineCap(t,s);break;case"LJ":this.setLineJoin(t,s);break;case"ML":this.setMiterLimit(t,s);break;case"D":this.setDash(t,s[0],s[1]);break;case"RI":this.setRenderingIntent(t,s);break;case"FL":this.setFlatness(t,s);break;case"Font":this.setFont(t,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,e,i);this.suspendedCtx=this.ctx;const a=this.ctx=n.context;a.setTransform(this.suspendedCtx.getTransform()),wl(this.suspendedCtx,a),n8(a,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),wl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const n=s[0],a=s[1],o=s[2]-n,h=s[3]-a;o===0||h===0||(this.genericComposeSMask(e.context,i,o,h,e.subtype,e.backdrop,e.transferMap,n,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,n,a,o,h,u,f,p){let m=t.canvas,y=h-f,w=u-p;if(a)if(y<0||w<0||y+i>m.width||w+s>m.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),_=S.context;_.drawImage(m,-y,-w),_.globalCompositeOperation="destination-atop",_.fillStyle=a,_.fillRect(0,0,i,s),_.globalCompositeOperation="source-over",m=S.canvas,y=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(y,w,i,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(y,w,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),n==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):n==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const v=new Path2D;v.rect(h,u,i,s),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(m,y,w,i,s,h,u,i,s),e.restore()}save(t){this.inSMaskMode&&wl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&wl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,n,a,o){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,s,n,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,s){let[n]=i;if(!s){n||=i[0]=new Path2D,this[e](t,n);return}if(this.dependencyTracker!==null){const a=e===Zl.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-a,s[2]+a,s[1]-a,s[3]+a).recordDependencies(t,["transform"])}if(!(n instanceof Path2D)){const a=i[0]=new Path2D;for(let o=0,h=n.length;o<h;)switch(n[o++]){case Uh.moveTo:a.moveTo(n[o++],n[o++]);break;case Uh.lineTo:a.lineTo(n[o++],n[o++]);break;case Uh.curveTo:a.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);break;case Uh.closePath:a.closePath();break;default:Et(`Unrecognized drawing path operator: ${n[o-1]}`);break}n=a}pt.axialAlignedBoundingBox(s,Se(this.ctx),this.current.minMax),this[e](t,n),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&n?.getPattern){const a=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,Ds(s),hi.STROKE,t),a){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(a)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,us.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(hi.STROKE,Se(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const s=this.ctx,n=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const u=n.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(t),s.save(),s.fillStyle=n.getPattern(s,this,Ds(s),hi.FILL,t),u){const f=new Path2D;f.addPath(e,s.getTransform().invertSelf().multiplySelf(u)),e=f}o=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),this.dependencyTracker?.recordDependencies(t,us.fill),o&&(s.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,us.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=l8}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=v2}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,n=i.getTransform().invertSelf();for(const{transform:a,x:o,y:h,fontSize:u,path:f}of e)f&&s.addPath(f,new DOMMatrix(a).preMultiplySelf(n).translate(o,h).scale(u,-u));i.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),n=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=s.fontMatrix||Dg,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&Et("Invalid font matrix for font "+e),i<0?(i=-i,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const a=s.loadedName||"sans-serif",o=s.systemFontInfo?.css||`"${a}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const u=s.italic?"italic":"normal";let f=i;i<d2?f=d2:i>f2&&(f=f2),this.current.fontSizeScale=i/f,this.ctx.font=`${u} ${h} ${f}px ${o}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#s(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s}paintChar(t,e,i,s,n,a){const o=this.ctx,h=this.current,u=h.font,f=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,m=f&oi.FILL_STROKE_MASK,y=!!(f&oi.ADD_TO_PATH_FLAG),w=h.patternFill&&!u.missingFile,v=h.patternStroke&&!u.missingFile;let S;if((u.disableFontFace||y||w||v)&&!u.missingFile&&(S=u.getPathGenerator(this.commonObjs,e)),S&&(u.disableFontFace||w||v)){o.save(),o.translate(i,s),o.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,o,u);let _;if(m===oi.FILL||m===oi.FILL_STROKE)if(n){_=o.getTransform(),o.setTransform(...n);const x=this.#s(S,_,n);o.fill(x)}else o.fill(S);if(m===oi.STROKE||m===oi.FILL_STROKE)if(a){_||=o.getTransform(),o.setTransform(...a);const{a:x,b:E,c:R,d:D}=_,M=pt.inverseTransform(a),k=pt.transform([x,E,R,D,0,0],M);pt.singularValueDecompose2dScale(k,Wi),o.lineWidth*=Math.max(Wi[0],Wi[1])/p,o.stroke(this.#s(S,_,a))}else o.lineWidth/=p,o.stroke(S);o.restore()}else(m===oi.FILL||m===oi.FILL_STROKE)&&(o.fillText(e,i,s),this.dependencyTracker?.recordCharacterBBox(t,o,u,p,i,s,()=>o.measureText(e))),(m===oi.STROKE||m===oi.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,o,u,p,i,s,()=>o.measureText(e)).recordDependencies(t,us.stroke),o.strokeText(e,i,s));y&&((this.pendingTextPaths||=[]).push({transform:Se(o),x:i,y:s,fontSize:p,path:S}),this.dependencyTracker?.recordCharacterBBox(t,o,u,p,i,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return Lt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,us.showText).resetBBox(t),this.current.textRenderingMode&oi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;if(s.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const n=i.fontSize;if(n===0){this.dependencyTracker?.recordOperation(t);return}const a=this.ctx,o=i.fontSizeScale,h=i.charSpacing,u=i.wordSpacing,f=i.fontDirection,p=i.textHScale*f,m=e.length,y=s.vertical,w=y?1:-1,v=s.defaultVMetrics,S=n*i.fontMatrix[0],_=i.textRenderingMode===oi.FILL&&!s.disableFontFace&&!i.patternFill;a.save(),i.textMatrix&&a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),f>0?a.scale(p,-1):a.scale(p,1);let x,E;if(i.patternFill){a.save();const N=i.fillColor.getPattern(a,this,Ds(a),hi.FILL,t);x=Se(a),a.restore(),a.fillStyle=N}if(i.patternStroke){a.save();const N=i.strokeColor.getPattern(a,this,Ds(a),hi.STROKE,t);E=Se(a),a.restore(),a.strokeStyle=N}let R=i.lineWidth;const D=i.textMatrixScale;if(D===0||R===0){const N=i.textRenderingMode&oi.FILL_STROKE_MASK;(N===oi.STROKE||N===oi.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=D;if(o!==1&&(a.scale(o,o),R/=o),a.lineWidth=R,s.isInvalidPDFjsFont){const N=[];let I=0;for(const j of e)N.push(j.unicode),I+=j.width;const G=N.join("");if(a.fillText(G,0,0),this.dependencyTracker!==null){const j=a.measureText(G);this.dependencyTracker.recordBBox(t,this.ctx,-j.actualBoundingBoxLeft,j.actualBoundingBoxRight,-j.actualBoundingBoxAscent,j.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=I*S*p,a.restore(),this.compose();return}let M=0,k;for(k=0;k<m;++k){const N=e[k];if(typeof N=="number"){M+=w*N*n/1e3;continue}let I=!1;const G=(N.isSpace?u:0)+h,j=N.fontChar,tt=N.accent;let ot,rt,lt=N.width;if(y){const K=N.vmetric||v,at=-(N.vmetric?K[1]:lt*.5)*S,nt=K[2]*S;lt=K?-K[0]:lt,ot=at/o,rt=(M+nt)/o}else ot=M/o,rt=0;let O;if(s.remeasure&&lt>0){O=a.measureText(j);const K=O.width*1e3/n*o;if(lt<K&&this.isFontSubpixelAAEnabled){const at=lt/K;I=!0,a.save(),a.scale(at,1),ot/=at}else lt!==K&&(ot+=(lt-K)/2e3*n/o)}if(this.contentVisible&&(N.isInFont||s.missingFile)){if(_&&!tt)a.fillText(j,ot,rt),this.dependencyTracker?.recordCharacterBBox(t,a,O?{bbox:null}:s,n/o,ot,rt,()=>O??a.measureText(j));else if(this.paintChar(t,j,ot,rt,x,E),tt){const K=ot+n*tt.offset.x/o,at=rt-n*tt.offset.y/o;this.paintChar(t,tt.fontChar,K,at,x,E)}}const $=y?lt*S-G*f:lt*S+G*f;M+=$,I&&a.restore()}y?i.y-=M:i.x+=M*p,a.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,s=this.current,n=s.font,a=s.fontSize,o=s.fontDirection,h=n.vertical?1:-1,u=s.charSpacing,f=s.wordSpacing,p=s.textHScale*o,m=s.fontMatrix||Dg,y=e.length,w=s.textRenderingMode===oi.INVISIBLE;let v,S,_,x;if(w||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(p,o);const E=this.dependencyTracker;for(this.dependencyTracker=E?new h2(E,t):null,v=0;v<y;++v){if(S=e[v],typeof S=="number"){x=h*S*a/1e3,this.ctx.translate(x,0),s.x+=x*p;continue}const R=(S.isSpace?f:0)+u,D=n.charProcOperatorList[S.operatorListId];D?this.contentVisible&&(this.save(),i.scale(a,a),i.transform(...m),this.executeOperatorList(D),this.restore()):Et(`Type3 character "${S.operatorListId}" is not available.`);const M=[S.width,0];pt.applyTransform(M,m),_=M[0]*a+R,i.translate(_,0),s.x+=_*p}i.restore(),E&&(this.dependencyTracker=E)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,s,n,a,o){const h=new Path2D;h.rect(s,n,a-s,o-n),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,s,a,n,o).recordClipBox(t,this.ctx,s,a,n,o),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const s=this.baseTransform||Se(this.ctx),n={createCanvasGraphics:(a,o)=>new i_(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new h2(this.dependencyTracker,o,!0):null)};i=new e8(e,this.ctx,n,s)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=t8(this.getObject(t,e)),this.cachedPatterns.set(e,s)),i&&(s.matrix=i),s}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const s=this._getPattern(t,e);i.fillStyle=s.getPattern(i,this,Ds(i),hi.SHADING,t);const n=Ds(i);if(n){const{width:a,height:o}=i.canvas,h=io.slice();pt.axialAlignedBoundingBox([0,0,a,o],n,h);const[u,f,p,m]=h;this.ctx.fillRect(u,f,p-u,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,us.transform).recordDependencies(t,us.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){de("Should not call beginInlineImage")}beginImageData(){de("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Se(this.ctx),i)){pt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[s,n,a,o]=i,h=new Path2D;h.rect(s,n,a-s,o-n),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,s,a,n,o),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Qu("TODO: Support non-isolated groups."),e.knockout&&Et("Knockout groups not supported.");const s=Se(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=io.slice();pt.axialAlignedBoundingBox(e.bbox,Se(i),n);const a=[0,0,i.canvas.width,i.canvas.height];n=pt.intersect(n,a)||[0,0,0,0];const o=Math.floor(n[0]),h=Math.floor(n[1]),u=Math.max(Math.ceil(n[2])-o,1),f=Math.max(Math.ceil(n[3])-h,1);this.current.startNewPathAndClipBox([0,0,u,f]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(p,u,f),y=m.context;y.translate(-o,-h),y.transform(...s);let w=new Path2D;const[v,S,_,x]=e.bbox;if(w.rect(v,S,_-v,x-S),e.matrix){const E=new Path2D;E.addPath(w,new DOMMatrix(e.matrix)),w=E}y.clip(w),e.smask&&this.smaskStack.push({canvas:m.canvas,context:y,offsetX:o,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(o,h),i.save()),wl(i,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const n=Se(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...n);const a=io.slice();pt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],n,a),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,i,s,n,a){if(this.#t(),Wh(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const o=i[2]-i[0],h=i[3]-i[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=o,i[3]=h,pt.singularValueDecompose2dScale(Se(this.ctx),Wi);const{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(h*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Wi[0],0,0,-Wi[1],0,h*Wi[1]),Wh(this.ctx)}else{Wh(this.ctx),this.endPath(t);const u=new Path2D;u.rect(i[0],i[1],o,h),this.ctx.clip(u)}}this.current=new g2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...n)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const s=this.ctx,n=this._createMaskCanvas(t,e),a=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,n.offsetX,n.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,n.offsetX,n.offsetX+a.width,n.offsetY,n.offsetY+a.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,s=0,n=0,a,o){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const u=Se(h);h.transform(i,s,n,a,0,0);const f=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,f.offsetX-u[4],f.offsetY-u[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,m=o.length;p<m;p+=2){const y=pt.transform(u,[i,s,n,a,o[p],o[p+1]]);h.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(t,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,n=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,us.transformAndFill);for(const a of e){const{data:o,width:h,height:u,transform:f}=a,p=this.cachedCanvases.getCanvas("maskCanvas",h,u),m=p.context;m.save();const y=this.getObject(t,o,a);y2(m,y),m.globalCompositeOperation="source-in",m.fillStyle=n?s.getPattern(m,this,Ds(i),hi.FILL,t):s,m.fillRect(0,0,h,u),m.restore(),i.save(),i.transform(...f),i.scale(1,-1),Yh(i,p.canvas,0,0,h,u,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,h,0,u),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){Et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,s,n){if(!this.contentVisible)return;const a=this.getObject(t,e);if(!a){Et("Dependent image isn't ready yet");return}const o=a.width,h=a.height,u=[];for(let f=0,p=n.length;f<p;f+=2)u.push({transform:[i,0,0,s,n[f],n[f+1]],x:0,y:0,w:o,h});this.paintInlineImageXObjectGroup(t,a,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,n=this.cachedCanvases.getCanvas("inlineImage",i,s),a=n.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",n.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,s=e.height,n=this.ctx;this.save(t);const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none"),n.scale(1/i,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",i,s).context;m2(f,e),o=this.applyTransferMapsToCanvas(f)}const h=this._scaleImage(o,Ds(n));n.imageSmoothingEnabled=b2(Se(n),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,n,0,i,-s,0).recordDependencies(t,us.imageXObject).recordOperation(t),Yh(n,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,i,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const s=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const a=e.width,o=e.height,u=this.cachedCanvases.getCanvas("inlineImage",a,o).context;m2(u,e),n=this.applyTransferMapsToCanvas(u)}this.dependencyTracker?.resetBBox(t);for(const a of i)s.save(),s.transform(...a.transform),s.scale(1,-1),Yh(s,n,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,us.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const n=this.ctx;this.pendingClip?(s||(this.pendingClip===v2?n.clip(e,"evenodd"):n.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Se(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:n}=this.ctx.getTransform();let a,o;if(i===0&&s===0){const h=Math.abs(e),u=Math.abs(n);if(h===u)if(t===0)a=o=1/h;else{const f=h*t;a=o=f<1?1/f:1}else if(t===0)a=1/h,o=1/u;else{const f=h*t,p=u*t;a=f<1?1/f:1,o=p<1?1/p:1}}else{const h=Math.abs(e*n-i*s),u=Math.hypot(e,i),f=Math.hypot(s,n);if(t===0)a=f/h,o=u/h;else{const p=t*h;a=f>p?f/p:1,o=u>p?u/p:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[n,a]=this.getScaleForStroking();if(n===a){i.lineWidth=(s||1)*n,i.stroke(t);return}const o=i.getLineDash();e&&i.save(),i.scale(n,a),sg.a=1/n,sg.d=1/a;const h=new Path2D;if(h.addPath(t,sg),o.length>0){const u=Math.max(n,a);i.setLineDash(o.map(f=>f/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(h),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(const c in Zl)du.prototype[c]!==void 0&&(du.prototype[Zl[c]]=du.prototype[c]);let A2=class fu{#t;#e;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let s=0;for(const u of fu.strings){const f=e.encode(t[u]);i[u]=f,s+=4+f.length}const n=new ArrayBuffer(s),a=new Uint8Array(n),o=new DataView(n);let h=0;for(const u of fu.strings){const f=i[u],p=f.length;o.setUint32(h,p),a.set(f,h+4),h+=4+p}return $t(h===n.byteLength,"CssFontInfo.write: Buffer overflow"),n}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}#i(t){$t(t<fu.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}},w2=class pu{#t;#e;#s;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let s=0;for(const m of pu.strings){const y=e.encode(t[m]);i[m]=y,s+=4+y.length}s+=4;let n,a,o=1+s;t.style&&(n=e.encode(t.style.style),a=e.encode(t.style.weight),o+=4+n.length+4+a.length);const h=new ArrayBuffer(o),u=new Uint8Array(h),f=new DataView(h);let p=0;f.setUint8(p++,t.guessFallback?1:0),f.setUint32(p,0),p+=4,s=0;for(const m of pu.strings){const y=i[m],w=y.length;s+=4+w,f.setUint32(p,w),u.set(y,p+4),p+=4+w}return f.setUint32(p-s-4,s),t.style&&(f.setUint32(p,n.length),u.set(n,p+4),p+=4+n.length,f.setUint32(p,a.length),u.set(a,p+4),p+=4+a.length),$t(p<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){$t(t<pu.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#s.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const s=this.#e.getUint32(t),n=this.#s.decode(new Uint8Array(this.#t,t+4,s));return{style:i,weight:n}}},c8=class he{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#s=this.#e+1+8;static#i=this.#s+1+48;static#a=this.#i+1+6;#n;#r;#o;constructor({data:t,extra:e}){this.#n=t,this.#r=new TextDecoder,this.#o=new DataView(this.#n),e&&Object.assign(this,e)}#c(t){$t(t<he.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,s=this.#o.getUint8(e)>>i&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return $t(t<he.numbers.length,"Invalid number index"),this.#o.getFloat64(he.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=he.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<4;s++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=he.#s;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<6;s++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=he.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<3;s++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){$t(t<he.strings.length,"Invalid string index");let e=he.#a+4;for(let n=0;n<t;n++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),s=new Uint8Array(i);return s.set(new Uint8Array(this.#n,e+4,i)),this.#r.decode(s)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=he.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const n=this.#o.getUint32(t);if(n!==0)return new Uint8Array(this.#n,t+4,n)}clearData(){let t=he.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const n=this.#o.getUint32(t);new Uint8Array(this.#n,t+4,n).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=he.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const n=new Uint8Array(s);return n.set(new Uint8Array(this.#n,t+4,s)),new A2(n.buffer)}get systemFontInfo(){let t=he.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(this.#n,t+4,i)),new w2(s.buffer)}static write(t){const e=t.systemFontInfo?w2.write(t.systemFontInfo):null,i=t.cssFontInfo?A2.write(t.cssFontInfo):null,s=new TextEncoder,n={};let a=0;for(const v of he.strings)n[v]=s.encode(t[v]),a+=4+n[v].length;const o=he.#a+4+a+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(o),u=new Uint8Array(h),f=new DataView(h);let p=0;const m=he.bools.length;let y=0,w=0;for(let v=0;v<m;v++){const S=t[he.bools[v]];y|=(S===void 0?0:S?2:1)<<w,w+=2,(w===8||v===m-1)&&(f.setUint8(p++,y),y=0,w=0)}$t(p===he.#t,"FontInfo.write: Boolean properties offset mismatch");for(const v of he.numbers)f.setFloat64(p,t[v]),p+=8;if($t(p===he.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){f.setUint8(p++,4);for(const v of t.bbox)f.setInt16(p,v,!0),p+=2}else f.setUint8(p++,0),p+=8;if($t(p===he.#s,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){f.setUint8(p++,6);for(const v of t.fontMatrix)f.setFloat64(p,v,!0),p+=8}else f.setUint8(p++,0),p+=48;if($t(p===he.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){f.setUint8(p++,1);for(const v of t.defaultVMetrics)f.setInt16(p,v,!0),p+=2}else f.setUint8(p++,0),p+=6;$t(p===he.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(he.#a,0),p+=4;for(const v of he.strings){const S=n[v],_=S.length;f.setUint32(p,_),u.set(S,p+4),p+=4+_}if(f.setUint32(he.#a,p-he.#a-4),!e)f.setUint32(p,0),p+=4;else{const v=e.byteLength;f.setUint32(p,v),$t(p+4+v<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),p+4),p+=4+v}if(!i)f.setUint32(p,0),p+=4;else{const v=i.byteLength;f.setUint32(p,v),$t(p+4+v<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),p+4),p+=4+v}return t.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,t.data.length),u.set(t.data,p+4),p+=4+t.data.length),$t(p<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(p)}},Gl=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}},h8=class{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}};const Wa=Symbol("INTERNAL");let u8=class{#t=!1;#e=!1;#s=!1;#i=!0;constructor(t,{name:e,intent:i,usage:s,rbGroups:n}){this.#t=!!(t&qi.DISPLAY),this.#e=!!(t&qi.PRINT),this.name=e,this.intent=i,this.usage=s,this.rbGroups=n}get visible(){if(this.#s)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Wa&&de("Internal method `_setVisible` called."),this.#s=i,this.#i=e}},d8=class{#t=null;#e=new Map;#s=null;#i=null;constructor(t,e=qi.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new u8(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(Wa,!1);for(const i of t.on)this.#e.get(i)._setVisible(Wa,!0);for(const i of t.off)this.#e.get(i)._setVisible(Wa,!1);this.#s=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const n=t[s];let a;if(Array.isArray(n))a=this.#a(n);else if(this.#e.has(n))a=this.#e.get(n).visible;else return Et(`Optional content group not found: ${n}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Qu("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Et(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Et(`Unknown optional content policy ${t.policy}.`),!0}return Et(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const s=this.#e.get(t);if(!s){Et(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const n of s.rbGroups)for(const a of n)a!==t&&this.#e.get(a)?._setVisible(Wa,!1,!0);s._setVisible(Wa,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const n=this.#e.get(s);if(n)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!n.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Xw;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}},f8=class{constructor(t,{disableRange:e=!1,disableStream:i=!1}){$t(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:n,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,n?.length>0){const h=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,u)=>{this._onReceiveData({begin:h,chunk:u})}),t.addProgressListener((h,u)=>{this._onProgress({loaded:h,total:u})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(n){return n._begin!==t?!1:(n._enqueue(i),!0)});$t(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){$t(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new p8(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new g8(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},p8=class{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=Rm(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},g8=class{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function m8(c){let t=!0,e=i("filename\\*","i").exec(c);if(e){e=e[1];let f=o(e);return f=unescape(f),f=h(f),f=u(f),n(f)}if(e=a(c),e){const f=u(e);return n(f)}if(e=i("filename","i").exec(c),e){e=e[1];let f=o(e);return f=u(f),n(f)}function i(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function s(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(f,{fatal:!0}),y=hc(p);p=m.decode(y),t=!1}catch{}}return p}function n(f){return t&&/[\x80-\xff]/.test(f)&&(f=s("utf-8",f),t&&(f=s("iso-8859-1",f))),f}function a(f){const p=[];let m;const y=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=y.exec(f))!==null;){let[,v,S,_]=m;if(v=parseInt(v,10),v in p){if(v===0)break;continue}p[v]=[S,_]}const w=[];for(let v=0;v<p.length&&v in p;++v){let[S,_]=p[v];_=o(_),S&&(_=unescape(_),v===0&&(_=h(_))),w.push(_)}return w.join("")}function o(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let m=0;m<p.length;++m){const y=p[m].indexOf('"');y!==-1&&(p[m]=p[m].slice(0,y),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function h(f){const p=f.indexOf("'");if(p===-1)return f;const m=f.slice(0,p),w=f.slice(p+1).replace(/^[^']*'/,"");return s(m,w)}function u(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),s(m,w);try{w=atob(w)}catch{}return s(m,w)})}return""}function s_(c,t){const e=new Headers;if(!c||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function Ju(c){return URL.parse(c)?.origin??null}function n_({responseHeaders:c,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(c.get("Content-Length"),10);return!Number.isInteger(n)||(s.suggestedLength=n,n<=2*e)||i||!t||c.get("Accept-Ranges")!=="bytes"||(c.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function r_(c){const t=c.get("Content-Disposition");if(t){let e=m8(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Rm(e))return e}return null}function pc(c,t){return new Cu(`Unexpected server response (${c}) while retrieving PDF "${t}".`,c,c===404||c===0&&t.startsWith("file:"))}function a_(c){return c===200||c===206}function o_(c,t,e){return{method:"GET",headers:c,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function l_(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:(Et(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}let y8=class{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=s_(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $t(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new v8(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}},b8=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,o_(i,this._withCredentials,this._abortController)).then(n=>{if(t._responseOrigin=Ju(n.url),!a_(n.status))throw pc(n.status,s);this._reader=n.body.getReader(),this._headersCapability.resolve();const a=n.headers,{allowRangeRequests:o,suggestedLength:h}=n_({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=h||this._contentLength,this._filename=r_(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new rr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:l_(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},v8=class{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const n=new Headers(t.headers);n.append("Range",`bytes=${e}-${i-1}`);const a=s.url;fetch(a,o_(n,this._withCredentials,this._abortController)).then(o=>{const h=Ju(o.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!a_(o.status))throw pc(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:l_(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}};const ng=200,rg=206;function A8(c){const t=c.response;return typeof t!="string"?t:hc(t).buffer}let w8=class{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=s_(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[n,a]of this.headers)e.setRequestHeader(n,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=rg):s.expectedStatus=ng,e.responseType="arraybuffer",$t(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const n=s.status||ng;if(!(n===ng&&i.expectedStatus===rg)&&n!==i.expectedStatus){i.onError(s.status);return}const o=A8(s);if(n===rg){const h=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);u?i.onDone({begin:parseInt(u[1],10),chunk:o}):(Et('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},_8=class{constructor(t){this._source=t,this._manager=new w8(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return $t(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new S8(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new E8(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}},S8=class{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ju(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[h,...u]=o.split(": ");return[h,u.join(": ")]}):[]),{allowRangeRequests:n,suggestedLength:a}=n_({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=r_(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=pc(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},E8=class{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Ju(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=pc(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}};const x8=/^[a-z][a-z0-9\-+.]+:/i;function C8(c){if(x8.test(c))return new URL(c);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(c))}let T8=class{constructor(t){this.source=t,this.url=C8(t.url),$t(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $t(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new M8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new D8(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}},M8=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=pc(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new rr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},D8=class{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const n=process.getBuiltinModule("fs");this._setReadableStream(n.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}};const _l=Symbol("INITIAL_DATA");let c_=class{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:_l}}get(t,e=null){if(e){const s=this.#e(t);return s.promise.then(()=>e(s.data)),null}const i=this.#t[t];if(!i||i.data===_l)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==_l}delete(t){const e=this.#t[t];return!e||e.data===_l?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==_l&&(yield[t,e])}}};const R8=1e5,_2=30;let Hg=class ps{#t=Promise.withResolvers();#e=null;#s=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#r=0;#o=0;#c=null;#l=null;#d=0;#u=0;#f=Object.create(null);#m=[];#g=null;#h=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#x=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#u=i.scale*Xr.pixelRatio,this.#d=i.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:n,pageX:a,pageY:o}=i.rawDims;this.#y=[1,0,0,-1,-a,o+n],this.#o=s,this.#r=n,ps.#D(),qr(e,i),this.#t.promise.finally(()=>{ps.#A.delete(this),this.#n=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=di.platform;return Lt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),ps.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Xr.pixelRatio,s=t.rotation;if(s!==this.#d&&(e?.(),this.#d=s,qr(this.#l,{rotation:s})),i!==this.#u){e?.(),this.#u=i;const n={div:null,properties:null,ctx:ps.#R(this.#a)};for(const a of this.#h)n.properties=this.#p.get(a),n.div=a,this.#E(n)}}cancel(){const t=new rr("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#m}#T(t){if(this.#s)return;this.#n.ctx??=ps.#R(this.#a);const e=this.#h,i=this.#m;for(const s of t){if(e.length>R8){Et("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const n=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id&&this.#e.setAttribute("id",`${s.id}`),n.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(s.str),this.#w(s)}}#w(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const s=pt.transform(this.#y,t.transform);let n=Math.atan2(s[1],s[0]);const a=this.#f[t.fontName];a.vertical&&(n+=Math.PI/2);let o=this.#i&&a.fontSubstitution||a.fontFamily;o=ps.fontFamilyMap.get(o)||o;const h=Math.hypot(s[2],s[3]),u=h*ps.#I(o,a,this.#a);let f,p;n===0?(f=s[4],p=s[5]-u):(f=s[4]+u*Math.sin(n),p=s[5]-u*Math.cos(n));const m="calc(var(--total-scale-factor) *",y=e.style;this.#e===this.#l?(y.left=`${(100*f/this.#o).toFixed(2)}%`,y.top=`${(100*p/this.#r).toFixed(2)}%`):(y.left=`${m}${f.toFixed(2)}px)`,y.top=`${m}${p.toFixed(2)}px)`),y.fontSize=`${m}${(ps.#S*h).toFixed(2)}px)`,y.fontFamily=o,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),n!==0&&(i.angle=n*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const v=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);v!==S&&Math.max(v,S)/Math.min(v,S)>1.5&&(w=!0)}if(w&&(i.canvasWidth=a.vertical?t.height:t.width),this.#p.set(e,i),this.#n.div=e,this.#n.properties=i,this.#E(this.#n),i.hasText&&this.#e.append(e),i.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this.#e.append(v)}}#E(t){const{div:e,properties:i,ctx:s}=t,{style:n}=e;let a="";if(ps.#S>1&&(a=`scale(${1/ps.#S})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:o}=n,{canvasWidth:h,fontSize:u}=i;ps.#M(s,u*this.#u,o);const{width:f}=s.measureText(e.textContent);f>0&&(a=`scaleX(${h*this.#u/f}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(n.transform=a)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#R(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#x.set(e,{size:0,family:""})}return e}static#M(t,e,i){const s=this.#x.get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)}static#D(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const s=this.#v.get(t);if(s)return s;const n=this.#R(i);n.canvas.width=n.canvas.height=_2,this.#M(n,_2,t);const a=n.measureText(""),o=a.fontBoundingBoxAscent,h=Math.abs(a.fontBoundingBoxDescent);n.canvas.width=n.canvas.height=0;let u=.8;return o?u=o/(o+h):(di.platform.isFirefox&&Et("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),this.#v.set(t,u),u}};const k8=100;function L8(c={}){typeof c=="string"||c instanceof URL?c={url:c}:(c instanceof ArrayBuffer||ArrayBuffer.isView(c))&&(c={data:c});const t=new O8,{docId:e}=t,i=c.url?F6(c.url):null,s=c.data?I6(c.data):null,n=c.httpHeaders||null,a=c.withCredentials===!0,o=c.password??null,h=c.range instanceof u_?c.range:null,u=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:2**16;let f=c.worker instanceof Ug?c.worker:null;const p=c.verbosity,m=typeof c.docBaseUrl=="string"&&!Zu(c.docBaseUrl)?c.docBaseUrl:null,y=Gh(c.cMapUrl),w=c.cMapPacked!==!1,v=c.CMapReaderFactory||(bi?V6:r2),S=Gh(c.iccUrl),_=Gh(c.standardFontDataUrl),x=c.StandardFontDataFactory||(bi?q6:a2),E=Gh(c.wasmUrl),R=c.WasmFactory||(bi?X6:o2),D=c.stopAtErrors!==!0,M=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,k=c.isEvalSupported!==!1,N=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!bi,I=typeof c.isImageDecoderSupported=="boolean"?c.isImageDecoderSupported:!bi&&(di.platform.isFirefox||!globalThis.chrome),G=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,j=typeof c.disableFontFace=="boolean"?c.disableFontFace:bi,tt=c.fontExtraProperties===!0,ot=c.enableXfa===!0,rt=c.ownerDocument||globalThis.document,lt=c.disableRange===!0,O=c.disableStream===!0,$=c.disableAutoFetch===!0,K=c.pdfBug===!0,at=c.CanvasFactory||(bi?G6:H6),nt=c.FilterFactory||(bi?$6:U6),P=c.enableHWA===!0,H=c.useWasm!==!1,W=h?h.length:c.length??NaN,z=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!bi&&!j,ct=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:!!(v===r2&&x===a2&&R===o2&&y&&_&&E&&Ol(y,document.baseURI)&&Ol(_,document.baseURI)&&Ol(E,document.baseURI)),Z=null;o6(p);const et={canvasFactory:new at({ownerDocument:rt,enableHWA:P}),filterFactory:new nt({docId:e,ownerDocument:rt}),cMapReaderFactory:ct?null:new v({baseUrl:y,isCompressed:w}),standardFontDataFactory:ct?null:new x({baseUrl:_}),wasmFactory:ct?null:new R({baseUrl:E})};f||(f=Ug.create({verbosity:p,port:Gl.workerPort}),t._worker=f);const mt={docId:e,apiVersion:"5.4.296",data:s,password:o,disableAutoFetch:$,rangeChunkSize:u,length:W,docBaseUrl:m,enableXfa:ot,evaluatorOptions:{maxImageSize:M,disableFontFace:j,ignoreErrors:D,isEvalSupported:k,isOffscreenCanvasSupported:N,isImageDecoderSupported:I,canvasMaxAreaInBytes:G,fontExtraProperties:tt,useSystemFonts:z,useWasm:H,useWorkerFetch:ct,cMapUrl:y,iccUrl:S,standardFontDataUrl:_,wasmUrl:E}},gt={ownerDocument:rt,pdfBug:K,styleElement:Z,loadingParams:{disableAutoFetch:$,enableXfa:ot}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Tt=f.messageHandler.sendWithPromise("GetDocRequest",mt,s?[s.buffer]:null);let qt;if(h)qt=new f8(h,{disableRange:lt,disableStream:O});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ie=Ol(i)?y8:bi?T8:_8;qt=new ie({url:i,length:W,httpHeaders:n,withCredentials:a,rangeChunkSize:u,disableRange:lt,disableStream:O})}return Tt.then(ie=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Pe=new Pl(e,ie,f.port),be=new F8(Pe,t,qt,gt,et,P);t._transport=be,Pe.send("Ready",null)})}).catch(t._capability.reject),t}let O8=class h_{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${h_.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}},u_=class{#t=Promise.withResolvers();#e=[];#s=[];#i=[];#a=[];constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){de("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},P8=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Lt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},N8=class{#t=!1;constructor(t,e,i,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new Qv:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new c_,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:n=!1}={}){return new Mm({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Lt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:s="display",annotationMode:n=Jn.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:h=null,annotationCanvasMap:u=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:m=!1,recordOperations:y=!1,operationsFilter:w=null}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(s,n,p,m),{renderingIntent:S,cacheKey:_}=v;this.#t=!1,h||=this._transport.getOptionalContentConfig(S);let x=this._intentStates.get(_);x||(x=Object.create(null),this._intentStates.set(_,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const E=!!(S&qi.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(y||R),M=I=>{if(x.renderTasks.delete(k),D){const G=k.gfx?.dependencyTracker.take();G&&(k.stepper&&k.stepper.setOperatorBBoxes(G,k.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=G))}E&&(this.#t=!0),this.#e(),I?(k.capability.reject(I),this._abortOperatorList({intentState:x,reason:I instanceof Error?I:new Error(I)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new B8({callback:M,params:{canvas:e,canvasContext:t,dependencyTracker:D?new W6(e,x.operatorList.length,R):null,viewport:i,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:w});(x.renderTasks||=new Set).add(k);const N=k.task;return Promise.all([x.displayReadyCapability.promise,h]).then(([I,G])=>{if(this.destroyed){M();return}if(this._stats?.time("Rendering"),!(G.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:I,optionalContentConfig:G}),k.operatorListChanged()}).catch(M),N}getOperatorList({intent:t="display",annotationMode:e=Jn.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){function n(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(h))}const a=this._transport.getRenderingIntent(t,e,i,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let h;return o.opListReadCapability||(h=Object.create(null),h.operatorListChanged=n,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(h),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>kg.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function n(){a.read().then(function({value:h,done:u}){if(u){i(o);return}o.lang??=h.lang,Object.assign(o.styles,h.styles),o.items.push(...h.items),n()},s)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};n()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Qv),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:n,transfer:a}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:n,modifiedIds:s},a).getReader(),u=this._intentStates.get(e);u.streamReader=h;const f=()=>{h.read().then(({value:p,done:m})=>{if(m){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,u),f())},p=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const m of u.renderTasks)m.operatorListChanged();this.#e()}if(u.displayReadyCapability)u.displayReadyCapability.reject(p);else if(u.opListReadCapability)u.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Dm){let s=k8;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new rr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,n]of this._intentStates)if(n===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}};var er,ws,gn,Ir,ue,Ou,Br,zr,_i,gu,d_,f_,Nl,po,mu;let Ug=(ue=class{constructor({name:t=null,port:e=null,verbosity:i=l6()}={}){Ve(this,_i);Ve(this,er,Promise.withResolvers());Ve(this,ws,null);Ve(this,gn,null);Ve(this,Ir,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(_t(ue,zr).has(e))throw new Error("Cannot use more than one PDFWorker per port.");_t(ue,zr).set(e,this),qe(this,_i,d_).call(this,e)}else qe(this,_i,f_).call(this)}get promise(){return _t(this,er).promise}get port(){return _t(this,gn)}get messageHandler(){return _t(this,ws)}destroy(){this.destroyed=!0,_t(this,Ir)?.terminate(),pe(this,Ir,null),_t(ue,zr).delete(_t(this,gn)),pe(this,gn,null),_t(this,ws)?.destroy(),pe(this,ws,null)}static create(t){const e=_t(this,zr).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ue(t)}static get workerSrc(){if(Gl.workerSrc)return Gl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Lt(this,"_setupFakeWorkerGlobal",(async()=>_t(this,po,mu)?_t(this,po,mu):(await import(this.workerSrc)).WorkerMessageHandler)())}},er=new WeakMap,ws=new WeakMap,gn=new WeakMap,Ir=new WeakMap,Ou=new WeakMap,Br=new WeakMap,zr=new WeakMap,_i=new WeakSet,gu=function(){_t(this,er).resolve(),_t(this,ws).send("configure",{verbosity:this.verbosity})},d_=function(t){pe(this,gn,t),pe(this,ws,new Pl("main","worker",t)),_t(this,ws).on("ready",()=>{}),qe(this,_i,gu).call(this)},f_=function(){if(_t(ue,Br)||_t(ue,po,mu)){qe(this,_i,Nl).call(this);return}let{workerSrc:t}=ue;try{ue._isSameOrigin(window.location,t)||(t=ue._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Pl("main","worker",e),s=()=>{n.abort(),i.destroy(),e.terminate(),this.destroyed?_t(this,er).reject(new Error("Worker was destroyed")):qe(this,_i,Nl).call(this)},n=new AbortController;e.addEventListener("error",()=>{_t(this,Ir)||s()},{signal:n.signal}),i.on("test",o=>{if(n.abort(),this.destroyed||!o){s();return}pe(this,ws,i),pe(this,gn,e),pe(this,Ir,e),qe(this,_i,gu).call(this)}),i.on("ready",o=>{if(n.abort(),this.destroyed){s();return}try{a()}catch{qe(this,_i,Nl).call(this)}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Qu("The worker has been disabled.")}qe(this,_i,Nl).call(this)},Nl=function(){_t(ue,Br)||(Et("Setting up fake worker."),pe(ue,Br,!0)),ue._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){_t(this,er).reject(new Error("Worker was destroyed"));return}const e=new j6;pe(this,gn,e);const i=`fake${Sp(ue,Ou)._++}`,s=new Pl(i+"_worker",i,e);t.setup(s,e),pe(this,ws,new Pl(i,i+"_worker",e)),qe(this,_i,gu).call(this)}).catch(t=>{_t(this,er).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},po=new WeakSet,mu=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ve(ue,po),Ve(ue,Ou,0),Ve(ue,Br,!1),Ve(ue,zr,new WeakMap),bi&&(pe(ue,Br,!0),Gl.workerSrc||="./pdf.worker.mjs"),ue._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},ue._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ue.fromPort=t=>{if(A6("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return ue.create(t)},ue),F8=class{#t=new Map;#e=new Map;#s=new Map;#i=new Map;#a=null;constructor(t,e,i,s,n,a){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new c_,this.fontLoader=new P6({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.wasmFactory=n.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#n(t,e=null){const i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,s),s}get annotationStorage(){return Lt(this,"annotationStorage",new km)}getRenderingIntent(t,e=Jn.ENABLE,i=null,s=!1,n=!1){let a=qi.DISPLAY,o=Ig;switch(t){case"any":a=qi.ANY;break;case"display":break;case"print":a=qi.PRINT;break;default:Et(`getRenderingIntent - invalid intent: ${t}`)}const h=a&qi.PRINT&&i instanceof Yw?i:this.annotationStorage;switch(e){case Jn.DISABLE:a+=qi.ANNOTATIONS_DISABLE;break;case Jn.ENABLE:break;case Jn.ENABLE_FORMS:a+=qi.ANNOTATIONS_FORMS;break;case Jn.ENABLE_STORAGE:a+=qi.ANNOTATIONS_STORAGE,o=h.serializable;break;default:Et(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=qi.IS_EDITING),n&&(a+=qi.OPLIST);const{ids:u,hash:f}=h.modifiedIds,p=[a,o.hash,f];return{renderingIntent:a,cacheKey:p.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#s.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Hg.cleanup(),this._networkStream?.cancelAllRequests(new rr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{$t(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=n=>{this._lastProgress={loaded:n.loaded,total:n.total}},s.onPull=()=>{this._fullReader.read().then(function({value:n,done:a}){if(a){s.close();return}$t(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(n),1,[n])}).catch(n=>{s.error(n)})},s.onCancel=n=>{this._fullReader.cancel(n),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:n,contentLength:a}=this._fullReader;return(!s||!n)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{e.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:s,isRangeSupported:n,contentLength:a}}),t.on("GetRangeReader",(i,s)=>{$t(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(i.begin,i.end);if(!n){s.close();return}s.onPull=()=>{n.read().then(function({value:a,done:o}){if(o){s.close();return}$t(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{n.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new P8(i,this))}),t.on("DocException",i=>{e._capability.reject(Li(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw Li(i);const s=n=>{n instanceof Error?this.#a.reject(n):this.#a.resolve({password:n})};e.onPassword(s,i.code)}catch(s){this.#a.reject(s)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,n])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in n){const f=n.error;Et(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const a=new c8(n),o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,h=new N6(a,o,n.extra,n.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:u}=n;$t(u,"The imageRef must be defined.");for(const f of this.#e.values())for(const[,p]of f.objs)if(p?.ref===u)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,n);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,n,a])=>{if(this.destroyed)return;const o=this.#e.get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(n){case"Image":case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${n}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#s.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&this.#i.set(n.refStr,t);const a=new N8(e,n,this,this._params.pdfBug);return this.#e.set(e,a),a});return this.#s.set(e,s),s}getPageIndex(t){return Bg(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#n("GetOptionalContentConfig").then(e=>new d8(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new h8(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Hg.cleanup()}}cachedPageNumber(t){if(!Bg(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}},I8=class{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}},B8=class Fl{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:n,operatorList:a,pageIndex:o,canvasFactory:h,filterFactory:u,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:m=null,enableHWA:y=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=h,this.filterFactory=u,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new I8(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=y,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Fl.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Fl.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:n,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new du(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:n}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Fl.#e.delete(this._canvas),t||=new Dm(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Fl.#e.delete(this._canvas),this.callback())))}};const p_="5.4.296",z8="f56dc8601";let g_=class Os{#t=null;#e=null;#s;#i=null;#a=!1;#n=!1;#r=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Lt(this,"_keyboardManager",new fc([[["Escape","mac+Escape"],Os.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Os.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Os.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Os.prototype._moveToPrevious],[["Home","mac+Home"],Os.prototype._moveToBeginning],[["End","mac+End"],Os.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#n=!1,this.#r=t):this.#n=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Os.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#r&&(t.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#s,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",ms,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(t.id=`${this.#r.id}_colorpicker_dropdown`);for(const[i,s]of this.#l.highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",s),n.title=i,n.setAttribute("data-l10n-id",Os.#d[i]);const a=document.createElement("span");n.append(a),a.className="swatch",a.style.backgroundColor=s,n.ariaSelected=s===this.#s,n.addEventListener("click",this.#f.bind(this,s),{signal:e}),t.append(n)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ut.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastChild?.focus()}#m(t){Os._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#u();this.#t.append(e)}#h(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#p){this.#r?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}},m_=class $g{#t=null;#e=null;#s=null;static#i=null;constructor(t){this.#e=t,this.#s=t._uiManager,$g.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,s=this.#t=document.createElement("input");return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",$g.#i[t]),s.addEventListener("input",()=>{this.#s.updateParams(e,s.value)},{signal:this.#s._signal}),s}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}};function S2(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function Sl(c){return Math.max(0,Math.min(255,255*c))}let E2=class{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Sl(t),[t,t,t]}static G_HTML([t]){const e=S2(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Sl)}static RGB_HTML(t){return`#${t.map(S2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[Sl(1-Math.min(1,t+s)),Sl(1-Math.min(1,i+s)),Sl(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,n=1-e,a=1-i,o=Math.min(s,n,a);return["CMYK",s,n,a,o]}},j8=class{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){de("Abstract method `_createSVG` called.")}},Tu=class extends j8{_createSVG(t){return document.createElementNS(un,t)}};const H8=9,Yr=new WeakSet,U8=new Date().getTimezoneOffset()*60*1e3;let x2=class{static create(t){switch(t.data.annotationType){case He.LINK:return new Pm(t);case He.TEXT:return new G8(t);case He.WIDGET:switch(t.data.fieldType){case"Tx":return new V8(t);case"Btn":return t.data.radioButton?new b_(t):t.data.checkBox?new X8(t):new Y8(t);case"Ch":return new W8(t);case"Sig":return new q8(t)}return new Jr(t);case He.POPUP:return new Gg(t);case He.FREETEXT:return new v_(t);case He.LINE:return new Q8(t);case He.SQUARE:return new Z8(t);case He.CIRCLE:return new J8(t);case He.POLYLINE:return new A_(t);case He.CARET:return new eD(t);case He.INK:return new Nm(t);case He.POLYGON:return new tD(t);case He.HIGHLIGHT:return new w_(t);case He.UNDERLINE:return new iD(t);case He.SQUIGGLY:return new sD(t);case He.STRIKEOUT:return new nD(t);case He.STAMP:return new __(t);case He.FILEATTACHMENT:return new rD(t);default:return new Oe(t)}}},Oe=class y_{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return y_._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:s}=this.data;let n=-1/0,a=-1/0;if(e?.length>=8){for(let o=0;o<e.length;o+=8)e[o+1]>a?(a=e[o+1],n=e[o+2]):e[o+1]===a&&(n=Math.max(n,e[o+2]));return[n,a]}if(i?.length>=1){for(const o of i)for(let h=0,u=o.length;h<u;h+=2)o[h+1]>a?(a=o[h+1],n=o[h]):o[h+1]===a&&(n=Math.max(n,o[h]));if(n!==1/0)return[n,a]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:a}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-n)/i,t[1]=100*(t[1]-a)/s,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Ql}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${Ql}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#i(e);let s=this.#s?.popup||this.popup;!s&&i?.text&&(this._createPopup(i),s=this.#s.popup),s&&(s.updateEdited(t),i?.deleted&&(s.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:h}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-o)/n}%`,e.top=`${100*(a-t[3]+h)/a}%`,s===0?(e.width=`${100*(t[2]-t[0])/n}%`,e.height=`${100*(t[3]-t[1])/a}%`):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",e.id),!(this instanceof Jr)&&!(this instanceof Pm)&&(n.tabIndex=0);const{style:a}=n;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(n.title=e.alternativeText),e.noRotate&&n.classList.add("norotate"),!e.rect||this instanceof Gg){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,n),n}const{width:o,height:h}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(v>0||S>0){const x=`calc(${v}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof b_){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;a.borderRadius=x}switch(e.borderStyle.style){case Ya.SOLID:a.borderStyle="solid";break;case Ya.DASHED:a.borderStyle="dashed";break;case Ya.BEVELED:Et("Unimplemented border style: beveled");break;case Ya.INSET:Et("Unimplemented border style: inset");break;case Ya.UNDERLINE:a.borderBottomStyle="solid";break}const _=e.borderColor||null;_?(this.#e=!0,a.borderColor=pt.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):a.borderWidth=0}const u=pt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:p,pageX:m,pageY:y}=s.rawDims;a.left=`${100*(u[0]-m)/f}%`,a.top=`${100*(u[1]-y)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(a.width=`${100*o/f}%`,a.height=`${100*h/p}%`):this.setRotation(w,n),n}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:n,height:a}=this;t%180!==0&&([n,a]=[a,n]),e.style.width=`${100*n/i}%`,e.style.height=`${100*a/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const n=s.detail[e],a=n[0],o=n.slice(1);s.target.style[i]=E2[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:E2[`${a}_rgb`](o)})};return Lt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail))(t[s]||i[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,n]of Object.entries(e)){const a=i[s];if(a){const o={detail:{[s]:n},target:t};a(o),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,n]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,S,_,x]=t.subarray(2,6);if(s===v&&n===S&&e===_&&i===x)return}const{style:a}=this.container;let o;if(this.#e){const{borderColor:v,borderWidth:S}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=s-e,u=n-i,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const m=f.createElement("defs");p.append(m);const y=f.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),m.append(y);for(let v=2,S=t.length;v<S;v+=8){const _=t[v],x=t[v+1],E=t[v+2],R=t[v+3],D=f.createElement("rect"),M=(E-e)/h,k=(n-x)/u,N=(_-E)/h,I=(x-R)/u;D.setAttribute("x",M),D.setAttribute("y",k),D.setAttribute("width",N),D.setAttribute("height",I),y.append(D),o?.push(`<rect vector-effect="non-scaling-stroke" x="${M}" y="${k}" width="${N}" height="${I}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let i,s;t?(i={str:t.text},s=t.date):(i=e.contentsObj,s=e.modificationDate);const n=this.#s=new Gg({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(n.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){de("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:n,id:a,exportValues:o}of s){if(n===-1||a===e)continue;const h=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Yr.has(u)){Et(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:h,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:n}=s,a=s.getAttribute("data-element-id");a!==e&&Yr.has(s)&&i.push({id:a,exportValue:n,domElement:s})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},$8=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}},Pm=class extends Oe{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(this.#s(i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",s=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#t()}#s(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const n=i.get(s);n&&(t[n]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:s,refs:n,include:a}=e,o=[];if(s.length!==0||n.length!==0){const f=new Set(n);for(const p of s){const m=this._fieldObjects[p]||[];for(const{id:y}of m)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&o.push(m)}else for(const f of Object.values(this._fieldObjects))o.push(...f);const h=this.annotationStorage,u=[];for(const f of o){const{id:p}=f;switch(u.push(p),f.type){case"text":{const y=f.defaultValue||"";h.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;h.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";h.setValue(p,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Yr.has(m)){Et(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}},G8=class extends Oe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},Jr=class extends Oe{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return di.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,n){i.includes("mouse")?t.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(a)}})})}_setEventListeners(t,e,i,s){for(const[n,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,n,a,s),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||H8,n=t.style;let a;const o=2,h=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),f=Math.round(u/(Zp*s))||1,p=u/f;a=Math.min(s,h(p/Zp))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,h(u/Zp))}n.fontSize=`calc(${a}px * var(--total-scale-factor))`,n.color=pt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(n.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},V8=class extends Jr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const n=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),n.setValue(a.id,{[s]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const s=t.getValue(e,{value:this.data.fieldValue});let n=s.value||"";const a=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;a&&n.length>a&&(n=n.slice(0,a));let o=s.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const h={userValue:n,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??n,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",o??n),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Yr.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:u,datetimeType:f,timeStep:p}=this.data,m=!!f&&this.enableScripting;u&&(i.title=u),this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";i.value=h.userValue=v,h.formattedValue=null});let y=w=>{const{formattedValue:v}=h;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",v=>{if(h.focused)return;const{target:S}=v;if(m&&(S.type=f,p&&(S.step=p)),h.userValue){const _=h.userValue;if(m)if(f==="time"){const x=new Date(_),E=[x.getHours(),x.getMinutes(),x.getSeconds()];S.value=E.map(R=>R.toString().padStart(2,"0")).join(":")}else S.value=new Date(_-U8).toISOString().split(f==="date"?"T":".",1)[0];else S.value=_}h.lastCommittedValue=S.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const S={value(_){h.userValue=_.detail.value??"",m||t.setValue(e,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:x}=_.detail;h.formattedValue=x,x!=null&&_.target!==document.activeElement&&(_.target.value=x);const E={formattedValue:x};m&&(E.value=x),t.setValue(e,E)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:x}=_.detail,{target:E}=_;if(x===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",x);let R=h.userValue;!R||R.length<=x||(R=R.slice(0,x),E.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(S,v)}),i.addEventListener("keydown",v=>{h.commitKey=1;let S=-1;if(v.key==="Escape"?S=0:v.key==="Enter"&&!this.data.multiLine?S=2:v.key==="Tab"&&(h.commitKey=3),S===-1)return;const{value:_}=v.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:S,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",v=>{if(!h.focused||!v.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:S}=v;let{value:_}=S;if(m){if(_&&f==="time"){const x=_.split(":").map(E=>parseInt(E,10));_=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),S.step=""}else _.includes("T")||(_=`${_}T00:00`),_=new Date(_).valueOf();S.type="text"}h.userValue=_,h.lastCommittedValue!==_&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),w(v)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",v=>{h.lastCommittedValue=null;const{data:S,target:_}=v,{value:x,selectionStart:E,selectionEnd:R}=_;let D=E,M=R;switch(v.inputType){case"deleteWordBackward":{const k=x.substring(0,E).match(/\w*[^\w]*$/);k&&(D-=k[0].length);break}case"deleteWordForward":{const k=x.substring(E).match(/^[^\w]*\w*/);k&&(M+=k[0].length);break}case"deleteContentBackward":E===R&&(D-=1);break;case"deleteContentForward":E===R&&(M+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:S||"",willCommit:!1,selStart:D,selEnd:M}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},q8=class extends Jr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},X8=class extends Jr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return Yr.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.setAttribute("exportValue",e.exportValue),n.tabIndex=0,n.addEventListener("change",a=>{const{name:o,checked:h}=a.target;for(const u of this._getElementsByName(o,i)){const f=h&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=f),t.setValue(u.id,{value:f})}t.setValue(i,{value:h})}),n.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",a=>{const o={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},b_=class extends Jr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});const n=document.createElement("input");if(Yr.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.tabIndex=0,n.addEventListener("change",a=>{const{name:o,checked:h}=a.target;for(const u of this._getElementsByName(o,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:h})}),n.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;n.addEventListener("updatefromsandbox",o=>{const h={value:u=>{const f=a===u.detail.value;for(const p of this._getElementsByName(u.target.name)){const m=f&&p.id===i;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(h,o)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},Y8=class extends Pm{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}},W8=class extends Jr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Yr.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,i.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),n=!1),s.append(p)}let a=null;if(n){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),s.prepend(f),a=()=>{f.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=f=>{const p=f?"value":"textContent",{options:m,multiple:y}=s;return y?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let h=o(!1);const u=f=>{const p=f.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",f=>{const p={value(m){a?.();const y=m.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const v of s.options)v.selected=w.has(v.value);t.setValue(e,{value:o(!0)}),h=o(!1)},multipleSelection(m){s.multiple=!0},remove(m){const y=s.options,w=m.detail.remove;y[w].selected=!1,s.remove(w),y.length>0&&Array.prototype.findIndex.call(y,S=>S.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:o(!0),items:u(m)}),h=o(!1)},clear(m){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=o(!1)},insert(m){const{index:y,displayValue:w,exportValue:v}=m.detail.insert,S=s.children[y],_=document.createElement("option");_.textContent=w,_.value=v,S?S.before(_):s.append(_),t.setValue(e,{value:o(!0),items:u(m)}),h=o(!1)},items(m){const{items:y}=m.detail;for(;s.length!==0;)s.remove(0);for(const w of y){const{displayValue:v,exportValue:S}=w,_=document.createElement("option");_.textContent=v,_.value=S,s.append(_)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:o(!0),items:u(m)}),h=o(!1)},indices(m){const y=new Set(m.detail.indices);for(const w of m.target.options)w.selected=y.has(w.index);t.setValue(e,{value:o(!0)}),h=o(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,f)}),s.addEventListener("input",f=>{const p=o(!0),m=o(!1);t.setValue(e,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):s.addEventListener("input",function(f){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Gg=class extends Oe{constructor(t){const{data:e,elements:i,parent:s}=t,n=!!s._commentManager;if(super(t,{isRenderable:!n&&Oe._hasPopupData(e)}),this.elements=i,n&&Oe._hasPopupData(e)){const a=this.popup=this.#t();for(const o of i)o.popup=a}else this.popup=null}#t(){return new K8({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${Tm}${s}`).join(",")),this.container}},K8=class{#t=null;#e=this.#G.bind(this);#s=this.#z.bind(this);#i=this.#O.bind(this);#a=this.#_.bind(this);#n=null;#r=null;#o=null;#c=null;#l=null;#d=null;#u=null;#f=!1;#m=null;#g=null;#h=null;#p=null;#y=null;#v=null;#b=null;#x=null;#S=null;#A=null;#T=!1;#w=null;#E=null;constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:n,contentsObj:a,richText:o,parent:h,rect:u,parentRect:f,open:p,commentManager:m=null}){this.#r=t,this.#S=s,this.#o=a,this.#x=o,this.#d=h,this.#n=e,this.#b=u,this.#u=f,this.#l=i,this.#t=m,this.#w=i[0],this.#c=Lg.toDateObject(n),this.trigger=i.flatMap(y=>y.getElementsToTriggerPopup()),m?this.renderCommentButton():(this.#R(),this.#r.hidden=!0,p&&this.#_())}#R(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#s,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#y||this.#M(),!this.#y))return;const{signal:t}=this.#g=new AbortController,e=!!this.#w.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},s=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},n=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",this.#e,{signal:t}),a.addEventListener("click",i,{signal:t}),a.addEventListener("pointerenter",s,{signal:t}),a.addEventListener("pointerleave",n,{signal:t}),a.classList.add("popupTriggerArea")}else{const a=this.#p=document.createElement("button");a.className="annotationCommentButton";const o=this.#w.container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#D(),a.addEventListener("keydown",this.#e,{signal:t}),a.addEventListener("click",i,{signal:t}),a.addEventListener("pointerenter",s,{signal:t}),a.addEventListener("pointerleave",n,{signal:t}),o.after(a)}}#D(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#w.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:s,modificationDate:n}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:s,modificationDate:n}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#w.commentText,this.#E}set comment(t){t!==this.comment&&(this.#w.commentText=this.#E=t)}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:s,y:n,width:a,height:o}=this.#w.layer.getBoundingClientRect();return[(t-s)/a,(e+i-n)/o]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:n,y:a,width:o,height:h}=s;this.#t.showDialog(null,this,n+e*o,a+i*h,{...t,parentDimensions:s})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#n){const i=t.style.outlineColor=pt.makeHexColor(...this.#n);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#S?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#S}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}Hw({html:this.#L||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#r.append(t)}get#L(){const t=this.#x,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#x.html||null}get#P(){return this.#L?.attributes?.style?.fontSize||0}get#B(){return this.#L?.attributes?.style?.color||null}#N(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#B,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const n of t.split(`
`))e.push({name:"span",value:n,attributes:s});return i}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#I(),this.#E=e.text)),t&&(this.#y=null,this.#M(),this.#D());return}if(i||e?.deleted){this.remove();return}this.#R(),this.#A||={contentsObj:this.#o,richText:this.#x},t&&(this.#h=null),e&&e.text&&(this.#x=this.#N(e.text),this.#c=Lg.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#x}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#h=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#h!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:n}}}=this.#d;let a=!!this.#u,o=a?this.#u:this.#b;for(const w of this.#l)if(!o||pt.intersect(w.data.rect,o)!==null){o=w.data.rect,a=!0;break}const h=pt.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),f=a?o[2]-o[0]+5:0,p=h[0]+f,m=h[1];this.#h=[100*(p-s)/e,100*(m-n)/i];const{style:y}=this.#r;y.left=`${this.#h[0]}%`,y.top=`${this.#h[1]}%`}#_(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#e)):(this.#z(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#e))}#O(){this.#m||this.render(),this.isVisible?this.#f&&this.#r.classList.add("focused"):(this.#C(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#z(){this.#r.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#r.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#T&&(this.#m||this.#O(),this.#T=!1,this.#r.hidden=!1))}get isVisible(){return this.#t?!1:this.#r.hidden===!1}},v_=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Q8=class extends Oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,s=this.svgFactory.create(e,i,!0),n=this.#t=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),s.append(n),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Z8=class extends Oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",n/2),a.setAttribute("y",n/2),a.setAttribute("width",e-n),a.setAttribute("height",i-n),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},J8=class extends Oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-n/2),a.setAttribute("ry",i/2-n/2),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},A_=class extends Oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:s},width:n,height:a}=this;if(!e)return this.container;const o=this.svgFactory.create(n,a,!0);let h=[];for(let f=0,p=e.length;f<p;f+=2){const m=e[f]-t[0],y=t[3]-e[f+1];h.push(`${m},${y}`)}h=h.join(" ");const u=this.#t=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",h),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},tD=class extends A_{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},eD=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Nm=class extends Oe{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Mt.HIGHLIGHT:Mt.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:s,popupRef:n}}=this,{transform:a,width:o,height:h}=this.#s(e,t),u=this.svgFactory.create(o,h,!0),f=this.#t=this.svgFactory.createElement("svg:g");u.append(f),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,m=i.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);this.#e.push(y),y.setAttribute("points",i[p].join(",")),f.append(y)}return!n&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:s}=t,n=this.#t;if(e>=0&&n.setAttribute("stroke-width",e||1),i)for(let a=0,o=this.#e.length;a<o;a++)this.#e[a].setAttribute("points",i[a].join(","));if(s){const{transform:a,width:o,height:h}=this.#s(this.data.rotation,s);n.parentElement.setAttribute("viewBox",`0 0 ${o} ${h}`),n.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},w_=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},iD=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},sD=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},nD=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},__=class extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},rD=class extends Oe{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:s}=di.platform;return t.addEventListener("keydown",n=>{n.key==="Enter"&&(s?n.metaKey:n.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},aD=class S_{#t=null;#e=null;#s=null;#i=new Map;#a=null;#n=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:n,viewport:a,structTreeLayer:o,commentManager:h,linkService:u,annotationStorage:f}){this.div=t,this.#t=e,this.#e=i,this.#a=o||null,this.#n=u||null,this.#s=f||new km,this.page=n,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async#r(t,e,i){const s=t.firstChild||t,n=s.id=`${Tm}${e}`,a=await this.#a?.getAriaAttributes(n);if(a)for(const[o,h]of a)s.setAttribute(o,h);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,s,!1))}async render(t){const{annotations:e}=t,i=this.div;qr(i,this.viewport);const s=new Map,n={data:null,layer:i,linkService:this.#n,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Tu,annotationStorage:this.#s,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const o=a.annotationType===He.POPUP;if(o){const f=s.get(a.id);if(!f)continue;n.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;n.data=a;const h=x2.create(n);if(!h.isRenderable)continue;if(!o&&a.popupRef){const f=s.get(a.popupRef);f?f.push(h):s.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),await this.#r(u,a.id,n.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#i.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#n,svgFactory:new Tu,parent:this};for(const i of t){i.borderStyle||=S_._defaultBorderStyle,e.data=i;const s=x2.create(e);if(!s.isRenderable)continue;const n=s.render();await this.#r(n,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,qr(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:n}=s;n?n.nodeName==="CANVAS"?n.replaceWith(i):n.classList.contains("annotationContent")?n.after(i):n.before(i):s.append(i);const a=this.#i.get(e);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,s.id,i),a._hasNoCanvas=!1):a.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:s}=t,n=new $8({data:{id:i,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#n,annotationStorage:this.#s}),a=n.render();return e.append(a),this.#t?.moveElementInDOM(e,a,a,!1),n.createOrUpdatePopup(),n}static get _defaultBorderStyle(){return Lt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ya.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Kh=/\r\n?|\n/g;let oD=class li extends we{#t="";#e=`${this.id}-editor`;#s=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=li.prototype,e=n=>n.isEmpty(),i=Jl.TRANSLATE_SMALL,s=Jl.TRANSLATE_BIG;return Lt(this,"_keyboardManager",new fc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=Mt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||li._defaultColor||we._defaultLineColor,this.#i=t.fontSize||li._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){we.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ut.FREETEXT_SIZE:li._defaultFontSize=e;break;case Ut.FREETEXT_COLOR:li._defaultColor=e;break}}updateParams(t,e){switch(t){case Ut.FREETEXT_SIZE:this.#a(e);break;case Ut.FREETEXT_COLOR:this.#n(e);break}}static get defaultPropertiesToUpdate(){return[[Ut.FREETEXT_SIZE,li._defaultFontSize],[Ut.FREETEXT_COLOR,li._defaultColor||we._defaultLineColor]]}get propertiesToUpdate(){return[[Ut.FREETEXT_SIZE,this.#i],[Ut.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new m_(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ut.FREETEXT_COLOR}#a(t){const e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#i)*this.parentScale),this.#i=s,this.#o()},i=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#n(t){const e=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-li._internalPadding*t,-(li._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(li.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:n}=this,a=n.style.display,o=n.classList.contains("hidden");n.classList.remove("hidden"),n.style.display="hidden",s.div.append(this.div),i=n.getBoundingClientRect(),n.remove(),n.style.display=a,n.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#r().trimEnd();if(t===e)return;const i=s=>{if(this.#t=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){li._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,n]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,h]=this.getInitialTranslation();[o,h]=this.pageTranslationToScreen(o,h);const[u,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(a[0]-p)/u,w=e+this.height-(a[1]-m)/f;break;case 90:y=t+(a[0]-p)/u,w=e-(a[1]-m)/f,[o,h]=[h,-o];break;case 180:y=t-this.width+(a[0]-p)/u,w=e-(a[1]-m)/f,[o,h]=[-o,-h];break;case 270:y=t+(a[0]-p-this.height*f)/u,w=e+(a[1]-m-this.width*u)/f,[o,h]=[-h,o];break}this.setAt(y*s,w*n,o,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Kh,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=li.#u(e.getData("text")||"").replaceAll(Kh,`
`);if(!s)return;const n=window.getSelection();if(!n.rangeCount)return;this.editorDiv.normalize(),n.deleteFromDocument();const a=n.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),n.collapseToStart();return}const{startContainer:o,startOffset:h}=a,u=[],f=[];if(o.nodeType===Node.TEXT_NODE){const y=o.parentElement;if(f.push(o.nodeValue.slice(h).replaceAll(Kh,"")),y!==this.editorDiv){let w=u;for(const v of this.editorDiv.childNodes){if(v===y){w=f;continue}w.push(li.#c(v))}}u.push(o.nodeValue.slice(0,h).replaceAll(Kh,""))}else if(o===this.editorDiv){let y=u,w=0;for(const v of this.editorDiv.childNodes)w++===h&&(y=f),y.push(li.#c(v))}this.#t=`${u.join(`
`)}${s}${f.join(`
`)}`,this.#l();const p=new Range;let m=Math.sumPrecise(u.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(m<=w){p.setStart(y,m),p.setEnd(y,m);break}m-=w}n.removeAllRanges(),n.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#u(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=li._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let s=null;if(t instanceof v_){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:h,rotation:u,id:f,popupRef:p,richText:m,contentsObj:y,creationDate:w,modificationDate:v},textContent:S,textPosition:_,parent:{page:{pageNumber:x}}}=t;if(!S||S.length===0)return null;s=t={annotationType:Mt.FREETEXT,color:Array.from(o),fontSize:a,value:S.join(`
`),position:_,pageIndex:x-1,rect:h.slice(0),rotation:u,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:y?.str||null,richText:m,creationDate:w,modificationDate:v}}const n=await super.deserialize(t,e,i);return n.#i=t.fontSize,n.color=pt.makeHexColor(...t.color),n.#t=li.#u(t.value),n._initialData=s,t.comment&&n.setCommentData(t),n}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=we._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:s,pageIndex:n}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((a,o)=>a!==s[o])||t.pageIndex!==n}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const s of this.#t.split(`
`)){const n=document.createElement("div");n.append(s?document.createTextNode(s):document.createElement("br")),e.append(n)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},ut=class{static PRECISION=1e-4;toSVGPath(){de("Abstract method `toSVGPath` must be implemented.")}get box(){de("Abstract getter `box` must be implemented.")}serialize(t,e){de("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,n,a){a||=new Float32Array(t.length);for(let o=0,h=t.length;o<h;o+=2)a[o]=e+t[o]*s,a[o+1]=i+t[o+1]*n;return a}static _rescaleAndSwap(t,e,i,s,n,a){a||=new Float32Array(t.length);for(let o=0,h=t.length;o<h;o+=2)a[o]=e+t[o+1]*s,a[o+1]=i+t[o]*n;return a}static _translate(t,e,i,s){s||=new Float32Array(t.length);for(let n=0,a=t.length;n<a;n+=2)s[n]=e+t[n],s[n+1]=i+t[n+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,n){switch(n){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,n,a){return[(t+5*i)/6,(e+5*s)/6,(5*i+n)/6,(5*s+a)/6,(i+n)/2,(s+a)/2]}},E_=class Il{#t;#e=[];#s;#i;#a=[];#n=new Float32Array(18);#r;#o;#c;#l;#d;#u;#f=[];static#m=8;static#g=2;static#h=Il.#m+Il.#g;constructor({x:t,y:e},i,s,n,a,o=0){this.#t=i,this.#u=n*s,this.#i=a,this.#n.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=o,this.#l=Il.#m*s,this.#c=Il.#h*s,this.#d=s,this.#f.push(t,e)}isEmpty(){return isNaN(this.#n[8])}#p(){const t=this.#n.subarray(4,6),e=this.#n.subarray(16,18),[i,s,n,a]=this.#t;return[(this.#r+(t[0]-e[0])/2-i)/n,(this.#o+(t[1]-e[1])/2-s)/a,(this.#r+(e[0]-t[0])/2-i)/n,(this.#o+(e[1]-t[1])/2-s)/a]}add({x:t,y:e}){this.#r=t,this.#o=e;const[i,s,n,a]=this.#t;let[o,h,u,f]=this.#n.subarray(8,12);const p=t-u,m=e-f,y=Math.hypot(p,m);if(y<this.#c)return!1;const w=y-this.#l,v=w/y,S=v*p,_=v*m;let x=o,E=h;o=u,h=f,u+=S,f+=_,this.#f?.push(t,e);const R=-_/w,D=S/w,M=R*this.#u,k=D*this.#u;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([u+M,f+k],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([u-M,f-k],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([o+M,h+k],2),this.#a.push(NaN,NaN,NaN,NaN,(o+M-i)/n,(h+k-s)/a),this.#n.set([o-M,h-k],14),this.#e.push(NaN,NaN,NaN,NaN,(o-M-i)/n,(h-k-s)/a)),this.#n.set([x,E,o,h,u,f],6),!this.isEmpty()):(this.#n.set([x,E,o,h,u,f],6),Math.abs(Math.atan2(E-h,x-o)-Math.atan2(_,S))<Math.PI/2?([o,h,u,f]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((o+u)/2-i)/n,((h+f)/2-s)/a),[o,h,x,E]=this.#n.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+o)/2-i)/n,((E+h)/2-s)/a),!0):([x,E,o,h,u,f]=this.#n.subarray(0,6),this.#a.push(((x+5*o)/6-i)/n,((E+5*h)/6-s)/a,((5*o+u)/6-i)/n,((5*h+f)/6-s)/a,((o+u)/2-i)/n,((h+f)/2-s)/a),[u,f,o,h,x,E]=this.#n.subarray(12,18),this.#e.push(((x+5*o)/6-i)/n,((E+5*h)/6-s)/a,((5*o+u)/6-i)/n,((5*h+f)/6-s)/a,((o+u)/2-i)/n,((h+f)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#b(i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,s]=this.#t,[n,a,o,h]=this.#p();return`M${(this.#n[2]-t)/i} ${(this.#n[3]-e)/s} L${(this.#n[4]-t)/i} ${(this.#n[5]-e)/s} L${n} ${a} L${o} ${h} L${(this.#n[16]-t)/i} ${(this.#n[17]-e)/s} L${(this.#n[14]-t)/i} ${(this.#n[15]-e)/s} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,s,n]=this.#t,a=this.#n.subarray(4,6),o=this.#n.subarray(16,18),[h,u,f,p]=this.#p();t.push(`L${(a[0]-e)/s} ${(a[1]-i)/n} L${h} ${u} L${f} ${p} L${(o[0]-e)/s} ${(o[1]-i)/n}`)}newFreeDrawOutline(t,e,i,s,n,a){return new x_(t,e,i,s,n,a)}getOutlines(){const t=this.#a,e=this.#e,i=this.#n,[s,n,a,o]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let p=0,m=h.length-2;p<m;p+=2)h[p]=(this.#f[p]-s)/a,h[p+1]=(this.#f[p+1]-n)/o;if(h[h.length-2]=(this.#r-s)/a,h[h.length-1]=(this.#o-n)/o,isNaN(i[6])&&!this.isEmpty())return this.#x(h);const u=new Float32Array(this.#a.length+24+this.#e.length);let f=t.length;for(let p=0;p<f;p+=2){if(isNaN(t[p])){u[p]=u[p+1]=NaN;continue}u[p]=t[p],u[p+1]=t[p+1]}f=this.#A(u,f);for(let p=e.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(e[p+m])){u[f]=u[f+1]=NaN,f+=2;continue}u[f]=e[p+m],u[f+1]=e[p+m+1],f+=2}return this.#S(u,f),this.newFreeDrawOutline(u,h,this.#t,this.#d,this.#s,this.#i)}#x(t){const e=this.#n,[i,s,n,a]=this.#t,[o,h,u,f]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-i)/n,(e[3]-s)/a,NaN,NaN,NaN,NaN,(e[4]-i)/n,(e[5]-s)/a,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(e[16]-i)/n,(e[17]-s)/a,NaN,NaN,NaN,NaN,(e[14]-i)/n,(e[15]-s)/a],0),this.newFreeDrawOutline(p,t,this.#t,this.#d,this.#s,this.#i)}#S(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#A(t,e){const i=this.#n.subarray(4,6),s=this.#n.subarray(16,18),[n,a,o,h]=this.#t,[u,f,p,m]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-n)/o,(i[1]-a)/h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(s[0]-n)/o,(s[1]-a)/h],e),e+=24}},x_=class extends ut{#t;#e=new Float32Array(4);#s;#i;#a;#n;#r;constructor(t,e,i,s,n,a){super(),this.#r=t,this.#a=e,this.#t=i,this.#n=s,this.#s=n,this.#i=a,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(a);const[o,h,u,f]=this.#e;for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-o)/u,t[p+1]=(t[p+1]-h)/f;for(let p=0,m=e.length;p<m;p+=2)e[p]=(e[p]-o)/u,e[p+1]=(e[p+1]-h)/f}toSVGPath(){const t=[`M${this.#r[4]} ${this.#r[5]}`];for(let e=6,i=this.#r.length;e<i;e+=6){if(isNaN(this.#r[e])){t.push(`L${this.#r[e+4]} ${this.#r[e+5]}`);continue}t.push(`C${this.#r[e]} ${this.#r[e+1]} ${this.#r[e+2]} ${this.#r[e+3]} ${this.#r[e+4]} ${this.#r[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,s],n){const a=i-t,o=s-e;let h,u;switch(n){case 0:h=ut._rescale(this.#r,t,s,a,-o),u=ut._rescale(this.#a,t,s,a,-o);break;case 90:h=ut._rescaleAndSwap(this.#r,t,e,a,o),u=ut._rescaleAndSwap(this.#a,t,e,a,o);break;case 180:h=ut._rescale(this.#r,i,e,-a,o),u=ut._rescale(this.#a,i,e,-a,o);break;case 270:h=ut._rescaleAndSwap(this.#r,i,s,-a,-o),u=ut._rescaleAndSwap(this.#a,i,s,-a,-o);break}return{outline:Array.from(h),points:[Array.from(u)]}}#o(t){const e=this.#r;let i=e[4],s=e[5];const n=[i,s,i,s];let a=i,o=s,h=i,u=s;const f=t?Math.max:Math.min,p=new Float32Array(4);for(let y=6,w=e.length;y<w;y+=6){const v=e[y+4],S=e[y+5];isNaN(e[y])?(pt.pointBoundingBox(v,S,n),o>S?(a=v,o=S):o===S&&(a=f(a,v)),u<S?(h=v,u=S):u===S&&(h=f(h,v))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,pt.bezierBoundingBox(i,s,...e.slice(y,y+6),p),pt.rectBoundingBox(p[0],p[1],p[2],p[3],n),o>p[1]?(a=p[0],o=p[1]):o===p[1]&&(a=f(a,p[0])),u<p[3]?(h=p[2],u=p[3]):u===p[3]&&(h=f(h,p[2]))),i=v,s=S}const m=this.#e;m[0]=n[0]-this.#s,m[1]=n[1]-this.#s,m[2]=n[2]-n[0]+2*this.#s,m[3]=n[3]-n[1]+2*this.#s,this.firstPoint=[a,o],this.lastPoint=[h,u]}get box(){return this.#e}newOutliner(t,e,i,s,n,a=0){return new E_(t,e,i,s,n,a)}getNewOutline(t,e){const[i,s,n,a]=this.#e,[o,h,u,f]=this.#t,p=n*u,m=a*f,y=i*u+o,w=s*f+h,v=this.newOutliner({x:this.#a[0]*p+y,y:this.#a[1]*m+w},this.#t,this.#n,t,this.#i,e??this.#s);for(let S=2;S<this.#a.length;S+=2)v.add({x:this.#a[S]*p+y,y:this.#a[S+1]*m+w});return v.getOutlines()}},Vg=class{#t;#e;#s;#i=[];#a=[];constructor(t,e=0,i=0,s=!0){const n=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:v,y:S,width:_,height:x}of t){const E=Math.floor((v-e)/a)*a,R=Math.ceil((v+_+e)/a)*a,D=Math.floor((S-e)/a)*a,M=Math.ceil((S+x+e)/a)*a,k=[E,D,M,!0],N=[R,D,M,!1];this.#i.push(k,N),pt.rectBoundingBox(E,D,R,M,n)}const o=n[2]-n[0]+2*i,h=n[3]-n[1]+2*i,u=n[0]-i,f=n[1]-i;let p=s?-1/0:1/0,m=1/0;const y=this.#i.at(s?-1:-2),w=[y[0],y[2]];for(const v of this.#i){const[S,_,x,E]=v;!E&&s?_<m?(m=_,p=S):_===m&&(p=Math.max(p,S)):E&&!s&&(_<m?(m=_,p=S):_===m&&(p=Math.min(p,S))),v[0]=(S-u)/o,v[1]=(_-f)/h,v[2]=(x-f)/h}this.#t=new Float32Array([u,f,o,h]),this.#e=[p,m],this.#s=w}getOutlines(){this.#i.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#n(t)}#n(t){const e=[],i=new Set;for(const a of t){const[o,h,u]=a;e.push([o,h,a],[o,u,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const h=e[a][2],u=e[a+1][2];h.push(u),u.push(h),i.add(h),i.add(u)}const s=[];let n;for(;i.size>0;){const a=i.values().next().value;let[o,h,u,f,p]=a;i.delete(a);let m=o,y=h;for(n=[o,u],s.push(n);;){let w;if(i.has(f))w=f;else if(i.has(p))w=p;else break;i.delete(w),[o,h,u,f,p]=w,m!==o&&(n.push(m,y,o,y===h?h:u),m=o),y=y===h?u:h}n.push(m,y)}return new lD(s,this.#t,this.#e,this.#s)}#r(t){const e=this.#a;let i=0,s=e.length-1;for(;i<=s;){const n=i+s>>1,a=e[n][0];if(a===t)return n;a<t?i=n+1:s=n-1}return s+1}#o([,t,e]){const i=this.#r(t);this.#a.splice(i,0,[t,e])}#c([,t,e]){const i=this.#r(t);for(let s=i;s<this.#a.length;s++){const[n,a]=this.#a[s];if(n!==t)break;if(n===t&&a===e){this.#a.splice(s,1);return}}for(let s=i-1;s>=0;s--){const[n,a]=this.#a[s];if(n!==t)break;if(n===t&&a===e){this.#a.splice(s,1);return}}}#l(t){const[e,i,s]=t,n=[[e,i,s]],a=this.#r(s);for(let o=0;o<a;o++){const[h,u]=this.#a[o];for(let f=0,p=n.length;f<p;f++){const[,m,y]=n[f];if(!(u<=m||y<=h)){if(m>=h){if(y>u)n[f][1]=u;else{if(p===1)return[];n.splice(f,1),f--,p--}continue}n[f][2]=h,y>u&&n.push([e,u,y])}}}return n}},lD=class extends ut{#t;#e;constructor(t,e,i,s){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=s}toSVGPath(){const t=[];for(const e of this.#e){let[i,s]=e;t.push(`M${i} ${s}`);for(let n=2;n<e.length;n+=2){const a=e[n],o=e[n+1];a===i?(t.push(`V${o}`),s=o):o===s&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,e,i,s],n){const a=[],o=i-t,h=s-e;for(const u of this.#e){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=t+u[p]*o,f[p+1]=s-u[p+1]*h;a.push(f)}return a}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}},qg=class extends E_{newFreeDrawOutline(t,e,i,s,n,a){return new cD(t,e,i,s,n,a)}},cD=class extends x_{newOutliner(t,e,i,s,n,a=0){return new qg(t,e,i,s,n,a)}},C2=class Xe extends we{#t=null;#e=0;#s;#i=null;#a=null;#n=null;#r=null;#o=0;#c=null;#l=null;#d=null;#u=!1;#f=null;#m=null;#g=null;#h="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Xe.prototype;return Lt(this,"_keyboardManager",new fc([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Xe._defaultColor,this.#p=t.thickness||Xe._defaultThickness,this.opacity=t.opacity||Xe._defaultOpacity,this.#s=t.boxes||null,this.#y=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#b(t),this.#w()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#r=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Vg(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Vg(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#n=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:s}=this.#n;this.#m=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const s=1.5;if(this.#n=t.getNewOutline(this.#p/2+s,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Xe.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Xe.#E(this.#n.box,p),path:{d:this.#n.toSVGPath()}})}const[n,a,o,h]=t.box;switch(this.rotation){case 0:this.x=n,this.y=a,this.width=o,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-n,this.width=o*m/p,this.height=h*p/m;break}case 180:this.x=1-n,this.y=1-a,this.width=o,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=n,this.width=o*m/p,this.height=h*p/m;break}}const{firstPoint:u}=t;this.#f=[(u[0]-n)/o,(u[1]-a)/h];const{lastPoint:f}=this.#n;this.#m=[(f[0]-n)/o,(f[1]-a)/h]}static initialize(t,e){we.initialize(t,e),Xe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ut.HIGHLIGHT_COLOR:Xe._defaultColor=e;break;case Ut.HIGHLIGHT_THICKNESS:Xe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ut.HIGHLIGHT_COLOR:this.#x(e);break;case Ut.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[Ut.HIGHLIGHT_COLOR,Xe._defaultColor],[Ut.HIGHLIGHT_THICKNESS,Xe._defaultThickness]]}get propertiesToUpdate(){return[[Ut.HIGHLIGHT_COLOR,this.color||Xe._defaultColor],[Ut.HIGHLIGHT_THICKNESS,this.#p||Xe._defaultThickness],[Ut.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#x(t){const e=(n,a)=>{this.color=n,this.opacity=a,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:e.bind(this,t,Xe._defaultOpacity),undo:e.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#S(t){const e=this.#p,i=s=>{this.#p=s,this.#A(s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new g_({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#u&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#i))}static#E([t,e,i,s],n){switch(n){case 90:return[1-e-s,t,s,i];case 180:return[1-t-i,1-e-s,i,s];case 270:return[e,1-t-i,s,i]}return[t,e,i,s]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#u?(t=(t-this.rotation+360)%360,i=Xe.#E(this.#l.box,t)):i=Xe.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:Xe.#E(this.#n.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(this.width,this.height),Uw(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(t){Xe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#r,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#u||this.#M(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#D(){return this.#u?this.rotation:0}#I(){if(this.#u)return null;const[t,e]=this.pageDimensions,[i,s]=this.pageTranslation,n=this.#s,a=new Float32Array(n.length*8);let o=0;for(const{x:h,y:u,width:f,height:p}of n){const m=h*t+i,y=(1-u)*e+s;a[o]=a[o+4]=m,a[o+1]=a[o+3]=y,a[o+2]=a[o+6]=m+f*t,a[o+5]=a[o+7]=y-p*e,o+=8}return a}#L(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,e,{target:i,x:s,y:n}){const{x:a,y:o,width:h,height:u}=i.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),this.#B(t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",Me,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",ms,{signal:p}),i.addEventListener("pointermove",this.#P.bind(this,t),{signal:p}),this._freeHighlight=new qg({x:s,y:n},[a,o,h,u],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let s=null;if(t instanceof w_){const{data:{quadPoints:w,rect:v,rotation:S,id:_,color:x,opacity:E,popupRef:R,richText:D,contentsObj:M,creationDate:k,modificationDate:N},parent:{page:{pageNumber:I}}}=t;s=t={annotationType:Mt.HIGHLIGHT,color:Array.from(x),opacity:E,quadPoints:w,boxes:null,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,popupRef:R,richText:D,comment:M?.str||null,creationDate:k,modificationDate:N}}else if(t instanceof Nm){const{data:{inkLists:w,rect:v,rotation:S,id:_,color:x,borderStyle:{rawWidth:E},popupRef:R,richText:D,contentsObj:M,creationDate:k,modificationDate:N},parent:{page:{pageNumber:I}}}=t;s=t={annotationType:Mt.HIGHLIGHT,color:Array.from(x),thickness:E,inkLists:w,boxes:null,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,popupRef:R,richText:D,comment:M?.str||null,creationDate:k,modificationDate:N}}const{color:n,quadPoints:a,inkLists:o,opacity:h}=t,u=await super.deserialize(t,e,i);u.color=pt.makeHexColor(...n),u.opacity=h||1,o&&(u.#p=t.thickness),u._initialData=s,t.comment&&u.setCommentData(t);const[f,p]=u.pageDimensions,[m,y]=u.pageTranslation;if(a){const w=u.#s=[];for(let v=0;v<a.length;v+=8)w.push({x:(a[v]-m)/f,y:1-(a[v+1]-y)/p,width:(a[v+2]-a[v])/f,height:(a[v+1]-a[v+5])/p});u.#v(),u.#w(),u.rotate(u.rotation)}else if(o){u.#u=!0;const w=o[0],v={x:w[0]-m,y:p-(w[1]-y)},S=new qg(v,[0,0,f,p],1,u.#p/2,!0,.001);for(let E=0,R=w.length;E<R;E+=2)v.x=w[E]-m,v.y=p-(w[E+1]-y),S.add(v);const{id:_,clipPathId:x}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);u.#b({highlightOutlines:S.getOutlines(),highlightId:_,clipPathId:x}),u.#w(),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=we._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#L(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#N(i)?null:(i.id=this.annotationElementId,i)}#N(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==e[s])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}},C_=class{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){de("Not implemented")}},T_=class wt extends we{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#i=null;static#a=null;static#n=NaN;static#r=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(wt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[s,n]of Object.entries(e))i.has(s)?Object.assign(t[s],n):t[s]=n;return t}static getDefaultDrawingOptions(t){de("Not implemented")}static get typesMap(){de("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(wt.#s.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,e[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,e[s]]);return t}_updateProperty(t,e,i){const s=this._drawingOptions,n=s[e],a=o=>{s.updateProperty(e,o);const h=this.#t.updateProperty(e,o);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,wt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,wt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#p()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,wt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,e,i,s]){const{parentDimensions:[n,a],rotation:o}=this;switch(o){case 90:return[e,1-t,i*(a/n),s*(n/a)];case 180:return[1-t,1-e,i,s];case 270:return[1-e,t,i*(a/n),s*(n/a)];default:return[t,e,i,s]}}#g(){const{x:t,y:e,width:i,height:s,parentDimensions:[n,a],rotation:o}=this;switch(o){case 90:return[1-e,t,i*(n/a),s*(a/n)];case 180:return[1-t,1-e,i,s];case 270:return[e,1-t,i*(n/a),s*(a/n)];default:return[t,e,i,s]}}#h(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:t,y:e,width:i,height:s,rotation:n,parentRotation:a,parentDimensions:[o,h]}=this;switch((n*4+a)/90){case 1:return[1-e-s,t,s,i];case 2:return[1-t-i,1-e-s,i,s];case 3:return[e,1-t-i,s,i];case 4:return[t,e-i*(o/h),s*(h/o),i*(o/h)];case 5:return[1-e,t,i*(o/h),s*(h/o)];case 6:return[1-t-s*(h/o),1-e,s*(h/o),i*(o/h)];case 7:return[e-i*(o/h),1-t-s*(h/o),i*(o/h),s*(h/o)];case 8:return[t-i,e-s,i,s];case 9:return[1-e,t-i,s,i];case 10:return[1-t,1-e,i,s];case 11:return[e-s,1-t,s,i];case 12:return[t-s*(h/o),e,s*(h/o),i*(o/h)];case 13:return[1-e-i*(o/h),t-s*(h/o),i*(o/h),s*(h/o)];case 14:return[1-t,1-e-i*(o/h),s*(h/o),i*(o/h)];case 15:return[e,1-t,i*(o/h),s*(h/o)];default:return[t,e,i,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,wt._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,s,n){de("Not implemented")}static startDrawing(t,e,i,s){const{target:n,offsetX:a,offsetY:o,pointerId:h,pointerType:u}=s;if(wt.#r&&wt.#r!==u)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=n.getBoundingClientRect(),y=wt.#i=new AbortController,w=t.combinedSignal(y);if(wt.#n||=h,wt.#r??=u,window.addEventListener("pointerup",v=>{wt.#n===v.pointerId?this._endDraw(v):wt.#o?.delete(v.pointerId)},{signal:w}),window.addEventListener("pointercancel",v=>{wt.#n===v.pointerId?this._currentParent.endDrawingSession():wt.#o?.delete(v.pointerId)},{signal:w}),window.addEventListener("pointerdown",v=>{wt.#r===v.pointerType&&((wt.#o||=new Set).add(v.pointerId),wt.#s.isCancellable()&&(wt.#s.removeLastElement(),wt.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ms,{signal:w}),n.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),n.addEventListener("touchmove",v=>{v.timeStamp===wt.#c&&Me(v)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),wt.#s){t.drawLayer.updateProperties(this._currentDrawId,wt.#s.startNew(a,o,p,m,f));return}e.updateUIForDefaultProperties(this),wt.#s=this.createDrawerInstance(a,o,p,m,f),wt.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(wt.#a.toSVGProperties(),wt.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(wt.#c=-1,!wt.#s)return;const{offsetX:e,offsetY:i,pointerId:s}=t;if(wt.#n===s){if(wt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,wt.#s.add(e,i)),wt.#c=t.timeStamp,Me(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,wt.#s=null,wt.#a=null,wt.#r=null,wt.#c=NaN),wt.#i&&(wt.#i.abort(),wt.#i=null,wt.#n=NaN,wt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,wt.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=wt.#s,s=this._currentDrawId,n=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(s,i.setLastElement(n))},undo:()=>{e.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Ut.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ut.DRAW_STEP),!wt.#s.isEmpty()){const{pageDimensions:[i,s],scale:n}=e,a=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:wt.#s.getOutlines(i*n,s*n,n,this._INNER_MARGIN),drawingOptions:wt.#a,mustBeCommitted:!t});return this._cleanup(!0),a}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,s,n,a){de("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:s,pageHeight:n,pageX:a,pageY:o}}=e.viewport,h=this.deserializeDraw(a,o,s,n,this._INNER_MARGIN,t),u=await super.deserialize(t,e,i);return u.createDrawingOptions(t),u.#l({drawOutlines:h}),u.#f(),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[e,i]=this.pageTranslation,[s,n]=this.pageDimensions;return this.#t.serialize([e,i,s,n],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}},hD=class{#t=new Float64Array(6);#e;#s;#i;#a;#n;#r="";#o=0;#c=new gc;#l;#d;constructor(t,e,i,s,n,a){this.#l=i,this.#d=s,this.#i=n,this.#a=a,[t,e]=this.#u(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#n=[t,e],this.#s=[{line:o,points:this.#n}],this.#t.set(o,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#u(t,e){return ut._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#n.length<=10}add(t,e){[t,e]=this.#u(t,e);const[i,s,n,a]=this.#t.subarray(2,6),o=t-n,h=e-a;return Math.hypot(this.#l*o,this.#d*h)<=2?null:(this.#n.push(t,e),isNaN(i)?(this.#t.set([n,a,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,s,n,a,t,e],0),this.#e.push(...ut.createBezierPoints(i,s,n,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#n.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,n){this.#l=i,this.#d=s,this.#i=n,[t,e]=this.#u(t,e);const a=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#n=[t,e];const o=this.#s.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#s.push({line:a,points:this.#n}),this.#t.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#n=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#r="";for(let t=0,e=this.#s.length;t<e;t++){const{line:i,points:s}=this.#s[t];this.#e=i,this.#n=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const t=ut.svgRound(this.#e[4]),e=ut.svgRound(this.#e[5]);if(this.#n.length===2)return this.#r=`${this.#r} M ${t} ${e} Z`,this.#r;if(this.#n.length<=6){const s=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,s)} M ${t} ${e}`,this.#o=6}if(this.#n.length===4){const s=ut.svgRound(this.#e[10]),n=ut.svgRound(this.#e[11]);return this.#r=`${this.#r} L ${s} ${n}`,this.#o=12,this.#r}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let s=this.#o,n=this.#e.length;s<n;s+=6){const[a,o,h,u,f,p]=this.#e.slice(s,s+6).map(ut.svgRound);i.push(`C${a} ${o} ${h} ${u} ${f} ${p}`)}return this.#r+=i.join(" "),this.#o=this.#e.length,this.#r}getOutlines(t,e,i,s){const n=this.#s.at(-1);return n.line=new Float32Array(n.line),n.points=new Float32Array(n.points),this.#c.build(this.#s,t,e,i,this.#i,this.#a,s),this.#t=null,this.#e=null,this.#s=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},gc=class extends ut{#t;#e=0;#s;#i;#a;#n;#r;#o;#c;build(t,e,i,s,n,a,o){this.#a=e,this.#n=i,this.#r=s,this.#o=n,this.#c=a,this.#s=o??0,this.#i=t,this.#u()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${ut.svgRound(e[4])} ${ut.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${ut.svgRound(e[10])} ${ut.svgRound(e[11])}`);continue}for(let i=6,s=e.length;i<s;i+=6){const[n,a,o,h,u,f]=e.subarray(i,i+6).map(ut.svgRound);t.push(`C${n} ${a} ${o} ${h} ${u} ${f}`)}}return t.join("")}serialize([t,e,i,s],n){const a=[],o=[],[h,u,f,p]=this.#d();let m,y,w,v,S,_,x,E,R;switch(this.#o){case 0:R=ut._rescale,m=t,y=e+s,w=i,v=-s,S=t+h*i,_=e+(1-u-p)*s,x=t+(h+f)*i,E=e+(1-u)*s;break;case 90:R=ut._rescaleAndSwap,m=t,y=e,w=i,v=s,S=t+u*i,_=e+h*s,x=t+(u+p)*i,E=e+(h+f)*s;break;case 180:R=ut._rescale,m=t+i,y=e,w=-i,v=s,S=t+(1-h-f)*i,_=e+u*s,x=t+(1-h)*i,E=e+(u+p)*s;break;case 270:R=ut._rescaleAndSwap,m=t+i,y=e+s,w=-i,v=-s,S=t+(1-u-p)*i,_=e+(1-h-f)*s,x=t+(1-u)*i,E=e+(1-h)*s;break}for(const{line:D,points:M}of this.#i)a.push(R(D,m,y,w,v,n?new Array(D.length):null)),o.push(R(M,m,y,w,v,n?new Array(M.length):null));return{lines:a,points:o,rect:[S,_,x,E]}}static deserialize(t,e,i,s,n,{paths:{lines:a,points:o},rotation:h,thickness:u}){const f=[];let p,m,y,w,v;switch(h){case 0:v=ut._rescale,p=-t/i,m=e/s+1,y=1/i,w=-1/s;break;case 90:v=ut._rescaleAndSwap,p=-e/s,m=-t/i,y=1/s,w=1/i;break;case 180:v=ut._rescale,p=t/i+1,m=-e/s,y=-1/i,w=1/s;break;case 270:v=ut._rescaleAndSwap,p=e/s+1,m=t/i+1,y=-1/s,w=-1/i;break}if(!a){a=[];for(const _ of o){const x=_.length;if(x===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(x===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const E=new Float32Array(3*(x-2));a.push(E);let[R,D,M,k]=_.subarray(0,4);E.set([NaN,NaN,NaN,NaN,R,D],0);for(let N=4;N<x;N+=2){const I=_[N],G=_[N+1];E.set(ut.createBezierPoints(R,D,M,k,I,G),(N-2)*3),[R,D,M,k]=[M,k,I,G]}}}for(let _=0,x=a.length;_<x;_++)f.push({line:v(a[_].map(E=>E??NaN),p,m,y,w),points:v(o[_].map(E=>E??NaN),p,m,y,w)});const S=new this.prototype.constructor;return S.build(f,i,s,1,h,u,n),S}#l(t=this.#c){const e=this.#s+t/2*this.#r;return this.#o%180===0?[e/this.#a,e/this.#n]:[e/this.#n,e/this.#a]}#d(){const[t,e,i,s]=this.#t,[n,a]=this.#l(0);return[t+n,e+a,i-2*n,s-2*a]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#i){if(s.length<=12){for(let o=4,h=s.length;o<h;o+=6)pt.pointBoundingBox(s[o],s[o+1],t);continue}let n=s[4],a=s[5];for(let o=6,h=s.length;o<h;o+=6){const[u,f,p,m,y,w]=s.subarray(o,o+6);pt.bezierBoundingBox(n,a,u,f,p,m,y,w,t),n=y,a=w}}const[e,i]=this.#l();t[0]=vi(t[0]-e,0,1),t[1]=vi(t[1]-i,0,1),t[2]=vi(t[2]+e,0,1),t[3]=vi(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[s,n]=this.#l(),[a,o]=[s-e,n-i],h=this.#t;return h[0]-=a,h[1]-=o,h[2]+=2*a,h[3]+=2*o,h}updateParentDimensions([t,e],i){const[s,n]=this.#l();this.#a=t,this.#n=e,this.#r=i;const[a,o]=this.#l(),h=a-s,u=o-n,f=this.#t;return f[0]-=h,f[1]-=u,f[2]+=2*h,f[3]+=2*u,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ut.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,s=0,n=0,a=0,o=0,h=0;switch(this.#e){case 90:s=e/t,n=-t/e,o=t;break;case 180:i=-1,a=-1,o=t,h=e;break;case 270:s=-e/t,n=t/e,h=e;break;default:return""}return`matrix(${i} ${s} ${n} ${a} ${ut.svgRound(o)} ${ut.svgRound(h)})`}getPathResizingSVGProperties([t,e,i,s]){const[n,a]=this.#l(),[o,h,u,f]=this.#t;if(Math.abs(u-n)<=ut.PRECISION||Math.abs(f-a)<=ut.PRECISION){const v=t+i/2-(o+u/2),S=e+s/2-(h+f/2);return{path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`,transform:`${this.rotationTransform} translate(${v} ${S})`}}}const p=(i-2*n)/(u-2*n),m=(s-2*a)/(f-2*a),y=u/i,w=f/s;return{path:{"transform-origin":`${ut.svgRound(o)} ${ut.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${ut.svgRound(n)} ${ut.svgRound(a)}) scale(${p} ${m}) translate(${ut.svgRound(-n)} ${ut.svgRound(-a)})`}}}getPathResizedSVGProperties([t,e,i,s]){const[n,a]=this.#l(),o=this.#t,[h,u,f,p]=o;if(o[0]=t,o[1]=e,o[2]=i,o[3]=s,Math.abs(f-n)<=ut.PRECISION||Math.abs(p-a)<=ut.PRECISION){const S=t+i/2-(h+f/2),_=e+s/2-(u+p/2);for(const{line:x,points:E}of this.#i)ut._translate(x,S,_,x),ut._translate(E,S,_,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*n)/(f-2*n),y=(s-2*a)/(p-2*a),w=-m*(h+n)+t+n,v=-y*(u+a)+e+a;if(m!==1||y!==1||w!==0||v!==0)for(const{line:S,points:_}of this.#i)ut._rescale(S,w,v,m,y,S),ut._rescale(_,w,v,m,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[s,n]=i,a=this.#t,o=t-a[0],h=e-a[1];if(this.#a===s&&this.#n===n)for(const{line:u,points:f}of this.#i)ut._translate(u,o,h,u),ut._translate(f,o,h,f);else{const u=this.#a/s,f=this.#n/n;this.#a=s,this.#n=n;for(const{line:p,points:m}of this.#i)ut._rescale(p,o,h,u,f,p),ut._rescale(m,o,h,u,f,m);a[2]*=u,a[3]*=f}return a[0]=t,a[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(t[0])} ${ut.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}},M_=class D_ extends C_{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:we._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new D_(this._viewParameters);return t.updateAll(this),t}},uD=class R_ extends T_{static _type="ink";static _editorType=Mt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){we.initialize(t,e),this._defaultDrawingOptions=new M_(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Lt(this,"typesMap",new Map([[Ut.INK_THICKNESS,"stroke-width"],[Ut.INK_COLOR,"stroke"],[Ut.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,s,n){return new hD(t,e,i,s,n,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,s,n,a){return gc.deserialize(t,e,i,s,n,a)}static async deserialize(t,e,i){let s=null;if(t instanceof Nm){const{data:{inkLists:a,rect:o,rotation:h,id:u,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,richText:w,contentsObj:v,creationDate:S,modificationDate:_},parent:{page:{pageNumber:x}}}=t;s=t={annotationType:Mt.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:a},boxes:null,pageIndex:x-1,rect:o.slice(0),rotation:h,annotationElementId:u,id:u,deleted:!1,popupRef:y,richText:w,comment:v?.str||null,creationDate:S,modificationDate:_}}const n=await super.deserialize(t,e,i);return n._initialData=s,t.comment&&n.setCommentData(t),n}get toolbarButtons(){return this._colorPicker||=new m_(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ut.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=R_.getDefaultDrawingOptions({stroke:pt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":n,"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{color:we._colorManager.convert(s),opacity:n,thickness:a,paths:{lines:e,points:i}});return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!this.#t(o)?null:(o.id=this.annotationElementId,o)}#t(t){const{color:e,thickness:i,opacity:s,pageIndex:n}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,o)=>a!==e[o])||t.thickness!==i||t.opacity!==s||t.pageIndex!==n}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}},Xg=class extends gc{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}};const Qh=8,El=3;let Ka=class{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,s,n,a,o){const h=this.#e(i,s,n,a);for(let u=0;u<8;u++){const f=(-u+h-o+16)%8,p=this.#s[2*f],m=this.#s[2*f+1];if(t[(i+p)*e+(s+m)]!==0)return f}return-1}static#a(t,e,i,s,n,a,o){const h=this.#e(i,s,n,a);for(let u=0;u<8;u++){const f=(u+h+o+16)%8,p=this.#s[2*f],m=this.#s[2*f+1];if(t[(i+p)*e+(s+m)]!==0)return f}return-1}static#n(t,e,i,s){const n=t.length,a=new Int32Array(n);for(let f=0;f<n;f++)a[f]=t[f]<=s?1:0;for(let f=1;f<i-1;f++)a[f*e]=a[f*e+e-1]=0;for(let f=0;f<e;f++)a[f]=a[e*i-1-f]=0;let o=1,h;const u=[];for(let f=1;f<i-1;f++){h=1;for(let p=1;p<e-1;p++){const m=f*e+p,y=a[m];if(y===0)continue;let w=f,v=p;if(y===1&&a[m-1]===0)o+=1,v-=1;else if(y>=1&&a[m+1]===0)o+=1,v+=1,y>1&&(h=y);else{y!==1&&(h=Math.abs(y));continue}const S=[p,f],_=v===p+1,x={isHole:_,points:S,id:o,parent:0};u.push(x);let E;for(const j of u)if(j.id===h){E=j;break}E?E.isHole?x.parent=_?E.parent:h:x.parent=_?h:E.parent:x.parent=_?h:0;const R=this.#i(a,e,f,p,w,v,0);if(R===-1){a[m]=-o,a[m]!==1&&(h=Math.abs(a[m]));continue}let D=this.#s[2*R],M=this.#s[2*R+1];const k=f+D,N=p+M;w=k,v=N;let I=f,G=p;for(;;){const j=this.#a(a,e,I,G,w,v,1);D=this.#s[2*j],M=this.#s[2*j+1];const tt=I+D,ot=G+M;S.push(ot,tt);const rt=I*e+G;if(a[rt+1]===0?a[rt]=-o:a[rt]===1&&(a[rt]=o),tt===f&&ot===p&&I===k&&G===N){a[m]!==1&&(h=Math.abs(a[m]));break}else w=I,v=G,I=tt,G=ot}}}return u}static#r(t,e,i,s){if(i-e<=4){for(let k=e;k<i-2;k+=2)s.push(t[k],t[k+1]);return}const n=t[e],a=t[e+1],o=t[i-4]-n,h=t[i-3]-a,u=Math.hypot(o,h),f=o/u,p=h/u,m=f*a-p*n,y=h/o,w=1/u,v=Math.atan(y),S=Math.cos(v),_=Math.sin(v),x=w*(Math.abs(S)+Math.abs(_)),E=w*(1-x+x**2),R=Math.max(Math.atan(Math.abs(_+S)*E),Math.atan(Math.abs(_-S)*E));let D=0,M=e;for(let k=e+2;k<i-2;k+=2){const N=Math.abs(m-f*t[k+1]+p*t[k]);N>D&&(M=k,D=N)}D>(u*R)**2?(this.#r(t,e,M+2,s),this.#r(t,M,i,s)):s.push(n,a)}static#o(t){const e=[],i=t.length;return this.#r(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,s,n,a){const o=new Float32Array(a**2),h=-2*s**2,u=a>>1;for(let v=0;v<a;v++){const S=(v-u)**2;for(let _=0;_<a;_++)o[v*a+_]=Math.exp((S+(_-u)**2)/h)}const f=new Float32Array(256),p=-2*n**2;for(let v=0;v<256;v++)f[v]=Math.exp(v**2/p);const m=t.length,y=new Uint8Array(m),w=new Uint32Array(256);for(let v=0;v<i;v++)for(let S=0;S<e;S++){const _=v*e+S,x=t[_];let E=0,R=0;for(let M=0;M<a;M++){const k=v+M-u;if(!(k<0||k>=i))for(let N=0;N<a;N++){const I=S+N-u;if(I<0||I>=e)continue;const G=t[k*e+I],j=o[M*a+N]*f[Math.abs(G-x)];E+=G*j,R+=j}}const D=y[_]=Math.round(E/R);w[D]++}return[y,w]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,n=1/0;for(let o=0,h=i.length;o<h;o++){const u=i[o]=t[o<<2];s=Math.max(s,u),n=Math.min(n,u)}const a=255/(s-n);for(let o=0,h=i.length;o<h;o++)i[o]=(i[o]-n)*a;return i}static#u(t){let e,i=-1/0,s=-1/0;const n=t.findIndex(h=>h!==0);let a=n,o=n;for(e=n;e<256;e++){const h=t[e];h>i&&(e-a>s&&(s=e-a,o=e-1),i=h,a=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:s}=t,{maxDim:n}=this.#t;let a=i,o=s;if(i>n||s>n){let m=i,y=s,w=Math.log2(Math.max(i,s)/n);const v=Math.floor(w);w=w===v?v-1:v;for(let _=0;_<w;_++){a=Math.ceil(m/2),o=Math.ceil(y/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(t,0,0,m,y,0,0,a,o),m=a,y=o,t!==e&&t.close(),t=x.transferToImageBitmap()}const S=Math.min(n/a,n/o);a=Math.round(a*S),o=Math.round(o*S)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,a,o);const f=u.getImageData(0,0,a,o).data;return[this.#d(f),a,o]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},n,a,o,h){let u=new OffscreenCanvas(1,1),f=u.getContext("2d",{alpha:!1});const p=200,m=f.font=`${i} ${s} ${p}px ${e}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,fontBoundingBoxAscent:_,fontBoundingBoxDescent:x,width:E}=f.measureText(t),R=1.5,D=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,E)*R),M=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||p,Math.abs(_)+Math.abs(x)||p)*R);u=new OffscreenCanvas(D,M),f=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=m,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,D,M),f.fillStyle="black",f.fillText(t,D*(R-1)/2,M*(3-R)/2);const k=this.#d(f.getImageData(0,0,D,M).data),N=this.#l(k),I=this.#u(N),G=this.#n(k,D,M,I);return this.processDrawnLines({lines:{curves:G,width:D,height:M},pageWidth:n,pageHeight:a,rotation:o,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,n){const[a,o,h]=this.#f(t),[u,f]=this.#c(a,o,h,Math.hypot(o,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#u(f),m=this.#n(u,o,h,p);return this.processDrawnLines({lines:{curves:m,width:o,height:h},pageWidth:e,pageHeight:i,rotation:s,innerMargin:n,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:n,mustSmooth:a,areContours:o}){s%180!==0&&([e,i]=[i,e]);const{curves:h,width:u,height:f}=t,p=t.thickness??0,m=[],y=Math.min(e/u,i/f),w=y/e,v=y/i,S=[];for(const{points:x}of h){const E=a?this.#o(x):x;if(!E)continue;S.push(E);const R=E.length,D=new Float32Array(R),M=new Float32Array(3*(R===2?2:R-2));if(m.push({line:M,points:D}),R===2){D[0]=E[0]*w,D[1]=E[1]*v,M.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[k,N,I,G]=E;k*=w,N*=v,I*=w,G*=v,D.set([k,N,I,G],0),M.set([NaN,NaN,NaN,NaN,k,N],0);for(let j=4;j<R;j+=2){const tt=D[j]=E[j]*w,ot=D[j+1]=E[j+1]*v;M.set(ut.createBezierPoints(k,N,I,G,tt,ot),(j-2)*3),[k,N,I,G]=[I,G,tt,ot]}}if(m.length===0)return null;const _=o?new Xg:new gc;return _.build(m,e,i,1,s,o?0:p,n),{outline:_,newCurves:S,areContours:o,thickness:p,width:u,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:n}){let a=1/0,o=-1/0,h=0;for(const E of t){h+=E.length;for(let R=2,D=E.length;R<D;R++){const M=E[R]-E[R-2];a=Math.min(a,M),o=Math.max(o,M)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const f=t.length,p=Qh+El*f,m=new Uint32Array(p);let y=0;m[y++]=p*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*u.BYTES_PER_ELEMENT,m[y++]=0,m[y++]=s,m[y++]=n,m[y++]=e?0:1,m[y++]=Math.max(0,Math.floor(i??0)),m[y++]=f,m[y++]=u.BYTES_PER_ELEMENT;for(const E of t)m[y++]=E.length-2,m[y++]=E[0],m[y++]=E[1];const w=new CompressionStream("deflate-raw"),v=w.writable.getWriter();await v.ready,v.write(m);const S=u.prototype.constructor;for(const E of t){const R=new S(E.length-2);for(let D=2,M=E.length;D<M;D++)R[D-2]=E[D]-E[D-2];v.write(R)}v.close();const _=await new Response(w.readable).arrayBuffer(),x=new Uint8Array(_);return Iw(x)}static async decompressSignature(t){try{const e=y6(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),n=s.getWriter();await n.ready,n.write(e).then(async()=>{await n.ready,await n.close()}).catch(()=>{});let a=null,o=0;for await(const E of i)a||=new Uint8Array(new Uint32Array(E.buffer,0,4)[0]),a.set(E,o),o+=E.length;const h=new Uint32Array(a.buffer,0,a.length>>2),u=h[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const f=h[2],p=h[3],m=h[4]===0,y=h[5],w=h[6],v=h[7],S=[],_=(Qh+El*w)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(v){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,_);break}o=0;for(let E=0;E<w;E++){const R=h[El*E+Qh],D=new Float32Array(R+2);S.push(D);for(let M=0;M<El-1;M++)D[M]=h[El*E+Qh+M+1];for(let M=0;M<R;M++)D[M+2]=D[M]+x[o++]}return{areContours:m,thickness:y,outlines:S,width:f,height:p}}catch(e){return Et(`decompressSignature: ${e}`),null}}},dD=class k_ extends C_{constructor(){super(),super.updateProperties({fill:we._defaultLineColor,"stroke-width":0})}clone(){const t=new k_;return t.updateAll(this),t}},fD=class L_ extends M_{constructor(t){super(t),super.updateProperties({stroke:we._defaultLineColor,"stroke-width":1})}clone(){const t=new L_(this._viewParameters);return t.updateAll(this),t}},pD=class dn extends T_{#t=!1;#e=null;#s=null;#i=null;static _type="signature";static _editorType=Mt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){we.initialize(t,e),this._defaultDrawingOptions=new dD,this._defaultDrawnSignatureOptions=new fD(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Lt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:s,mustSmooth:n,areContours:a,description:o,uuid:h,heightInPage:u}=this.#s,{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=Ka.processDrawnLines({lines:s,pageWidth:f,pageHeight:p,rotation:m,innerMargin:dn._INNER_MARGIN,mustSmooth:n,areContours:a});this.addSignature(y,u,o,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:s,height:n}=this.#s,a=Math.max(s,n),o=Ka.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:i,width:s,height:n},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,s){const{x:n,y:a}=this,{outline:o}=this.#s=t;this.#t=o instanceof Xg,this.description=i;let h;this.#t?h=dn.getDefaultDrawingOptions():(h=dn._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:h});const[,u]=this.pageDimensions;let f=e/u;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=n,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:s}=this.parent.viewport;return Ka.process(t,e,i,s,dn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:n}=this.parent.viewport;return Ka.extractContoursFromText(t,e,i,s,n,dn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:s}=this.parent.viewport;return Ka.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:dn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=dn.getDefaultDrawingOptions():(this._drawingOptions=dn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,n=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:s});return this.addComment(n),t?(n.paths={lines:e,points:i},n.uuid=this.#i,n.isCopy=!0):n.lines=e,this.#e&&(n.accessibilityData={type:"Figure",alt:this.#e}),n}static deserializeDraw(t,e,i,s,n,a){return a.areContours?Xg.deserialize(t,e,i,s,n,a):gc.deserialize(t,e,i,s,n,a)}static async deserialize(t,e,i){const s=await super.deserialize(t,e,i);return s.#t=t.areContours,s.description=t.accessibilityData?.alt||"",s.#i=t.uuid,s}},gD=class extends we{#t=null;#e=null;#s=null;#i=null;#a=null;#n="";#r=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Mt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){we.initialize(t,e)}static isHandlingMimeForPasting(t){return Pg.includes(t)}static paste(t,e){e.pasteEditor({mode:Mt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#n=t.file.name),this.#g()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:n,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:s,width:n,height:a,channels:s.length/(n*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const h=o.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#u(i,!0)).finally(()=>this.#f());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(i).then(s=>this.#u(s)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(i).then(s=>this.#u(s)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Pg.join(",");const e=this._uiManager._signal;this.#s=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(s)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#r===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,s&&(this.#t=s),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[s,n]=this.pageDimensions,a=.75;if(this.width)e=this.width*s,i=this.height*n;else if(e>a*s||i>a*n){const h=Math.min(a*s/e,a*n/i);e*=h,i*=h}this._uiManager.enableWaiting(!1);const o=this.#r=document.createElement("canvas");o.setAttribute("role","img"),this.addContainer(o),this.width=e/s,this.height=i/n,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&this.div.setAttribute("aria-description",this.#n),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:s,height:n}=this.#t,a=new Xr;let o=this.#t,h=s,u=n,f=null;if(e){if(s>e||n>e){const M=Math.min(e/s,e/n);h=Math.floor(s*M),u=Math.floor(n*M)}f=document.createElement("canvas");const m=f.width=Math.ceil(h*a.sx),y=f.height=Math.ceil(u*a.sy);this.#l||(o=this.#h(m,y));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":S6.isDarkMode&&(v="#8f8f9d",S="#42414d");const _=15,x=_*a.sx,E=_*a.sy,R=new OffscreenCanvas(x*2,E*2),D=R.getContext("2d");D.fillStyle=v,D.fillRect(0,0,x*2,E*2),D.fillStyle=S,D.fillRect(0,0,x,E),D.fillRect(x,E,x,E),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,m,y),w.drawImage(o,0,0,o.width,o.height,0,0,m,y)}let p=null;if(i){let m,y;if(a.symmetric&&o.width<t&&o.height<t)m=o.width,y=o.height;else if(o=this.#t,s>t||n>t){const S=Math.min(t/s,t/n);m=Math.floor(s*S),y=Math.floor(n*S),this.#l||(o=this.#h(m,y))}const v=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});v.drawImage(o,0,0,o.width,o.height,0,0,m,y),p={width:m,height:y,data:v.getImageData(0,0,m,y).data}}return{canvas:f,width:h,height:u,imageData:p}}#h(t,e){const{width:i,height:s}=this.#t;let n=i,a=s,o=this.#t;for(;n>2*t||a>2*e;){const h=n,u=a;n>2*t&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(n,a);f.getContext("2d").drawImage(o,0,0,h,u,0,0,n,a),o=f.transferToImageBitmap()}return o}#p(){const[t,e]=this.parentDimensions,{width:i,height:s}=this,n=new Xr,a=Math.ceil(i*t*n.sx),o=Math.ceil(s*e*n.sy),h=this.#r;if(!h||h.width===a&&h.height===o)return;h.width=a,h.height=o;const u=this.#l?this.#t:this.#h(a,o),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,a,o)}#y(t){if(t){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,s=Math.round(this.width*e*bo.PDF_TO_CSS_UNITS),n=Math.round(this.height*i*bo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,n);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,n),a.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let s=null,n=!1;if(t instanceof __){const{data:{rect:v,rotation:S,id:_,structParent:x,popupRef:E,richText:R,contentsObj:D,creationDate:M,modificationDate:k},container:N,parent:{page:{pageNumber:I}},canvas:G}=t;let j,tt;G?(delete t.canvas,{id:j,bitmap:tt}=i.imageManager.getFromCanvas(N.id,G),G.remove()):(n=!0,t._hasNoCanvas=!0);const ot=(await e._structTree.getAriaAttributes(`${Tm}${_}`))?.get("aria-label")||"";s=t={annotationType:Mt.STAMP,bitmapId:j,bitmap:tt,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:ot},isSvg:!1,structParent:x,popupRef:E,richText:R,comment:D?.str||null,creationDate:M,modificationDate:k}}const a=await super.deserialize(t,e,i),{rect:o,bitmap:h,bitmapUrl:u,bitmapId:f,isSvg:p,accessibilityData:m}=t;n?(i.addMissingCanvas(t.id,a),a.#o=!0):f&&i.imageManager.isValidId(f)?(a.#e=f,h&&(a.#t=h)):a.#i=u,a.#l=p;const[y,w]=a.pageDimensions;return a.width=(o[2]-o[0])/y,a.height=(o[3]-o[1])/w,m&&(a.altTextData=m),a._initialData=s,t.comment&&a.setCommentData(t),a.#d=!!s,a}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:n}=this.serializeAltText(!1);if(!s&&n&&(i.accessibilityData={type:"Figure",alt:n}),this.annotationElementId){const o=this.#v(i);return o.isSame?null:(o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const a=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const o=e.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===e,n=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&n,isSameAltText:n}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}},mD=class Qn{#t;#e=!1;#s=null;#i=null;#a=null;#n=new Map;#r=!1;#o=!1;#c=!1;#l=null;#d=null;#u=null;#f=null;#m=null;#g=-1;#h;static _initialized=!1;static#p=new Map([oD,uD,gD,C2,pD].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:n,annotationLayer:a,drawLayer:o,textLayer:h,viewport:u,l10n:f}){const p=[...Qn.#p.values()];if(!Qn._initialized){Qn._initialized=!0;for(const m of p)m.initialize(f,t)}t.registerEditorTypes(p),this.#h=t,this.pageIndex=e,this.div=i,this.#t=n,this.#s=a,this.viewport=u,this.#u=h,this.drawLayer=o,this._structTree=s,this.#h.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===Mt.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#A(),t){case Mt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Mt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of Qn.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.div.classList.toggle("disabled",!t)}get#y(){return this.#n.size!==0?this.#n.values():this.#h.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#h.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#s;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#h.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#h._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#m){this.#m=new AbortController;const i=this.#h.combinedSignal(this.#m);this.#u.div.addEventListener("pointerdown",s=>{const{clientX:a,clientY:o,timeStamp:h}=s,u=this.#g;if(h-u>500){this.#g=h;return}this.#g=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(a,o);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let m;const y=new RegExp(`^${Ql}[0-9]+$`);for(const v of p)if(y.test(v.id)){m=v.id;break}if(!m)return;const w=this.#n.get(m);w?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),w.dblclick(s))},{signal:i,capture:!0})}const t=this.#s;if(t){const i=new Map,s=new Map;for(const a of this.#y){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(t);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else s.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}const n=t.getEditableAnnotations();for(const a of n){const{id:o}=a.data;if(this.#h.isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let h=s.get(o);if(h){h.resetAnnotationElement(a),h.show(!1),a.show();continue}h=i.get(o),h&&(this.#h.addChangedExistingAnnotation(h),h.renderAnnotationElement(a)&&h.show(!1)),a.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of Qn.#p.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#h.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#v(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:i}=di.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#h.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),C2.startHighlighting(this,this.#h.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#h.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#n.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#n.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),we.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#n.values())if(e.uid===t)return e;return null}getNextId(){return this.#h.getId()}get#b(){return Qn.#p.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#x(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:i,offsetY:s}=this.#S(),n=this.getNextId(),a=this.#x({parent:this,id:n,x:i,y:s,uiManager:this.#h,isCentered:!0,...e});a&&this.add(a)}async deserialize(t){return await Qn.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),n=this.#x({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...i});return n&&this.add(n),n}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:t,y:e,width:i,height:s}=this.boundingClientRect,n=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+s),u=(n+o)/2-t,f=(a+h)/2-e,[p,m]=this.viewport.rotation%180===0?[u,f]:[f,u];return{offsetX:p,offsetY:m}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#r||(this.#r=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#h.getMode();if(i===Mt.STAMP||i===Mt.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===Mt.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#r=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#h.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#h.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#h.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const s=this.#h.findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#n.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#n.clear(),this.#h.removeLayer(this)}#A(){for(const t of this.#n.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,qr(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#A();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,qr(this.div,{rotation:i}),e!==i)for(const s of this.#n.values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}},yD=class pi{#t=null;#e=new Map;#s=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Lt(this,"_svgFactory",new Tu)}static#a(t,[e,i,s,n]){const{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*n}%`}#n(){const t=pi._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#r(t,e){const i=pi._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const n=pi._svgFactory.createElement("use");return i.append(n),n.setAttribute("href",`#${e}`),n.classList.add("clip"),s}#o(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)}draw(t,e=!1,i=!1){const s=pi.#i++,n=this.#n(),a=pi._svgFactory.createElement("defs");n.append(a);const o=pi._svgFactory.createElement("path");a.append(o);const h=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",h),o.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(s,o);const u=i?this.#r(a,h):null,f=pi._svgFactory.createElement("use");return n.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(n,t),this.#e.set(s,n),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=pi.#i++,s=this.#n(),n=pi._svgFactory.createElement("defs");s.append(n);const a=pi._svgFactory.createElement("path");n.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const p=pi._svgFactory.createElement("mask");n.append(p),h=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",h),p.setAttribute("maskUnits","objectBoundingBox");const m=pi._svgFactory.createElement("rect");p.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const y=pi._svgFactory.createElement("use");p.append(y),y.setAttribute("href",`#${o}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const u=pi._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${o}`),h&&u.setAttribute("mask",`url(#${h})`);const f=u.cloneNode();return s.append(f),u.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#e.set(i,s),i}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:s,rootClass:n,path:a}=e,o=typeof t=="number"?this.#e.get(t):t;if(o){if(i&&this.#o(o,i),s&&pi.#a(o,s),n){const{classList:h}=o;for(const[u,f]of Object.entries(n))h.toggle(u,f)}if(a){const u=o.firstChild.firstChild;this.#o(u,a)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}};globalThis._pdfjsTestingUtils={HighlightOutliner:Vg};globalThis.pdfjsLib={AbortException:rr,AnnotationEditorLayer:mD,AnnotationEditorParamsType:Ut,AnnotationEditorType:Mt,AnnotationEditorUIManager:Jl,AnnotationLayer:aD,AnnotationMode:Jn,AnnotationType:He,applyOpacity:x6,build:z8,ColorPicker:g_,createValidAbsoluteUrl:Ow,CSSConstants:E6,DOMSVGFactory:Tu,DrawLayer:yD,FeatureTest:di,fetchData:uc,findContrastColor:C6,getDocument:L8,getFilenameFromUrl:b6,getPdfFilenameFromUrl:v6,getRGB:dc,getUuid:Fw,getXfaPageViewport:w6,GlobalWorkerOptions:Gl,ImageKind:hu,InvalidPDFException:Rg,isDataScheme:Zu,isPdfFile:Rm,isValidExplicitDest:z6,MathClamp:vi,noContextMenu:ms,normalizeUnicode:g6,OPS:Zl,OutputScale:Xr,PasswordResponses:a6,PDFDataRangeTransport:u_,PDFDateString:Lg,PDFWorker:Ug,PermissionFlag:r6,PixelsPerInch:bo,RenderingCancelledException:Dm,renderRichText:Hw,ResponseException:Cu,setLayerDimensions:qr,shadow:Lt,SignatureExtractor:Ka,stopEvent:Me,SupportedImageMimeTypes:Pg,TextLayer:Hg,TouchManager:Vw,updateUrlHash:Pw,Util:pt,VerbosityLevel:Wu,version:p_,XfaLayer:zw};function bD(c){return Pt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"},child:[]}]})(c)}function vD(c){return Pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M325.3 234.3L104.6 13l280.8 161.2-60.1 60.1zM47 0C34 6.8 25.3 19.2 25.3 35.3v441.3c0 16.1 8.7 28.5 21.7 35.3l256.6-256L47 0zm425.2 225.6l-58.9-34.1-65.7 64.5 65.7 64.5 60.1-34.1c18-14.3 18-46.5-1.2-60.8zM104.6 499l280.8-161.2-60.1-60.1L104.6 499z"},child:[]}]})(c)}function AD(c){return Pt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(c)}function wD(c){return Pt({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"},child:[]}]})(c)}function _D(c){return Pt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 93.7l183.6-25.3v177.4H0V93.7zm0 324.6l183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6v180.1H448V32L203.8 65.7z"},child:[]}]})(c)}function T2(c){return Pt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(c)}function ag(c){return Pt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(c)}const Ai=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Yg=[.001,0,0,.001,0,0],og=1.35,Xi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},tr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tc="pdfjs_internal_editor_",Dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Gt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},SD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Wg={TRIANGLES:1,LATTICE:2},Ye={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},yu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Qa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},td={ERRORS:0,WARNINGS:1,INFOS:5},ec={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},xl={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},ED={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ed=td.WARNINGS;function xD(c){Number.isInteger(c)&&(ed=c)}function CD(){return ed}function id(c){ed>=td.INFOS&&console.info(`Info: ${c}`)}function xt(c){ed>=td.WARNINGS&&console.warn(`Warning: ${c}`)}function fe(c){throw new Error(c)}function Vt(c,t){c||fe(t)}function TD(c){switch(c?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function O_(c,t=null,e=null){if(!c)return null;if(e&&typeof c=="string"&&(e.addDefaultProtocol&&c.startsWith("www.")&&c.match(/\./g)?.length>=2&&(c=`http://${c}`),e.tryConvertEncoding))try{c=LD(c)}catch{}const i=t?URL.parse(c,t):URL.parse(c);return TD(i)?i:null}function P_(c,t,e=!1){const i=URL.parse(c);return i?(i.hash=t,i.href):e&&O_(c,"http://example.com")?c.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ct(c,t,e,i=!1){return Object.defineProperty(c,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const ta=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class M2 extends ta{constructor(t,e){super(t,"PasswordException"),this.code=e}}class lg extends ta{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Kg extends ta{constructor(t){super(t,"InvalidPDFException")}}class Mu extends ta{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class MD extends ta{constructor(t){super(t,"FormatError")}}class ar extends ta{constructor(t){super(t,"AbortException")}}function N_(c){(typeof c!="object"||c?.length===void 0)&&fe("Invalid argument for bytesToString");const t=c.length,e=8192;if(t<e)return String.fromCharCode.apply(null,c);const i=[];for(let s=0;s<t;s+=e){const n=Math.min(s+e,t),a=c.subarray(s,n);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function mc(c){typeof c!="string"&&fe("Invalid argument for stringToBytes");const t=c.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=c.charCodeAt(i)&255;return e}function DD(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function RD(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function kD(){try{return new Function(""),!0}catch{return!1}}class Ke{static get isLittleEndian(){return Ct(this,"isLittleEndian",RD())}static get isEvalSupported(){return Ct(this,"isEvalSupported",kD())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ct(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ct(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ct(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Ct(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const cg=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));class ht{static makeHexColor(t,e,i){return`#${cg[t]}${cg[e]}${cg[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const s=t[i],n=t[i+1];t[i]=s*e[0]+n*e[2]+e[4],t[i+1]=s*e[1]+n*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],n=e[1],a=e[2],o=e[3],h=e[4],u=e[5];for(let f=0;f<6;f+=2){const p=t[i+f],m=t[i+f+1];t[i+f]=p*s+m*a+h,t[i+f+1]=p*n+m*o+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],n=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/n,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/n}static axialAlignedBoundingBox(t,e,i){const s=e[0],n=e[1],a=e[2],o=e[3],h=e[4],u=e[5],f=t[0],p=t[1],m=t[2],y=t[3];let w=s*f+h,v=w,S=s*m+h,_=S,x=o*p+u,E=x,R=o*y+u,D=R;if(n!==0||a!==0){const M=n*f,k=n*m,N=a*p,I=a*y;w+=N,_+=N,S+=I,v+=I,x+=M,D+=M,R+=k,E+=k}i[0]=Math.min(i[0],w,S,v,_),i[1]=Math.min(i[1],x,R,E,D),i[2]=Math.max(i[2],w,S,v,_),i[3]=Math.max(i[3],x,R,E,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],n=t[2],a=t[3],o=i**2+s**2,h=i*n+s*a,u=n**2+a**2,f=(o+u)/2,p=Math.sqrt(f**2-(o*u-h**2));e[0]=Math.sqrt(f+p||1),e[1]=Math.sqrt(f-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>a?null:[i,n,s,a]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,n){n[0]=Math.min(n[0],t,i),n[1]=Math.min(n[1],e,s),n[2]=Math.max(n[2],t,i),n[3]=Math.max(n[3],e,s)}static#t(t,e,i,s,n,a,o,h,u,f){if(u<=0||u>=1)return;const p=1-u,m=u*u,y=m*u,w=p*(p*(p*t+3*u*e)+3*m*i)+y*s,v=p*(p*(p*n+3*u*a)+3*m*o)+y*h;f[0]=Math.min(f[0],w),f[1]=Math.min(f[1],v),f[2]=Math.max(f[2],w),f[3]=Math.max(f[3],v)}static#e(t,e,i,s,n,a,o,h,u,f,p,m){if(Math.abs(u)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,i,s,n,a,o,h,-p/f,m);return}const y=f**2-4*p*u;if(y<0)return;const w=Math.sqrt(y),v=2*u;this.#t(t,e,i,s,n,a,o,h,(-f+w)/v,m),this.#t(t,e,i,s,n,a,o,h,(-f-w)/v,m)}static bezierBoundingBox(t,e,i,s,n,a,o,h,u){u[0]=Math.min(u[0],t,o),u[1]=Math.min(u[1],e,h),u[2]=Math.max(u[2],t,o),u[3]=Math.max(u[3],e,h),this.#e(t,i,n,o,e,s,a,h,3*(-t+3*(i-n)+o),6*(t-2*i+n),3*(i-t),u),this.#e(t,i,n,o,e,s,a,h,3*(-e+3*(s-a)+h),6*(e-2*s+a),3*(s-e),u)}}function LD(c){return decodeURIComponent(escape(c))}let hg=null,D2=null;function OD(c){return hg||(hg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,D2=new Map([["","t"]])),c.replaceAll(hg,(t,e,i)=>e?e.normalize("NFKC"):D2.get(i))}function F_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const c=new Uint8Array(32);return crypto.getRandomValues(c),N_(c)}const so="pdfjs_internal_id_";function PD(c,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...n]=e;if(!c(i)&&!Number.isInteger(i)||!t(s))return!1;const a=n.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const h of n)if(!(typeof h=="number"||o&&h===null))return!1;return!0}function wi(c,t,e){return Math.min(Math.max(c,t),e)}function I_(c){return Uint8Array.prototype.toBase64?c.toBase64():btoa(N_(c))}function ND(c){return Uint8Array.fromBase64?Uint8Array.fromBase64(c):mc(atob(c))}typeof Promise.try!="function"&&(Promise.try=function(c,...t){return new Promise(e=>{e(c(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(c){return c.reduce((t,e)=>t+e,0)});class ic{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(n){if(!n)return;let a=null;const o=n.name;if(o==="#text")a=n.value;else if(ic.shouldBuildText(o))n?.attributes?.textContent?a=n.attributes.textContent:n.value&&(a=n.value);else return;if(a!==null&&e.push({str:a}),!!n.children)for(const h of n.children)s(h)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class B_{static setupStorage(t,e,i,s,n){const a=s.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),n==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),n==="print")break;t.addEventListener("change",o=>{s.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),n==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const h=o.target.options,u=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:n}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[h,u]of Object.entries(a))if(u!=null)switch(h){case"class":u.length&&t.setAttribute(h,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!o||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,u)}o&&n.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,n=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:n,linkService:i});const o=n!=="richText",h=t.div;if(h.append(a),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=p}o&&h.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),o&&ic.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const f=[[s,-1,a]];for(;f.length>0;){const[p,m,y]=f.at(-1);if(m+1===p.children.length){f.pop();continue}const w=p.children[++f.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const _=document.createTextNode(w.value);u.push(_),y.append(_);continue}const S=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(y.append(S),w.attributes&&this.setAttributes({html:S,element:w,storage:e,intent:n,linkService:i}),w.children?.length>0)f.push([w,-1,S]);else if(w.value){const _=document.createTextNode(w.value);o&&ic.shouldBuildText(v)&&u.push(_),S.append(_)}}for(const p of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const fn="http://www.w3.org/2000/svg";class vo{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function yc(c,t="text"){if(Bl(c,document.baseURI)){const e=await fetch(c);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",c,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class bc{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=n,this.offsetY=a,i*=e;const h=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let f,p,m,y;switch(s%=360,s<0&&(s+=360),s){case 180:f=-1,p=0,m=0,y=1;break;case 90:f=0,p=1,m=1,y=0;break;case 270:f=0,p=-1,m=-1,y=0;break;case 0:f=1,p=0,m=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(m=-m,y=-y);let w,v,S,_;f===0?(w=Math.abs(u-t[1])*i+n,v=Math.abs(h-t[0])*i+a,S=(t[3]-t[1])*i,_=(t[2]-t[0])*i):(w=Math.abs(h-t[0])*i+n,v=Math.abs(u-t[1])*i+a,S=(t[2]-t[0])*i,_=(t[3]-t[1])*i),this.transform=[f*i,p*i,m*i,y*i,w-f*i*h-m*i*u,v-p*i*h-y*i*u],this.width=S,this.height=_}get rawDims(){const t=this.viewBox;return Ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:n=!1}={}){return new bc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}convertToViewportPoint(t,e){const i=[t,e];return ht.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];ht.applyTransform(e,this.transform);const i=[t[2],t[3]];return ht.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return ht.applyInverseTransform(i,this.transform),i}}class Fm extends ta{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function sd(c){const t=c.length;let e=0;for(;e<t&&c[e].trim()==="";)e++;return c.substring(e,e+5).toLowerCase()==="data:"}function Im(c){return typeof c=="string"&&/\.pdf$/i.test(c)}function FD(c){return[c]=c.split(/[#?]/,1),c.substring(c.lastIndexOf("/")+1)}function ID(c,t="document.pdf"){if(typeof c!="string")return t;if(sd(c))return xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(c);if(!i)return t;const s=o=>{try{let h=decodeURIComponent(o);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:o):h}catch{return o}},n=/\.pdf$/i,a=i.pathname.split("/").at(-1);if(n.test(a))return s(a);if(i.searchParams.size>0){const o=Array.from(i.searchParams.values()).reverse();for(const u of o)if(n.test(u))return s(u);const h=Array.from(i.searchParams.keys()).reverse();for(const u of h)if(n.test(u))return s(u)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return s(h[0])}return t}class R2{started=Object.create(null);times=[];time(t){t in this.started&&xt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||xt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:n}of this.times)t.push(`${i.padEnd(e)} ${n-s}ms
`);return t.join("")}}function Bl(c,t){const e=t?URL.parse(c,t):URL.parse(c);return e?.protocol==="http:"||e?.protocol==="https:"}function ys(c){c.preventDefault()}function De(c){c.preventDefault(),c.stopPropagation()}function BD(c){console.log("Deprecated API usage: "+c)}class Qg{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let n=parseInt(e[3],10);n=n>=1&&n<=31?n:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const u=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,u==="-"?(a+=f,o+=p):u==="+"&&(a-=f,o-=p),new Date(Date.UTC(i,s,n,a,o,h))}}function zD(c,{scale:t=1,rotation:e=0}){const{width:i,height:s}=c.attributes.style,n=[0,0,parseInt(i),parseInt(s)];return new bc({viewBox:n,userUnit:1,scale:t,rotation:e})}function vc(c){if(c.startsWith("#")){const t=parseInt(c.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return c.startsWith("rgb(")?c.slice(4,-1).split(",").map(t=>parseInt(t)):c.startsWith("rgba(")?c.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(xt(`Not a valid color format: "${c}"`),[0,0,0])}function jD(c){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of c.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;c.set(e,vc(i))}t.remove()}function Ee(c){const{a:t,b:e,c:i,d:s,e:n,f:a}=c.getTransform();return[t,e,i,s,n,a]}function ks(c){const{a:t,b:e,c:i,d:s,e:n,f:a}=c.getTransform().invertSelf();return[t,e,i,s,n,a]}function Wr(c,t,e=!1,i=!0){if(t instanceof bc){const{pageWidth:s,pageHeight:n}=t.rawDims,{style:a}=c,o=Ke.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${n}px`,f=o?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,p=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(a.width=f,a.height=p):(a.width=p,a.height=f)}i&&c.setAttribute("data-main-rotation",t.rotation)}class Hs{constructor(){const{pixelRatio:t}=Hs;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,n=-1){let a=1/0,o=1/0,h=1/0;i=Hs.capPixels(i,n),i>0&&(a=Math.sqrt(i/(t*e))),s!==-1&&(o=s/t,h=s/e);const u=Math.min(a,o,h);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Zg=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class HD{static get isDarkMode(){return Ct(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class UD{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),Ct(this,"commentForegroundColor",vc(i))}}function $D(c,t,e,i){i=Math.min(Math.max(i??1,0),1);const s=255*(1-i);return c=Math.round(c*i+s),t=Math.round(t*i+s),e=Math.round(e*i+s),[c,t,e]}function k2(c,t){const e=c[0]/255,i=c[1]/255,s=c[2]/255,n=Math.max(e,i,s),a=Math.min(e,i,s),o=(n+a)/2;if(n===a)t[0]=t[1]=0;else{const h=n-a;switch(t[1]=o<.5?h/(n+a):h/(2-n-a),n){case e:t[0]=((i-s)/h+(i<s?6:0))*60;break;case i:t[0]=((s-e)/h+2)*60;break;case s:t[0]=((e-i)/h+4)*60;break}}t[2]=o}function Jg(c,t){const e=c[0],i=c[1],s=c[2],n=(1-Math.abs(2*s-1))*i,a=n*(1-Math.abs(e/60%2-1)),o=s-n/2;switch(Math.floor(e/60)){case 0:t[0]=n+o,t[1]=a+o,t[2]=o;break;case 1:t[0]=a+o,t[1]=n+o,t[2]=o;break;case 2:t[0]=o,t[1]=n+o,t[2]=a+o;break;case 3:t[0]=o,t[1]=a+o,t[2]=n+o;break;case 4:t[0]=a+o,t[1]=o,t[2]=n+o;break;case 5:case 6:t[0]=n+o,t[1]=o,t[2]=a+o;break}}function L2(c){return c<=.03928?c/12.92:((c+.055)/1.055)**2.4}function O2(c,t,e){Jg(c,e),e.map(L2);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];Jg(t,e),e.map(L2);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const P2=new Map;function GD(c,t){const e=c[0]+c[1]*256+c[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=P2.get(e);if(i)return i;const s=new Float32Array(9),n=s.subarray(0,3),a=s.subarray(3,6);k2(c,a);const o=s.subarray(6,9);k2(t,o);const h=o[2]<.5,u=h?12:4.5;if(a[2]=h?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),O2(a,o,n)<u){let f,p;h?(f=a[2],p=1):(f=0,p=a[2]);const m=.005;for(;p-f>m;){const y=a[2]=(f+p)/2;h===O2(a,o,n)<u?f=y:p=y}a[2]=h?p:f}return Jg(a,n),i=ht.makeHexColor(Math.round(n[0]*255),Math.round(n[1]*255),Math.round(n[2]*255)),P2.set(e,i),i}function z_({html:c,dir:t,className:e},i){const s=document.createDocumentFragment();if(typeof c=="string"){const n=document.createElement("p");n.dir=t||"auto";const a=c.split(/(?:\r\n?|\n)/);for(let o=0,h=a.length;o<h;++o){const u=a[o];n.append(document.createTextNode(u)),o<h-1&&n.append(document.createElement("br"))}s.append(n)}else B_.render({xfaHtml:c,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",e),i.append(s)}function j_(c){const t=new Path2D;if(!c)return t;for(let e=0,i=c.length;e<i;)switch(c[e++]){case xl.moveTo:t.moveTo(c[e++],c[e++]);break;case xl.lineTo:t.lineTo(c[e++],c[e++]);break;case xl.curveTo:t.bezierCurveTo(c[e++],c[e++],c[e++],c[e++],c[e++],c[e++]);break;case xl.quadraticCurveTo:t.quadraticCurveTo(c[e++],c[e++],c[e++],c[e++]);break;case xl.closePath:t.closePath();break;default:xt(`Unrecognized drawing path operator: ${c[e-1]}`);break}return t}class Vl{#t=null;#e=null;#s;#i=null;#a=null;#n=null;#r=null;#o=null;static#c=null;constructor(t){this.#s=t,Vl.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ys,{signal:e}),t.addEventListener("pointerdown",Vl.#l,{signal:e}));const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const s=this.#s.toolbarPosition;if(s){const{style:n}=t,a=this.#s._uiManager.direction==="ltr"?1-s[0]:s[0];n.insetInlineEnd=`${100*a}%`,n.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#s._focusEventsAllowed=!1,De(t)}#u(t){this.#s._focusEventsAllowed=!0,De(t)}#f(t){const e=this.#s._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ys,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#n?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Vl.#c[t]),this.#f(i)&&i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#i.append(e,this.#m),this.#a=t}addComment(t,e=null){if(this.#n)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const s=this.#r=this.#m;e?(this.#i.insertBefore(i,e),this.#i.insertBefore(s,e)):this.#i.append(i,s),this.#n=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#i.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#s);this.#f(e),this.#i.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#n?.removeToolbarCommentButton(),this.#n=null,this.#r?.remove(),this.#r=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,i){if(!e&&t==="comment")return;const s=this.#i.querySelector(i);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class VD{#t=null;#e=null;#s;constructor(t){this.#s=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#s._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ys,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#s.hasCommentManager()&&this.#n("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#n("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),t}#a(t,e){let i=0,s=0;for(const n of t){const a=n.y+n.height;if(a<i)continue;const o=n.x+(e?n.width:0);if(a>i){s=o,i=a;continue}e?o>s&&(s=o):o<s&&(s=o)}return[e?1-s:s,i]}show(t,e,i){const[s,n]=this.#a(e,i),{style:a}=this.#e||=this.#i();t.append(this.#e),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#n(t,e,i,s){const n=document.createElement("button");n.classList.add("basic",t),n.tabIndex=0,n.setAttribute("data-l10n-id",e);const a=document.createElement("span");n.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",i);const o=this.#s._signal;o instanceof AbortSignal&&!o.aborted&&(n.addEventListener("contextmenu",ys,{signal:o}),n.addEventListener("click",s,{signal:o})),this.#t.append(n)}}function H_(c,t,e){for(const i of e)t.addEventListener(i,c[i].bind(c))}class ee{static#t=NaN;static#e=null;static#s=NaN;static#i=null;static initializeAndAddPointerId(t){(ee.#e||=new Set).add(t)}static setPointer(t,e){ee.#t||=e,ee.#i??=t}static setTimeStamp(t){ee.#s=t}static isSamePointerId(t){return ee.#t===t}static isSamePointerIdOrRemove(t){return ee.#t===t?!0:(ee.#e?.delete(t),!1)}static isSamePointerType(t){return ee.#i===t}static isInitializedAndDifferentPointerType(t){return ee.#i!==null&&!ee.isSamePointerType(t)}static isSameTimeStamp(t){return ee.#s===t}static isUsingMultiplePointers(){return ee.#e?.size>=1}static clearPointerType(){ee.#i=null}static clearPointerIds(){ee.#t=NaN,ee.#e=null}static clearTimeStamp(){ee.#s=NaN}}class qD{#t=0;get id(){return`${tc}${this.#t++}`}}class Bm{#t=F_();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const n=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",n)}async#i(t,e){this.#s||=new Map;let i=this.#s.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(i.url=e,s=await yc(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const n=Bm._isSVGFittingCanvas,a=new FileReader,o=new Image,h=new Promise((u,f)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const p=i.svgUrl=a.result;o.src=await n?`${p}#svgView(preserveAspectRatio(none))`:p},o.onerror=a.onerror=f});a.readAsDataURL(s),await h}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){xt(s),i=null}return this.#s.set(t,i),i&&this.#s.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:s,type:n}=t;return this.#i(`${e}_${i}_${s}_${n}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let i=this.#s.get(t);if(i?.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,i),this.#s.set(i.id,i),i}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=s.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class XD{#t=[];#e=!1;#s;#i=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:i,mustExec:s,type:n=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&t(),this.#e)return;const h={cmd:t,undo:e,post:i,type:n};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(a&&this.#t[this.#i].type===n){o&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const u=this.#i+1;u===this.#s?this.#t.splice(0,1):(this.#i=u,u<this.#t.length&&this.#t.splice(u)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Ac{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ke.platform;for(const[i,s,n={}]of t)for(const a of i){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:s,options:n}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:s,options:n}),this.allKeys.add(a.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:s,options:{bubbles:n=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(s.bind(t,...a,e)(),n||De(e))}}class zm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return jD(t),Ct(this,"_colors",t)}convert(t){const e=vc(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((n,a)=>n===e[a]))return zm._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?ht.makeHexColor(...e):t}}class or{#t=new AbortController;#e=null;#s=null;#i=new Map;#a=new Map;#n=null;#r=null;#o=null;#c=new XD;#l=null;#d=null;#u=null;#f=0;#m=new Set;#g=null;#h=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#x=null;#S=null;#A=null;#T=null;#w=!1;#E=null;#R=new qD;#M=!1;#D=!1;#I=!1;#L=null;#P=null;#B=null;#N=null;#G=null;#C=Dt.NONE;#_=new Set;#O=null;#z=null;#H=null;#X=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#F=null;#V=null;#Z=null;#J=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=or.prototype,e=a=>a.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:h}=o;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Ac([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#V.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}]]))}constructor(t,e,i,s,n,a,o,h,u,f,p,m,y,w,v,S){const _=this._signal=this.#t.signal;this.#V=t,this.#Z=e,this.#J=i,this.#n=s,this.#l=n,this.#z=a,this.#q=h,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:_}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),o._on("setpreference",this.onSetPreference.bind(this),{signal:_}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:_}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:_}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:_}),this.#lt(),this.#dt(),this.#et(),this.#r=h.annotationStorage,this.#x=h.filterFactory,this.#H=u,this.#T=f||null,this.#y=p,this.#v=m,this.#b=y,this.#G=w||null,this.viewParameters={realScale:vo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1,n?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#N?.clear(),this.#e=null,this.#_.clear(),this.#c.destroy(),this.#n?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#E?.hide(),this.#E=null,this.#B?.destroy(),this.#B=null,this.#s=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#F&&(clearTimeout(this.#F),this.#F=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Ct(this,"hcmFilter",this.#H?this.#x.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Ct(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ct(this,"highlightColors",null);const e=new Map,i=!!this.#H;for(const[s,n]of t){const a=s.endsWith("_HCM");if(i&&a){e.set(s.replace("_HCM",""),n);continue}!i&&!a&&e.set(s,n)}return Ct(this,"highlightColors",e)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#n?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,s){this.#l?.showDialog(this,t,e,i,s)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),s=n=>{n.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await i}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const i of this.#a.values()){const{x:s,y:n,width:a,height:o}=i.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=n&&e<=n+o)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*vo.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#a.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:a,focusOffset:o}=i,h=i.toString(),f=this.#Q(i).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;i.empty();const m=this.#tt(f),y=this.#C===Dt.NONE,w=()=>{const v=m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:s,anchorOffset:n,focusNode:a,focusOffset:o,text:h});y&&this.showAllEditors("highlight",!0,!0),e&&v?.editComment()};if(y){this.switchToMode(Dt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#E||=new VD(this),this.#E.show(i,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#r)return null;const e=`${tc}${t}`,i=this.#r.getRawValue(e);return i&&this.#r.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#E?.hide(),this.#O=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const s=this.#Q(t).closest(".textLayer");if(!s){this.#O&&(this.#E?.hide(),this.#O=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#O=e,this.#k({hasSelectedText:!0}),!(this.#C!==Dt.HIGHLIGHT&&this.#C!==Dt.NONE)&&(this.#C===Dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const n=this.#C===Dt.HIGHLIGHT?this.#tt(s):null;if(n?.toggleDrawing(),this.#D){const a=new AbortController,o=this.combinedSignal(a),h=u=>{u.type==="pointerup"&&u.button!==0||(a.abort(),n?.toggleDrawing(!0),u.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}else n?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#C===Dt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ht(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#_)if(e.div.contains(t)){this.#P=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[t,e]=this.#P;this.#P=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#L)return;this.#L=new AbortController;const t=this.combinedSignal(this.#L);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ut(){this.#L?.abort(),this.#L=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#rt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ut(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#_){const s=i.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const n of e.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(n.type)){a.paste(n,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(n){xt(`paste: "${n.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const n=[];for(const h of i){const u=await s.deserialize(h);if(!u)return;n.push(u)}const a=()=>{for(const h of n)this.#it(h);this.#st(n)},o=()=>{for(const h of n)h.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(n){xt(`paste: "${n.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==Dt.NONE&&!this.isEditorHandlingKeyboard&&or._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(t){Object.entries(t).some(([i,s])=>this.#Y[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#C===Dt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#$([[Gt.HIGHLIGHT_FREE,!0]]))}#$(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#k({isEditing:this.#C!==Dt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ht(),this.#rt(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const e of this.#h)this.#$(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,s=!1,n=!1,a=!1){if(this.#C!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#C===Dt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===Dt.NONE){this.setEditingState(!1),this.#pt();for(const o of this.#i.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const o of this.#i.values())o.addStandaloneCommentButton();t===Dt.SIGNATURE&&await this.#z?.loadSignatures(),i&&ee.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#a.values())o.updateMode(t);if(t===Dt.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#h.map(u=>u._editorType)));const o=new Set,h=[];for(const u of this.#i.values()){const{annotationElementId:f,hasComment:p,deleted:m}=u;f&&o.add(f),p&&!m&&h.push(u.getData())}for(const u of this.#s){const{id:f,popupRef:p,contentsObj:m}=u;p&&m?.str&&!o.has(f)&&!this.#m.has(f)&&h.push(u)}this.#l?.showSidebar(h)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const o of this.#i.values())o.uid===e?(this.setSelected(o),a?o.editComment():n?o.enterInEditMode():o.focus()):o.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#h){switch(t){case Gt.CREATE:this.currentLayer.addNewEditor(e);return;case Gt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#_)i.updateParams(t,e);else for(const i of this.#h)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const n of this.#i.values())n.editorType===t&&n.show(e);(this.#X?.get(Gt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#$([[Gt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const e of this.#i.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#N?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#$(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#gt===t&&this.#$(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#$(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#u?.commitOrRemove();for(const e of this.#_)e!==t&&e.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#_],i=()=>{this._editorUndoBar?.show(s,e.length===1?e[0].editorType:e.length);for(const n of e)n.remove()},s=()=>{for(const n of e)this.#it(n)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#_)e.unselect();this.#_.clear();for(const e of t)e.isEmpty()||(this.#_.add(e),e.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#st(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==Dt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=e;const[s,n]=this.#U,a=[...this.#_],o=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const h of a)this.#i.has(h.id)&&(h.translateInPage(s,n),h.translationDone())},undo:()=>{for(const h of a)this.#i.has(h.id)&&(h.translateInPage(-s,-n),h.translationDone())},mustExec:!1})},o);for(const h of a)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#_)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:s,y:n,pageIndex:a},o]of t)o.newX=s,o.newY=n,o.newPageIndex=a,e||=s!==o.savedX||n!==o.savedY||a!==o.savedPageIndex;if(!e)return!1;const i=(s,n,a,o)=>{if(this.#i.has(s.id)){const h=this.#a.get(o);h?s._setParentAndPosition(h,n,a):(s.pageIndex=o,s.x=n,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:n,newY:a,newPageIndex:o}]of t)i(s,n,a,o)},undo:()=>{for(const[s,{savedX:n,savedY:a,savedPageIndex:o}]of t)i(s,n,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const i of this.#g.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==Dt.NONE}get imageManager(){return Ct(this,"imageManager",new Bm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,f=e.rangeCount;u<f;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:n,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(u,f,p,m)=>({x:(f-s)/a,y:1-(u+p-i)/n,width:m/a,height:p/n});break;case"180":o=(u,f,p,m)=>({x:1-(u+p-i)/n,y:1-(f+m-s)/a,width:p/n,height:m/a});break;case"270":o=(u,f,p,m)=>({x:1-(f+m-s)/a,y:(u-i)/n,width:m/a,height:p/n});break;default:o=(u,f,p,m)=>({x:(u-i)/n,y:(f-s)/a,width:p/n,height:m/a});break}const h=[];for(let u=0,f=e.rangeCount;u<f;u++){const p=e.getRangeAt(u);if(!p.collapsed)for(const{x:m,y,width:w,height:v}of p.getClientRects())w===0||v===0||h.push(o(m,y,w,v))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#r.getRawValue(e);i&&(this.#C===Dt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const s=this.#N?.get(t);s&&(s.setCanvas(e,i),this.#N.delete(t))}addMissingCanvas(t,e){(this.#N||=new Map).set(t,e)}}class Ns{#t=null;#e=!1;#s=null;#i=null;#a=null;#n=null;#r=!1;#o=null;#c=null;#l=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#u=t._uiManager.useNewAltTextFlow,Ns.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ns._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ns.#f.missing),e.setAttribute("data-l10n-id",Ns.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",ys,{signal:i}),t.addEventListener("pointerdown",n=>n.stopPropagation(),{signal:i});const s=n=>{n.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",n=>{n.target===t&&n.key==="Enter"&&(this.#r=!0,s(n))},{signal:i}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Ns._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:n=!1}){i&&(this.#l=i,this.#d=s),!(this.#t===t&&this.#e===e)&&(n||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#s&&(!t&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#s.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#s?.remove(),this.#s=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#s;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ns.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Ns.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const s=100,n=this.#c._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:n}),t.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:n})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Zh{#t=null;#e=null;#s=!1;#i=null;#a=null;#n=null;#r=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#i.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=this.#i.commentButtonColor;s&&(i.backgroundColor=s)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:s,y:n,width:a,height:o}=this.#i.parent.boundingClientRect;return[(t-s)/a,(e+i-n)/o]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#i._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",ys,{signal:i}),e&&(t.addEventListener("focusin",n=>{this.#i._focusEventsAllowed=!1,De(n)},{capture:!0,signal:i}),t.addEventListener("focusout",n=>{this.#i._focusEventsAllowed=!0,De(n)},{capture:!0,signal:i})),t.addEventListener("pointerdown",n=>n.stopPropagation(),{signal:i});const s=n=>{n.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",n=>{n.target===t&&n.key==="Enter"&&(this.#s=!0,s(n))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,s;if(e)[i,s]=e;else{[i,s]=this.#i.commentButtonPosition;const{width:f,height:p,x:m,y}=this.#i;i=m+i*f,s=y+s*p}const n=this.#i.parent.boundingClientRect,{x:a,y:o,width:h,height:u}=n;this.#i._uiManager.editComment(this.#i,a+i*h,o+s*u,{...t,parentDimensions:n})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#a}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#n,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#r&&(this.#n=null),t===null){this.#r="",this.#c=!0;return}this.#r=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#n=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#r="",this.#n=null,this.#o=null,this.#i=null,this.#s=!1,this.#c=!1}}class nd{#t;#e=!1;#s=null;#i;#a;#n;#r;#o=null;#c;#l=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:n=null,onPinchEnd:a=null,signal:o}){this.#t=t,this.#s=i,this.#i=e,this.#a=s,this.#n=n,this.#r=a,this.#d=new AbortController,this.#c=AbortSignal.any([o,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Hs.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,n=AbortSignal.any([this.#c,s.signal]),a=this.#t,o={capture:!0,signal:n,passive:!1},h=u=>{u.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};a.addEventListener("pointerdown",u=>{u.pointerType==="touch"&&(De(u),h(u))},o),a.addEventListener("pointerup",h,o),a.addEventListener("pointercancel",h,o);return}if(!this.#u){this.#u=new AbortController;const s=AbortSignal.any([this.#c,this.#u.signal]),n=this.#t,a={signal:s,capture:!1,passive:!1};n.addEventListener("touchmove",this.#m.bind(this),a);const o=this.#g.bind(this);n.addEventListener("touchend",o,a),n.addEventListener("touchcancel",o,a),a.capture=!0,n.addEventListener("pointerdown",De,a),n.addEventListener("pointermove",De,a),n.addEventListener("pointercancel",De,a),n.addEventListener("pointerup",De,a),this.#a?.()}if(De(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;De(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:n}=e,{screenX:a,screenY:o}=i,h=this.#l,{touch0X:u,touch0Y:f,touch1X:p,touch1Y:m}=h,y=p-u,w=m-f,v=a-s,S=o-n,_=Math.hypot(v,S)||1,x=Math.hypot(y,w)||1;if(!this.#e&&Math.abs(x-_)<=nd.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=n,h.touch1X=a,h.touch1Y=o,!this.#e){this.#e=!0;return}const E=[(s+a)/2,(n+o)/2];this.#n?.(E,x,_)}#g(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#r?.()),this.#l&&(De(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class vt{#t=null;#e=null;#s=null;#i=null;#a=null;#n=!1;#r=null;#o="";#c=null;#l=null;#d=null;#u=null;#f=null;#m="";#g=!1;#h=null;#p=!1;#y=!1;#v=!1;#b=null;#x=0;#S=0;#A=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#E=vt._zIndex++;static _borderLineWidth=-1;static _colorManager=new zm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=vt.prototype._resizeWithKeyboard,e=or.TRANSLATE_SMALL,i=or.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new Ac([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],vt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[n,a];const[o,h]=this.parentDimensions;this.x=t.x/o,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new YD({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(vt._l10n??=t,vt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),vt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);vt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#F(),this.#u?.remove(),this.#u=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[n,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/n,this.y=(e+s)/a,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}#R([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#h||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#h||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[s,n]}=this;if(this.x+=t/s,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[h,u]=this.getBaseTranslation();a+=h,o+=u;const{style:f}=i;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}get _hasBeenResized(){return!!this.#h&&(this.#h[2]!==this.width||this.#h[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=vt,s=i/t,n=i/e;switch(this.rotation){case 90:return[-s,n];case 180:return[s,n];case 270:return[s,-n];default:return[-s,-n]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:n,y:a,width:o,height:h}=this;if(o*=i,h*=s,n*=i,a*=s,this._mustFixPosition)switch(t){case 0:n=wi(n,0,i-o),a=wi(a,0,s-h);break;case 90:n=wi(n,0,i-h),a=wi(a,o,s);break;case 180:n=wi(n,o,i),a=wi(a,h,s);break;case 270:n=wi(n,h,i),a=wi(a,0,s-o);break}this.x=n/=i,this.y=a/=s;const[u,f]=this.getBaseTranslation();n+=u,a+=f,e.left=`${(100*n).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#M(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return vt.#M(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return vt.#M(t,e,360-this.parentRotation)}#D(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");this.#c.append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",this.#L.bind(this,i),{signal:e}),s.addEventListener("contextmenu",ys,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#c)}#L(t,e){e.preventDefault();const{isMac:i}=Ke.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#s?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const n=new AbortController,a=this._uiManager.combinedSignal(n);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#N.bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",De,{passive:!1,signal:a}),window.addEventListener("contextmenu",ys,{signal:a}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{n.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=h,this.#B()};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}#P(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=this.#d;this.#d=null;const n=this.x,a=this.y,o=this.width,h=this.height;n===t&&a===e&&o===i&&h===s||this.addCommands({cmd:this.#P.bind(this,n,a,o,h),undo:this.#P.bind(this,t,e,i,s),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#N(t,e){const[i,s]=this.parentDimensions,n=this.x,a=this.y,o=this.width,h=this.height,u=vt.MIN_SIZE/i,f=vt.MIN_SIZE/s,p=this.#D(this.rotation),m=(O,$)=>[p[0]*O+p[2]*$,p[1]*O+p[3]*$],y=this.#D(360-this.rotation),w=(O,$)=>[y[0]*O+y[2]*$,y[1]*O+y[3]*$];let v,S,_=!1,x=!1;switch(t){case"topLeft":_=!0,v=(O,$)=>[0,0],S=(O,$)=>[O,$];break;case"topMiddle":v=(O,$)=>[O/2,0],S=(O,$)=>[O/2,$];break;case"topRight":_=!0,v=(O,$)=>[O,0],S=(O,$)=>[0,$];break;case"middleRight":x=!0,v=(O,$)=>[O,$/2],S=(O,$)=>[0,$/2];break;case"bottomRight":_=!0,v=(O,$)=>[O,$],S=(O,$)=>[0,0];break;case"bottomMiddle":v=(O,$)=>[O/2,$],S=(O,$)=>[O/2,0];break;case"bottomLeft":_=!0,v=(O,$)=>[0,$],S=(O,$)=>[O,0];break;case"middleLeft":x=!0,v=(O,$)=>[0,$/2],S=(O,$)=>[O,$/2];break}const E=v(o,h),R=S(o,h);let D=m(...R);const M=vt._round(n+D[0]),k=vt._round(a+D[1]);let N=1,I=1,G,j;if(e.fromKeyboard)({deltaX:G,deltaY:j}=e);else{const{screenX:O,screenY:$}=e,[K,at]=this.#l;[G,j]=this.screenToPageTranslation(O-K,$-at),this.#l[0]=O,this.#l[1]=$}if([G,j]=w(G/i,j/s),_){const O=Math.hypot(o,h);N=I=Math.max(Math.min(Math.hypot(R[0]-E[0]-G,R[1]-E[1]-j)/O,1/o,1/h),u/o,f/h)}else x?N=wi(Math.abs(R[0]-E[0]-G),u,1)/o:I=wi(Math.abs(R[1]-E[1]-j),f,1)/h;const tt=vt._round(o*N),ot=vt._round(h*I);D=m(...S(tt,ot));const rt=M-D[0],lt=k-D[1];this.#h||=[this.x,this.y,this.width,this.height],this.width=tt,this.height=ot,this.x=rt,this.y=lt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Vl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(Ns.initialize(vt._l10n),this.#s=new Ns(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Zh(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:s}}=this.#i;return{text:e,richText:t,date:i,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Zh(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#i||=new Zh(this),this.#i.setInitialText(t,i),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Zh(this),this.#i.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[n]=this.pageDimensions,[a]=this.pageTranslation,o=a+n+1,h=s-100,u=o+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,h,u,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#n?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,n]=this.getInitialTranslation();return this.translate(s,n),H_(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new nd({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,e,i){let n=.7*(i/e)+1-.7;if(n===1)return;const a=this.#D(this.rotation),o=(M,k)=>[a[0]*M+a[2]*k,a[1]*M+a[3]*k],[h,u]=this.parentDimensions,f=this.x,p=this.y,m=this.width,y=this.height,w=vt.MIN_SIZE/h,v=vt.MIN_SIZE/u;n=Math.max(Math.min(n,1/m,1/y),w/m,v/y);const S=vt._round(m*n),_=vt._round(y*n);if(S===m&&_===y)return;this.#h||=[f,p,m,y];const x=o(m/2,y/2),E=vt._round(f+x[0]),R=vt._round(p+x[1]),D=o(S/2,_/2);this.x=E-D[0],this.y=R-D[1],this.width=S,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){const{isMac:e}=Ke.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#z(t);return}this.#O(t)}#O(t){const{isMac:e}=Ke.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,n=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:n},o=u=>{s.abort(),this.#r=null,this.#g=!1,this._uiManager.endDragSession()||this.#O(u),i&&this._onStopDragging()};e&&(this.#x=t.clientX,this.#S=t.clientY,this.#r=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:m}=u;if(m!==this.#r){De(u);return}const[y,w]=this.screenToPageTranslation(f-this.#x,p-this.#S);this.#x=f,this.#S=p,this._uiManager.dragSelectedEditors(y,w)},a),window.addEventListener("touchmove",De,a),window.addEventListener("pointerdown",u=>{u.pointerType===this.#o&&(this.#T||u.isPrimary)&&o(u),De(u)},a));const h=u=>{if(!this.#r||this.#r===u.pointerId){o(u);return}De(u)};window.addEventListener("pointerup",h,{signal:n}),window.addEventListener("blur",h,{signal:n})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[n,a]=this.pageDimensions,[o,h]=this.pageTranslation,u=t/s,f=e/s,p=this.x*n,m=this.y*a,y=this.width*n,w=this.height*a;switch(i){case 0:return[p+u+o,a-m-f-w+h,p+u+y+o,a-m-f+h];case 90:return[p+f+o,a-m+u+h,p+f+w+o,a-m+u+y+h];case 180:return[p-u-y+o,a-m+f+h,p-u+o,a-m+f+w+h];case 270:return[p-f-w+o,a-m-u-y+h,p-f+o,a-m-u+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,n,a]=t,o=n-i,h=a-s;switch(this.rotation){case 0:return[i,e-a,o,h];case 90:return[i,e-s,h,o];case 180:return[n,e-s,o,h];case 270:return[n,e-a,h,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&vt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:s,deleted:n,richText:a},uid:o,pageIndex:h,creationDate:u,modificationDate:f}=this;return{id:o,pageIndex:h,rect:this.getPDFRect(),richText:a,contentsObj:{str:t},creationDate:u,modificationDate:i||f,popupRef:!n,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:n,innerWidth:a}=window;return e<a&&s>0&&t<n&&i>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,s.#t=t.accessibilityData,s._isCopy=t.isCopy||!1;const[n,a]=s.pageDimensions,[o,h,u,f]=s.getRectInCurrentCoords(t.rect,a);return s.x=o/n,s.y=h/a,s.width=u/n,s.height=f/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#F(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#T?.destroy(),this.#T=null,this.#u?.remove(),this.#u=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,s,n,a]=this.getPDFRect();return[vt._round(i+(n-i)*t),vt._round(s+(a-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const a=this.#X.bind(this),o=this.#q.bind(this),h=this._uiManager._signal;for(const u of this.#e){const f=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:h}),u.addEventListener("blur",o,{signal:h}),u.addEventListener("focus",this.#Y.bind(this,f),{signal:h}),u.setAttribute("data-l10n-id",vt._l10nResizer[f])}}const i=this.#e[0];let s=0;for(const a of e){if(a===i)break;s++}const n=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(n!==s){if(n<s)for(let o=0;o<s-n;o++)this.#c.append(this.#c.firstElementChild);else if(n>s)for(let o=0;o<n-s;o++)this.#c.firstElementChild.before(this.#c.lastElementChild);let a=0;for(const o of e){const u=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",vt._l10nResizer[u])}}this.#U(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){vt._resizerKeyboardManager.exec(this,t)}#q(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#F()}#Y(t){this.#m=this.#v?t:""}#U(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#N(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#F(){this.#v=!1,this.#U(-1),this.#B()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let s=this.#A.get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},vt._telemetryTimeout),this.#A.set(i,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}updateFakeAnnotationElement(t){if(!this.#u&&!this.deleted){this.#u=t.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class YD extends vt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const N2=3285377520,ds=4294901760,Ls=65535;class U_{constructor(t){this.h1=t?t&4294967295:N2,this.h2=t?t&4294967295:N2}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let v=0,S=t.length;v<S;v++){const _=t.charCodeAt(v);_<=255?e[i++]=_:(e[i++]=_>>>8,e[i++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,n=i-s*4,a=new Uint32Array(e.buffer,0,s);let o=0,h=0,u=this.h1,f=this.h2;const p=3432918353,m=461845907,y=p&Ls,w=m&Ls;for(let v=0;v<s;v++)v&1?(o=a[v],o=o*p&ds|o*y&Ls,o=o<<15|o>>>17,o=o*m&ds|o*w&Ls,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(h=a[v],h=h*p&ds|h*y&Ls,h=h<<15|h>>>17,h=h*m&ds|h*w&Ls,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(o=0,n){case 3:o^=e[s*4+2]<<16;case 2:o^=e[s*4+1]<<8;case 1:o^=e[s*4],o=o*p&ds|o*y&Ls,o=o<<15|o>>>17,o=o*m&ds|o*w&Ls,s&1?u^=o:f^=o}this.h1=u,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ds|t*36045&Ls,e=e*4283543511&ds|((e<<16|t>>>16)*2950163797&ds)>>>16,t^=e>>>1,t=t*444984403&ds|t*60499&Ls,e=e*3301882366&ds|((e<<16|t>>>16)*3120437893&ds)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const tm=Object.freeze({map:null,hash:"",transfer:void 0});class jm{#t=!1;#e=null;#s=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){const e=this.#i.get(t);if(e!==void 0&&(e instanceof vt&&this.#s.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#i.values())if(i instanceof vt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#i.get(t);let s=!1;if(i!==void 0)for(const[n,a]of Object.entries(e))i[n]!==a&&(s=!0,i[n]=a);else s=!0,this.#i.set(t,e);s&&this.#a(),e instanceof vt&&((this.#s||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $_(this)}get serializable(){if(this.#i.size===0)return tm;const t=new Map,e=new U_,i=[],s=Object.create(null);let n=!1;for(const[a,o]of this.#i){const h=o instanceof vt?o.serialize(!1,s):o;h&&(t.set(a,h),e.update(`${a}:${JSON.stringify(h)}`),n||=!!h.bitmap)}if(n)for(const a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:tm}get editorStats(){let t=null;const e=new Map;let i=0,s=0;for(const n of this.#i.values()){if(!(n instanceof vt)){n.popup&&(n.popup.deleted?s+=1:i+=1);continue}n.isCommentDeleted?s+=1:n.hasEditedComment&&(i+=1);const a=n.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const h=t[o]||=new Map;for(const[u,f]of Object.entries(a)){if(u==="type")continue;let p=h.get(u);p||(p=new Map,h.set(u,p));const m=p.get(f)??0;p.set(f,m+1)}}if((s>0||i>0)&&(t||=Object.create(null),t.comments={deleted:s,edited:i}),!t)return null;for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#s?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#s?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#s)for(const e of this.#s.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class $_ extends jm{#t;constructor(t){super();const{map:e,hash:i,transfer:s}=t.serializable,n=structuredClone(e,s?{transfer:s}:null);this.#t={map:n,hash:i,transfer:s}}get print(){fe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ct(this,"modifiedIds",{ids:new Set,hash:""})}}class WD{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(Vt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:n,style:a}=t,o=new FontFace(s,n,a);this.addNativeFontFace(o);try{await o.load(),this.#t.add(s),i?.(t)}catch{xt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw xt(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ct(this,"isSyncFontLoadingSupported",Ai||Ke.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Vt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const n=i.shift();setTimeout(n.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function s(R,D,M,k){const N=R.substring(0,D),I=R.substring(D+M);return N+k+I}let n,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const h=o.getContext("2d");let u=0;function f(R,D){if(++u>30){xt("Load test font never loaded."),D();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(f.bind(null,R,D))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,p.length,p);const w=16,v=1482184792;let S=i(m,w);for(n=0,a=p.length-3;n<a;n+=4)S=S-v+i(p,n)|0;n<p.length&&(S=S-v+i(p+"XXX",n)|0),m=s(m,w,4,DD(S));const _=`url(data:font/opentype;base64,${btoa(m)});`,x=`@font-face {font-family:"${p}";src:${_}}`;this.insertRule(x);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const R of[t.loadedName,p]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,E.append(D)}this._document.body.append(E),f(p,()=>{E.remove(),e.complete()})}}class KD{#t;constructor(t,e=null,i,s){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${I_(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(a){xt(`getPathGenerator - ignoring character: "${a}".`)}const n=j_(s?.path);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=n}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){Ct(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){Ct(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class co{#t;#e;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let s=0;for(const u of co.strings){const f=e.encode(t[u]);i[u]=f,s+=4+f.length}const n=new ArrayBuffer(s),a=new Uint8Array(n),o=new DataView(n);let h=0;for(const u of co.strings){const f=i[u],p=f.length;o.setUint32(h,p),a.set(f,h+4),h+=4+p}return Vt(h===n.byteLength,"CssFontInfo.write: Buffer overflow"),n}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}#i(t){Vt(t<co.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class ho{#t;#e;#s;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let s=0;for(const m of ho.strings){const y=e.encode(t[m]);i[m]=y,s+=4+y.length}s+=4;let n,a,o=1+s;t.style&&(n=e.encode(t.style.style),a=e.encode(t.style.weight),o+=4+n.length+4+a.length);const h=new ArrayBuffer(o),u=new Uint8Array(h),f=new DataView(h);let p=0;f.setUint8(p++,t.guessFallback?1:0),f.setUint32(p,0),p+=4,s=0;for(const m of ho.strings){const y=i[m],w=y.length;s+=4+w,f.setUint32(p,w),u.set(y,p+4),p+=4+w}return f.setUint32(p-s-4,s),t.style&&(f.setUint32(p,n.length),u.set(n,p+4),p+=4+n.length,f.setUint32(p,a.length),u.set(a,p+4),p+=4+a.length),Vt(p<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Vt(t<ho.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#s.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const s=this.#e.getUint32(t),n=this.#s.decode(new Uint8Array(this.#t,t+4,s));return{style:i,weight:n}}}class le{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#s=this.#e+1+8;static#i=this.#s+1+48;static#a=this.#i+1+6;#n;#r;#o;constructor({data:t,extra:e}){this.#n=t,this.#r=new TextDecoder,this.#o=new DataView(this.#n),e&&Object.assign(this,e)}#c(t){Vt(t<le.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,s=this.#o.getUint8(e)>>i&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Vt(t<le.numbers.length,"Invalid number index"),this.#o.getFloat64(le.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=le.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<4;s++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=le.#s;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<6;s++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=le.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<3;s++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){Vt(t<le.strings.length,"Invalid string index");let e=le.#a+4;for(let n=0;n<t;n++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),s=new Uint8Array(i);return s.set(new Uint8Array(this.#n,e+4,i)),this.#r.decode(s)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=le.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const n=this.#o.getUint32(t);if(n!==0)return new Uint8Array(this.#n,t+4,n)}clearData(){let t=le.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const n=this.#o.getUint32(t);new Uint8Array(this.#n,t+4,n).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=le.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const n=new Uint8Array(s);return n.set(new Uint8Array(this.#n,t+4,s)),new co(n.buffer)}get systemFontInfo(){let t=le.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(this.#n,t+4,i)),new ho(s.buffer)}static write(t){const e=t.systemFontInfo?ho.write(t.systemFontInfo):null,i=t.cssFontInfo?co.write(t.cssFontInfo):null,s=new TextEncoder,n={};let a=0;for(const v of le.strings)n[v]=s.encode(t[v]),a+=4+n[v].length;const o=le.#a+4+a+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(o),u=new Uint8Array(h),f=new DataView(h);let p=0;const m=le.bools.length;let y=0,w=0;for(let v=0;v<m;v++){const S=t[le.bools[v]];y|=(S===void 0?0:S?2:1)<<w,w+=2,(w===8||v===m-1)&&(f.setUint8(p++,y),y=0,w=0)}Vt(p===le.#t,"FontInfo.write: Boolean properties offset mismatch");for(const v of le.numbers)f.setFloat64(p,t[v]),p+=8;if(Vt(p===le.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){f.setUint8(p++,4);for(const v of t.bbox)f.setInt16(p,v,!0),p+=2}else f.setUint8(p++,0),p+=8;if(Vt(p===le.#s,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){f.setUint8(p++,6);for(const v of t.fontMatrix)f.setFloat64(p,v,!0),p+=8}else f.setUint8(p++,0),p+=48;if(Vt(p===le.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){f.setUint8(p++,1);for(const v of t.defaultVMetrics)f.setInt16(p,v,!0),p+=2}else f.setUint8(p++,0),p+=6;Vt(p===le.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(le.#a,0),p+=4;for(const v of le.strings){const S=n[v],_=S.length;f.setUint32(p,_),u.set(S,p+4),p+=4+_}if(f.setUint32(le.#a,p-le.#a-4),!e)f.setUint32(p,0),p+=4;else{const v=e.byteLength;f.setUint32(p,v),Vt(p+4+v<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),p+4),p+=4+v}if(!i)f.setUint32(p,0),p+=4;else{const v=i.byteLength;f.setUint32(p,v),Vt(p+4+v<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),p+4),p+=4+v}return t.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,t.data.length),u.set(t.data,p+4),p+=4+t.data.length),Vt(p<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(p)}}class ti{static#t=0;static#e=1;static#s=2;static#i=3;static#a=4;static#n=8;static#r=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,s=[],n=[],a=[],o=[],h=null,u=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],a=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],s=t[2],n=t[3],o=t[4]||[],i=t[6],u=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const f=Math.floor(s.length/2),p=Math.floor(n.length/3),m=a.length,y=o.length;let w=0;for(const D of o)w+=1,w=Math.ceil(w/4)*4,w+=4+D.coords.length*4,w+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(w+=4);const v=20+f*8+p*3+m*8+(i?16:0)+(u?3:0)+w,S=new ArrayBuffer(v),_=new DataView(S),x=new Uint8Array(S);_.setUint8(ti.#t,e),_.setUint8(ti.#e,i?1:0),_.setUint8(ti.#s,u?1:0),_.setUint8(ti.#i,h),_.setUint32(ti.#a,f,!0),_.setUint32(ti.#n,p,!0),_.setUint32(ti.#r,m,!0),_.setUint32(ti.#o,y,!0);let E=20;new Float32Array(S,E,f*2).set(s),E+=f*8,x.set(n,E),E+=p*3;for(const[D,M]of a)_.setFloat32(E,D,!0),E+=4,_.setUint32(E,parseInt(M.slice(1),16),!0),E+=4;if(i)for(const D of i)_.setFloat32(E,D,!0),E+=4;u&&(x.set(u,E),E+=3);for(let D=0;D<o.length;D++){const M=o[D];_.setUint8(E,M.type),E+=1,E=Math.ceil(E/4)*4,_.setUint32(E,M.coords.length,!0),E+=4,new Int32Array(S,E,M.coords.length).set(M.coords),E+=M.coords.length*4,_.setUint32(E,M.colors.length,!0),E+=4,new Int32Array(S,E,M.colors.length).set(M.colors),E+=M.colors.length*4,M.verticesPerRow!==void 0&&(_.setUint32(E,M.verticesPerRow,!0),E+=4)}return S}getIR(){const t=this.view,e=this.data[ti.#t],i=!!this.data[ti.#e],s=!!this.data[ti.#s],n=t.getUint32(ti.#a,!0),a=t.getUint32(ti.#n,!0),o=t.getUint32(ti.#r,!0),h=t.getUint32(ti.#o,!0);let u=20;const f=new Float32Array(this.buffer,u,n*2);u+=n*8;const p=new Uint8Array(this.buffer,u,a*3);u+=a*3;const m=[];for(let S=0;S<o;++S){const _=t.getFloat32(u,!0);u+=4;const x=t.getUint32(u,!0);u+=4,m.push([_,`#${x.toString(16).padStart(6,"0")}`])}let y=null;if(i){y=[];for(let S=0;S<4;++S)y.push(t.getFloat32(u,!0)),u+=4}let w=null;s&&(w=new Uint8Array(this.buffer,u,3),u+=3);const v=[];for(let S=0;S<h;++S){const _=t.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const x=t.getUint32(u,!0);u+=4;const E=new Int32Array(this.buffer,u,x);u+=x*4;const R=t.getUint32(u,!0);u+=4;const D=new Int32Array(this.buffer,u,R);u+=R*4;const M={type:_,coords:E,colors:D};_===Wg.LATTICE&&(M.verticesPerRow=t.getUint32(u,!0),u+=4),v.push(M)}if(e===1)return["RadialAxial","axial",y,m,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",y,m,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(e===3){const S=this.data[ti.#i];let _=null;if(f.length>0){let x=f[0],E=f[0],R=f[1],D=f[1];for(let M=0;M<f.length;M+=2){const k=f[M],N=f[M+1];x=x>k?k:x,R=R>N?N:R,E=E<k?k:E,D=D<N?N:D}_=[x,R,E,D]}return["Mesh",S,f,p,v,_,y,w]}throw new Error(`Unsupported pattern kind: ${e}`)}}class QD{static write(t){let e,i;return Ke.isFloat16ArraySupported?(i=new ArrayBuffer(t.length*2),e=new Float16Array(i)):(i=new ArrayBuffer(t.length*4),e=new Float32Array(i)),e.set(t),i}#t;constructor(t){this.#t=t}get path(){return Ke.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function ZD(c){if(c instanceof URL)return c.href;if(typeof c=="string"){if(Ai)return c;const t=URL.parse(c,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function JD(c){if(Ai&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return mc(c);if(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="object"&&!isNaN(c?.length))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Jh(c){if(typeof c!="string")return null;if(c.endsWith("/"))return c;throw new Error(`Invalid factory url: "${c}" must include trailing slash.`)}const em=c=>typeof c=="object"&&Number.isInteger(c?.num)&&c.num>=0&&Number.isInteger(c?.gen)&&c.gen>=0,tR=c=>typeof c=="object"&&typeof c?.name=="string",eR=PD.bind(null,em,tR);class iR{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if(i?.signal instanceof AbortSignal){const{signal:n}=i;if(n.aborted){xt("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);s=()=>n.removeEventListener("abort",a),n.addEventListener("abort",a)}this.#t.set(e,s)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const tu={DATA:1,ERROR:2},je={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function F2(){}function Oi(c){if(c instanceof ar||c instanceof Kg||c instanceof M2||c instanceof Mu||c instanceof lg)return c;switch(c instanceof Error||typeof c=="object"&&c!==null||fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new ar(c.message);case"InvalidPDFException":return new Kg(c.message);case"PasswordException":return new M2(c.message,c.code);case"ResponseException":return new Mu(c.message,c.status,c.missing);case"UnknownErrorException":return new lg(c.message,c.details)}return new lg(c.message,c.toString())}class zl{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===tu.DATA)s.resolve(t.data);else if(t.callback===tu.ERROR)s.reject(Oi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,n=this.comObj;Promise.try(e,t.data).then(function(a){n.postMessage({sourceName:i,targetName:s,callback:tu.DATA,callbackId:t.callbackId,data:a})},function(a){n.postMessage({sourceName:i,targetName:s,callback:tu.ERROR,callbackId:t.callbackId,reason:Oi(a)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[s]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(a){n.reject(a)}return n.promise}sendWithStream(t,e,i,s){const n=this.streamId++,a=this.sourceName,o=this.targetName,h=this.comObj;return new ReadableStream({start:u=>{const f=Promise.withResolvers();return this.streamControllers[n]={controller:u,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:a,targetName:o,action:t,streamId:n,data:e,desiredSize:u.desiredSize},s),f.promise},pull:u=>{const f=Promise.withResolvers();return this.streamControllers[n].pullCall=f,h.postMessage({sourceName:a,targetName:o,stream:je.PULL,streamId:n,desiredSize:u.desiredSize}),f.promise},cancel:u=>{Vt(u instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[n].cancelCall=f,this.streamControllers[n].isClosed=!0,h.postMessage({sourceName:a,targetName:o,stream:je.CANCEL,streamId:n,reason:Oi(u)}),f.promise}},i)}#s(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,a=this,o=this.actionHandler[t.action],h={enqueue(u,f=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=f,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:s,stream:je.ENQUEUE,streamId:e,chunk:u},p)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:je.CLOSE,streamId:e}),delete a.streamSinks[e])},error(u){Vt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:je.ERROR,streamId:e,reason:Oi(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(o,t.data,h).then(function(){n.postMessage({sourceName:i,targetName:s,stream:je.START_COMPLETE,streamId:e,success:!0})},function(u){n.postMessage({sourceName:i,targetName:s,stream:je.START_COMPLETE,streamId:e,reason:Oi(u)})})}#i(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case je.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Oi(t.reason));break;case je.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Oi(t.reason));break;case je.PULL:if(!o){n.postMessage({sourceName:i,targetName:s,stream:je.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||F2).then(function(){n.postMessage({sourceName:i,targetName:s,stream:je.PULL_COMPLETE,streamId:e,success:!0})},function(u){n.postMessage({sourceName:i,targetName:s,stream:je.PULL_COMPLETE,streamId:e,reason:Oi(u)})});break;case je.ENQUEUE:if(Vt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case je.CLOSE:if(Vt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#a(a,e);break;case je.ERROR:Vt(a,"error should have stream controller"),a.controller.error(Oi(t.reason)),this.#a(a,e);break;case je.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Oi(t.reason)),this.#a(a,e);break;case je.CANCEL:if(!o)break;const h=Oi(t.reason);Promise.try(o.onCancel||F2,h).then(function(){n.postMessage({sourceName:i,targetName:s,stream:je.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){n.postMessage({sourceName:i,targetName:s,stream:je.CANCEL_COMPLETE,streamId:e,reason:Oi(u)})}),o.sinkCapability.reject(h),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class G_{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){fe("Abstract method `_createCanvas` called.")}}class sR extends G_{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class V_{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class I2 extends V_{async _fetch(t){const e=await yc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):mc(e)}}class q_{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,n){return"none"}destroy(t=!1){}}class nR extends q_{#t;#e;#s;#i;#a;#n;#r=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#n||=new Map}get#l(){if(!this.#s){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS(fn,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#s=this.#a.createElementNS(fn,"defs"),t.append(i),i.append(this.#s),this.#a.body.append(t)}return this.#s}#d(t){if(t.length===1){const h=t[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=h[p]/255;const f=u.join(",");return[f,f,f]}const[e,i,s]=t,n=new Array(256),a=new Array(256),o=new Array(256);for(let h=0;h<256;h++)n[h]=e[h]/255,a[h]=i[h]/255,o[h]=s[h]/255;return[n.join(","),a.join(","),o.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(sd(e)?xt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=P_(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,s,n]=this.#d(t),a=t.length===1?i:`${i}${s}${n}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#i}_transfer_map_${this.#r++}`,h=this.#u(o);this.#o.set(t,h),this.#o.set(a,h);const u=this.#g(o);return this.#p(i,s,n,u),h}addHCMFilter(t,e){const i=`${t}-${e}`,s="base";let n=this.#c.get(s);if(n?.key===i||(n?(n.filter?.remove(),n.key=i,n.url="none",n.filter=null):(n={key:i,url:"none",filter:null},this.#c.set(s,n)),!t||!e))return n.url;const a=this.#v(t);t=ht.makeHexColor(...a);const o=this.#v(e);if(e=ht.makeHexColor(...o),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return n.url;const h=new Array(256);for(let y=0;y<=255;y++){const w=y/255;h[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=h.join(","),f=`g_${this.#i}_hcm_filter`,p=n.filter=this.#g(f);this.#p(u,u,u,p),this.#m(p);const m=(y,w)=>{const v=a[y]/255,S=o[y]/255,_=new Array(w+1);for(let x=0;x<=w;x++)_[x]=v+x/w*(S-v);return _.join(",")};return this.#p(m(0,5),m(1,5),m(2,5),p),n.url=this.#u(f),n.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),s=`alpha_${i}`;if(e=this.#o.get(s),e)return this.#o.set(t,e),e;const n=`g_${this.#i}_alpha_map_${this.#r++}`,a=this.#u(n);this.#o.set(t,a),this.#o.set(s,a);const o=this.#g(n);return this.#y(i,o),a}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,s;if(t?([i]=this.#d([t]),s=`luminosity_${i}`):s="luminosity",e=this.#o.get(s),e)return this.#o.set(t,e),e;const n=`g_${this.#i}_luminosity_map_${this.#r++}`,a=this.#u(n);this.#o.set(t,a),this.#o.set(s,a);const o=this.#g(n);return this.#f(o),t&&this.#y(i,o),a}addHighlightHCMFilter(t,e,i,s,n){const a=`${e}-${i}-${s}-${n}`;let o=this.#c.get(t);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#c.set(t,o)),!e||!i))return o.url;const[h,u]=[e,i].map(this.#v.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,y]=[s,n].map(this.#v.bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),this.#l.style.color="";const w=(_,x,E)=>{const R=new Array(256),D=(p-f)/E,M=_/255,k=(x-_)/(255*E);let N=0;for(let I=0;I<=E;I++){const G=Math.round(f+I*D),j=M+I*k;for(let tt=N;tt<=G;tt++)R[tt]=j;N=G+1}for(let I=N;I<256;I++)R[I]=R[N-1];return R.join(",")},v=`g_${this.#i}_hcm_${t}_filter`,S=o.filter=this.#g(v);return this.#m(S),this.#p(w(m[0],y[0],5),w(m[1],y[1],5),w(m[2],y[2],5),S),o.url=this.#u(v),o.url}destroy(t=!1){t&&this.#n?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#n?.clear(),this.#n=null,this.#r=0)}#f(t){const e=this.#a.createElementNS(fn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(fn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(fn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#h(t,e,i){const s=this.#a.createElementNS(fn,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)}#p(t,e,i,s){const n=this.#a.createElementNS(fn,"feComponentTransfer");s.append(n),this.#h(n,"feFuncR",t),this.#h(n,"feFuncG",e),this.#h(n,"feFuncB",i)}#y(t,e){const i=this.#a.createElementNS(fn,"feComponentTransfer");e.append(i),this.#h(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,vc(getComputedStyle(this.#l).getPropertyValue("color"))}}class X_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class B2 extends X_{async _fetch(t){const e=await yc(t,"arraybuffer");return new Uint8Array(e)}}class Y_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class z2 extends Y_{async _fetch(t){const e=await yc(t,"arraybuffer");return new Uint8Array(e)}}Ai&&xt("Please use the `legacy` build in Node.js environments.");async function Hm(c){const e=await process.getBuiltinModule("fs").promises.readFile(c);return new Uint8Array(e)}class rR extends q_{}class aR extends G_{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class oR extends V_{async _fetch(t){return Hm(t)}}class lR extends X_{async _fetch(t){return Hm(t)}}class cR extends Y_{async _fetch(t){return Hm(t)}}const Xa="__forcedDependency",{floor:j2,ceil:H2}=Math;function eu(c,t,e,i,s,n){c[t*4+0]=Math.min(c[t*4+0],e),c[t*4+1]=Math.min(c[t*4+1],i),c[t*4+2]=Math.max(c[t*4+2],s),c[t*4+3]=Math.max(c[t*4+3],n)}const im=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class hR{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===im}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const iu=(c,t)=>{if(!c)return;let e=c.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},c.set(t,e)),e};class uR{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Xa]:[]};#s=new Map;#i=[];#a=[];#n=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#u=new Map;#f;#m;#g;#h;#p;constructor(t,e,i=!1){this.#f=t.width,this.#m=t.height,this.#y(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#h.length&&this.#y(t,this.#h)}#y(t,e){const i=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(i),this.#h=new Uint32Array(i),e&&e.length>0?(this.#h.set(e),this.#h.fill(im,e.length)):this.#h.fill(im)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Xa]:{__proto__:this.#e[Xa]}},this.#r={__proto__:this.#r},this.#i.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#r=Object.getPrototypeOf(this.#r);const i=this.#i.pop();return i!==void 0&&(iu(this.#p,t)?.dependencies.add(i),this.#h[t]=this.#h[i]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(iu(this.#p,t)?.dependencies.add(e),this.#h[t]=this.#h[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(iu(this.#p,t)?.dependencies.add(e),this.#h[t]=this.#h[e]),this}pushBaseTransform(t){return this.#n.push(ht.multiplyByDOMMatrix(this.#n.at(-1),t.getTransform())),this}popBaseTransform(){return this.#n.length>1&&this.#n.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#s.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#s.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Xa,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Xa,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,s,n,a){const o=ht.multiplyByDOMMatrix(this.#n.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];ht.axialAlignedBoundingBox([i,n,s,a],o,h);const u=ht.intersect(this.#r,h);return u?(this.#r[0]=u[0],this.#r[1]=u[1],this.#r[2]=u[2],this.#r[3]=u[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(t,e,i,s,n,a){const o=this.#r;if(o[0]===1/0)return this;const h=ht.multiplyByDOMMatrix(this.#n.at(-1),e.getTransform());if(o[0]===-1/0)return ht.axialAlignedBoundingBox([i,n,s,a],h,this.#o),this;const u=[1/0,1/0,-1/0,-1/0];return ht.axialAlignedBoundingBox([i,n,s,a],h,u),this.#o[0]=Math.min(this.#o[0],Math.max(u[0],o[0])),this.#o[1]=Math.min(this.#o[1],Math.max(u[1],o[1])),this.#o[2]=Math.max(this.#o[2],Math.min(u[2],o[2])),this.#o[3]=Math.max(this.#o[3],Math.min(u[3],o[3])),this}recordCharacterBBox(t,e,i,s=1,n=0,a=0,o){const h=i.bbox;let u,f;if(h&&(u=h[2]!==h[0]&&h[3]!==h[1]&&this.#u.get(i),u!==!1&&(f=[0,0,0,0],ht.axialAlignedBoundingBox(h,i.fontMatrix,f),(s!==1||n!==0||a!==0)&&ht.scaleMinMax([s,0,0,-s,n,a],f),u)))return this.recordBBox(t,e,f[0],f[2],f[1],f[3]);if(!o)return this.recordFullPageBBox(t);const p=o();return h&&f&&u===void 0&&(u=f[0]<=n-p.actualBoundingBoxLeft&&f[2]>=n+p.actualBoundingBoxRight&&f[1]<=a-p.actualBoundingBoxAscent&&f[3]>=a+p.actualBoundingBoxDescent,this.#u.set(i,u),u)?this.recordBBox(t,e,f[0],f[2],f[1],f[3]):this.recordBBox(t,e,n-p.actualBoundingBoxLeft,n+p.actualBoundingBoxRight,a-p.actualBoundingBoxAscent,a+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#m,this.#r[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,s=this.#t,n=this.#e;for(const a of e)a in this.#t?i.add(s[a]):a in n&&n[a].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#s.has(e)&&this.#l.add(this.#s.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Xa]),this.#p){const i=iu(this.#p,t),{dependencies:s}=i;this.#l.forEach(s.add,s),this.#i.forEach(s.add,s),this.#a.forEach(s.add,s),s.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=j2(this.#o[0]*256/this.#f),s=j2(this.#o[1]*256/this.#m),n=H2(this.#o[2]*256/this.#f),a=H2(this.#o[3]*256/this.#m);eu(this.#g,t,i,s,n,a);for(const o of this.#l)o!==t&&eu(this.#g,o,i,s,n,a);for(const o of this.#i)o!==t&&eu(this.#g,o,i,s,n,a);for(const o of this.#a)o!==t&&eu(this.#g,o,i,s,n,a);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of i)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#u.clear(),new hR(this.#h,this.#g)}takeDebugMetadata(){return this.#p}}class Du{#t;#e;#s;#i=0;#a=0;constructor(t,e,i){if(t instanceof Du&&t.#s===!!i)return t;this.#t=t,this.#e=e,this.#s=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#s||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,s,n,a){return this.#s||this.#t.recordClipBox(this.#e,e,i,s,n,a),this}recordBBox(t,e,i,s,n,a){return this.#s||this.#t.recordBBox(this.#e,e,i,s,n,a),this}recordCharacterBBox(t,e,i,s,n,a,o){return this.#s||this.#t.recordCharacterBBox(this.#e,e,i,s,n,a,o),this}recordFullPageBBox(t){return this.#s||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#s||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const fs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ui={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function sm(c,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),c.clip(s)}class Um{isModifyingCurrentTransform(){return!1}getPattern(){fe("Abstract method `getPattern` called.")}}class dR extends Um{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let i,s=this._p0,n=this._p1;if(e&&(s=s.slice(),n=n.slice(),ht.applyTransform(s,e),ht.applyTransform(n,e)),this._type==="axial")i=t.createLinearGradient(s[0],s[1],n[0],n[1]);else if(this._type==="radial"){let a=this._r0,o=this._r1;if(e){const h=new Float32Array(2);ht.singularValueDecompose2dScale(e,h),a*=h[0],o*=h[0]}i=t.createRadialGradient(s[0],s[1],a,n[0],n[1],o)}for(const a of this._colorStops)i.addColorStop(a[0],a[1]);return i}getPattern(t,e,i,s){let n;if(s===ui.STROKE||s===ui.FILL){if(this.isOriginBased()){let m=ht.transform(i,e.baseTransform);this.matrix&&(m=ht.transform(m,this.matrix));const y=.001,w=Math.hypot(m[0],m[1]),v=Math.hypot(m[2],m[3]),S=(m[0]*m[2]+m[1]*m[3])/(w*v);if(Math.abs(S)<y)if(this.isRadial()){if(Math.abs(w-v)<y)return this._createGradient(t,m)}else return this._createGradient(t,m)}const a=e.current.getClippedPathBoundingBox(s,Ee(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,h=Math.ceil(a[3]-a[1])||1,u=e.cachedCanvases.getCanvas("pattern",o,h),f=u.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),i=ht.transform(i,[1,0,0,1,a[0],a[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),sm(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),n=t.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(i);n.setTransform(p)}else sm(t,this._bbox),n=this._createGradient(t);return n}}function ug(c,t,e,i,s,n,a,o){const h=t.coords,u=t.colors,f=c.data,p=c.width*4;let m;h[e+1]>h[i+1]&&(m=e,e=i,i=m,m=n,n=a,a=m),h[i+1]>h[s+1]&&(m=i,i=s,s=m,m=a,a=o,o=m),h[e+1]>h[i+1]&&(m=e,e=i,i=m,m=n,n=a,a=m);const y=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,v=(h[i]+t.offsetX)*t.scaleX,S=(h[i+1]+t.offsetY)*t.scaleY,_=(h[s]+t.offsetX)*t.scaleX,x=(h[s+1]+t.offsetY)*t.scaleY;if(w>=x)return;const E=u[n],R=u[n+1],D=u[n+2],M=u[a],k=u[a+1],N=u[a+2],I=u[o],G=u[o+1],j=u[o+2],tt=Math.round(w),ot=Math.round(x);let rt,lt,O,$,K,at,nt,P;for(let H=tt;H<=ot;H++){if(H<S){const et=H<w?0:(w-H)/(w-S);rt=y-(y-v)*et,lt=E-(E-M)*et,O=R-(R-k)*et,$=D-(D-N)*et}else{let et;H>x?et=1:S===x?et=0:et=(S-H)/(S-x),rt=v-(v-_)*et,lt=M-(M-I)*et,O=k-(k-G)*et,$=N-(N-j)*et}let W;H<w?W=0:H>x?W=1:W=(w-H)/(w-x),K=y-(y-_)*W,at=E-(E-I)*W,nt=R-(R-G)*W,P=D-(D-j)*W;const z=Math.round(Math.min(rt,K)),ct=Math.round(Math.max(rt,K));let Z=p*H+z*4;for(let et=z;et<=ct;et++)W=(rt-et)/(rt-K),W<0?W=0:W>1&&(W=1),f[Z++]=lt-(lt-at)*W|0,f[Z++]=O-(O-nt)*W|0,f[Z++]=$-($-P)*W|0,f[Z++]=255}}function fR(c,t,e){const i=t.coords,s=t.colors;let n,a;switch(t.type){case Wg.LATTICE:const o=t.verticesPerRow,h=Math.floor(i.length/o)-1,u=o-1;for(n=0;n<h;n++){let f=n*o;for(let p=0;p<u;p++,f++)ug(c,e,i[f],i[f+1],i[f+o],s[f],s[f+1],s[f+o]),ug(c,e,i[f+o+1],i[f+1],i[f+o],s[f+o+1],s[f+1],s[f+o])}break;case Wg.TRIANGLES:for(n=0,a=i.length;n<a;n+=3)ug(c,e,i[n],i[n+1],i[n+2],s[n],s[n+1],s[n+2]);break;default:throw new Error("illegal figure")}}class pR extends Um{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,f=Math.ceil(this._bounds[3])-h,p=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),y=u/p,w=f/m,v={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-h,scaleX:1/y,scaleY:1/w},S=p+4,_=m+4,x=i.getCanvas("mesh",S,_),E=x.context,R=E.createImageData(p,m);if(e){const M=R.data;for(let k=0,N=M.length;k<N;k+=4)M[k]=e[0],M[k+1]=e[1],M[k+2]=e[2],M[k+3]=255}for(const M of this._figures)fR(R,M,v);return E.putImageData(R,2,2),{canvas:x.canvas,offsetX:o-2*y,offsetY:h-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){sm(t,this._bbox);const n=new Float32Array(2);if(s===ui.SHADING)ht.singularValueDecompose2dScale(Ee(t),n);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,n);const[o,h]=n;ht.singularValueDecompose2dScale(e.baseTransform,n),n[0]*=o,n[1]*=h}else ht.singularValueDecompose2dScale(e.baseTransform,n);const a=this._createMeshCanvas(n,s===ui.SHADING?null:this._background,e.cachedCanvases);return s!==ui.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class gR extends Um{getPattern(){return"hotpink"}}function mR(c){switch(c[0]){case"RadialAxial":return new dR(c);case"Mesh":return new pR(c);case"Dummy":return new gR}throw new Error(`Unknown IR type: ${c[0]}`)}const U2={COLORED:1,UNCOLORED:2};class $m{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t,e){const{bbox:i,operatorList:s,paintType:n,tilingType:a,color:o,canvasGraphicsFactory:h}=this;let{xstep:u,ystep:f}=this;u=Math.abs(u),f=Math.abs(f),id("TilingType: "+a);const p=i[0],m=i[1],y=i[2],w=i[3],v=y-p,S=w-m,_=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,_);const[x,E]=_;ht.singularValueDecompose2dScale(this.baseTransform,_);const R=x*_[0],D=E*_[1];let M=v,k=S,N=!1,I=!1;const G=Math.ceil(u*R),j=Math.ceil(f*D),tt=Math.ceil(v*R),ot=Math.ceil(S*D);G>=tt?M=u:N=!0,j>=ot?k=f:I=!0;const rt=this.getSizeAndScale(M,this.ctx.canvas.width,R),lt=this.getSizeAndScale(k,this.ctx.canvas.height,D),O=t.cachedCanvases.getCanvas("pattern",rt.size,lt.size),$=O.context,K=h.createCanvasGraphics($,e);if(K.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(K,n,o),$.translate(-rt.scale*p,-lt.scale*m),K.transform(0,rt.scale,0,0,lt.scale,0,0),$.save(),K.dependencyTracker?.save(),this.clipBbox(K,p,m,y,w),K.baseTransform=Ee(K.ctx),K.executeOperatorList(s),K.endDrawing(),K.dependencyTracker?.restore(),$.restore(),N||I){const at=O.canvas;N&&(M=u),I&&(k=f);const nt=this.getSizeAndScale(M,this.ctx.canvas.width,R),P=this.getSizeAndScale(k,this.ctx.canvas.height,D),H=nt.size,W=P.size,z=t.cachedCanvases.getCanvas("pattern-workaround",H,W),ct=z.context,Z=N?Math.floor(v/u):0,et=I?Math.floor(S/f):0;for(let mt=0;mt<=Z;mt++)for(let gt=0;gt<=et;gt++)ct.drawImage(at,H*mt,W*gt,H,W,0,0,H,W);return{canvas:z.canvas,scaleX:nt.scale,scaleY:P.scale,offsetX:p,offsetY:m}}return{canvas:O.canvas,scaleX:rt.scale,scaleY:lt.scale,offsetX:p,offsetY:m}}getSizeAndScale(t,e,i){const s=Math.max($m.MAX_PATTERN_SIZE,e);let n=Math.ceil(t*i);return n>=s?n=s:i=n/t,{scale:i,size:n}}clipBbox(t,e,i,s,n){const a=s-e,o=n-i;t.ctx.rect(e,i,a,o),ht.axialAlignedBoundingBox([e,i,s,n],Ee(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,n=t.current;switch(e){case U2.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;s.fillStyle=n.fillColor=a,s.strokeStyle=n.strokeColor=o;break;case U2.UNCOLORED:s.fillStyle=s.strokeStyle=i,n.fillColor=n.strokeColor=i;break;default:throw new MD(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s,n){let a=i;s!==ui.SHADING&&(a=ht.transform(a,e.baseTransform),this.matrix&&(a=ht.transform(a,this.matrix)));const o=this.createPatternCanvas(e,n);let h=new DOMMatrix(a);h=h.translate(o.offsetX,o.offsetY),h=h.scale(1/o.scaleX,1/o.scaleY);const u=t.createPattern(o.canvas,"repeat");return u.setTransform(h),u}}function yR({src:c,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:n=4294967295,inverseDecode:a=!1}){const o=Ke.isLittleEndian?4278190080:255,[h,u]=a?[n,o]:[o,n],f=i>>3,p=i&7,m=c.length;e=new Uint32Array(e.buffer);let y=0;for(let w=0;w<s;w++){for(const S=t+f;t<S;t++){const _=t<m?c[t]:255;e[y++]=_&128?u:h,e[y++]=_&64?u:h,e[y++]=_&32?u:h,e[y++]=_&16?u:h,e[y++]=_&8?u:h,e[y++]=_&4?u:h,e[y++]=_&2?u:h,e[y++]=_&1?u:h}if(p===0)continue;const v=t<m?c[t++]:255;for(let S=0;S<p;S++)e[y++]=v&1<<7-S?u:h}return{srcPos:t,destPos:y}}const $2=16,G2=100,bR=15,V2=10,Ni=16,dg=new DOMMatrix,Ki=new Float32Array(2),no=new Float32Array([1/0,1/0,-1/0,-1/0]);function vR(c,t){if(c._removeMirroring)throw new Error("Context is already forwarding operations.");c.__originalSave=c.save,c.__originalRestore=c.restore,c.__originalRotate=c.rotate,c.__originalScale=c.scale,c.__originalTranslate=c.translate,c.__originalTransform=c.transform,c.__originalSetTransform=c.setTransform,c.__originalResetTransform=c.resetTransform,c.__originalClip=c.clip,c.__originalMoveTo=c.moveTo,c.__originalLineTo=c.lineTo,c.__originalBezierCurveTo=c.bezierCurveTo,c.__originalRect=c.rect,c.__originalClosePath=c.closePath,c.__originalBeginPath=c.beginPath,c._removeMirroring=()=>{c.save=c.__originalSave,c.restore=c.__originalRestore,c.rotate=c.__originalRotate,c.scale=c.__originalScale,c.translate=c.__originalTranslate,c.transform=c.__originalTransform,c.setTransform=c.__originalSetTransform,c.resetTransform=c.__originalResetTransform,c.clip=c.__originalClip,c.moveTo=c.__originalMoveTo,c.lineTo=c.__originalLineTo,c.bezierCurveTo=c.__originalBezierCurveTo,c.rect=c.__originalRect,c.closePath=c.__originalClosePath,c.beginPath=c.__originalBeginPath,delete c._removeMirroring},c.save=function(){t.save(),this.__originalSave()},c.restore=function(){t.restore(),this.__originalRestore()},c.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},c.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},c.transform=function(e,i,s,n,a,o){t.transform(e,i,s,n,a,o),this.__originalTransform(e,i,s,n,a,o)},c.setTransform=function(e,i,s,n,a,o){t.setTransform(e,i,s,n,a,o),this.__originalSetTransform(e,i,s,n,a,o)},c.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},c.rotate=function(e){t.rotate(e),this.__originalRotate(e)},c.clip=function(e){t.clip(e),this.__originalClip(e)},c.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},c.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},c.bezierCurveTo=function(e,i,s,n,a,o){t.bezierCurveTo(e,i,s,n,a,o),this.__originalBezierCurveTo(e,i,s,n,a,o)},c.rect=function(e,i,s,n){t.rect(e,i,s,n),this.__originalRect(e,i,s,n)},c.closePath=function(){t.closePath(),this.__originalClosePath()},c.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class AR{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function su(c,t,e,i,s,n,a,o,h,u){const[f,p,m,y,w,v]=Ee(c);if(p===0&&m===0){const x=a*f+w,E=Math.round(x),R=o*y+v,D=Math.round(R),M=(a+h)*f+w,k=Math.abs(Math.round(M)-E)||1,N=(o+u)*y+v,I=Math.abs(Math.round(N)-D)||1;return c.setTransform(Math.sign(f),0,0,Math.sign(y),E,D),c.drawImage(t,e,i,s,n,0,0,k,I),c.setTransform(f,p,m,y,w,v),[k,I]}if(f===0&&y===0){const x=o*m+w,E=Math.round(x),R=a*p+v,D=Math.round(R),M=(o+u)*m+w,k=Math.abs(Math.round(M)-E)||1,N=(a+h)*p+v,I=Math.abs(Math.round(N)-D)||1;return c.setTransform(0,Math.sign(p),Math.sign(m),0,E,D),c.drawImage(t,e,i,s,n,0,0,I,k),c.setTransform(f,p,m,y,w,v),[I,k]}c.drawImage(t,e,i,s,n,a,o,h,u);const S=Math.hypot(f,p),_=Math.hypot(m,y);return[S*h,_*u]}class q2{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Yg;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ye.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=no.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ui.FILL,e=null){const i=this.minMax.slice();if(t===ui.STROKE){e||fe("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(e,Ki);const s=Ki[0]*this.lineWidth/2,n=Ki[1]*this.lineWidth/2;i[0]-=s,i[1]-=n,i[2]+=s,i[3]+=n}return i}updateClipFromPath(){const t=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(no,0)}getClippedPathBoundingBox(t=ui.FILL,e=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function X2(c,t){if(t instanceof ImageData){c.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%Ni,n=(e-s)/Ni,a=s===0?n:n+1,o=c.createImageData(i,Ni);let h=0,u;const f=t.data,p=o.data;let m,y,w,v;if(t.kind===yu.GRAYSCALE_1BPP){const S=f.byteLength,_=new Uint32Array(p.buffer,0,p.byteLength>>2),x=_.length,E=i+7>>3,R=4294967295,D=Ke.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(w=m<n?Ni:s,u=0,y=0;y<w;y++){const M=S-h;let k=0;const N=M>E?i:M*8-7,I=N&-8;let G=0,j=0;for(;k<I;k+=8)j=f[h++],_[u++]=j&128?R:D,_[u++]=j&64?R:D,_[u++]=j&32?R:D,_[u++]=j&16?R:D,_[u++]=j&8?R:D,_[u++]=j&4?R:D,_[u++]=j&2?R:D,_[u++]=j&1?R:D;for(;k<N;k++)G===0&&(j=f[h++],G=128),_[u++]=j&G?R:D,G>>=1}for(;u<x;)_[u++]=0;c.putImageData(o,0,m*Ni)}}else if(t.kind===yu.RGBA_32BPP){for(y=0,v=i*Ni*4,m=0;m<n;m++)p.set(f.subarray(h,h+v)),h+=v,c.putImageData(o,0,y),y+=Ni;m<a&&(v=i*s*4,p.set(f.subarray(h,h+v)),c.putImageData(o,0,y))}else if(t.kind===yu.RGB_24BPP)for(w=Ni,v=i*w,m=0;m<a;m++){for(m>=n&&(w=s,v=i*w),u=0,y=v;y--;)p[u++]=f[h++],p[u++]=f[h++],p[u++]=f[h++],p[u++]=255;c.putImageData(o,0,m*Ni)}else throw new Error(`bad image kind: ${t.kind}`)}function Y2(c,t){if(t.bitmap){c.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%Ni,n=(e-s)/Ni,a=s===0?n:n+1,o=c.createImageData(i,Ni);let h=0;const u=t.data,f=o.data;for(let p=0;p<a;p++){const m=p<n?Ni:s;({srcPos:h}=yR({src:u,srcPos:h,dest:f,width:i,height:m,nonBlackColor:0})),c.putImageData(o,0,p*Ni)}}function Cl(c,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)c[i]!==void 0&&(t[i]=c[i]);c.setLineDash!==void 0&&(t.setLineDash(c.getLineDash()),t.lineDashOffset=c.lineDashOffset)}function nu(c){c.strokeStyle=c.fillStyle="#000000",c.fillRule="nonzero",c.globalAlpha=1,c.lineWidth=1,c.lineCap="butt",c.lineJoin="miter",c.miterLimit=10,c.globalCompositeOperation="source-over",c.font="10px sans-serif",c.setLineDash!==void 0&&(c.setLineDash([]),c.lineDashOffset=0);const{filter:t}=c;t!=="none"&&t!==""&&(c.filter="none")}function W2(c,t){if(t)return!0;ht.singularValueDecompose2dScale(c,Ki);const e=Math.fround(Hs.pixelRatio*vo.PDF_TO_CSS_UNITS);return Ki[0]<=e&&Ki[1]<=e}const wR=["butt","round","square"],_R=["miter","round","bevel"],SR={},K2={};class uo{constructor(t,e,i,s,n,{optionalContentConfig:a,markedContentStack:o=null},h,u,f){this.ctx=t,this.current=new q2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=n,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new AR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const n=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,n,a),this.ctx.fillStyle=o,i){const h=this.cachedCanvases.getCanvas("transparent",n,a);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ee(this.compositeCtx))}this.ctx.save(),nu(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ee(this.ctx)}executeOperatorList(t,e,i,s,n){const a=t.argsArray,o=t.fnArray;let h=e||0;const u=a.length;if(u===h)return h;const f=u-h>V2&&typeof i=="function",p=f?Date.now()+bR:0;let m=0;const y=this.commonObjs,w=this.objs;let v,S;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,i),h;if(!n||n(h))if(v=o[h],S=a[h]??null,v!==ec.dependency)S===null?this[v](h):this[v](h,...S);else for(const _ of S){this.dependencyTracker?.recordNamedData(_,h);const x=_.startsWith("g_")?y:w;if(!x.has(_))return x.get(_,i),h}if(h++,h===u)return h;if(f&&++m>V2){if(Date.now()>p)return i(),h;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let n=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,h=s,u="prescale1",f,p;for(;n>2&&o>1||a>2&&h>1;){let m=o,y=h;n>2&&o>1&&(m=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),n/=o/m),a>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/y),f=this.cachedCanvases.getCanvas(u,m,y),p=f.context,p.clearRect(0,0,m,y),p.drawImage(t,0,0,o,h,0,0,m,y),t=f.canvas,o=m,h=y,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:h}}_createMaskCanvas(t,e){const i=this.ctx,{width:s,height:n}=e,a=this.current.fillColor,o=this.current.patternFill,h=Ee(i);let u,f,p,m;if((e.bitmap||e.data)&&e.count>1){const G=e.bitmap||e.data.buffer;f=JSON.stringify(o?h:[h.slice(0,4),a]),u=this._cachedBitmapsMap.get(G),u||(u=new Map,this._cachedBitmapsMap.set(G,u));const j=u.get(f);if(j&&!o){const tt=Math.round(Math.min(h[0],h[2])+h[4]),ot=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,fs.transformAndFill),{canvas:j,offsetX:tt,offsetY:ot}}p=j}p||(m=this.cachedCanvases.getCanvas("maskCanvas",s,n),Y2(m.context,e));let y=ht.transform(h,[1/s,0,0,-1/n,0,0]);y=ht.transform(y,[1,0,0,1,0,-n]);const w=no.slice();ht.axialAlignedBoundingBox([0,0,s,n],y,w);const[v,S,_,x]=w,E=Math.round(_-v)||1,R=Math.round(x-S)||1,D=this.cachedCanvases.getCanvas("fillCanvas",E,R),M=D.context,k=v,N=S;M.translate(-k,-N),M.transform(...y),p||(p=this._scaleImage(m.canvas,ks(M)),p=p.img,u&&o&&u.set(f,p)),M.imageSmoothingEnabled=W2(Ee(M),e.interpolate),su(M,p,0,0,p.width,p.height,0,0,s,n),M.globalCompositeOperation="source-in";const I=ht.transform(ks(M),[1,0,0,1,-k,-N]);return M.fillStyle=o?a.getPattern(i,this,I,ui.FILL,t):a,M.fillRect(0,0,s,n),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,D.canvas)),this.dependencyTracker?.recordDependencies(t,fs.transformAndFill),{canvas:D.canvas,offsetX:Math.round(k),offsetY:Math.round(N)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=wR[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=_R[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,s]of e)switch(i){case"LW":this.setLineWidth(t,s);break;case"LC":this.setLineCap(t,s);break;case"LJ":this.setLineJoin(t,s);break;case"ML":this.setMiterLimit(t,s);break;case"D":this.setDash(t,s[0],s[1]);break;case"RI":this.setRenderingIntent(t,s);break;case"FL":this.setFlatness(t,s);break;case"Font":this.setFont(t,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,e,i);this.suspendedCtx=this.ctx;const a=this.ctx=n.context;a.setTransform(this.suspendedCtx.getTransform()),Cl(this.suspendedCtx,a),vR(a,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Cl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const n=s[0],a=s[1],o=s[2]-n,h=s[3]-a;o===0||h===0||(this.genericComposeSMask(e.context,i,o,h,e.subtype,e.backdrop,e.transferMap,n,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,n,a,o,h,u,f,p){let m=t.canvas,y=h-f,w=u-p;if(a)if(y<0||w<0||y+i>m.width||w+s>m.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),_=S.context;_.drawImage(m,-y,-w),_.globalCompositeOperation="destination-atop",_.fillStyle=a,_.fillRect(0,0,i,s),_.globalCompositeOperation="source-over",m=S.canvas,y=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(y,w,i,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(y,w,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),n==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):n==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const v=new Path2D;v.rect(h,u,i,s),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(m,y,w,i,s,h,u,i,s),e.restore()}save(t){this.inSMaskMode&&Cl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Cl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,n,a,o){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,s,n,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,s){let[n]=i;if(!s){n||=i[0]=new Path2D,this[e](t,n);return}if(this.dependencyTracker!==null){const a=e===ec.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-a,s[2]+a,s[1]-a,s[3]+a).recordDependencies(t,["transform"])}n instanceof Path2D||(n=i[0]=j_(n)),ht.axialAlignedBoundingBox(s,Ee(this.ctx),this.current.minMax),this[e](t,n),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&n?.getPattern){const a=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,ks(s),ui.STROKE,t),a){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(a)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,fs.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(ui.STROKE,Ee(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const s=this.ctx,n=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const u=n.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(t),s.save(),s.fillStyle=n.getPattern(s,this,ks(s),ui.FILL,t),u){const f=new Path2D;f.addPath(e,s.getTransform().invertSelf().multiplySelf(u)),e=f}o=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),this.dependencyTracker?.recordDependencies(t,fs.fill),o&&(s.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,fs.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=SR}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=K2}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,n=i.getTransform().invertSelf();for(const{transform:a,x:o,y:h,fontSize:u,path:f}of e)f&&s.addPath(f,new DOMMatrix(a).preMultiplySelf(n).translate(o,h).scale(u,-u));i.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),n=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=s.fontMatrix||Yg,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&xt("Invalid font matrix for font "+e),i<0?(i=-i,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const a=s.loadedName||"sans-serif",o=s.systemFontInfo?.css||`"${a}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const u=s.italic?"italic":"normal";let f=i;i<$2?f=$2:i>G2&&(f=G2),this.current.fontSizeScale=i/f,this.ctx.font=`${u} ${h} ${f}px ${o}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#s(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s}paintChar(t,e,i,s,n,a){const o=this.ctx,h=this.current,u=h.font,f=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,m=f&Ye.FILL_STROKE_MASK,y=!!(f&Ye.ADD_TO_PATH_FLAG),w=h.patternFill&&!u.missingFile,v=h.patternStroke&&!u.missingFile;let S;if((u.disableFontFace||y||w||v)&&!u.missingFile&&(S=u.getPathGenerator(this.commonObjs,e)),S&&(u.disableFontFace||w||v)){o.save(),o.translate(i,s),o.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,o,u);let _;if(m===Ye.FILL||m===Ye.FILL_STROKE)if(n){_=o.getTransform(),o.setTransform(...n);const x=this.#s(S,_,n);o.fill(x)}else o.fill(S);if(m===Ye.STROKE||m===Ye.FILL_STROKE)if(a){_||=o.getTransform(),o.setTransform(...a);const{a:x,b:E,c:R,d:D}=_,M=ht.inverseTransform(a),k=ht.transform([x,E,R,D,0,0],M);ht.singularValueDecompose2dScale(k,Ki),o.lineWidth*=Math.max(Ki[0],Ki[1])/p,o.stroke(this.#s(S,_,a))}else o.lineWidth/=p,o.stroke(S);o.restore()}else(m===Ye.FILL||m===Ye.FILL_STROKE)&&(o.fillText(e,i,s),this.dependencyTracker?.recordCharacterBBox(t,o,u,p,i,s,()=>o.measureText(e))),(m===Ye.STROKE||m===Ye.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,o,u,p,i,s,()=>o.measureText(e)).recordDependencies(t,fs.stroke),o.strokeText(e,i,s));y&&((this.pendingTextPaths||=[]).push({transform:Ee(o),x:i,y:s,fontSize:p,path:S}),this.dependencyTracker?.recordCharacterBBox(t,o,u,p,i,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return Ct(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,fs.showText).resetBBox(t),this.current.textRenderingMode&Ye.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;if(s.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const n=i.fontSize;if(n===0){this.dependencyTracker?.recordOperation(t);return}const a=this.ctx,o=i.fontSizeScale,h=i.charSpacing,u=i.wordSpacing,f=i.fontDirection,p=i.textHScale*f,m=e.length,y=s.vertical,w=y?1:-1,v=s.defaultVMetrics,S=n*i.fontMatrix[0],_=i.textRenderingMode===Ye.FILL&&!s.disableFontFace&&!i.patternFill;a.save(),i.textMatrix&&a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),f>0?a.scale(p,-1):a.scale(p,1);let x,E;const R=i.textRenderingMode&Ye.FILL_STROKE_MASK,D=R===Ye.FILL||R===Ye.FILL_STROKE,M=R===Ye.STROKE||R===Ye.FILL_STROKE;if(D&&i.patternFill){a.save();const j=i.fillColor.getPattern(a,this,ks(a),ui.FILL,t);x=Ee(a),a.restore(),a.fillStyle=j}if(M&&i.patternStroke){a.save();const j=i.strokeColor.getPattern(a,this,ks(a),ui.STROKE,t);E=Ee(a),a.restore(),a.strokeStyle=j}let k=i.lineWidth;const N=i.textMatrixScale;if(N===0||k===0?M&&(k=this.getSinglePixelWidth()):k/=N,o!==1&&(a.scale(o,o),k/=o),a.lineWidth=k,s.isInvalidPDFjsFont){const j=[];let tt=0;for(const rt of e)j.push(rt.unicode),tt+=rt.width;const ot=j.join("");if(a.fillText(ot,0,0),this.dependencyTracker!==null){const rt=a.measureText(ot);this.dependencyTracker.recordBBox(t,this.ctx,-rt.actualBoundingBoxLeft,rt.actualBoundingBoxRight,-rt.actualBoundingBoxAscent,rt.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=tt*S*p,a.restore(),this.compose();return}let I=0,G;for(G=0;G<m;++G){const j=e[G];if(typeof j=="number"){I+=w*j*n/1e3;continue}let tt=!1;const ot=(j.isSpace?u:0)+h,rt=j.fontChar,lt=j.accent;let O,$,K=j.width;if(y){const P=j.vmetric||v,H=-(j.vmetric?P[1]:K*.5)*S,W=P[2]*S;K=P?-P[0]:K,O=H/o,$=(I+W)/o}else O=I/o,$=0;let at;if(s.remeasure&&K>0){at=a.measureText(rt);const P=at.width*1e3/n*o;if(K<P&&this.isFontSubpixelAAEnabled){const H=K/P;tt=!0,a.save(),a.scale(H,1),O/=H}else K!==P&&(O+=(K-P)/2e3*n/o)}if(this.contentVisible&&(j.isInFont||s.missingFile)){if(_&&!lt)a.fillText(rt,O,$),this.dependencyTracker?.recordCharacterBBox(t,a,at?{bbox:null}:s,n/o,O,$,()=>at??a.measureText(rt));else if(this.paintChar(t,rt,O,$,x,E),lt){const P=O+n*lt.offset.x/o,H=$-n*lt.offset.y/o;this.paintChar(t,lt.fontChar,P,H,x,E)}}const nt=y?K*S-ot*f:K*S+ot*f;I+=nt,tt&&a.restore()}y?i.y-=I:i.x+=I*p,a.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,s=this.current,n=s.font,a=s.fontSize,o=s.fontDirection,h=n.vertical?1:-1,u=s.charSpacing,f=s.wordSpacing,p=s.textHScale*o,m=s.fontMatrix||Yg,y=e.length,w=s.textRenderingMode===Ye.INVISIBLE;let v,S,_,x;if(w||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(p,o);const E=this.dependencyTracker;for(this.dependencyTracker=E?new Du(E,t):null,v=0;v<y;++v){if(S=e[v],typeof S=="number"){x=h*S*a/1e3,this.ctx.translate(x,0),s.x+=x*p;continue}const R=(S.isSpace?f:0)+u,D=n.charProcOperatorList[S.operatorListId];D?this.contentVisible&&(this.save(),i.scale(a,a),i.transform(...m),this.executeOperatorList(D),this.restore()):xt(`Type3 character "${S.operatorListId}" is not available.`);const M=[S.width,0];ht.applyTransform(M,m),_=M[0]*a+R,i.translate(_,0),s.x+=_*p}i.restore(),E&&(this.dependencyTracker=E)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,s,n,a,o){const h=new Path2D;h.rect(s,n,a-s,o-n),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,s,a,n,o).recordClipBox(t,this.ctx,s,a,n,o),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const s=this.baseTransform||Ee(this.ctx),n={createCanvasGraphics:(a,o)=>new uo(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Du(this.dependencyTracker,o,!0):null)};i=new $m(e,this.ctx,n,s)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=mR(this.getObject(t,e)),this.cachedPatterns.set(e,s)),i&&(s.matrix=i),s}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const s=this._getPattern(t,e);i.fillStyle=s.getPattern(i,this,ks(i),ui.SHADING,t);const n=ks(i);if(n){const{width:a,height:o}=i.canvas,h=no.slice();ht.axialAlignedBoundingBox([0,0,a,o],n,h);const[u,f,p,m]=h;this.ctx.fillRect(u,f,p-u,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,fs.transform).recordDependencies(t,fs.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){fe("Should not call beginInlineImage")}beginImageData(){fe("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ee(this.ctx),i)){ht.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[s,n,a,o]=i,h=new Path2D;h.rect(s,n,a-s,o-n),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,s,a,n,o),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||id("TODO: Support non-isolated groups."),e.knockout&&xt("Knockout groups not supported.");const s=Ee(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=no.slice();ht.axialAlignedBoundingBox(e.bbox,Ee(i),n);const a=[0,0,i.canvas.width,i.canvas.height];n=ht.intersect(n,a)||[0,0,0,0];const o=Math.floor(n[0]),h=Math.floor(n[1]),u=Math.max(Math.ceil(n[2])-o,1),f=Math.max(Math.ceil(n[3])-h,1);this.current.startNewPathAndClipBox([0,0,u,f]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(p,u,f),y=m.context;y.translate(-o,-h),y.transform(...s);let w=new Path2D;const[v,S,_,x]=e.bbox;if(w.rect(v,S,_-v,x-S),e.matrix){const E=new Path2D;E.addPath(w,new DOMMatrix(e.matrix)),w=E}y.clip(w),e.smask&&this.smaskStack.push({canvas:m.canvas,context:y,offsetX:o,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(o,h),i.save()),Cl(i,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const n=Ee(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...n);const a=no.slice();ht.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],n,a),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,i,s,n,a){if(this.#t(),nu(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const o=i[2]-i[0],h=i[3]-i[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=o,i[3]=h,ht.singularValueDecompose2dScale(Ee(this.ctx),Ki);const{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(h*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Ki[0],0,0,-Ki[1],0,h*Ki[1]),nu(this.ctx)}else{nu(this.ctx),this.endPath(t);const u=new Path2D;u.rect(i[0],i[1],o,h),this.ctx.clip(u)}}this.current=new q2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...n)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const s=this.ctx,n=this._createMaskCanvas(t,e),a=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,n.offsetX,n.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,n.offsetX,n.offsetX+a.width,n.offsetY,n.offsetY+a.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,s=0,n=0,a,o){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const u=Ee(h);h.transform(i,s,n,a,0,0);const f=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,f.offsetX-u[4],f.offsetY-u[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,m=o.length;p<m;p+=2){const y=ht.transform(u,[i,s,n,a,o[p],o[p+1]]);h.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(t,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,n=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,fs.transformAndFill);for(const a of e){const{data:o,width:h,height:u,transform:f}=a,p=this.cachedCanvases.getCanvas("maskCanvas",h,u),m=p.context;m.save();const y=this.getObject(t,o,a);Y2(m,y),m.globalCompositeOperation="source-in",m.fillStyle=n?s.getPattern(m,this,ks(i),ui.FILL,t):s,m.fillRect(0,0,h,u),m.restore(),i.save(),i.transform(...f),i.scale(1,-1),su(i,p.canvas,0,0,h,u,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,h,0,u),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,s,n){if(!this.contentVisible)return;const a=this.getObject(t,e);if(!a){xt("Dependent image isn't ready yet");return}const o=a.width,h=a.height,u=[];for(let f=0,p=n.length;f<p;f+=2)u.push({transform:[i,0,0,s,n[f],n[f+1]],x:0,y:0,w:o,h});this.paintInlineImageXObjectGroup(t,a,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,n=this.cachedCanvases.getCanvas("inlineImage",i,s),a=n.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",n.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,s=e.height,n=this.ctx;this.save(t);const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none"),n.scale(1/i,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",i,s).context;X2(f,e),o=this.applyTransferMapsToCanvas(f)}const h=this._scaleImage(o,ks(n));n.imageSmoothingEnabled=W2(Ee(n),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,n,0,i,-s,0).recordDependencies(t,fs.imageXObject).recordOperation(t),su(n,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,i,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const s=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const a=e.width,o=e.height,u=this.cachedCanvases.getCanvas("inlineImage",a,o).context;X2(u,e),n=this.applyTransferMapsToCanvas(u)}this.dependencyTracker?.resetBBox(t);for(const a of i)s.save(),s.transform(...a.transform),s.scale(1,-1),su(s,n,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,fs.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const n=this.ctx;this.pendingClip?(s||(this.pendingClip===K2?n.clip(e,"evenodd"):n.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ee(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:n}=this.ctx.getTransform();let a,o;if(i===0&&s===0){const h=Math.abs(e),u=Math.abs(n);if(h===u)if(t===0)a=o=1/h;else{const f=h*t;a=o=f<1?1/f:1}else if(t===0)a=1/h,o=1/u;else{const f=h*t,p=u*t;a=f<1?1/f:1,o=p<1?1/p:1}}else{const h=Math.abs(e*n-i*s),u=Math.hypot(e,i),f=Math.hypot(s,n);if(t===0)a=f/h,o=u/h;else{const p=t*h;a=f>p?f/p:1,o=u>p?u/p:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[n,a]=this.getScaleForStroking();if(n===a){i.lineWidth=(s||1)*n,i.stroke(t);return}const o=i.getLineDash();e&&i.save(),i.scale(n,a),dg.a=1/n,dg.d=1/a;const h=new Path2D;if(h.addPath(t,dg),o.length>0){const u=Math.max(n,a);i.setLineDash(o.map(f=>f/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(h),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const c in ec)uo.prototype[c]!==void 0&&(uo.prototype[ec[c]]=uo.prototype[c]);class fo{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class ER{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Za=Symbol("INTERNAL");class xR{#t=!1;#e=!1;#s=!1;#i=!0;constructor(t,{name:e,intent:i,usage:s,rbGroups:n}){this.#t=!!(t&Xi.DISPLAY),this.#e=!!(t&Xi.PRINT),this.name=e,this.intent=i,this.usage=s,this.rbGroups=n}get visible(){if(this.#s)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Za&&fe("Internal method `_setVisible` called."),this.#s=i,this.#i=e}}class CR{#t=null;#e=new Map;#s=null;#i=null;constructor(t,e=Xi.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new xR(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(Za,!1);for(const i of t.on)this.#e.get(i)._setVisible(Za,!0);for(const i of t.off)this.#e.get(i)._setVisible(Za,!1);this.#s=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const n=t[s];let a;if(Array.isArray(n))a=this.#a(n);else if(this.#e.has(n))a=this.#e.get(n).visible;else return xt(`Optional content group not found: ${n}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return id("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(xt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return xt(`Unknown optional content policy ${t.policy}.`),!0}return xt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const s=this.#e.get(t);if(!s){xt(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const n of s.rbGroups)for(const a of n)a!==t&&this.#e.get(a)?._setVisible(Za,!1,!0);s._setVisible(Za,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const n=this.#e.get(s);if(n)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!n.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new U_;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class TR{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Vt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:n,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,n?.length>0){const h=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,u)=>{this._onReceiveData({begin:h,chunk:u})}),t.addProgressListener((h,u)=>{this._onProgress({loaded:h,total:u})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(n){return n._begin!==t?!1:(n._enqueue(i),!0)});Vt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Vt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new MR(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new DR(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class MR{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=Im(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class DR{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function RR(c){let t=!0,e=i("filename\\*","i").exec(c);if(e){e=e[1];let f=o(e);return f=unescape(f),f=h(f),f=u(f),n(f)}if(e=a(c),e){const f=u(e);return n(f)}if(e=i("filename","i").exec(c),e){e=e[1];let f=o(e);return f=u(f),n(f)}function i(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function s(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(f,{fatal:!0}),y=mc(p);p=m.decode(y),t=!1}catch{}}return p}function n(f){return t&&/[\x80-\xff]/.test(f)&&(f=s("utf-8",f),t&&(f=s("iso-8859-1",f))),f}function a(f){const p=[];let m;const y=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=y.exec(f))!==null;){let[,v,S,_]=m;if(v=parseInt(v,10),v in p){if(v===0)break;continue}p[v]=[S,_]}const w=[];for(let v=0;v<p.length&&v in p;++v){let[S,_]=p[v];_=o(_),S&&(_=unescape(_),v===0&&(_=h(_))),w.push(_)}return w.join("")}function o(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let m=0;m<p.length;++m){const y=p[m].indexOf('"');y!==-1&&(p[m]=p[m].slice(0,y),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function h(f){const p=f.indexOf("'");if(p===-1)return f;const m=f.slice(0,p),w=f.slice(p+1).replace(/^[^']*'/,"");return s(m,w)}function u(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),s(m,w);try{w=atob(w)}catch{}return s(m,w)})}return""}function W_(c,t){const e=new Headers;if(!c||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function rd(c){return URL.parse(c)?.origin??null}function K_({responseHeaders:c,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(c.get("Content-Length"),10);return!Number.isInteger(n)||(s.suggestedLength=n,n<=2*e)||i||!t||c.get("Accept-Ranges")!=="bytes"||(c.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Q_(c){const t=c.get("Content-Disposition");if(t){let e=RR(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Im(e))return e}return null}function wc(c,t){return new Mu(`Unexpected server response (${c}) while retrieving PDF "${t}".`,c,c===404||c===0&&t.startsWith("file:"))}function Z_(c){return c===200||c===206}function J_(c,t,e){return{method:"GET",headers:c,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function tS(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:(xt(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class kR{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=W_(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new LR(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new OR(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class LR{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,J_(i,this._withCredentials,this._abortController)).then(n=>{if(t._responseOrigin=rd(n.url),!Z_(n.status))throw wc(n.status,s);this._reader=n.body.getReader(),this._headersCapability.resolve();const a=n.headers,{allowRangeRequests:o,suggestedLength:h}=K_({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=h||this._contentLength,this._filename=Q_(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ar("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:tS(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class OR{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const n=new Headers(t.headers);n.append("Range",`bytes=${e}-${i-1}`);const a=s.url;fetch(a,J_(n,this._withCredentials,this._abortController)).then(o=>{const h=rd(o.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!Z_(o.status))throw wc(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:tS(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const fg=200,pg=206;function PR(c){const t=c.response;return typeof t!="string"?t:mc(t).buffer}class NR{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=W_(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[n,a]of this.headers)e.setRequestHeader(n,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=pg):s.expectedStatus=fg,e.responseType="arraybuffer",Vt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const n=s.status||fg;if(!(n===fg&&i.expectedStatus===pg)&&n!==i.expectedStatus){i.onError(s.status);return}const o=PR(s);if(n===pg){const h=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);u?i.onDone({begin:parseInt(u[1],10),chunk:o}):(xt('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class FR{constructor(t){this._source=t,this._manager=new NR(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Vt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new IR(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new BR(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class IR{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=rd(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[h,...u]=o.split(": ");return[h,u.join(": ")]}):[]),{allowRangeRequests:n,suggestedLength:a}=K_({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Q_(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=wc(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class BR{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=rd(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=wc(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const zR=/^[a-z][a-z0-9\-+.]+:/i;function jR(c){if(zR.test(c))return new URL(c);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(c))}class HR{constructor(t){this.source=t,this.url=jR(t.url),Vt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new UR(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new $R(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class UR{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=wc(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ar("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class $R{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const n=process.getBuiltinModule("fs");this._setReadableStream(n.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Tl=Symbol("INITIAL_DATA");class eS{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Tl}}get(t,e=null){if(e){const s=this.#e(t);return s.promise.then(()=>e(s.data)),null}const i=this.#t[t];if(!i||i.data===Tl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Tl}delete(t){const e=this.#t[t];return!e||e.data===Tl?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Tl&&(yield[t,e])}}}const GR=1e5,Q2=30;class Yi{#t=Promise.withResolvers();#e=null;#s=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#r=0;#o=0;#c=null;#l=null;#d=0;#u=0;#f=Object.create(null);#m=[];#g=null;#h=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#x=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#u=i.scale*Hs.pixelRatio,this.#d=i.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:n,pageX:a,pageY:o}=i.rawDims;this.#y=[1,0,0,-1,-a,o+n],this.#o=s,this.#r=n,Yi.#D(),e.style.setProperty("--min-font-size",Yi.#S),Wr(e,i),this.#t.promise.finally(()=>{Yi.#A.delete(this),this.#n=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ke.platform;return Ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Yi.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Hs.pixelRatio,s=t.rotation;if(s!==this.#d&&(e?.(),this.#d=s,Wr(this.#l,{rotation:s})),i!==this.#u){e?.(),this.#u=i;const n={div:null,properties:null,ctx:Yi.#R(this.#a)};for(const a of this.#h)n.properties=this.#p.get(a),n.div=a,this.#E(n)}}cancel(){const t=new ar("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#m}#T(t){if(this.#s)return;this.#n.ctx??=Yi.#R(this.#a);const e=this.#h,i=this.#m;for(const s of t){if(e.length>GR){xt("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const n=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id&&this.#e.setAttribute("id",`${s.id}`),n.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(s.str),this.#w(s)}}#w(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const s=ht.transform(this.#y,t.transform);let n=Math.atan2(s[1],s[0]);const a=this.#f[t.fontName];a.vertical&&(n+=Math.PI/2);let o=this.#i&&a.fontSubstitution||a.fontFamily;o=Yi.fontFamilyMap.get(o)||o;const h=Math.hypot(s[2],s[3]),u=h*Yi.#I(o,a,this.#a);let f,p;n===0?(f=s[4],p=s[5]-u):(f=s[4]+u*Math.sin(n),p=s[5]-u*Math.cos(n));const m=e.style;m.left=`${(100*f/this.#o).toFixed(2)}%`,m.top=`${(100*p/this.#r).toFixed(2)}%`,m.setProperty("--font-height",`${h.toFixed(2)}px`),m.fontFamily=o,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),n!==0&&(i.angle=n*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(y=!0)}if(y&&(i.canvasWidth=a.vertical?t.height:t.width),this.#p.set(e,i),this.#n.div=e,this.#n.properties=i,this.#E(this.#n),i.hasText&&this.#e.append(e),i.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#E(t){const{div:e,properties:i,ctx:s}=t,{style:n}=e;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:a}=n,{canvasWidth:o,fontSize:h}=i;Yi.#M(s,h*this.#u,a);const{width:u}=s.measureText(e.textContent);u>0&&n.setProperty("--scale-x",o*this.#u/u)}i.angle!==0&&n.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#R(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#x.set(e,{size:0,family:""})}return e}static#M(t,e,i){const s=this.#x.get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)}static#D(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const s=this.#v.get(t);if(s)return s;const n=this.#R(i);n.canvas.width=n.canvas.height=Q2,this.#M(n,Q2,t);const a=n.measureText(""),o=a.fontBoundingBoxAscent,h=Math.abs(a.fontBoundingBoxDescent);n.canvas.width=n.canvas.height=0;let u=.8;return o?u=o/(o+h):(Ke.platform.isFirefox&&xt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),this.#v.set(t,u),u}}const VR=100;function qR(c={}){typeof c=="string"||c instanceof URL?c={url:c}:(c instanceof ArrayBuffer||ArrayBuffer.isView(c))&&(c={data:c});const t=new Gm,{docId:e}=t,i=c.url?ZD(c.url):null,s=c.data?JD(c.data):null,n=c.httpHeaders||null,a=c.withCredentials===!0,o=c.password??null,h=c.range instanceof iS?c.range:null,u=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:2**16;let f=c.worker instanceof sc?c.worker:null;const p=c.verbosity,m=typeof c.docBaseUrl=="string"&&!sd(c.docBaseUrl)?c.docBaseUrl:null,y=Jh(c.cMapUrl),w=c.cMapPacked!==!1,v=c.CMapReaderFactory||(Ai?oR:I2),S=Jh(c.iccUrl),_=Jh(c.standardFontDataUrl),x=c.StandardFontDataFactory||(Ai?lR:B2),E=Jh(c.wasmUrl),R=c.WasmFactory||(Ai?cR:z2),D=c.stopAtErrors!==!0,M=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,k=c.isEvalSupported!==!1,N=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!Ai,I=typeof c.isImageDecoderSupported=="boolean"?c.isImageDecoderSupported:!Ai&&(Ke.platform.isFirefox||!globalThis.chrome),G=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,j=typeof c.disableFontFace=="boolean"?c.disableFontFace:Ai,tt=c.fontExtraProperties===!0,ot=c.enableXfa===!0,rt=c.ownerDocument||globalThis.document,lt=c.disableRange===!0,O=c.disableStream===!0,$=c.disableAutoFetch===!0,K=c.pdfBug===!0,at=c.CanvasFactory||(Ai?aR:sR),nt=c.FilterFactory||(Ai?rR:nR),P=c.enableHWA===!0,H=c.useWasm!==!1,W=h?h.length:c.length??NaN,z=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!Ai&&!j,ct=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:!!(v===I2&&x===B2&&R===z2&&y&&_&&E&&Bl(y,document.baseURI)&&Bl(_,document.baseURI)&&Bl(E,document.baseURI)),Z=null;xD(p);const et={canvasFactory:new at({ownerDocument:rt,enableHWA:P}),filterFactory:new nt({docId:e,ownerDocument:rt}),cMapReaderFactory:ct?null:new v({baseUrl:y,isCompressed:w}),standardFontDataFactory:ct?null:new x({baseUrl:_}),wasmFactory:ct?null:new R({baseUrl:E})};f||(f=sc.create({verbosity:p,port:fo.workerPort}),t._worker=f);const mt={docId:e,apiVersion:"5.4.530",data:s,password:o,disableAutoFetch:$,rangeChunkSize:u,length:W,docBaseUrl:m,enableXfa:ot,evaluatorOptions:{maxImageSize:M,disableFontFace:j,ignoreErrors:D,isEvalSupported:k,isOffscreenCanvasSupported:N,isImageDecoderSupported:I,canvasMaxAreaInBytes:G,fontExtraProperties:tt,useSystemFonts:z,useWasm:H,useWorkerFetch:ct,cMapUrl:y,iccUrl:S,standardFontDataUrl:_,wasmUrl:E}},gt={ownerDocument:rt,pdfBug:K,styleElement:Z,loadingParams:{disableAutoFetch:$,enableXfa:ot}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Tt=f.messageHandler.sendWithPromise("GetDocRequest",mt,s?[s.buffer]:null);let qt;if(h)qt=new TR(h,{disableRange:lt,disableStream:O});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ie=Bl(i)?kR:Ai?HR:FR;qt=new ie({url:i,length:W,httpHeaders:n,withCredentials:a,rangeChunkSize:u,disableRange:lt,disableStream:O})}return Tt.then(ie=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Pe=new zl(e,ie,f.port),be=new WR(Pe,t,qt,gt,et,P);t._transport=be,Pe.send("Ready",null)})}).catch(t._capability.reject),t}class Gm{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Gm.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class iS{#t=Promise.withResolvers();#e=[];#s=[];#i=[];#a=[];constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class XR{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class YR{#t=!1;constructor(t,e,i,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new R2:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new eS,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:n=!1}={}){return new bc({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:s="display",annotationMode:n=tr.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:h=null,annotationCanvasMap:u=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:m=!1,recordOperations:y=!1,operationsFilter:w=null}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(s,n,p,m),{renderingIntent:S,cacheKey:_}=v;this.#t=!1,h||=this._transport.getOptionalContentConfig(S);let x=this._intentStates.get(_);x||(x=Object.create(null),this._intentStates.set(_,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const E=!!(S&Xi.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(y||R),M=I=>{if(x.renderTasks.delete(k),D){const G=k.gfx?.dependencyTracker.take();G&&(k.stepper&&k.stepper.setOperatorBBoxes(G,k.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=G))}E&&(this.#t=!0),this.#e(),I?(k.capability.reject(I),this._abortOperatorList({intentState:x,reason:I instanceof Error?I:new Error(I)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new ro({callback:M,params:{canvas:e,canvasContext:t,dependencyTracker:D?new uR(e,x.operatorList.length,R):null,viewport:i,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:w});(x.renderTasks||=new Set).add(k);const N=k.task;return Promise.all([x.displayReadyCapability.promise,h]).then(([I,G])=>{if(this.destroyed){M();return}if(this._stats?.time("Rendering"),!(G.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:I,optionalContentConfig:G}),k.operatorListChanged()}).catch(M),N}getOperatorList({intent:t="display",annotationMode:e=tr.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){function n(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(h))}const a=this._transport.getRenderingIntent(t,e,i,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let h;return o.opListReadCapability||(h=Object.create(null),h.operatorListChanged=n,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(h),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>ic.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function n(){a.read().then(function({value:h,done:u}){if(u){i(o);return}o.lang??=h.lang,Object.assign(o.styles,h.styles),o.items.push(...h.items),n()},s)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};n()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new R2),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:n,transfer:a}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:n,modifiedIds:s},a).getReader(),u=this._intentStates.get(e);u.streamReader=h;const f=()=>{h.read().then(({value:p,done:m})=>{if(m){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,u),f())},p=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const m of u.renderTasks)m.operatorListChanged();this.#e()}if(u.displayReadyCapability)u.displayReadyCapability.reject(p);else if(u.opListReadCapability)u.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Fm){let s=VR;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new ar(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,n]of this._intentStates)if(n===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var ir,_s,mn,jr,Pu,Hr,Ur,Si,bu,sS,nS,jl,go,vu;const Ae=class Ae{constructor({name:t=null,port:e=null,verbosity:i=CD()}={}){Ve(this,Si);Ve(this,ir,Promise.withResolvers());Ve(this,_s,null);Ve(this,mn,null);Ve(this,jr,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(_t(Ae,Ur).has(e))throw new Error("Cannot use more than one PDFWorker per port.");_t(Ae,Ur).set(e,this),qe(this,Si,sS).call(this,e)}else qe(this,Si,nS).call(this)}get promise(){return _t(this,ir).promise}get port(){return _t(this,mn)}get messageHandler(){return _t(this,_s)}destroy(){this.destroyed=!0,_t(this,jr)?.terminate(),pe(this,jr,null),_t(Ae,Ur).delete(_t(this,mn)),pe(this,mn,null),_t(this,_s)?.destroy(),pe(this,_s,null)}static create(t){const e=_t(this,Ur).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ae(t)}static get workerSrc(){if(fo.workerSrc)return fo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>_t(this,go,vu)?_t(this,go,vu):(await import(this.workerSrc)).WorkerMessageHandler)())}};ir=new WeakMap,_s=new WeakMap,mn=new WeakMap,jr=new WeakMap,Pu=new WeakMap,Hr=new WeakMap,Ur=new WeakMap,Si=new WeakSet,bu=function(){_t(this,ir).resolve(),_t(this,_s).send("configure",{verbosity:this.verbosity})},sS=function(t){pe(this,mn,t),pe(this,_s,new zl("main","worker",t)),_t(this,_s).on("ready",()=>{}),qe(this,Si,bu).call(this)},nS=function(){if(_t(Ae,Hr)||_t(Ae,go,vu)){qe(this,Si,jl).call(this);return}let{workerSrc:t}=Ae;try{Ae._isSameOrigin(window.location,t)||(t=Ae._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new zl("main","worker",e),s=()=>{n.abort(),i.destroy(),e.terminate(),this.destroyed?_t(this,ir).reject(new Error("Worker was destroyed")):qe(this,Si,jl).call(this)},n=new AbortController;e.addEventListener("error",()=>{_t(this,jr)||s()},{signal:n.signal}),i.on("test",o=>{if(n.abort(),this.destroyed||!o){s();return}pe(this,_s,i),pe(this,mn,e),pe(this,jr,e),qe(this,Si,bu).call(this)}),i.on("ready",o=>{if(n.abort(),this.destroyed){s();return}try{a()}catch{qe(this,Si,jl).call(this)}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{id("The worker has been disabled.")}qe(this,Si,jl).call(this)},jl=function(){_t(Ae,Hr)||(xt("Setting up fake worker."),pe(Ae,Hr,!0)),Ae._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){_t(this,ir).reject(new Error("Worker was destroyed"));return}const e=new iR;pe(this,mn,e);const i=`fake${Sp(Ae,Pu)._++}`,s=new zl(i+"_worker",i,e);t.setup(s,e),pe(this,_s,new zl(i,i+"_worker",e)),qe(this,Si,bu).call(this)}).catch(t=>{_t(this,ir).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},go=new WeakSet,vu=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ve(Ae,go),Ve(Ae,Pu,0),Ve(Ae,Hr,!1),Ve(Ae,Ur,new WeakMap),Ai&&(pe(Ae,Hr,!0),fo.workerSrc||="./pdf.worker.mjs"),Ae._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},Ae._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ae.fromPort=t=>{if(BD("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ae.create(t)};let sc=Ae;class WR{#t=new Map;#e=new Map;#s=new Map;#i=new Map;#a=null;constructor(t,e,i,s,n,a){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new eS,this.fontLoader=new WD({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.wasmFactory=n.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#n(t,e=null){const i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,s),s}get annotationStorage(){return Ct(this,"annotationStorage",new jm)}getRenderingIntent(t,e=tr.ENABLE,i=null,s=!1,n=!1){let a=Xi.DISPLAY,o=tm;switch(t){case"any":a=Xi.ANY;break;case"display":break;case"print":a=Xi.PRINT;break;default:xt(`getRenderingIntent - invalid intent: ${t}`)}const h=a&Xi.PRINT&&i instanceof $_?i:this.annotationStorage;switch(e){case tr.DISABLE:a+=Xi.ANNOTATIONS_DISABLE;break;case tr.ENABLE:break;case tr.ENABLE_FORMS:a+=Xi.ANNOTATIONS_FORMS;break;case tr.ENABLE_STORAGE:a+=Xi.ANNOTATIONS_STORAGE,o=h.serializable;break;default:xt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=Xi.IS_EDITING),n&&(a+=Xi.OPLIST);const{ids:u,hash:f}=h.modifiedIds,p=[a,o.hash,f];return{renderingIntent:a,cacheKey:p.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#s.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Yi.cleanup(),this._networkStream?.cancelAllRequests(new ar("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{Vt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=n=>{this._lastProgress={loaded:n.loaded,total:n.total}},s.onPull=()=>{this._fullReader.read().then(function({value:n,done:a}){if(a){s.close();return}Vt(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(n),1,[n])}).catch(n=>{s.error(n)})},s.onCancel=n=>{this._fullReader.cancel(n),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:n,contentLength:a}=this._fullReader;return(!s||!n)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{e.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:s,isRangeSupported:n,contentLength:a}}),t.on("GetRangeReader",(i,s)=>{Vt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(i.begin,i.end);if(!n){s.close();return}s.onPull=()=>{n.read().then(function({value:a,done:o}){if(o){s.close();return}Vt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{n.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new XR(i,this))}),t.on("DocException",i=>{e._capability.reject(Oi(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw Oi(i);const s=n=>{n instanceof Error?this.#a.reject(n):this.#a.resolve({password:n})};e.onPassword(s,i.code)}catch(s){this.#a.reject(s)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,n])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in n){const p=n.error;xt(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const a=new le(n),o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,h=new KD(a,o,n.extra,n.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:u}=n;Vt(u,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,m]of p.objs)if(m?.ref===u)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new QD(n));break;case"Image":this.commonObjs.resolve(i,n);break;case"Pattern":const f=new ti(n);this.commonObjs.resolve(i,f.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,n,a])=>{if(this.destroyed)return;const o=this.#e.get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(n){case"Image":case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${n}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#s.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&this.#i.set(n.refStr,t);const a=new YR(e,n,this,this._params.pdfBug);return this.#e.set(e,a),a});return this.#s.set(e,s),s}getPageIndex(t){return em(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#n("GetOptionalContentConfig").then(e=>new CR(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new ER(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:s[2]}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Yi.cleanup()}}cachedPageNumber(t){if(!em(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class KR{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ro{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:n,operatorList:a,pageIndex:o,canvasFactory:h,filterFactory:u,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:m=null,enableHWA:y=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=h,this.filterFactory=u,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new KR(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=y,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ro.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ro.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:n,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new uo(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:n}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ro.#e.delete(this._canvas),t||=new Fm(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ro.#e.delete(this._canvas),this.callback())))}}const QR="5.4.530",ZR="50cc4adac";class gs{#t=null;#e=null;#s;#i=null;#a=!1;#n=!1;#r=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Ct(this,"_keyboardManager",new Ac([[["Escape","mac+Escape"],gs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],gs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],gs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],gs.prototype._moveToPrevious],[["Home","mac+Home"],gs.prototype._moveToBeginning],[["End","mac+End"],gs.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#n=!1,this.#r=t):this.#n=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",gs.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#r&&(t.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#s,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",ys,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(t.id=`${this.#r.id}_colorpicker_dropdown`);for(const[i,s]of this.#l.highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",s),n.title=i,n.setAttribute("data-l10n-id",gs.#d[i]);const a=document.createElement("span");n.append(a),a.className="swatch",a.style.backgroundColor=s,n.ariaSelected=s===this.#s,n.addEventListener("click",this.#f.bind(this,s),{signal:e}),t.append(n)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Gt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastElementChild?.focus()}#m(t){gs._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#u();this.#t.append(e)}#h(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#p){this.#r?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class nc{#t=null;#e=null;#s=null;static#i=null;constructor(t){this.#e=t,this.#s=t._uiManager,nc.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:i}=this.#e,s=this.#t=document.createElement("input");return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",nc.#i[t]),s.addEventListener("input",()=>{this.#s.updateParams(e,s.value)},{signal:this.#s._signal}),s}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Z2(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function Ml(c){return Math.max(0,Math.min(255,255*c))}class J2{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ml(t),[t,t,t]}static G_HTML([t]){const e=Z2(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Ml)}static RGB_HTML(t){return`#${t.map(Z2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[Ml(1-Math.min(1,t+s)),Ml(1-Math.min(1,i+s)),Ml(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,n=1-e,a=1-i,o=Math.min(s,n,a);return["CMYK",s,n,a,o]}}class JR{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){fe("Abstract method `_createSVG` called.")}}class Ru extends JR{_createSVG(t){return document.createElementNS(fn,t)}}const tk=9,Kr=new WeakSet,ek=new Date().getTimezoneOffset()*60*1e3;class gg{static create(t){switch(t.data.annotationType){case Ue.LINK:return new Vm(t);case Ue.TEXT:return new sk(t);case Ue.WIDGET:switch(t.data.fieldType){case"Tx":return new nk(t);case"Btn":return t.data.radioButton?new rS(t):t.data.checkBox?new ak(t):new ok(t);case"Ch":return new lk(t);case"Sig":return new rk(t)}return new ea(t);case Ue.POPUP:return new nm(t);case Ue.FREETEXT:return new aS(t);case Ue.LINE:return new hk(t);case Ue.SQUARE:return new uk(t);case Ue.CIRCLE:return new dk(t);case Ue.POLYLINE:return new oS(t);case Ue.CARET:return new pk(t);case Ue.INK:return new qm(t);case Ue.POLYGON:return new fk(t);case Ue.HIGHLIGHT:return new lS(t);case Ue.UNDERLINE:return new gk(t);case Ue.SQUIGGLY:return new mk(t);case Ue.STRIKEOUT:return new yk(t);case Ue.STAMP:return new cS(t);case Ue.FILEATTACHMENT:return new bk(t);default:return new xe(t)}}}class xe{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xe._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:s}=this.data;let n=-1/0,a=-1/0;if(e?.length>=8){for(let o=0;o<e.length;o+=8)e[o+1]>a?(a=e[o+1],n=e[o+2]):e[o+1]===a&&(n=Math.max(n,e[o+2]));return[n,a]}if(i?.length>=1){for(const o of i)for(let h=0,u=o.length;h<u;h+=2)o[h+1]>a?(a=o[h+1],n=o[h]):o[h+1]===a&&(n=Math.max(n,o[h]));if(n!==1/0)return[n,a]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:a}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-n)/i,t[1]=100*(t[1]-a)/s,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${tc}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${tc}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#i(e);let s=this.#s?.popup||this.popup;!s&&i?.text&&(this._createPopup(i),s=this.#s.popup),s&&(s.updateEdited(t),i?.deleted&&(s.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:h}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-o)/n}%`,e.top=`${100*(a-t[3]+h)/a}%`,s===0?(e.width=`${100*(t[2]-t[0])/n}%`,e.height=`${100*(t[3]-t[1])/a}%`):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",e.id),!(this instanceof ea)&&!(this instanceof Vm)&&(n.tabIndex=0);const{style:a}=n;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(n.title=e.alternativeText),e.noRotate&&n.classList.add("norotate"),!e.rect||this instanceof nm){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,n),n}const{width:o,height:h}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(v>0||S>0){const x=`calc(${v}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof rS){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;a.borderRadius=x}switch(e.borderStyle.style){case Qa.SOLID:a.borderStyle="solid";break;case Qa.DASHED:a.borderStyle="dashed";break;case Qa.BEVELED:xt("Unimplemented border style: beveled");break;case Qa.INSET:xt("Unimplemented border style: inset");break;case Qa.UNDERLINE:a.borderBottomStyle="solid";break}const _=e.borderColor||null;_?(this.#e=!0,a.borderColor=ht.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):a.borderWidth=0}const u=ht.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:p,pageX:m,pageY:y}=s.rawDims;a.left=`${100*(u[0]-m)/f}%`,a.top=`${100*(u[1]-y)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(a.width=`${100*o/f}%`,a.height=`${100*h/p}%`):this.setRotation(w,n),n}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:n,height:a}=this;t%180!==0&&([n,a]=[a,n]),e.style.width=`${100*n/i}%`,e.style.height=`${100*a/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const n=s.detail[e],a=n[0],o=n.slice(1);s.target.style[i]=J2[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:J2[`${a}_rgb`](o)})};return Ct(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail))(t[s]||i[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,n]of Object.entries(e)){const a=i[s];if(a){const o={detail:{[s]:n},target:t};a(o),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,n]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,S,_,x]=t.subarray(2,6);if(s===v&&n===S&&e===_&&i===x)return}const{style:a}=this.container;let o;if(this.#e){const{borderColor:v,borderWidth:S}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=s-e,u=n-i,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const m=f.createElement("defs");p.append(m);const y=f.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),m.append(y);for(let v=2,S=t.length;v<S;v+=8){const _=t[v],x=t[v+1],E=t[v+2],R=t[v+3],D=f.createElement("rect"),M=(E-e)/h,k=(n-x)/u,N=(_-E)/h,I=(x-R)/u;D.setAttribute("x",M),D.setAttribute("y",k),D.setAttribute("width",N),D.setAttribute("height",I),y.append(D),o?.push(`<rect vector-effect="non-scaling-stroke" x="${M}" y="${k}" width="${N}" height="${I}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let i,s;t?(i={str:t.text},s=t.date):(i=e.contentsObj,s=e.modificationDate),this.#s=new nm({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:n,id:a,exportValues:o}of s){if(n===-1||a===e)continue;const h=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Kr.has(u)){xt(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:h,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:n}=s,a=s.getAttribute("data-element-id");a!==e&&Kr.has(s)&&i.push({id:a,exportValue:n,domElement:s})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class ik extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Vm extends xe{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(this.#s(i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",s=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#t()}#s(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const n=i.get(s);n&&(t[n]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:s,refs:n,include:a}=e,o=[];if(s.length!==0||n.length!==0){const f=new Set(n);for(const p of s){const m=this._fieldObjects[p]||[];for(const{id:y}of m)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&o.push(m)}else for(const f of Object.values(this._fieldObjects))o.push(...f);const h=this.annotationStorage,u=[];for(const f of o){const{id:p}=f;switch(u.push(p),f.type){case"text":{const y=f.defaultValue||"";h.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;h.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";h.setValue(p,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Kr.has(m)){xt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}}class sk extends xe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class ea extends xe{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ke.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,n){i.includes("mouse")?t.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(a)}})})}_setEventListeners(t,e,i,s){for(const[n,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,n,a,s),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ht.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||tk,n=t.style;let a;const o=2,h=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),f=Math.round(u/(og*s))||1,p=u/f;a=Math.min(s,h(p/og))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,h(u/og))}n.fontSize=`calc(${a}px * var(--total-scale-factor))`,n.color=ht.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(n.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class nk extends ea{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const n=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),n.setValue(a.id,{[s]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const s=t.getValue(e,{value:this.data.fieldValue});let n=s.value||"";const a=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;a&&n.length>a&&(n=n.slice(0,a));let o=s.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const h={userValue:n,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??n,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",o??n),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Kr.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:u,datetimeType:f,timeStep:p}=this.data,m=!!f&&this.enableScripting;u&&(i.title=u),this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";i.value=h.userValue=v,h.formattedValue=null});let y=w=>{const{formattedValue:v}=h;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",v=>{if(h.focused)return;const{target:S}=v;if(m&&(S.type=f,p&&(S.step=p)),h.userValue){const _=h.userValue;if(m)if(f==="time"){const x=new Date(_),E=[x.getHours(),x.getMinutes(),x.getSeconds()];S.value=E.map(R=>R.toString().padStart(2,"0")).join(":")}else S.value=new Date(_-ek).toISOString().split(f==="date"?"T":".",1)[0];else S.value=_}h.lastCommittedValue=S.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const S={value(_){h.userValue=_.detail.value??"",m||t.setValue(e,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:x}=_.detail;h.formattedValue=x,x!=null&&_.target!==document.activeElement&&(_.target.value=x);const E={formattedValue:x};m&&(E.value=x),t.setValue(e,E)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:x}=_.detail,{target:E}=_;if(x===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",x);let R=h.userValue;!R||R.length<=x||(R=R.slice(0,x),E.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(S,v)}),i.addEventListener("keydown",v=>{h.commitKey=1;let S=-1;if(v.key==="Escape"?S=0:v.key==="Enter"&&!this.data.multiLine?S=2:v.key==="Tab"&&(h.commitKey=3),S===-1)return;const{value:_}=v.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:S,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",v=>{if(!h.focused||!v.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:S}=v;let{value:_}=S;if(m){if(_&&f==="time"){const x=_.split(":").map(E=>parseInt(E,10));_=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),S.step=""}else _.includes("T")||(_=`${_}T00:00`),_=new Date(_).valueOf();S.type="text"}h.userValue=_,h.lastCommittedValue!==_&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),w(v)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",v=>{h.lastCommittedValue=null;const{data:S,target:_}=v,{value:x,selectionStart:E,selectionEnd:R}=_;let D=E,M=R;switch(v.inputType){case"deleteWordBackward":{const k=x.substring(0,E).match(/\w*[^\w]*$/);k&&(D-=k[0].length);break}case"deleteWordForward":{const k=x.substring(E).match(/^[^\w]*\w*/);k&&(M+=k[0].length);break}case"deleteContentBackward":E===R&&(D-=1);break;case"deleteContentForward":E===R&&(M+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:S||"",willCommit:!1,selStart:D,selEnd:M}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class rk extends ea{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ak extends ea{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return Kr.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.setAttribute("exportValue",e.exportValue),n.tabIndex=0,n.addEventListener("change",a=>{const{name:o,checked:h}=a.target;for(const u of this._getElementsByName(o,i)){const f=h&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=f),t.setValue(u.id,{value:f})}t.setValue(i,{value:h})}),n.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",a=>{const o={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class rS extends ea{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});const n=document.createElement("input");if(Kr.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.tabIndex=0,n.addEventListener("change",a=>{const{name:o,checked:h}=a.target;for(const u of this._getElementsByName(o,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:h})}),n.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;n.addEventListener("updatefromsandbox",o=>{const h={value:u=>{const f=a===u.detail.value;for(const p of this._getElementsByName(u.target.name)){const m=f&&p.id===i;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(h,o)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class ok extends Vm{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class lk extends ea{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Kr.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,i.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),n=!1),s.append(p)}let a=null;if(n){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),s.prepend(f),a=()=>{f.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=f=>{const p=f?"value":"textContent",{options:m,multiple:y}=s;return y?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let h=o(!1);const u=f=>{const p=f.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",f=>{const p={value(m){a?.();const y=m.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const v of s.options)v.selected=w.has(v.value);t.setValue(e,{value:o(!0)}),h=o(!1)},multipleSelection(m){s.multiple=!0},remove(m){const y=s.options,w=m.detail.remove;y[w].selected=!1,s.remove(w),y.length>0&&Array.prototype.findIndex.call(y,S=>S.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:o(!0),items:u(m)}),h=o(!1)},clear(m){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=o(!1)},insert(m){const{index:y,displayValue:w,exportValue:v}=m.detail.insert,S=s.children[y],_=document.createElement("option");_.textContent=w,_.value=v,S?S.before(_):s.append(_),t.setValue(e,{value:o(!0),items:u(m)}),h=o(!1)},items(m){const{items:y}=m.detail;for(;s.length!==0;)s.remove(0);for(const w of y){const{displayValue:v,exportValue:S}=w,_=document.createElement("option");_.textContent=v,_.value=S,s.append(_)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:o(!0),items:u(m)}),h=o(!1)},indices(m){const y=new Set(m.detail.indices);for(const w of m.target.options)w.selected=y.has(w.index);t.setValue(e,{value:o(!0)}),h=o(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,f)}),s.addEventListener("input",f=>{const p=o(!0),m=o(!1);t.setValue(e,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):s.addEventListener("input",function(f){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class nm extends xe{constructor(t){const{data:e,elements:i,parent:s}=t,n=!!s._commentManager;if(super(t,{isRenderable:!n&&xe._hasPopupData(e)}),this.elements=i,n&&xe._hasPopupData(e)){const a=this.popup=this.#t();for(const o of i)o.popup=a}else this.popup=null}#t(){return new ck({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${so}${s}`).join(",")),this.container}}class ck{#t=null;#e=this.#G.bind(this);#s=this.#z.bind(this);#i=this.#O.bind(this);#a=this.#_.bind(this);#n=null;#r=null;#o=null;#c=null;#l=null;#d=null;#u=null;#f=!1;#m=null;#g=null;#h=null;#p=null;#y=null;#v=null;#b=null;#x=null;#S=null;#A=null;#T=!1;#w=null;#E=null;constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:n,contentsObj:a,richText:o,parent:h,rect:u,parentRect:f,open:p,commentManager:m=null}){this.#r=t,this.#S=s,this.#o=a,this.#x=o,this.#d=h,this.#n=e,this.#b=u,this.#u=f,this.#l=i,this.#t=m,this.#w=i[0],this.#c=Qg.toDateObject(n),this.trigger=i.flatMap(y=>y.getElementsToTriggerPopup()),m||(this.#R(),this.#r.hidden=!0,p&&this.#_())}#R(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#s,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#g=new AbortController,e=this.#w.hasOwnCommentButton,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},s=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},n=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",this.#e,{signal:t}),a.addEventListener("click",i,{signal:t}),a.addEventListener("pointerenter",s,{signal:t}),a.addEventListener("pointerleave",n,{signal:t}),a.classList.add("popupTriggerArea")}else{const a=this.#p=document.createElement("button");a.className="annotationCommentButton";const o=this.#w.container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#D(),a.addEventListener("keydown",this.#e,{signal:t}),a.addEventListener("click",i,{signal:t}),a.addEventListener("pointerenter",s,{signal:t}),a.addEventListener("pointerleave",n,{signal:t}),o.after(a)}}#D(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:s,modificationDate:n}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:s,modificationDate:n}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#w.commentText,this.#E}set comment(t){t!==this.comment&&(this.#w.commentText=this.#E=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:s,y:n,width:a,height:o}=this.#w.layer.getBoundingClientRect();return[(t-s)/a,(e+i-n)/o]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:n,y:a,width:o,height:h}=s;this.#t.showDialog(null,this,n+e*o,a+i*h,{...t,parentDimensions:s})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#n){const i=t.style.outlineColor=ht.makeHexColor(...this.#n);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#S?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#S}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}z_({html:this.#L||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#r.append(t)}get#L(){const t=this.#x,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#x.html||null}get#P(){return this.#L?.attributes?.style?.fontSize||0}get#B(){return this.#L?.attributes?.style?.color||null}#N(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#B,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const n of t.split(`
`))e.push({name:"span",value:n,attributes:s});return i}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#I(),this.#E=e.text)),t&&(this.#y=null,this.#M(),this.#D());return}if(i||e?.deleted){this.remove();return}this.#R(),this.#A||={contentsObj:this.#o,richText:this.#x},t&&(this.#h=null),e&&e.text&&(this.#x=this.#N(e.text),this.#c=Qg.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#x}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#h=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#h!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:n}}}=this.#d;let a=!!this.#u,o=a?this.#u:this.#b;for(const w of this.#l)if(!o||ht.intersect(w.data.rect,o)!==null){o=w.data.rect,a=!0;break}const h=ht.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),f=a?o[2]-o[0]+5:0,p=h[0]+f,m=h[1];this.#h=[100*(p-s)/e,100*(m-n)/i];const{style:y}=this.#r;y.left=`${this.#h[0]}%`,y.top=`${this.#h[1]}%`}#_(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#e)):(this.#z(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#e))}#O(){this.#m||this.render(),this.isVisible?this.#f&&this.#r.classList.add("focused"):(this.#C(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#z(){this.#r.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#r.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#T&&(this.#m||this.#O(),this.#T=!1,this.#r.hidden=!1))}get isVisible(){return this.#t?!1:this.#r.hidden===!1}}class aS extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class hk extends xe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,s=this.svgFactory.create(e,i,!0),n=this.#t=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),s.append(n),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class uk extends xe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",n/2),a.setAttribute("y",n/2),a.setAttribute("width",e-n),a.setAttribute("height",i-n),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dk extends xe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-n/2),a.setAttribute("ry",i/2-n/2),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class oS extends xe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:s},width:n,height:a}=this;if(!e)return this.container;const o=this.svgFactory.create(n,a,!0);let h=[];for(let f=0,p=e.length;f<p;f+=2){const m=e[f]-t[0],y=t[3]-e[f+1];h.push(`${m},${y}`)}h=h.join(" ");const u=this.#t=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",h),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class fk extends oS{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pk extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class qm extends xe{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Dt.HIGHLIGHT:Dt.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:s,popupRef:n}}=this,{transform:a,width:o,height:h}=this.#s(e,t),u=this.svgFactory.create(o,h,!0),f=this.#t=this.svgFactory.createElement("svg:g");u.append(f),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,m=i.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);this.#e.push(y),y.setAttribute("points",i[p].join(",")),f.append(y)}return!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:s}=t,n=this.#t;if(e>=0&&n.setAttribute("stroke-width",e||1),i)for(let a=0,o=this.#e.length;a<o;a++)this.#e[a].setAttribute("points",i[a].join(","));if(s){const{transform:a,width:o,height:h}=this.#s(this.data.rotation,s);n.parentElement.setAttribute("viewBox",`0 0 ${o} ${h}`),n.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class lS extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Dt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class gk extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class mk extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class yk extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class cS extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class bk extends xe{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:s}=Ke.platform;return t.addEventListener("keydown",n=>{n.key==="Enter"&&(s?n.metaKey:n.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Xm{#t=null;#e=null;#s=null;#i=new Map;#a=null;#n=null;#r=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:n,viewport:a,structTreeLayer:o,commentManager:h,linkService:u,annotationStorage:f}){this.div=t,this.#t=e,this.#e=i,this.#a=o||null,this.#n=u||null,this.#s=f||new jm,this.page=n,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:e}=t,i=this.div;Wr(i,this.viewport);const s=new Map,n=[],a={data:null,layer:i,linkService:this.#n,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ru,annotationStorage:this.#s,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const h=o.annotationType===Ue.POPUP;if(h){const p=s.get(o.id);if(!p)continue;if(!this._commentManager){n.push(o);continue}a.elements=p}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const u=gg.create(a);if(!u.isRenderable)continue;if(!h&&(this.#r.push(u),o.popupRef)){const p=s.get(o.popupRef);p?p.push(u):s.set(o.popupRef,[u])}const f=u.render();o.hidden&&(f.style.visibility="hidden"),u._isEditable&&(this.#i.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}await this.#c();for(const o of n){const h=a.elements=s.get(o.id);a.data=o;const u=gg.create(a);if(!u.isRenderable)continue;const f=u.render();u.contentElement.id=`${so}${o.id}`,o.hidden&&(f.style.visibility="hidden"),h.at(-1).container.after(f)}this.#l()}async#c(){if(this.#r.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:s}}of this.#r){const n=i.id=`${so}${s}`;t.push(this.#a?.getAriaAttributes(n).then(a=>{if(a)for(const[o,h]of a)i.setAttribute(o,h)}))}}this.#r.sort(({data:{rect:[i,s,n,a]}},{data:{rect:[o,h,u,f]}})=>{if(i===n&&s===a)return 1;if(o===u&&h===f)return-1;const p=a,m=s,y=(s+a)/2,w=f,v=h,S=(h+f)/2;if(y>=w&&S<=m)return-1;if(S>=p&&y<=v)return 1;const _=(i+n)/2,x=(o+u)/2;return _-x});const e=document.createDocumentFragment();for(const i of this.#r)e.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&e.append(i.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const i of this.#r)this.#t.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#n,svgFactory:new Ru,parent:this};for(const i of t){i.borderStyle||=Xm._defaultBorderStyle,e.data=i;const s=gg.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${so}${i.id}`,this.#r.push(s))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,Wr(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:n}=s;n?n.nodeName==="CANVAS"?n.replaceWith(i):n.classList.contains("annotationContent")?n.after(i):n.before(i):s.append(i);const a=this.#i.get(e);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,s.id,i),a._hasNoCanvas=!1):a.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:s}=t,n=new ik({data:{id:i,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#n,annotationStorage:this.#s});return n.render(),n.contentElement.id=`${so}${i}`,n.createOrUpdatePopup(),this.#r.push(n),n}removeAnnotation(t){const e=this.#r.findIndex(s=>s.data.id===t);if(e<0)return;const[i]=this.#r.splice(e,1);this.#t?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Ct(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Qa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const ru=/\r\n?|\n/g;class ei extends vt{#t="";#e=`${this.id}-editor`;#s=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ei.prototype,e=n=>n.isEmpty(),i=or.TRANSLATE_SMALL,s=or.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Ac([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=Dt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||ei._defaultColor||vt._defaultLineColor,this.#i=t.fontSize||ei._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){vt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Gt.FREETEXT_SIZE:ei._defaultFontSize=e;break;case Gt.FREETEXT_COLOR:ei._defaultColor=e;break}}updateParams(t,e){switch(t){case Gt.FREETEXT_SIZE:this.#a(e);break;case Gt.FREETEXT_COLOR:this.#n(e);break}}static get defaultPropertiesToUpdate(){return[[Gt.FREETEXT_SIZE,ei._defaultFontSize],[Gt.FREETEXT_COLOR,ei._defaultColor||vt._defaultLineColor]]}get propertiesToUpdate(){return[[Gt.FREETEXT_SIZE,this.#i],[Gt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new nc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Gt.FREETEXT_COLOR}#a(t){const e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#i)*this.parentScale),this.#i=s,this.#o()},i=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Gt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#n(t){const e=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Gt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-ei._internalPadding*t,-(ei._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(ei.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:n}=this,a=n.style.display,o=n.classList.contains("hidden");n.classList.remove("hidden"),n.style.display="hidden",s.div.append(this.div),i=n.getBoundingClientRect(),n.remove(),n.style.display=a,n.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#r().trimEnd();if(t===e)return;const i=s=>{if(this.#t=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ei._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,n]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,h]=this.getInitialTranslation();[o,h]=this.pageTranslationToScreen(o,h);const[u,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(a[0]-p)/u,w=e+this.height-(a[1]-m)/f;break;case 90:y=t+(a[0]-p)/u,w=e-(a[1]-m)/f,[o,h]=[h,-o];break;case 180:y=t-this.width+(a[0]-p)/u,w=e-(a[1]-m)/f,[o,h]=[-o,-h];break;case 270:y=t+(a[0]-p-this.height*f)/u,w=e+(a[1]-m-this.width*u)/f,[o,h]=[-h,o];break}this.setAt(y*s,w*n,o,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ru,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=ei.#u(e.getData("text")||"").replaceAll(ru,`
`);if(!s)return;const n=window.getSelection();if(!n.rangeCount)return;this.editorDiv.normalize(),n.deleteFromDocument();const a=n.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),n.collapseToStart();return}const{startContainer:o,startOffset:h}=a,u=[],f=[];if(o.nodeType===Node.TEXT_NODE){const y=o.parentElement;if(f.push(o.nodeValue.slice(h).replaceAll(ru,"")),y!==this.editorDiv){let w=u;for(const v of this.editorDiv.childNodes){if(v===y){w=f;continue}w.push(ei.#c(v))}}u.push(o.nodeValue.slice(0,h).replaceAll(ru,""))}else if(o===this.editorDiv){let y=u,w=0;for(const v of this.editorDiv.childNodes)w++===h&&(y=f),y.push(ei.#c(v))}this.#t=`${u.join(`
`)}${s}${f.join(`
`)}`,this.#l();const p=new Range;let m=Math.sumPrecise(u.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(m<=w){p.setStart(y,m),p.setEnd(y,m);break}m-=w}n.removeAllRanges(),n.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#u(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ei._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let s=null;if(t instanceof aS){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:h,rotation:u,id:f,popupRef:p,richText:m,contentsObj:y,creationDate:w,modificationDate:v},textContent:S,textPosition:_,parent:{page:{pageNumber:x}}}=t;if(!S||S.length===0)return null;s=t={annotationType:Dt.FREETEXT,color:Array.from(o),fontSize:a,value:S.join(`
`),position:_,pageIndex:x-1,rect:h.slice(0),rotation:u,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:y?.str||null,richText:m,creationDate:w,modificationDate:v}}const n=await super.deserialize(t,e,i);return n.#i=t.fontSize,n.color=ht.makeHexColor(...t.color),n.#t=ei.#u(t.value),n._initialData=s,t.comment&&n.setCommentData(t),n}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:s,pageIndex:n}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((a,o)=>a!==s[o])||t.pageIndex!==n}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const s of this.#t.split(`
`)){const n=document.createElement("div");n.append(s?document.createTextNode(s):document.createElement("br")),e.append(n)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class dt{static PRECISION=1e-4;toSVGPath(){fe("Abstract method `toSVGPath` must be implemented.")}get box(){fe("Abstract getter `box` must be implemented.")}serialize(t,e){fe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,n,a){a||=new Float32Array(t.length);for(let o=0,h=t.length;o<h;o+=2)a[o]=e+t[o]*s,a[o+1]=i+t[o+1]*n;return a}static _rescaleAndSwap(t,e,i,s,n,a){a||=new Float32Array(t.length);for(let o=0,h=t.length;o<h;o+=2)a[o]=e+t[o+1]*s,a[o+1]=i+t[o]*n;return a}static _translate(t,e,i,s){s||=new Float32Array(t.length);for(let n=0,a=t.length;n<a;n+=2)s[n]=e+t[n],s[n+1]=i+t[n+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,n){switch(n){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,n,a){return[(t+5*i)/6,(e+5*s)/6,(5*i+n)/6,(5*s+a)/6,(i+n)/2,(s+a)/2]}}class Fr{#t;#e=[];#s;#i;#a=[];#n=new Float32Array(18);#r;#o;#c;#l;#d;#u;#f=[];static#m=8;static#g=2;static#h=Fr.#m+Fr.#g;constructor({x:t,y:e},i,s,n,a,o=0){this.#t=i,this.#u=n*s,this.#i=a,this.#n.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=o,this.#l=Fr.#m*s,this.#c=Fr.#h*s,this.#d=s,this.#f.push(t,e)}isEmpty(){return isNaN(this.#n[8])}#p(){const t=this.#n.subarray(4,6),e=this.#n.subarray(16,18),[i,s,n,a]=this.#t;return[(this.#r+(t[0]-e[0])/2-i)/n,(this.#o+(t[1]-e[1])/2-s)/a,(this.#r+(e[0]-t[0])/2-i)/n,(this.#o+(e[1]-t[1])/2-s)/a]}add({x:t,y:e}){this.#r=t,this.#o=e;const[i,s,n,a]=this.#t;let[o,h,u,f]=this.#n.subarray(8,12);const p=t-u,m=e-f,y=Math.hypot(p,m);if(y<this.#c)return!1;const w=y-this.#l,v=w/y,S=v*p,_=v*m;let x=o,E=h;o=u,h=f,u+=S,f+=_,this.#f?.push(t,e);const R=-_/w,D=S/w,M=R*this.#u,k=D*this.#u;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([u+M,f+k],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([u-M,f-k],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([o+M,h+k],2),this.#a.push(NaN,NaN,NaN,NaN,(o+M-i)/n,(h+k-s)/a),this.#n.set([o-M,h-k],14),this.#e.push(NaN,NaN,NaN,NaN,(o-M-i)/n,(h-k-s)/a)),this.#n.set([x,E,o,h,u,f],6),!this.isEmpty()):(this.#n.set([x,E,o,h,u,f],6),Math.abs(Math.atan2(E-h,x-o)-Math.atan2(_,S))<Math.PI/2?([o,h,u,f]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((o+u)/2-i)/n,((h+f)/2-s)/a),[o,h,x,E]=this.#n.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+o)/2-i)/n,((E+h)/2-s)/a),!0):([x,E,o,h,u,f]=this.#n.subarray(0,6),this.#a.push(((x+5*o)/6-i)/n,((E+5*h)/6-s)/a,((5*o+u)/6-i)/n,((5*h+f)/6-s)/a,((o+u)/2-i)/n,((h+f)/2-s)/a),[u,f,o,h,x,E]=this.#n.subarray(12,18),this.#e.push(((x+5*o)/6-i)/n,((E+5*h)/6-s)/a,((5*o+u)/6-i)/n,((5*h+f)/6-s)/a,((o+u)/2-i)/n,((h+f)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#b(i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,s]=this.#t,[n,a,o,h]=this.#p();return`M${(this.#n[2]-t)/i} ${(this.#n[3]-e)/s} L${(this.#n[4]-t)/i} ${(this.#n[5]-e)/s} L${n} ${a} L${o} ${h} L${(this.#n[16]-t)/i} ${(this.#n[17]-e)/s} L${(this.#n[14]-t)/i} ${(this.#n[15]-e)/s} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,s,n]=this.#t,a=this.#n.subarray(4,6),o=this.#n.subarray(16,18),[h,u,f,p]=this.#p();t.push(`L${(a[0]-e)/s} ${(a[1]-i)/n} L${h} ${u} L${f} ${p} L${(o[0]-e)/s} ${(o[1]-i)/n}`)}newFreeDrawOutline(t,e,i,s,n,a){return new hS(t,e,i,s,n,a)}getOutlines(){const t=this.#a,e=this.#e,i=this.#n,[s,n,a,o]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let p=0,m=h.length-2;p<m;p+=2)h[p]=(this.#f[p]-s)/a,h[p+1]=(this.#f[p+1]-n)/o;if(h[h.length-2]=(this.#r-s)/a,h[h.length-1]=(this.#o-n)/o,isNaN(i[6])&&!this.isEmpty())return this.#x(h);const u=new Float32Array(this.#a.length+24+this.#e.length);let f=t.length;for(let p=0;p<f;p+=2){if(isNaN(t[p])){u[p]=u[p+1]=NaN;continue}u[p]=t[p],u[p+1]=t[p+1]}f=this.#A(u,f);for(let p=e.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(e[p+m])){u[f]=u[f+1]=NaN,f+=2;continue}u[f]=e[p+m],u[f+1]=e[p+m+1],f+=2}return this.#S(u,f),this.newFreeDrawOutline(u,h,this.#t,this.#d,this.#s,this.#i)}#x(t){const e=this.#n,[i,s,n,a]=this.#t,[o,h,u,f]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-i)/n,(e[3]-s)/a,NaN,NaN,NaN,NaN,(e[4]-i)/n,(e[5]-s)/a,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(e[16]-i)/n,(e[17]-s)/a,NaN,NaN,NaN,NaN,(e[14]-i)/n,(e[15]-s)/a],0),this.newFreeDrawOutline(p,t,this.#t,this.#d,this.#s,this.#i)}#S(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#A(t,e){const i=this.#n.subarray(4,6),s=this.#n.subarray(16,18),[n,a,o,h]=this.#t,[u,f,p,m]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-n)/o,(i[1]-a)/h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(s[0]-n)/o,(s[1]-a)/h],e),e+=24}}class hS extends dt{#t;#e=new Float32Array(4);#s;#i;#a;#n;#r;constructor(t,e,i,s,n,a){super(),this.#r=t,this.#a=e,this.#t=i,this.#n=s,this.#s=n,this.#i=a,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(a);const[o,h,u,f]=this.#e;for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-o)/u,t[p+1]=(t[p+1]-h)/f;for(let p=0,m=e.length;p<m;p+=2)e[p]=(e[p]-o)/u,e[p+1]=(e[p+1]-h)/f}toSVGPath(){const t=[`M${this.#r[4]} ${this.#r[5]}`];for(let e=6,i=this.#r.length;e<i;e+=6){if(isNaN(this.#r[e])){t.push(`L${this.#r[e+4]} ${this.#r[e+5]}`);continue}t.push(`C${this.#r[e]} ${this.#r[e+1]} ${this.#r[e+2]} ${this.#r[e+3]} ${this.#r[e+4]} ${this.#r[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,s],n){const a=i-t,o=s-e;let h,u;switch(n){case 0:h=dt._rescale(this.#r,t,s,a,-o),u=dt._rescale(this.#a,t,s,a,-o);break;case 90:h=dt._rescaleAndSwap(this.#r,t,e,a,o),u=dt._rescaleAndSwap(this.#a,t,e,a,o);break;case 180:h=dt._rescale(this.#r,i,e,-a,o),u=dt._rescale(this.#a,i,e,-a,o);break;case 270:h=dt._rescaleAndSwap(this.#r,i,s,-a,-o),u=dt._rescaleAndSwap(this.#a,i,s,-a,-o);break}return{outline:Array.from(h),points:[Array.from(u)]}}#o(t){const e=this.#r;let i=e[4],s=e[5];const n=[i,s,i,s];let a=i,o=s,h=i,u=s;const f=t?Math.max:Math.min,p=new Float32Array(4);for(let y=6,w=e.length;y<w;y+=6){const v=e[y+4],S=e[y+5];isNaN(e[y])?(ht.pointBoundingBox(v,S,n),o>S?(a=v,o=S):o===S&&(a=f(a,v)),u<S?(h=v,u=S):u===S&&(h=f(h,v))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,ht.bezierBoundingBox(i,s,...e.slice(y,y+6),p),ht.rectBoundingBox(p[0],p[1],p[2],p[3],n),o>p[1]?(a=p[0],o=p[1]):o===p[1]&&(a=f(a,p[0])),u<p[3]?(h=p[2],u=p[3]):u===p[3]&&(h=f(h,p[2]))),i=v,s=S}const m=this.#e;m[0]=n[0]-this.#s,m[1]=n[1]-this.#s,m[2]=n[2]-n[0]+2*this.#s,m[3]=n[3]-n[1]+2*this.#s,this.firstPoint=[a,o],this.lastPoint=[h,u]}get box(){return this.#e}newOutliner(t,e,i,s,n,a=0){return new Fr(t,e,i,s,n,a)}getNewOutline(t,e){const[i,s,n,a]=this.#e,[o,h,u,f]=this.#t,p=n*u,m=a*f,y=i*u+o,w=s*f+h,v=this.newOutliner({x:this.#a[0]*p+y,y:this.#a[1]*m+w},this.#t,this.#n,t,this.#i,e??this.#s);for(let S=2;S<this.#a.length;S+=2)v.add({x:this.#a[S]*p+y,y:this.#a[S+1]*m+w});return v.getOutlines()}}class rm{#t;#e;#s;#i=[];#a=[];constructor(t,e=0,i=0,s=!0){const n=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:v,y:S,width:_,height:x}of t){const E=Math.floor((v-e)/a)*a,R=Math.ceil((v+_+e)/a)*a,D=Math.floor((S-e)/a)*a,M=Math.ceil((S+x+e)/a)*a,k=[E,D,M,!0],N=[R,D,M,!1];this.#i.push(k,N),ht.rectBoundingBox(E,D,R,M,n)}const o=n[2]-n[0]+2*i,h=n[3]-n[1]+2*i,u=n[0]-i,f=n[1]-i;let p=s?-1/0:1/0,m=1/0;const y=this.#i.at(s?-1:-2),w=[y[0],y[2]];for(const v of this.#i){const[S,_,x,E]=v;!E&&s?_<m?(m=_,p=S):_===m&&(p=Math.max(p,S)):E&&!s&&(_<m?(m=_,p=S):_===m&&(p=Math.min(p,S))),v[0]=(S-u)/o,v[1]=(_-f)/h,v[2]=(x-f)/h}this.#t=new Float32Array([u,f,o,h]),this.#e=[p,m],this.#s=w}getOutlines(){this.#i.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#n(t)}#n(t){const e=[],i=new Set;for(const a of t){const[o,h,u]=a;e.push([o,h,a],[o,u,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const h=e[a][2],u=e[a+1][2];h.push(u),u.push(h),i.add(h),i.add(u)}const s=[];let n;for(;i.size>0;){const a=i.values().next().value;let[o,h,u,f,p]=a;i.delete(a);let m=o,y=h;for(n=[o,u],s.push(n);;){let w;if(i.has(f))w=f;else if(i.has(p))w=p;else break;i.delete(w),[o,h,u,f,p]=w,m!==o&&(n.push(m,y,o,y===h?h:u),m=o),y=y===h?u:h}n.push(m,y)}return new vk(s,this.#t,this.#e,this.#s)}#r(t){const e=this.#a;let i=0,s=e.length-1;for(;i<=s;){const n=i+s>>1,a=e[n][0];if(a===t)return n;a<t?i=n+1:s=n-1}return s+1}#o([,t,e]){const i=this.#r(t);this.#a.splice(i,0,[t,e])}#c([,t,e]){const i=this.#r(t);for(let s=i;s<this.#a.length;s++){const[n,a]=this.#a[s];if(n!==t)break;if(n===t&&a===e){this.#a.splice(s,1);return}}for(let s=i-1;s>=0;s--){const[n,a]=this.#a[s];if(n!==t)break;if(n===t&&a===e){this.#a.splice(s,1);return}}}#l(t){const[e,i,s]=t,n=[[e,i,s]],a=this.#r(s);for(let o=0;o<a;o++){const[h,u]=this.#a[o];for(let f=0,p=n.length;f<p;f++){const[,m,y]=n[f];if(!(u<=m||y<=h)){if(m>=h){if(y>u)n[f][1]=u;else{if(p===1)return[];n.splice(f,1),f--,p--}continue}n[f][2]=h,y>u&&n.push([e,u,y])}}}return n}}class vk extends dt{#t;#e;constructor(t,e,i,s){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=s}toSVGPath(){const t=[];for(const e of this.#e){let[i,s]=e;t.push(`M${i} ${s}`);for(let n=2;n<e.length;n+=2){const a=e[n],o=e[n+1];a===i?(t.push(`V${o}`),s=o):o===s&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,e,i,s],n){const a=[],o=i-t,h=s-e;for(const u of this.#e){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=t+u[p]*o,f[p+1]=s-u[p+1]*h;a.push(f)}return a}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class am extends Fr{newFreeDrawOutline(t,e,i,s,n,a){return new Ak(t,e,i,s,n,a)}}class Ak extends hS{newOutliner(t,e,i,s,n,a=0){return new am(t,e,i,s,n,a)}}class Le extends vt{#t=null;#e=0;#s;#i=null;#a=null;#n=null;#r=null;#o=0;#c=null;#l=null;#d=null;#u=!1;#f=null;#m=null;#g=null;#h="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Dt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Le.prototype;return Ct(this,"_keyboardManager",new Ac([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Le._defaultColor,this.#p=t.thickness||Le._defaultThickness,this.opacity=t.opacity||Le._defaultOpacity,this.#s=t.boxes||null,this.#y=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#b(t),this.#w()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#r=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new rm(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new rm(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#n=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:s}=this.#n;this.#m=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const s=1.5;if(this.#n=t.getNewOutline(this.#p/2+s,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Le.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Le.#E(this.#n.box,p),path:{d:this.#n.toSVGPath()}})}const[n,a,o,h]=t.box;switch(this.rotation){case 0:this.x=n,this.y=a,this.width=o,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-n,this.width=o*m/p,this.height=h*p/m;break}case 180:this.x=1-n,this.y=1-a,this.width=o,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=n,this.width=o*m/p,this.height=h*p/m;break}}const{firstPoint:u}=t;this.#f=[(u[0]-n)/o,(u[1]-a)/h];const{lastPoint:f}=this.#n;this.#m=[(f[0]-n)/o,(f[1]-a)/h]}static initialize(t,e){vt.initialize(t,e),Le._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Gt.HIGHLIGHT_COLOR:Le._defaultColor=e;break;case Gt.HIGHLIGHT_THICKNESS:Le._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Gt.HIGHLIGHT_COLOR:this.#x(e);break;case Gt.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[Gt.HIGHLIGHT_COLOR,Le._defaultColor],[Gt.HIGHLIGHT_THICKNESS,Le._defaultThickness]]}get propertiesToUpdate(){return[[Gt.HIGHLIGHT_COLOR,this.color||Le._defaultColor],[Gt.HIGHLIGHT_THICKNESS,this.#p||Le._defaultThickness],[Gt.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#x(t){const e=(n,a)=>{this.color=n,this.opacity=a,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:e.bind(this,t,Le._defaultOpacity),undo:e.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Gt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#S(t){const e=this.#p,i=s=>{this.#p=s,this.#A(s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Gt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new gs({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#u&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#i))}static#E([t,e,i,s],n){switch(n){case 90:return[1-e-s,t,s,i];case 180:return[1-t-i,1-e-s,i,s];case 270:return[e,1-t-i,s,i]}return[t,e,i,s]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#u?(t=(t-this.rotation+360)%360,i=Le.#E(this.#l.box,t)):i=Le.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:Le.#E(this.#n.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(),H_(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(t){Le._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#r,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#u||this.#M(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#D(){return this.#u?this.rotation:0}#I(){if(this.#u)return null;const[t,e]=this.pageDimensions,[i,s]=this.pageTranslation,n=this.#s,a=new Float32Array(n.length*8);let o=0;for(const{x:h,y:u,width:f,height:p}of n){const m=h*t+i,y=(1-u)*e+s;a[o]=a[o+4]=m,a[o+1]=a[o+3]=y,a[o+2]=a[o+6]=m+f*t,a[o+5]=a[o+7]=y-p*e,o+=8}return a}#L(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,e,{target:i,x:s,y:n}){const{x:a,y:o,width:h,height:u}=i.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),this.#B(t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",De,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",ys,{signal:p}),i.addEventListener("pointermove",this.#P.bind(this,t),{signal:p}),this._freeHighlight=new am({x:s,y:n},[a,o,h,u],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let s=null;if(t instanceof lS){const{data:{quadPoints:w,rect:v,rotation:S,id:_,color:x,opacity:E,popupRef:R,richText:D,contentsObj:M,creationDate:k,modificationDate:N},parent:{page:{pageNumber:I}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(x),opacity:E,quadPoints:w,boxes:null,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,popupRef:R,richText:D,comment:M?.str||null,creationDate:k,modificationDate:N}}else if(t instanceof qm){const{data:{inkLists:w,rect:v,rotation:S,id:_,color:x,borderStyle:{rawWidth:E},popupRef:R,richText:D,contentsObj:M,creationDate:k,modificationDate:N},parent:{page:{pageNumber:I}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(x),thickness:E,inkLists:w,boxes:null,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,popupRef:R,richText:D,comment:M?.str||null,creationDate:k,modificationDate:N}}const{color:n,quadPoints:a,inkLists:o,opacity:h}=t,u=await super.deserialize(t,e,i);u.color=ht.makeHexColor(...n),u.opacity=h||1,o&&(u.#p=t.thickness),u._initialData=s,t.comment&&u.setCommentData(t);const[f,p]=u.pageDimensions,[m,y]=u.pageTranslation;if(a){const w=u.#s=[];for(let v=0;v<a.length;v+=8)w.push({x:(a[v]-m)/f,y:1-(a[v+1]-y)/p,width:(a[v+2]-a[v])/f,height:(a[v+1]-a[v+5])/p});u.#v(),u.#w(),u.rotate(u.rotation)}else if(o){u.#u=!0;const w=o[0],v={x:w[0]-m,y:p-(w[1]-y)},S=new am(v,[0,0,f,p],1,u.#p/2,!0,.001);for(let E=0,R=w.length;E<R;E+=2)v.x=w[E]-m,v.y=p-(w[E+1]-y),S.add(v);const{id:_,clipPathId:x}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);u.#b({highlightOutlines:S.getOutlines(),highlightId:_,clipPathId:x}),u.#w(),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=vt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#L(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#N(i)?null:(i.id=this.annotationElementId,i)}#N(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==e[s])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class uS{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){fe("Not implemented")}}class te extends vt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#i=null;static#a=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#n(t),this.#c())}#n({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#r(t,this.parent),this.#u(t.box)}#r(t,e){const{id:i}=e.drawLayer.draw(te._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[s,n]of Object.entries(e))i.has(s)?Object.assign(t[s],n):t[s]=n;return t}static getDefaultDrawingOptions(t){fe("Not implemented")}static get typesMap(){fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(te.#s.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,e[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,e[s]]);return t}_updateProperty(t,e,i){const s=this._drawingOptions,n=s[e],a=o=>{s.updateProperty(e,o);const h=this.#t.updateProperty(e,o);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#r(this.#t,t)}}#l([t,e,i,s]){const{parentDimensions:[n,a],rotation:o}=this;switch(o){case 90:return[e,1-t,i*(a/n),s*(n/a)];case 180:return[1-t,1-e,i,s];case 270:return[1-e,t,i*(a/n),s*(n/a)];default:return[t,e,i,s]}}#d(){const{x:t,y:e,width:i,height:s,parentDimensions:[n,a],rotation:o}=this;switch(o){case 90:return[1-e,t,i*(n/a),s*(a/n)];case 180:return[1-t,1-e,i,s];case 270:return[e,1-t,i*(n/a),s*(a/n)];default:return[t,e,i,s]}}#u(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:i,height:s,rotation:n,parentRotation:a,parentDimensions:[o,h]}=this;switch((n*4+a)/90){case 1:return[1-e-s,t,s,i];case 2:return[1-t-i,1-e-s,i,s];case 3:return[e,1-t-i,s,i];case 4:return[t,e-i*(o/h),s*(h/o),i*(o/h)];case 5:return[1-e,t,i*(o/h),s*(h/o)];case 6:return[1-t-s*(h/o),1-e,s*(h/o),i*(o/h)];case 7:return[e-i*(o/h),1-t-s*(h/o),i*(o/h),s*(h/o)];case 8:return[t-i,e-s,i,s];case 9:return[1-e,t-i,s,i];case 10:return[1-t,1-e,i,s];case 11:return[e-s,1-t,s,i];case 12:return[t-s*(h/o),e,s*(h/o),i*(o/h)];case 13:return[1-e-i*(o/h),t-s*(h/o),i*(o/h),s*(h/o)];case 14:return[1-t,1-e-i*(o/h),s*(h/o),i*(o/h)];case 15:return[e,1-t,i*(o/h),s*(h/o)];default:return[t,e,i,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,s,n){fe("Not implemented")}static startDrawing(t,e,i,s){const{target:n,offsetX:a,offsetY:o,pointerId:h,pointerType:u}=s;if(ee.isInitializedAndDifferentPointerType(u))return;const{viewport:{rotation:f}}=t,{width:p,height:m}=n.getBoundingClientRect(),y=te.#i=new AbortController,w=t.combinedSignal(y);if(ee.setPointer(u,h),window.addEventListener("pointerup",v=>{ee.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:w}),window.addEventListener("pointercancel",v=>{ee.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",v=>{ee.isSamePointerType(v.pointerType)&&(ee.initializeAndAddPointerId(v.pointerId),te.#s.isCancellable()&&(te.#s.removeLastElement(),te.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ys,{signal:w}),n.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),n.addEventListener("touchmove",v=>{ee.isSameTimeStamp(v.timeStamp)&&De(v)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),te.#s){t.drawLayer.updateProperties(this._currentDrawId,te.#s.startNew(a,o,p,m,f));return}e.updateUIForDefaultProperties(this),te.#s=this.createDrawerInstance(a,o,p,m,f),te.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(te.#a.toSVGProperties(),te.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ee.isSameTimeStamp(t.timeStamp),!te.#s)return;const{offsetX:e,offsetY:i,pointerId:s}=t;if(ee.isSamePointerId(s)){if(ee.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,te.#s.add(e,i)),ee.setTimeStamp(t.timeStamp),De(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,te.#s=null,te.#a=null,ee.clearTimeStamp()),te.#i&&(te.#i.abort(),te.#i=null,ee.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,te.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=te.#s,s=this._currentDrawId,n=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(s,i.setLastElement(n))},undo:()=>{e.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Gt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Gt.DRAW_STEP),!te.#s.isEmpty()){const{pageDimensions:[i,s],scale:n}=e,a=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:te.#s.getOutlines(i*n,s*n,n,this._INNER_MARGIN),drawingOptions:te.#a,mustBeCommitted:!t});return this._cleanup(!0),a}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,s,n,a){fe("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:s,pageHeight:n,pageX:a,pageY:o}}=e.viewport,h=this.deserializeDraw(a,o,s,n,this._INNER_MARGIN,t),u=await super.deserialize(t,e,i);return u.createDrawingOptions(t),u.#n({drawOutlines:h}),u.#c(),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[e,i]=this.pageTranslation,[s,n]=this.pageDimensions;return this.#t.serialize([e,i,s,n],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class wk{#t=new Float64Array(6);#e;#s;#i;#a;#n;#r="";#o=0;#c=new _c;#l;#d;constructor(t,e,i,s,n,a){this.#l=i,this.#d=s,this.#i=n,this.#a=a,[t,e]=this.#u(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#n=[t,e],this.#s=[{line:o,points:this.#n}],this.#t.set(o,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#u(t,e){return dt._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#n.length<=10}add(t,e){[t,e]=this.#u(t,e);const[i,s,n,a]=this.#t.subarray(2,6),o=t-n,h=e-a;return Math.hypot(this.#l*o,this.#d*h)<=2?null:(this.#n.push(t,e),isNaN(i)?(this.#t.set([n,a,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,s,n,a,t,e],0),this.#e.push(...dt.createBezierPoints(i,s,n,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#n.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,n){this.#l=i,this.#d=s,this.#i=n,[t,e]=this.#u(t,e);const a=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#n=[t,e];const o=this.#s.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#s.push({line:a,points:this.#n}),this.#t.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#n=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#r="";for(let t=0,e=this.#s.length;t<e;t++){const{line:i,points:s}=this.#s[t];this.#e=i,this.#n=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const t=dt.svgRound(this.#e[4]),e=dt.svgRound(this.#e[5]);if(this.#n.length===2)return this.#r=`${this.#r} M ${t} ${e} Z`,this.#r;if(this.#n.length<=6){const s=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,s)} M ${t} ${e}`,this.#o=6}if(this.#n.length===4){const s=dt.svgRound(this.#e[10]),n=dt.svgRound(this.#e[11]);return this.#r=`${this.#r} L ${s} ${n}`,this.#o=12,this.#r}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let s=this.#o,n=this.#e.length;s<n;s+=6){const[a,o,h,u,f,p]=this.#e.slice(s,s+6).map(dt.svgRound);i.push(`C${a} ${o} ${h} ${u} ${f} ${p}`)}return this.#r+=i.join(" "),this.#o=this.#e.length,this.#r}getOutlines(t,e,i,s){const n=this.#s.at(-1);return n.line=new Float32Array(n.line),n.points=new Float32Array(n.points),this.#c.build(this.#s,t,e,i,this.#i,this.#a,s),this.#t=null,this.#e=null,this.#s=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class _c extends dt{#t;#e=0;#s;#i;#a;#n;#r;#o;#c;build(t,e,i,s,n,a,o){this.#a=e,this.#n=i,this.#r=s,this.#o=n,this.#c=a,this.#s=o??0,this.#i=t,this.#u()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${dt.svgRound(e[4])} ${dt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${dt.svgRound(e[10])} ${dt.svgRound(e[11])}`);continue}for(let i=6,s=e.length;i<s;i+=6){const[n,a,o,h,u,f]=e.subarray(i,i+6).map(dt.svgRound);t.push(`C${n} ${a} ${o} ${h} ${u} ${f}`)}}return t.join("")}serialize([t,e,i,s],n){const a=[],o=[],[h,u,f,p]=this.#d();let m,y,w,v,S,_,x,E,R;switch(this.#o){case 0:R=dt._rescale,m=t,y=e+s,w=i,v=-s,S=t+h*i,_=e+(1-u-p)*s,x=t+(h+f)*i,E=e+(1-u)*s;break;case 90:R=dt._rescaleAndSwap,m=t,y=e,w=i,v=s,S=t+u*i,_=e+h*s,x=t+(u+p)*i,E=e+(h+f)*s;break;case 180:R=dt._rescale,m=t+i,y=e,w=-i,v=s,S=t+(1-h-f)*i,_=e+u*s,x=t+(1-h)*i,E=e+(u+p)*s;break;case 270:R=dt._rescaleAndSwap,m=t+i,y=e+s,w=-i,v=-s,S=t+(1-u-p)*i,_=e+(1-h-f)*s,x=t+(1-u)*i,E=e+(1-h)*s;break}for(const{line:D,points:M}of this.#i)a.push(R(D,m,y,w,v,n?new Array(D.length):null)),o.push(R(M,m,y,w,v,n?new Array(M.length):null));return{lines:a,points:o,rect:[S,_,x,E]}}static deserialize(t,e,i,s,n,{paths:{lines:a,points:o},rotation:h,thickness:u}){const f=[];let p,m,y,w,v;switch(h){case 0:v=dt._rescale,p=-t/i,m=e/s+1,y=1/i,w=-1/s;break;case 90:v=dt._rescaleAndSwap,p=-e/s,m=-t/i,y=1/s,w=1/i;break;case 180:v=dt._rescale,p=t/i+1,m=-e/s,y=-1/i,w=1/s;break;case 270:v=dt._rescaleAndSwap,p=e/s+1,m=t/i+1,y=-1/s,w=-1/i;break}if(!a){a=[];for(const _ of o){const x=_.length;if(x===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(x===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const E=new Float32Array(3*(x-2));a.push(E);let[R,D,M,k]=_.subarray(0,4);E.set([NaN,NaN,NaN,NaN,R,D],0);for(let N=4;N<x;N+=2){const I=_[N],G=_[N+1];E.set(dt.createBezierPoints(R,D,M,k,I,G),(N-2)*3),[R,D,M,k]=[M,k,I,G]}}}for(let _=0,x=a.length;_<x;_++)f.push({line:v(a[_].map(E=>E??NaN),p,m,y,w),points:v(o[_].map(E=>E??NaN),p,m,y,w)});const S=new this.prototype.constructor;return S.build(f,i,s,1,h,u,n),S}#l(t=this.#c){const e=this.#s+t/2*this.#r;return this.#o%180===0?[e/this.#a,e/this.#n]:[e/this.#n,e/this.#a]}#d(){const[t,e,i,s]=this.#t,[n,a]=this.#l(0);return[t+n,e+a,i-2*n,s-2*a]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#i){if(s.length<=12){for(let o=4,h=s.length;o<h;o+=6)ht.pointBoundingBox(s[o],s[o+1],t);continue}let n=s[4],a=s[5];for(let o=6,h=s.length;o<h;o+=6){const[u,f,p,m,y,w]=s.subarray(o,o+6);ht.bezierBoundingBox(n,a,u,f,p,m,y,w,t),n=y,a=w}}const[e,i]=this.#l();t[0]=wi(t[0]-e,0,1),t[1]=wi(t[1]-i,0,1),t[2]=wi(t[2]+e,0,1),t[3]=wi(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[s,n]=this.#l(),[a,o]=[s-e,n-i],h=this.#t;return h[0]-=a,h[1]-=o,h[2]+=2*a,h[3]+=2*o,h}updateParentDimensions([t,e],i){const[s,n]=this.#l();this.#a=t,this.#n=e,this.#r=i;const[a,o]=this.#l(),h=a-s,u=o-n,f=this.#t;return f[0]-=h,f[1]-=u,f[2]+=2*h,f[3]+=2*u,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(dt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,s=0,n=0,a=0,o=0,h=0;switch(this.#e){case 90:s=e/t,n=-t/e,o=t;break;case 180:i=-1,a=-1,o=t,h=e;break;case 270:s=-e/t,n=t/e,h=e;break;default:return""}return`matrix(${i} ${s} ${n} ${a} ${dt.svgRound(o)} ${dt.svgRound(h)})`}getPathResizingSVGProperties([t,e,i,s]){const[n,a]=this.#l(),[o,h,u,f]=this.#t;if(Math.abs(u-n)<=dt.PRECISION||Math.abs(f-a)<=dt.PRECISION){const v=t+i/2-(o+u/2),S=e+s/2-(h+f/2);return{path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${v} ${S})`}}}const p=(i-2*n)/(u-2*n),m=(s-2*a)/(f-2*a),y=u/i,w=f/s;return{path:{"transform-origin":`${dt.svgRound(o)} ${dt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${dt.svgRound(n)} ${dt.svgRound(a)}) scale(${p} ${m}) translate(${dt.svgRound(-n)} ${dt.svgRound(-a)})`}}}getPathResizedSVGProperties([t,e,i,s]){const[n,a]=this.#l(),o=this.#t,[h,u,f,p]=o;if(o[0]=t,o[1]=e,o[2]=i,o[3]=s,Math.abs(f-n)<=dt.PRECISION||Math.abs(p-a)<=dt.PRECISION){const S=t+i/2-(h+f/2),_=e+s/2-(u+p/2);for(const{line:x,points:E}of this.#i)dt._translate(x,S,_,x),dt._translate(E,S,_,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*n)/(f-2*n),y=(s-2*a)/(p-2*a),w=-m*(h+n)+t+n,v=-y*(u+a)+e+a;if(m!==1||y!==1||w!==0||v!==0)for(const{line:S,points:_}of this.#i)dt._rescale(S,w,v,m,y,S),dt._rescale(_,w,v,m,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[s,n]=i,a=this.#t,o=t-a[0],h=e-a[1];if(this.#a===s&&this.#n===n)for(const{line:u,points:f}of this.#i)dt._translate(u,o,h,u),dt._translate(f,o,h,f);else{const u=this.#a/s,f=this.#n/n;this.#a=s,this.#n=n;for(const{line:p,points:m}of this.#i)dt._rescale(p,o,h,u,f,p),dt._rescale(m,o,h,u,f,m);a[2]*=u,a[3]*=f}return a[0]=t,a[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(t[0])} ${dt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class ad extends uS{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new ad(this._viewParameters);return t.updateAll(this),t}}class Ym extends te{static _type="ink";static _editorType=Dt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new ad(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ct(this,"typesMap",new Map([[Gt.INK_THICKNESS,"stroke-width"],[Gt.INK_COLOR,"stroke"],[Gt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,s,n){return new wk(t,e,i,s,n,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,s,n,a){return _c.deserialize(t,e,i,s,n,a)}static async deserialize(t,e,i){let s=null;if(t instanceof qm){const{data:{inkLists:a,rect:o,rotation:h,id:u,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,richText:w,contentsObj:v,creationDate:S,modificationDate:_},parent:{page:{pageNumber:x}}}=t;s=t={annotationType:Dt.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:a},boxes:null,pageIndex:x-1,rect:o.slice(0),rotation:h,annotationElementId:u,id:u,deleted:!1,popupRef:y,richText:w,comment:v?.str||null,creationDate:S,modificationDate:_}}const n=await super.deserialize(t,e,i);return n._initialData=s,t.comment&&n.setCommentData(t),n}get toolbarButtons(){return this._colorPicker||=new nc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Gt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Ym.getDefaultDrawingOptions({stroke:ht.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":n,"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{color:vt._colorManager.convert(s),opacity:n,thickness:a,paths:{lines:e,points:i}});return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!this.#t(o)?null:(o.id=this.annotationElementId,o)}#t(t){const{color:e,thickness:i,opacity:s,pageIndex:n}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,o)=>a!==e[o])||t.thickness!==i||t.opacity!==s||t.pageIndex!==n}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class om extends _c{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const au=8,Dl=3;class Ja{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,s,n,a,o){const h=this.#e(i,s,n,a);for(let u=0;u<8;u++){const f=(-u+h-o+16)%8,p=this.#s[2*f],m=this.#s[2*f+1];if(t[(i+p)*e+(s+m)]!==0)return f}return-1}static#a(t,e,i,s,n,a,o){const h=this.#e(i,s,n,a);for(let u=0;u<8;u++){const f=(u+h+o+16)%8,p=this.#s[2*f],m=this.#s[2*f+1];if(t[(i+p)*e+(s+m)]!==0)return f}return-1}static#n(t,e,i,s){const n=t.length,a=new Int32Array(n);for(let f=0;f<n;f++)a[f]=t[f]<=s?1:0;for(let f=1;f<i-1;f++)a[f*e]=a[f*e+e-1]=0;for(let f=0;f<e;f++)a[f]=a[e*i-1-f]=0;let o=1,h;const u=[];for(let f=1;f<i-1;f++){h=1;for(let p=1;p<e-1;p++){const m=f*e+p,y=a[m];if(y===0)continue;let w=f,v=p;if(y===1&&a[m-1]===0)o+=1,v-=1;else if(y>=1&&a[m+1]===0)o+=1,v+=1,y>1&&(h=y);else{y!==1&&(h=Math.abs(y));continue}const S=[p,f],_=v===p+1,x={isHole:_,points:S,id:o,parent:0};u.push(x);let E;for(const j of u)if(j.id===h){E=j;break}E?E.isHole?x.parent=_?E.parent:h:x.parent=_?h:E.parent:x.parent=_?h:0;const R=this.#i(a,e,f,p,w,v,0);if(R===-1){a[m]=-o,a[m]!==1&&(h=Math.abs(a[m]));continue}let D=this.#s[2*R],M=this.#s[2*R+1];const k=f+D,N=p+M;w=k,v=N;let I=f,G=p;for(;;){const j=this.#a(a,e,I,G,w,v,1);D=this.#s[2*j],M=this.#s[2*j+1];const tt=I+D,ot=G+M;S.push(ot,tt);const rt=I*e+G;if(a[rt+1]===0?a[rt]=-o:a[rt]===1&&(a[rt]=o),tt===f&&ot===p&&I===k&&G===N){a[m]!==1&&(h=Math.abs(a[m]));break}else w=I,v=G,I=tt,G=ot}}}return u}static#r(t,e,i,s){if(i-e<=4){for(let k=e;k<i-2;k+=2)s.push(t[k],t[k+1]);return}const n=t[e],a=t[e+1],o=t[i-4]-n,h=t[i-3]-a,u=Math.hypot(o,h),f=o/u,p=h/u,m=f*a-p*n,y=h/o,w=1/u,v=Math.atan(y),S=Math.cos(v),_=Math.sin(v),x=w*(Math.abs(S)+Math.abs(_)),E=w*(1-x+x**2),R=Math.max(Math.atan(Math.abs(_+S)*E),Math.atan(Math.abs(_-S)*E));let D=0,M=e;for(let k=e+2;k<i-2;k+=2){const N=Math.abs(m-f*t[k+1]+p*t[k]);N>D&&(M=k,D=N)}D>(u*R)**2?(this.#r(t,e,M+2,s),this.#r(t,M,i,s)):s.push(n,a)}static#o(t){const e=[],i=t.length;return this.#r(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,s,n,a){const o=new Float32Array(a**2),h=-2*s**2,u=a>>1;for(let v=0;v<a;v++){const S=(v-u)**2;for(let _=0;_<a;_++)o[v*a+_]=Math.exp((S+(_-u)**2)/h)}const f=new Float32Array(256),p=-2*n**2;for(let v=0;v<256;v++)f[v]=Math.exp(v**2/p);const m=t.length,y=new Uint8Array(m),w=new Uint32Array(256);for(let v=0;v<i;v++)for(let S=0;S<e;S++){const _=v*e+S,x=t[_];let E=0,R=0;for(let M=0;M<a;M++){const k=v+M-u;if(!(k<0||k>=i))for(let N=0;N<a;N++){const I=S+N-u;if(I<0||I>=e)continue;const G=t[k*e+I],j=o[M*a+N]*f[Math.abs(G-x)];E+=G*j,R+=j}}const D=y[_]=Math.round(E/R);w[D]++}return[y,w]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,n=1/0;for(let o=0,h=i.length;o<h;o++){const u=i[o]=t[o<<2];s=Math.max(s,u),n=Math.min(n,u)}const a=255/(s-n);for(let o=0,h=i.length;o<h;o++)i[o]=(i[o]-n)*a;return i}static#u(t){let e,i=-1/0,s=-1/0;const n=t.findIndex(h=>h!==0);let a=n,o=n;for(e=n;e<256;e++){const h=t[e];h>i&&(e-a>s&&(s=e-a,o=e-1),i=h,a=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:s}=t,{maxDim:n}=this.#t;let a=i,o=s;if(i>n||s>n){let m=i,y=s,w=Math.log2(Math.max(i,s)/n);const v=Math.floor(w);w=w===v?v-1:v;for(let _=0;_<w;_++){a=Math.ceil(m/2),o=Math.ceil(y/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(t,0,0,m,y,0,0,a,o),m=a,y=o,t!==e&&t.close(),t=x.transferToImageBitmap()}const S=Math.min(n/a,n/o);a=Math.round(a*S),o=Math.round(o*S)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,a,o);const f=u.getImageData(0,0,a,o).data;return[this.#d(f),a,o]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},n,a,o,h){let u=new OffscreenCanvas(1,1),f=u.getContext("2d",{alpha:!1});const p=200,m=f.font=`${i} ${s} ${p}px ${e}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,fontBoundingBoxAscent:_,fontBoundingBoxDescent:x,width:E}=f.measureText(t),R=1.5,D=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,E)*R),M=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||p,Math.abs(_)+Math.abs(x)||p)*R);u=new OffscreenCanvas(D,M),f=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=m,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,D,M),f.fillStyle="black",f.fillText(t,D*(R-1)/2,M*(3-R)/2);const k=this.#d(f.getImageData(0,0,D,M).data),N=this.#l(k),I=this.#u(N),G=this.#n(k,D,M,I);return this.processDrawnLines({lines:{curves:G,width:D,height:M},pageWidth:n,pageHeight:a,rotation:o,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,n){const[a,o,h]=this.#f(t),[u,f]=this.#c(a,o,h,Math.hypot(o,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#u(f),m=this.#n(u,o,h,p);return this.processDrawnLines({lines:{curves:m,width:o,height:h},pageWidth:e,pageHeight:i,rotation:s,innerMargin:n,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:n,mustSmooth:a,areContours:o}){s%180!==0&&([e,i]=[i,e]);const{curves:h,width:u,height:f}=t,p=t.thickness??0,m=[],y=Math.min(e/u,i/f),w=y/e,v=y/i,S=[];for(const{points:x}of h){const E=a?this.#o(x):x;if(!E)continue;S.push(E);const R=E.length,D=new Float32Array(R),M=new Float32Array(3*(R===2?2:R-2));if(m.push({line:M,points:D}),R===2){D[0]=E[0]*w,D[1]=E[1]*v,M.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[k,N,I,G]=E;k*=w,N*=v,I*=w,G*=v,D.set([k,N,I,G],0),M.set([NaN,NaN,NaN,NaN,k,N],0);for(let j=4;j<R;j+=2){const tt=D[j]=E[j]*w,ot=D[j+1]=E[j+1]*v;M.set(dt.createBezierPoints(k,N,I,G,tt,ot),(j-2)*3),[k,N,I,G]=[I,G,tt,ot]}}if(m.length===0)return null;const _=o?new om:new _c;return _.build(m,e,i,1,s,o?0:p,n),{outline:_,newCurves:S,areContours:o,thickness:p,width:u,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:n}){let a=1/0,o=-1/0,h=0;for(const E of t){h+=E.length;for(let R=2,D=E.length;R<D;R++){const M=E[R]-E[R-2];a=Math.min(a,M),o=Math.max(o,M)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const f=t.length,p=au+Dl*f,m=new Uint32Array(p);let y=0;m[y++]=p*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*u.BYTES_PER_ELEMENT,m[y++]=0,m[y++]=s,m[y++]=n,m[y++]=e?0:1,m[y++]=Math.max(0,Math.floor(i??0)),m[y++]=f,m[y++]=u.BYTES_PER_ELEMENT;for(const E of t)m[y++]=E.length-2,m[y++]=E[0],m[y++]=E[1];const w=new CompressionStream("deflate-raw"),v=w.writable.getWriter();await v.ready,v.write(m);const S=u.prototype.constructor;for(const E of t){const R=new S(E.length-2);for(let D=2,M=E.length;D<M;D++)R[D-2]=E[D]-E[D-2];v.write(R)}v.close();const _=await new Response(w.readable).arrayBuffer(),x=new Uint8Array(_);return I_(x)}static async decompressSignature(t){try{const e=ND(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),n=s.getWriter();await n.ready,n.write(e).then(async()=>{await n.ready,await n.close()}).catch(()=>{});let a=null,o=0;for await(const E of i)a||=new Uint8Array(new Uint32Array(E.buffer,0,4)[0]),a.set(E,o),o+=E.length;const h=new Uint32Array(a.buffer,0,a.length>>2),u=h[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const f=h[2],p=h[3],m=h[4]===0,y=h[5],w=h[6],v=h[7],S=[],_=(au+Dl*w)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(v){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,_);break}o=0;for(let E=0;E<w;E++){const R=h[Dl*E+au],D=new Float32Array(R+2);S.push(D);for(let M=0;M<Dl-1;M++)D[M]=h[Dl*E+au+M+1];for(let M=0;M<R;M++)D[M+2]=D[M]+x[o++]}return{areContours:m,thickness:y,outlines:S,width:f,height:p}}catch(e){return xt(`decompressSignature: ${e}`),null}}}class Wm extends uS{constructor(){super(),super.updateProperties({fill:vt._defaultLineColor,"stroke-width":0})}clone(){const t=new Wm;return t.updateAll(this),t}}class Km extends ad{constructor(t){super(t),super.updateProperties({stroke:vt._defaultLineColor,"stroke-width":1})}clone(){const t=new Km(this._viewParameters);return t.updateAll(this),t}}class Ps extends te{#t=!1;#e=null;#s=null;#i=null;static _type="signature";static _editorType=Dt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new Wm,this._defaultDrawnSignatureOptions=new Km(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ct(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:s,mustSmooth:n,areContours:a,description:o,uuid:h,heightInPage:u}=this.#s,{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=Ja.processDrawnLines({lines:s,pageWidth:f,pageHeight:p,rotation:m,innerMargin:Ps._INNER_MARGIN,mustSmooth:n,areContours:a});this.addSignature(y,u,o,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:s,height:n}=this.#s,a=Math.max(s,n),o=Ja.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:i,width:s,height:n},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,s){const{x:n,y:a}=this,{outline:o}=this.#s=t;this.#t=o instanceof om,this.description=i;let h;this.#t?h=Ps.getDefaultDrawingOptions():(h=Ps._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:h});const[,u]=this.pageDimensions;let f=e/u;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=n,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:s}=this.parent.viewport;return Ja.process(t,e,i,s,Ps._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:n}=this.parent.viewport;return Ja.extractContoursFromText(t,e,i,s,n,Ps._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:s}=this.parent.viewport;return Ja.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:Ps._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Ps.getDefaultDrawingOptions():(this._drawingOptions=Ps._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,n=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:s});return this.addComment(n),t?(n.paths={lines:e,points:i},n.uuid=this.#i,n.isCopy=!0):n.lines=e,this.#e&&(n.accessibilityData={type:"Figure",alt:this.#e}),n}static deserializeDraw(t,e,i,s,n,a){return a.areContours?om.deserialize(t,e,i,s,n,a):_c.deserialize(t,e,i,s,n,a)}static async deserialize(t,e,i){const s=await super.deserialize(t,e,i);return s.#t=t.areContours,s.description=t.accessibilityData?.alt||"",s.#i=t.uuid,s}}class _k extends vt{#t=null;#e=null;#s=null;#i=null;#a=null;#n="";#r=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Dt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){vt.initialize(t,e)}static isHandlingMimeForPasting(t){return Zg.includes(t)}static paste(t,e){e.pasteEditor({mode:Dt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#n=t.file.name),this.#g()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:n,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:s,width:n,height:a,channels:s.length/(n*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const h=o.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#u(i,!0)).finally(()=>this.#f());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(i).then(s=>this.#u(s)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(i).then(s=>this.#u(s)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Zg.join(",");const e=this._uiManager._signal;this.#s=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(s)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#r===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,s&&(this.#t=s),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[s,n]=this.pageDimensions,a=.75;if(this.width)e=this.width*s,i=this.height*n;else if(e>a*s||i>a*n){const h=Math.min(a*s/e,a*n/i);e*=h,i*=h}this._uiManager.enableWaiting(!1);const o=this.#r=document.createElement("canvas");o.setAttribute("role","img"),this.addContainer(o),this.width=e/s,this.height=i/n,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&this.div.setAttribute("aria-description",this.#n),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:s,height:n}=this.#t,a=new Hs;let o=this.#t,h=s,u=n,f=null;if(e){if(s>e||n>e){const M=Math.min(e/s,e/n);h=Math.floor(s*M),u=Math.floor(n*M)}f=document.createElement("canvas");const m=f.width=Math.ceil(h*a.sx),y=f.height=Math.ceil(u*a.sy);this.#l||(o=this.#h(m,y));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":HD.isDarkMode&&(v="#8f8f9d",S="#42414d");const _=15,x=_*a.sx,E=_*a.sy,R=new OffscreenCanvas(x*2,E*2),D=R.getContext("2d");D.fillStyle=v,D.fillRect(0,0,x*2,E*2),D.fillStyle=S,D.fillRect(0,0,x,E),D.fillRect(x,E,x,E),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,m,y),w.drawImage(o,0,0,o.width,o.height,0,0,m,y)}let p=null;if(i){let m,y;if(a.symmetric&&o.width<t&&o.height<t)m=o.width,y=o.height;else if(o=this.#t,s>t||n>t){const S=Math.min(t/s,t/n);m=Math.floor(s*S),y=Math.floor(n*S),this.#l||(o=this.#h(m,y))}const v=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});v.drawImage(o,0,0,o.width,o.height,0,0,m,y),p={width:m,height:y,data:v.getImageData(0,0,m,y).data}}return{canvas:f,width:h,height:u,imageData:p}}#h(t,e){const{width:i,height:s}=this.#t;let n=i,a=s,o=this.#t;for(;n>2*t||a>2*e;){const h=n,u=a;n>2*t&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(n,a);f.getContext("2d").drawImage(o,0,0,h,u,0,0,n,a),o=f.transferToImageBitmap()}return o}#p(){const[t,e]=this.parentDimensions,{width:i,height:s}=this,n=new Hs,a=Math.ceil(i*t*n.sx),o=Math.ceil(s*e*n.sy),h=this.#r;if(!h||h.width===a&&h.height===o)return;h.width=a,h.height=o;const u=this.#l?this.#t:this.#h(a,o),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,a,o)}#y(t){if(t){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,s=Math.round(this.width*e*vo.PDF_TO_CSS_UNITS),n=Math.round(this.height*i*vo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,n);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,n),a.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let s=null,n=!1;if(t instanceof cS){const{data:{rect:v,rotation:S,id:_,structParent:x,popupRef:E,richText:R,contentsObj:D,creationDate:M,modificationDate:k},container:N,parent:{page:{pageNumber:I}},canvas:G}=t;let j,tt;G?(delete t.canvas,{id:j,bitmap:tt}=i.imageManager.getFromCanvas(N.id,G),G.remove()):(n=!0,t._hasNoCanvas=!0);const ot=(await e._structTree.getAriaAttributes(`${so}${_}`))?.get("aria-label")||"";s=t={annotationType:Dt.STAMP,bitmapId:j,bitmap:tt,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:ot},isSvg:!1,structParent:x,popupRef:E,richText:R,comment:D?.str||null,creationDate:M,modificationDate:k}}const a=await super.deserialize(t,e,i),{rect:o,bitmap:h,bitmapUrl:u,bitmapId:f,isSvg:p,accessibilityData:m}=t;n?(i.addMissingCanvas(t.id,a),a.#o=!0):f&&i.imageManager.isValidId(f)?(a.#e=f,h&&(a.#t=h)):a.#i=u,a.#l=p;const[y,w]=a.pageDimensions;return a.width=(o[2]-o[0])/y,a.height=(o[3]-o[1])/w,m&&(a.altTextData=m),a._initialData=s,t.comment&&a.setCommentData(t),a.#d=!!s,a}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:n}=this.serializeAltText(!1);if(!s&&n&&(i.accessibilityData={type:"Figure",alt:n}),this.annotationElementId){const o=this.#v(i);return o.isSame?null:(o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const a=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const o=e.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===e,n=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&n,isSameAltText:n}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class pn{#t;#e=!1;#s=null;#i=null;#a=null;#n=new Map;#r=!1;#o=!1;#c=!1;#l=null;#d=null;#u=null;#f=null;#m=null;#g=-1;#h;static _initialized=!1;static#p=new Map([ei,Ym,_k,Le,Ps].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:n,annotationLayer:a,drawLayer:o,textLayer:h,viewport:u,l10n:f}){const p=[...pn.#p.values()];if(!pn._initialized){pn._initialized=!0;for(const m of p)m.initialize(f,t)}t.registerEditorTypes(p),this.#h=t,this.pageIndex=e,this.div=i,this.#t=n,this.#s=a,this.viewport=u,this.#u=h,this.drawLayer=o,this._structTree=s,this.#h.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===Dt.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#A(),t){case Dt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Dt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Dt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of pn.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.togglePointerEvents(t)}get#y(){return this.#n.size!==0?this.#n.values():this.#h.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#h.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#s;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#h.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#h._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#m){this.#m=new AbortController;const s=this.#h.combinedSignal(this.#m);this.#u.div.addEventListener("pointerdown",n=>{const{clientX:o,clientY:h,timeStamp:u}=n,f=this.#g;if(u-f>500){this.#g=u;return}this.#g=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(o,h);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const w=new RegExp(`^${tc}[0-9]+$`);for(const S of m)if(w.test(S.id)){y=S.id;break}if(!y)return;const v=this.#n.get(y);v?.annotationElementId===null&&(n.stopPropagation(),n.preventDefault(),v.dblclick(n))},{signal:s,capture:!0})}const t=this.#s,e=[];if(t){const s=new Map,n=new Map;for(const o of this.#y){if(o.disableEditing(),!o.annotationElementId){e.push(o);continue}if(o.serialize()!==null){s.set(o.annotationElementId,o);continue}else n.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=t.getEditableAnnotations();for(const o of a){const{id:h}=o.data;if(this.#h.isDeletedAnnotationElement(h)){o.updateEdited({deleted:!0});continue}let u=n.get(h);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=s.get(h),u&&(this.#h.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of pn.#p.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#h.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#v(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:i}=Ke.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#h.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),Le.startHighlighting(this,this.#h.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#h.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#n.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#n.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t),vt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#n.values())if(e.uid===t)return e;return null}getNextId(){return this.#h.getId()}get#b(){return pn.#p.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#x(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:i,offsetY:s}=this.#S(),n=this.getNextId(),a=this.#x({parent:this,id:n,x:i,y:s,uiManager:this.#h,isCentered:!0,...e});a&&this.add(a)}async deserialize(t){return await pn.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),n=this.#x({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...i});return n&&this.add(n),n}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:t,y:e,width:i,height:s}=this.boundingClientRect,n=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+s),u=(n+o)/2-t,f=(a+h)/2-e,[p,m]=this.viewport.rotation%180===0?[u,f]:[f,u];return{offsetX:p,offsetY:m}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=Ke.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#r||(this.#r=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#h.getMode();if(i===Dt.STAMP||i===Dt.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===Dt.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:e}=Ke.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#r=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#h.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#h.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#h.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const s=this.#h.findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#n.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#n.clear(),this.#h.removeLayer(this)}#A(){for(const t of this.#n.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Wr(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#A();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Wr(this.div,{rotation:i}),e!==i)for(const s of this.#n.values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class ci{#t=null;#e=new Map;#s=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Ct(this,"_svgFactory",new Ru)}static#a(t,[e,i,s,n]){const{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*n}%`}#n(){const t=ci._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#r(t,e){const i=ci._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const n=ci._svgFactory.createElement("use");return i.append(n),n.setAttribute("href",`#${e}`),n.classList.add("clip"),s}#o(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)}draw(t,e=!1,i=!1){const s=ci.#i++,n=this.#n(),a=ci._svgFactory.createElement("defs");n.append(a);const o=ci._svgFactory.createElement("path");a.append(o);const h=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",h),o.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(s,o);const u=i?this.#r(a,h):null,f=ci._svgFactory.createElement("use");return n.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(n,t),this.#e.set(s,n),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=ci.#i++,s=this.#n(),n=ci._svgFactory.createElement("defs");s.append(n);const a=ci._svgFactory.createElement("path");n.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const p=ci._svgFactory.createElement("mask");n.append(p),h=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",h),p.setAttribute("maskUnits","objectBoundingBox");const m=ci._svgFactory.createElement("rect");p.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const y=ci._svgFactory.createElement("use");p.append(y),y.setAttribute("href",`#${o}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const u=ci._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${o}`),h&&u.setAttribute("mask",`url(#${h})`);const f=u.cloneNode();return s.append(f),u.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#e.set(i,s),i}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:s,rootClass:n,path:a}=e,o=typeof t=="number"?this.#e.get(t):t;if(o){if(i&&this.#o(o,i),s&&ci.#a(o,s),n){const{classList:h}=o;for(const[u,f]of Object.entries(n))h.toggle(u,f)}if(a){const u=o.firstElementChild.firstElementChild;this.#o(u,a)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:rm};globalThis.pdfjsLib={AbortException:ar,AnnotationEditorLayer:pn,AnnotationEditorParamsType:Gt,AnnotationEditorType:Dt,AnnotationEditorUIManager:or,AnnotationLayer:Xm,AnnotationMode:tr,AnnotationType:Ue,applyOpacity:$D,build:ZR,ColorPicker:gs,createValidAbsoluteUrl:O_,CSSConstants:UD,DOMSVGFactory:Ru,DrawLayer:ci,FeatureTest:Ke,fetchData:yc,findContrastColor:GD,getDocument:qR,getFilenameFromUrl:FD,getPdfFilenameFromUrl:ID,getRGB:vc,getUuid:F_,getXfaPageViewport:zD,GlobalWorkerOptions:fo,ImageKind:yu,InvalidPDFException:Kg,isDataScheme:sd,isPdfFile:Im,isValidExplicitDest:eR,MathClamp:wi,noContextMenu:ys,normalizeUnicode:OD,OPS:ec,OutputScale:Hs,PasswordResponses:ED,PDFDataRangeTransport:iS,PDFDateString:Qg,PDFWorker:sc,PermissionFlag:SD,PixelsPerInch:vo,RenderingCancelledException:Fm,renderRichText:z_,ResponseException:Mu,setLayerDimensions:Wr,shadow:Ct,SignatureExtractor:Ja,stopEvent:De,SupportedImageMimeTypes:Zg,TextLayer:Yi,TouchManager:nd,updateUrlHash:P_,Util:ht,VerbosityLevel:td,version:QR,XfaLayer:B_};fo.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${p_}/pdf.worker.min.js`;function dS(){const[c,t]=F.useState(1200);return F.useEffect(()=>{t(window.innerWidth)},[]),T.jsx("div",{children:T.jsxs(zs,{fluid:!0,className:"resume-section",id:"resume",children:[T.jsx(Yu,{}),T.jsx(An,{style:{justifyContent:"center",position:"relative"},children:T.jsxs(Hl,{variant:"primary",href:n6,target:"_blank",style:{maxWidth:"250px"},children:[T.jsx(jT,{}),"Download Resume"]})}),T.jsx("blockquote",{className:"resume-quote",children:T.jsxs(T.Fragment,{children:['"The only way to do great work is to love what you do." ',T.jsx("span",{className:"quote-author",children:" - Steve Jobs"}),T.jsx("br",{}),T.jsx("br",{}),"And ",T.jsx("span",{className:"purple",children:"I love what I do"}),"!"]})}),T.jsx(An,{children:T.jsxs(Ht,{md:12,className:"home-about-social",children:[T.jsxs("h2",{children:["FIND ME",T.jsx("span",{className:"purple",children:" ON"})]}),T.jsxs("ul",{className:"home-about-social-links",children:[T.jsx("li",{className:"social-icons",children:T.jsx("a",{href:"https://github.com/Muluken-Zewge",target:"_blank",rel:"noreferrer",className:"icon-colour  home-social-icons",children:T.jsx(BT,{})})}),T.jsx("li",{className:"social-icons",children:T.jsx("a",{href:"https://linkedin.com/in/muluken-zewge-431414247",target:"_blank",rel:"noreferrer",className:"icon-colour  home-social-icons",children:T.jsx(AD,{})})}),T.jsx("li",{className:"social-icons",children:T.jsx("a",{href:"https://x.com/MulukenZewge",target:"_blank",rel:"noreferrer",className:"icon-colour  home-social-icons",children:T.jsx(qT,{})})}),T.jsx("li",{className:"social-icons",children:T.jsx("a",{href:"https://t.me/baka_Z",target:"_blank",rel:"noreferrer",className:"icon-colour home-social-icons",children:T.jsx(wD,{})})}),T.jsx("li",{className:"social-icons",children:T.jsx("a",{href:"https://www.instagram.com/zewge__muluken/",target:"_blank",rel:"noreferrer",className:"icon-colour home-social-icons",children:T.jsx(zT,{})})})]})]})})]})})}function mg({employer:c,title:t,description:e,startDate:i,endDate:s,icon:n}){return T.jsxs("div",{className:"timeline-item",children:[T.jsxs("div",{className:"timeline-dates",children:[T.jsx("span",{className:"purple",children:i})," - ",s||"Present"]}),T.jsxs("div",{className:"timeline-content",children:[T.jsx("div",{className:"timeline-icon",children:n}),T.jsx(Fs,{className:"experience-card-view",children:T.jsxs(Fs.Body,{children:[T.jsx("p",{className:"card-title",children:t}),T.jsx("p",{className:"card-employer",children:c}),T.jsx("p",{className:"card-description",children:e})]})})]})]})}function fS(){return T.jsxs("div",{className:"experience-timeline",children:[T.jsxs("h1",{style:{fontSize:"2.1em",padding:"140px 0 60px 0",color:"white"},className:"experience-heading",children:["Work ",T.jsx("strong",{className:"purple",children:"Experience"})]}),T.jsx(mg,{employer:"Two F Capital",title:"Mobile Application Developer",description:`Develope high-performance cross-platform mobile applications with Flutter framework, focusing on intuitive user experiences and scalable architectures. 
        Collaborate with teams to implement clean code practices, optimize performance, and deliver polished, user-centric products.`,startDate:" Nov 2024",endDate:"present",icon:T.jsx(ag,{})}),T.jsx(mg,{employer:"A2SV(Africa to Silicon Valley)",title:"Backend Engineer",description:"Develop reliable and scalable backend services using Go (Golang), focusing on performance, maintainability, and clean architecture. Collaborate with cross-functional teams to design APIs, implement best practices, optimize system efficiency, and deliver robust, production-ready backend solutions.",startDate:"Dec 2025",endDate:"Present",icon:T.jsx(ag,{})}),T.jsx(mg,{employer:"Hawassa University ICT Center",title:"Flutter Developer Intern",description:"Developed a Flutter application to digitalize the maintenance system for Hawassa University ICT Center, streamlining operations and user workflows. Integrated Firebase Firestore for secure authentication and data storage, alongside a real-time chat feature for seamless communication.",startDate:"Oct 2023",endDate:"Jan 2024",icon:T.jsx(ag,{})})]})}function tA({school:c,title:t,description:e,startDate:i,endDate:s,icon:n}){return T.jsxs("div",{className:"timeline-item",children:[T.jsxs("div",{className:"timeline-dates",children:[T.jsx("span",{className:"purple",children:i})," - ",s||"Present"]}),T.jsxs("div",{className:"timeline-content",children:[T.jsx("div",{className:"timeline-icon",children:n}),T.jsx(Fs,{className:"education-card-view",children:T.jsxs(Fs.Body,{children:[T.jsx("p",{className:"card-title",children:t}),T.jsx("p",{className:"card-school",children:c}),T.jsx("p",{className:"card-description",children:e})]})})]})]})}function pS(){return T.jsxs("div",{className:"education-timeline",children:[T.jsxs("h1",{style:{fontSize:"2.1em",padding:"140px 0 60px 0",color:"white"},className:"education-heading",children:["Educational ",T.jsx("strong",{className:"purple",children:"Background"})]}),T.jsx(tA,{school:"Jimma Institute of Technology",title:"BSc in Computer Engineering",description:T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"purple",children:"Coursework "}),": Data Structures and Algorithms, Software Engineering, Database systems, Object Oriented Programming",T.jsx("br",{}),T.jsx("span",{className:"purple",children:"CGPA:"})," 3.70"]}),startDate:" Oct 2019",endDate:"July 2024",icon:T.jsx(T2,{})}),T.jsx(tA,{school:"A2SV (Africa to Silicon Valley) - backed by Google twice",title:"Data Structures and Algorithms",description:T.jsxs(T.Fragment,{children:["A2SV upskills African tech talents and connects them with top tech companies resulting in 80+ offers from ",T.jsx("span",{className:"purple",children:"Google, Amazon, Meta, Palantir, Databricks, and Bloomberg"}),".",T.jsx("br",{}),"The education Focus on data structures & algorithms, advanced problem solving, system design & architecture, communication, and leadership"]}),startDate:"Jan 2025",endDate:"present",icon:T.jsx(T2,{})})]})}const Sk="modulepreload",Ek=function(c){return"/"+c},eA={},xk=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){let h=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");s=h(e.map(u=>{if(u=Ek(u),u in eA)return;eA[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Sk,f||(m.as="script"),m.crossOrigin="",m.href=u,o&&m.setAttribute("nonce",o),document.head.appendChild(m),f)return new Promise((y,w)=>{m.addEventListener("load",y),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return t().catch(n)})},Ck=864e5,gS=6e4,mS=36e5,iA=Symbol.for("constructDateFrom");function Sc(c,t){return typeof c=="function"?c(t):c&&typeof c=="object"&&iA in c?c[iA](t):c instanceof Date?new c.constructor(t):new Date(t)}function Us(c,t){return Sc(t||c,c)}function yS(c,t,e){const i=Us(c,e?.in);return isNaN(t)?Sc(c,NaN):(t&&i.setDate(i.getDate()+t),i)}function sA(c){const t=Us(c),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+c-+e}function bS(c,...t){const e=Sc.bind(null,t.find(i=>typeof i=="object"));return t.map(e)}function nA(c,t){const e=Us(c,t?.in);return e.setHours(0,0,0,0),e}function Tk(c,t,e){const[i,s]=bS(e?.in,c,t),n=nA(i),a=nA(s),o=+n-sA(n),h=+a-sA(a);return Math.round((o-h)/Ck)}function Mk(c,t,e){return yS(c,t*7,e)}function Dk(c){return c instanceof Date||typeof c=="object"&&Object.prototype.toString.call(c)==="[object Date]"}function Rk(c){return!(!Dk(c)&&typeof c!="number"||isNaN(+Us(c)))}function kk(c,t){const[e,i]=bS(c,t.start,t.end);return{start:e,end:i}}function vS(c,t){const{start:e,end:i}=kk(t?.in,c);let s=+e>+i;const n=s?+e:+i,a=s?i:e;a.setHours(0,0,0,0);let o=1;const h=[];for(;+a<=n;)h.push(Sc(e,a)),a.setDate(a.getDate()+o),a.setHours(0,0,0,0);return s?h.reverse():h}function Wn(c,t){const e=c<0?"-":"",i=Math.abs(c).toString().padStart(t,"0");return e+i}function AS(c,t){const e=Us(c,t?.in);if(isNaN(+e))throw new RangeError("Invalid time value");const i=t?.format??"extended",s=t?.representation??"complete";let n="",a="";const o=i==="extended"?"-":"",h=i==="extended"?":":"";if(s!=="time"){const u=Wn(e.getDate(),2),f=Wn(e.getMonth()+1,2);n=`${Wn(e.getFullYear(),4)}${o}${f}${o}${u}`}if(s!=="date"){const u=e.getTimezoneOffset();if(u!==0){const v=Math.abs(u),S=Wn(Math.trunc(v/60),2),_=Wn(v%60,2);a=`${u<0?"+":"-"}${S}:${_}`}else a="Z";const f=Wn(e.getHours(),2),p=Wn(e.getMinutes(),2),m=Wn(e.getSeconds(),2),y=n===""?"":"T",w=[f,p,m].join(h);n=`${n}${y}${w}${a}`}return n}function wS(c,t){return Us(c,t?.in).getDay()}function Lk(c,t){return Us(c,t?.in).getMonth()}function Ok(c,t){return Us(c,t?.in).getFullYear()}function Pk(c,t,e){let i=t-wS(c,e);return i<=0&&(i+=7),yS(c,i,e)}function Ao(c,t){const e=()=>Sc(t?.in,NaN),s=Bk(c);let n;if(s.date){const u=zk(s.date,2);n=jk(u.restDateString,u.year)}if(!n||isNaN(+n))return e();const a=+n;let o=0,h;if(s.time&&(o=Hk(s.time),isNaN(o)))return e();if(s.timezone){if(h=Uk(s.timezone),isNaN(h))return e()}else{const u=new Date(a+o),f=Us(0,t?.in);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return Us(a+o+h,t?.in)}const ou={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Nk=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Fk=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ik=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Bk(c){const t={},e=c.split(ou.dateTimeDelimiter);let i;if(e.length>2)return t;if(/:/.test(e[0])?i=e[0]:(t.date=e[0],i=e[1],ou.timeZoneDelimiter.test(t.date)&&(t.date=c.split(ou.timeZoneDelimiter)[0],i=c.substr(t.date.length,c.length))),i){const s=ou.timezone.exec(i);s?(t.time=i.replace(s[1],""),t.timezone=s[1]):t.time=i}return t}function zk(c,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=c.match(e);if(!i)return{year:NaN,restDateString:""};const s=i[1]?parseInt(i[1]):null,n=i[2]?parseInt(i[2]):null;return{year:n===null?s:n*100,restDateString:c.slice((i[1]||i[2]).length)}}function jk(c,t){if(t===null)return new Date(NaN);const e=c.match(Nk);if(!e)return new Date(NaN);const i=!!e[4],s=Rl(e[1]),n=Rl(e[2])-1,a=Rl(e[3]),o=Rl(e[4]),h=Rl(e[5])-1;if(i)return Xk(t,o,h)?$k(t,o,h):new Date(NaN);{const u=new Date(0);return!Vk(t,n,a)||!qk(t,s)?new Date(NaN):(u.setUTCFullYear(t,n,Math.max(s,a)),u)}}function Rl(c){return c?parseInt(c):1}function Hk(c){const t=c.match(Fk);if(!t)return NaN;const e=yg(t[1]),i=yg(t[2]),s=yg(t[3]);return Yk(e,i,s)?e*mS+i*gS+s*1e3:NaN}function yg(c){return c&&parseFloat(c.replace(",","."))||0}function Uk(c){if(c==="Z")return 0;const t=c.match(Ik);if(!t)return 0;const e=t[1]==="+"?-1:1,i=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return Wk(i,s)?e*(i*mS+s*gS):NaN}function $k(c,t,e){const i=new Date(0);i.setUTCFullYear(c,0,4);const s=i.getUTCDay()||7,n=(t-1)*7+e+1-s;return i.setUTCDate(i.getUTCDate()+n),i}const Gk=[31,null,31,30,31,30,31,31,30,31,30,31];function _S(c){return c%400===0||c%4===0&&c%100!==0}function Vk(c,t,e){return t>=0&&t<=11&&e>=1&&e<=(Gk[t]||(_S(c)?29:28))}function qk(c,t){return t>=1&&t<=(_S(c)?366:365)}function Xk(c,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Yk(c,t,e){return c===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&c>=0&&c<25}function Wk(c,t){return t>=0&&t<=59}function Kk(c,t,e){return Mk(c,-1,e)}const Qm="react-activity-calendar",bg=8,SS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qk={months:SS,weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],totalCount:"{{count}} activities in {{year}}",legend:{less:"Less",more:"More"}};function Zk(){const[c,t]=F.useState("light"),e=i=>{t(i.matches?"dark":"light")};return F.useEffect(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)");return t(i.matches?"dark":"light"),i.addEventListener("change",e),()=>{i.removeEventListener("change",e)}},[]),c}const ES=`${Qm}--loading-animation`;function Jk(c,t){const[e,i]=F.useState(!1);return F.useEffect(()=>{const s=`oklab(from ${c} l a b)`,n=t==="light"?`oklab(from ${c} calc(l * 0.96) a b)`:`oklab(from ${c} calc(l * 1.08) a b)`,a=document.createElement("style");a.innerHTML=`
      @keyframes ${ES} {
        0% {
          fill: ${s};
        }
        50% {
          fill: ${n};
        }
        100% {
          fill: ${s};
        }
      }
    `;const o=()=>{i(!0)};return document.head.appendChild(a),a.addEventListener("load",o),()=>{document.head.removeChild(a),a.removeEventListener("load",o),i(!1)}},[c,t]),e}const tL="(prefers-reduced-motion: reduce)";function eL(){const[c,t]=F.useState(!0);return F.useEffect(()=>{const e=window.matchMedia(tL);t(e.matches);const i=s=>{t(s.matches)};return e.addEventListener("change",i),()=>{e.removeEventListener("change",i)}},[]),c}function iL(c,t){if(c.length===0)throw new Error("Activity data must not be empty.");for(const{date:e,level:i,count:s}of c){if(!Rk(Ao(e)))throw new Error(`Activity date '${e}' is not a valid ISO 8601 date string.`);if(s<0)throw new RangeError(`Activity count must not be negative, found ${s}.`);if(i<0||i>t)throw new RangeError(`Activity level ${i} for ${e} is out of range. It must be between 0 and ${t}.`)}}function sL(c,t=0){const e=nL(c),i=e[0],s=Ao(i.date),n=wS(s)===t?s:Kk(Pk(s,t)),a=[...Array(Tk(s,n)).fill(void 0),...e],o=Math.ceil(a.length/7);return ku(o).map(h=>a.slice(h*7,h*7+7))}function nL(c){const t=new Map(c.map(s=>[s.date,s])),e=c[0],i=c[c.length-1];return vS({start:Ao(e.date),end:Ao(i.date)}).map(s=>{const n=AS(s,{representation:"date"});return t.has(n)?t.get(n):{date:n,count:0,level:0}})}function Or(c){return`${Qm}__${c}`}function ku(c){return[...Array(c).keys()]}function rL(){const c=new Date().getFullYear();return vS({start:new Date(c,0,1),end:new Date(c,11,31)}).map(e=>({date:AS(e,{representation:"date"}),count:0,level:0}))}function aL(c,t=SS){return c.reduce((e,i,s)=>{const n=i.find(h=>h!==void 0);if(!n)throw new Error(`Unexpected error: Week ${s+1} is empty.`);const a=t[Lk(Ao(n.date))];if(!a){const h=new Date(n.date).toLocaleString("en-US",{month:"short"});throw new Error(`Unexpected error: undefined month label for ${h}.`)}const o=e[e.length-1];return s===0||o?.label!==a?[...e,{weekIndex:s,label:a}]:e},[]).filter(({weekIndex:e},i,s)=>i===0?s[1]&&s[1].weekIndex-e>=3:i===s.length-1?c.slice(e).length>=3:!0)}function oL(c,t,e){if(c.length!==7)throw new Error("Exactly 7 labels, one for each weekday must be passed.");return c.reduce((i,s,n)=>t.byDayIndex(n)?Math.max(i,Math.ceil(lL(s,e).width)):i,0)}function lL(c,t){if(typeof document>"u"||typeof window>"u")return{width:0,height:0};if(t<1)throw new RangeError("fontSize must be positive");if(c.length===0)return{width:0,height:0};const e="http://www.w3.org/2000/svg",i=document.createElementNS(e,"svg");i.style.position="absolute",i.style.visibility="hidden",i.style.fontFamily=window.getComputedStyle(document.body).fontFamily,i.style.fontSize=`${t}px`;const s=document.createElementNS(e,"text");s.textContent=c,i.appendChild(s),document.body.appendChild(i);const n=s.getBBox();return document.body.removeChild(i),{width:n.width,height:n.height}}function cL(c,t){if(!c)return{byDayIndex:()=>!1,shouldShow:!1};if(c===!0)return{byDayIndex:i=>(7+i-t)%7%2!==0,shouldShow:!0};const e=[];for(const i of c){const s=hL[i.toLowerCase()];e[s]=!0}return{byDayIndex:i=>e[i]??!1,shouldShow:c.length>0}}const hL={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};function uL(c,t=5){const e=dL(t);return c?(fL(c,t),c.light=c.light??e.light,c.dark=c.dark??e.dark,{light:rA(c.light)?Lu(c.light,t):c.light,dark:rA(c.dark)?Lu(c.dark,t):c.dark}):e}function dL(c){return{light:Lu(["hsl(0, 0%, 92%)","hsl(0, 0%, 26%)"],c),dark:Lu(["hsl(0, 0%, 22%)","hsl(0, 0%, 92%)"],c)}}function fL(c,t){const e='The number of colors is controlled by the "maxLevel" property.';if(typeof c!="object"||c.light===void 0&&c.dark===void 0)throw new Error(`The theme object must contain at least one of the fields "light" and "dark" with exactly 2 or ${t} colors respectively. ${e}`);if(c.light){const{length:i}=c.light;if(i!==2&&i!==t)throw new Error(`theme.light must contain exactly 2 or ${t} colors, ${i} passed. ${e}`);for(const s of c.light)if(typeof window<"u"&&!CSS.supports("color",s))throw new Error(`Invalid color "${s}" passed. All CSS color formats are accepted.`)}if(c.dark){const{length:i}=c.dark;if(i!==2&&i!==t)throw new Error(`theme.dark must contain exactly 2 or ${t} colors, ${i} passed. ${e}`);for(const s of c.dark)if(typeof window<"u"&&!CSS.supports("color",s))throw new Error(`Invalid color "${s}" passed. All CSS color formats are accepted.`)}}function Lu([c,t],e){return ku(e).map(i=>{switch(i){case 0:return c;case e-1:return t;default:{const s=i/(e-1)*100;return`color-mix(in oklab, ${t} ${parseFloat(s.toFixed(2))}%, ${c})`}}})}function rA(c){return c.length===2}const Pr={container:c=>({width:"max-content",maxWidth:"100%",display:"flex",flexDirection:"column",gap:"8px",fontSize:`${c}px`}),scrollContainer:c=>({maxWidth:"100%",overflowX:"auto",overflowY:"hidden",paddingTop:Math.ceil(.1*c)}),calendar:{display:"block",overflow:"visible"},rect:c=>({stroke:c==="light"?"rgba(0, 0, 0, 0.08)":"rgba(255, 255, 255, 0.04)"}),footer:{container:{display:"flex",flexWrap:"wrap",gap:"4px 16px",whiteSpace:"nowrap"},legend:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"3px"}}},aA=F.lazy(()=>xk(()=>import("./Tooltip-CX2cJQ7a-_k3Hzfsy.js"),[]).then(c=>({default:c.Tooltip}))),lm=F.forwardRef(({data:c,blockMargin:t=4,blockRadius:e=2,blockSize:i=12,colorScheme:s=void 0,fontSize:n=14,labels:a=void 0,loading:o=!1,maxLevel:h=4,renderBlock:u=void 0,renderColorLegend:f=void 0,showColorLegend:p=!0,showMonthLabels:m=!0,showTotalCount:y=!0,showWeekdayLabels:w=!1,style:v={},theme:S=void 0,tooltips:_={},weekStart:x=0},E)=>{const[R,D]=F.useState(!1);F.useEffect(()=>{D(!0)},[]),h=Math.max(1,h);const M=uL(S,h+1),k=Zk(),N=s??k,I=M[N],G=Jk(I[0],N),j=!eL();if(o){if(j&&!G)return null;c=rL()}iL(c,h);const tt=c[0],ot=Ok(Ao(tt.date)),rt=sL(c,x),lt=Object.assign({},Qk,a),O=m?n+bg:0,$=cL(w,x),K=R&&$.shouldShow?oL(lt.weekdays,$,n)+bg:void 0;function at(){return{width:rt.length*(i+t)-t,height:O+(i+t)*7-t}}function nt(){return rt.map((Z,et)=>Z.map((mt,gt)=>{if(!mt)return null;const Tt=o&&j?{animation:`${ES} 1.75s ease-in-out infinite`,animationDelay:`${et*20+gt*20}ms`}:void 0,qt=T.jsx("rect",{x:0,y:O+(i+t)*gt,width:i,height:i,rx:e,ry:e,fill:I[mt.level],"data-date":mt.date,"data-level":mt.level,style:{...Pr.rect(N),...Tt}}),ie=u?u(qt,mt):qt;return T.jsx(F.Fragment,{children:_.activity?T.jsx(F.Suspense,{fallback:ie,children:T.jsx(aA,{text:_.activity.text(mt),colorScheme:N,placement:_.activity.placement??"top",hoverRestMs:_.activity.hoverRestMs,offset:_.activity.offset,transitionStyles:_.activity.transitionStyles,withArrow:_.activity.withArrow,children:ie})}):ie},mt.date)})).map((Z,et)=>T.jsx("g",{transform:`translate(${(i+t)*et}, 0)`,children:Z},et))}function P(){if(!y&&!p)return null;const Z=c.reduce((et,mt)=>et+mt.count,0);return T.jsxs("footer",{className:Or("footer"),style:{...Pr.footer.container,marginLeft:K},children:[o&&T.jsx("div",{children:""}),!o&&y&&T.jsx("div",{className:Or("count"),children:lt.totalCount?lt.totalCount.replace("{{count}}",String(Z)).replace("{{year}}",String(ot)):`${Z} activities in ${ot}`}),!o&&p&&T.jsxs("div",{className:Or("legend-colors"),style:Pr.footer.legend,children:[T.jsx("span",{style:{marginRight:"0.4em"},children:lt.legend.less}),ku(h+1).map(et=>{const mt=T.jsx("svg",{width:i,height:i,children:T.jsx("rect",{width:i,height:i,fill:I[et],rx:e,ry:e,style:Pr.rect(N)})},et),gt=f?f(mt,et):mt;return T.jsx(F.Fragment,{children:_.colorLegend?T.jsx(F.Suspense,{fallback:gt,children:T.jsx(aA,{text:_.colorLegend.text(et),colorScheme:N,placement:_.colorLegend.placement??"bottom",hoverRestMs:_.colorLegend.hoverRestMs,offset:_.colorLegend.offset,transitionStyles:_.colorLegend.transitionStyles,withArrow:_.colorLegend.withArrow,children:gt})}):gt},et)}),T.jsx("span",{style:{marginLeft:"0.4em"},children:lt.legend.more})]})]})}function H(){return $.shouldShow?T.jsx("g",{className:Or("legend-weekday"),children:ku(7).map(Z=>{const et=(Z+x)%7;return $.byDayIndex(et)?T.jsx("text",{x:-bg,y:O+(i+t)*Z+i/2,dominantBaseline:"central",textAnchor:"end",fill:"currentColor",children:lt.weekdays[et]},Z):null})}):null}function W(){return m?T.jsx("g",{className:Or("legend-month"),children:aL(rt,lt.months).map(({label:Z,weekIndex:et})=>T.jsx("text",{x:(i+t)*et,y:0,dominantBaseline:"hanging",fill:"currentColor",children:Z},et))}):null}const{width:z,height:ct}=at();return T.jsxs("article",{ref:E,className:Qm,style:{...v,...Pr.container(n)},children:[T.jsx("div",{className:Or("scroll-container"),style:Pr.scrollContainer(n),children:T.jsxs("svg",{width:z,height:ct,viewBox:`0 0 ${z} ${ct}`,className:Or("calendar"),style:{...Pr.calendar,marginLeft:K},children:[!o&&H(),!o&&W(),nt()]})}),P()]})});lm.displayName="ActivityCalendar";const pL={light:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],dark:["#161b22","#0e4429","#006d32","#26a641","#39d353"]},gL=(c,t)=>{if(typeof t!="function")return c;const e=t(c);if(!Array.isArray(e))throw Error("transformData() function must return a list of Activity objects.");for(const i of e){if(!mL(i))throw Error("transformData() must return a list of valid Activity objects.");if(typeof i.count!="number"||i.count<0)throw Error(`Required property "count: number" missing or invalid. Got: ${i.count}`);if(typeof i.date!="string"||!/\d{4}-\d{2}-\d{2}/.test(i.date))throw Error(`Required property "date: YYYY-MM-DD" missing or invalid. Got: ${i.date}`);if(typeof i.level!="number"||i.level<0||i.level>4)throw Error(`Required property "level: 0 | 1 | 2 | 3 | 4" missing or invalid: Got: ${i.level}.`)}return e},mL=c=>Object.prototype.toString.call(c)==="[object Object]";async function yL(c,t){const i=await fetch(`https://github-contributions-api.jogruber.de/v4/${c}?y=${String(t)}`),s=await i.json();if(!i.ok)throw Error(`Fetching GitHub contribution data for "${c}" failed: ${s.error}`);return s}const xS=F.forwardRef(({username:c,year:t="last",labels:e,transformData:i,throwOnError:s=!1,errorMessage:n=`Error  Fetching GitHub contribution data for "${c}" failed.`,...a},o)=>{const[h,u]=F.useState(null),[f,p]=F.useState(!1),[m,y]=F.useState(null),w=F.useCallback(()=>{p(!0),y(null),yL(c,t).then(u).catch(_=>{_ instanceof Error&&y(_)}).finally(()=>{p(!1)})},[c,t]);if(F.useEffect(w,[w]),m){if(s)throw m;return T.jsx("div",{children:n})}if(f||!h)return T.jsx(lm,{...a,data:[],loading:!0});const v=a.theme??pL,S={totalCount:`{{count}} contributions in ${t==="last"?"the last year":"{{year}}"}`};return T.jsx(lm,{data:gL(h.contributions,i),labels:Object.assign({},S,e),ref:o,...a,theme:v,loading:!!a.loading||f,maxLevel:4})});xS.displayName="GitHubCalendar";function bL(){return T.jsxs(An,{style:{justifyContent:"center",paddingBottom:"10px"},children:[T.jsxs("h1",{className:"project-heading",style:{paddingBottom:"20px"},children:["Days I ",T.jsx("strong",{className:"purple",children:"Code"})]}),T.jsx(xS,{username:"Muluken-Zewge",blockSize:15,blockMargin:5,color:"#c084f5",fontSize:16})]})}function vL(c){return Pt({attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M6.802 20.283c0 1.23-0.857 2.237-1.904 2.237s-1.905-1.006-1.905-2.237v-7.321c0-1.23 0.857-2.237 1.905-2.237s1.904 1.007 1.904 2.237v7.321zM29.007 20.283c0 1.23-0.857 2.237-1.905 2.237s-1.905-1.006-1.905-2.237v-7.321c0-1.23 0.857-2.237 1.905-2.237s1.905 1.007 1.905 2.237v7.321zM20.164 3.649l1.222-2.193c0.1-0.179 0.070-0.388-0.065-0.463s-0.329 0.009-0.428 0.188l-1.25 2.244c-1.115-0.439-2.364-0.684-3.684-0.684-1.33 0-2.588 0.25-3.71 0.695l-1.256-2.254c-0.1-0.179-0.293-0.264-0.428-0.188s-0.165 0.284-0.065 0.463l1.228 2.204c-2.555 1.2-4.276 3.453-4.276 6.035 0 0.262 0.019 0.521 0.053 0.776h16.909c0.035-0.255 0.053-0.513 0.053-0.776 0-2.59-1.732-4.849-4.301-6.046zM12.097 7.477c-0.411 0-0.744-0.333-0.744-0.744s0.333-0.744 0.744-0.744 0.744 0.333 0.744 0.744c0 0.411-0.333 0.744-0.744 0.744zM19.861 7.477c-0.411 0-0.744-0.333-0.744-0.744s0.333-0.744 0.744-0.744 0.744 0.333 0.744 0.744c0 0.411-0.333 0.744-0.744 0.744zM7.45 11.211v12.471h0.007c0.087 1.053 1.056 1.89 2.23 1.89h12.541c1.173 0 2.142-0.837 2.23-1.89h0.007v-12.471h-17.014zM14.74 25.51v3.858c0 1.23-0.857 2.237-1.905 2.237s-1.904-1.007-1.904-2.237v-3.855zM21.088 25.508v3.86c0 1.23-0.857 2.237-1.905 2.237s-1.905-1.007-1.905-2.237v-3.86z"},child:[]}]})(c)}function AL(c){return Pt({attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M13.951 15.861l1.917-3.34c0.143-0.25 0.057-0.571-0.193-0.716l-1.364-0.78c-0.249-0.144-0.571-0.057-0.714 0.192l-6.316 11c-0.144 0.25-0.057 0.57 0.193 0.713l1.363 0.784c0.25 0.143 0.572 0.056 0.716-0.192l4.398-7.661zM26.806 14.859h-4.602c0.541 1.015 1.044 1.97 1.397 2.646 0.244 0.467 0.438 0.836 0.507 0.96 0.071 0.131 0.123 0.267 0.157 0.405h2.541c0.261 0 0.474-0.212 0.474-0.473v-3.064c0-0.261-0.213-0.473-0.474-0.473zM15.619 14.859l-2.303 4.011h6.249c-0.453-0.895-1.054-2.176-1.862-4.011h-2.084zM10.415 14.859h-5.298c-0.261 0-0.473 0.212-0.473 0.473v3.064c0 0.261 0.212 0.473 0.473 0.473h2.995l2.303-4.010zM8.392 24.315l-1.363-0.782c-0.25-0.143-0.481-0.026-0.514 0.26l-0.236 2.053c-0.033 0.286 0.135 0.388 0.373 0.226l1.761-1.201c0.239-0.161 0.228-0.412-0.021-0.556zM23.278 18.921c-0.008-0.013-0.018-0.032-0.028-0.051v0c-0.127-0.234-0.444-0.844-0.861-1.635-0.005-0.011-0.010-0.020-0.015-0.030-0.031-0.061-0.064-0.122-0.097-0.185-0.024-0.045-0.048-0.090-0.073-0.137-0.020-0.040-0.041-0.079-0.062-0.119-0.037-0.070-0.075-0.14-0.112-0.212-0.012-0.023-0.023-0.045-0.035-0.067-0.042-0.081-0.085-0.162-0.129-0.244-0.012-0.024-0.024-0.047-0.037-0.071-0.96-1.816-2.166-4.052-2.91-5.227-1.303-2.060-3.043-5.493-3.529-5.249-0.68 0.339 1.426 4.697 2.122 6.335s3.417 7.913 3.962 8.187c0.547 0.273 0.757 0.121 1.121-0.029 0.365-0.152 1.017-0.656 0.684-1.264zM24.832 22.154l-0.649-1.246c-0.147-0.282-0.493-0.396-0.769-0.256l-0.783 0.403c-0.276 0.143-0.362 0.477-0.193 0.746l0.822 1.298c0.17 0.268 0.528 0.355 0.794 0.195l0.559-0.336c0.267-0.16 0.366-0.522 0.22-0.804zM24.632 23.959c-0.205 0.196-0.691 0.621-0.102 1.447 0.586 0.828 1.897 0.865 2.070 1.414 0 0 0.411-4.204-1.968-2.862z"},child:[]}]})(c)}function wL(c){return Pt({attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M22.797 14.562c-0.067-0.774-0.209-1.546-0.407-2.297-0.625-2.369-1.666-4.637-3.134-6.603-0.4-0.536-0.832-1.048-1.294-1.532-0.476-0.499-1.004-0.957-1.336-1.578-0.21-0.393-0.41-0.791-0.614-1.187-0.003 0.124-0.011 0.248-0.011 0.371-0-0.124 0.009-0.248 0.011-0.372-0.038-0.095-0.076-0.191-0.13-0.327-0.022 0.075-0.036 0.101-0.036 0.129-0.017 0.645-0.383 1.083-0.838 1.492-0.512 0.46-0.989 0.959-1.481 1.441 0.017 0.022 0.036 0.044 0.055 0.066-0.019-0.022-0.038-0.043-0.055-0.066-1.463 1.924-2.752 3.981-3.511 6.29-0.221 0.672-0.395 1.359-0.517 2.056-0.259 1.481-0.379 2.92-0.296 4.42 0.046 0.829 0.191 1.645 0.407 2.448 0.785 2.917 2.379 5.336 4.558 7.392 0.405 0.382 0.842 0.729 1.265 1.093 0.001-0.004 0.002-0.007 0.003-0.011-0.001 0.004-0.002 0.007-0.003 0.011 0.062 0.214 0.125 0.428 0.187 0.642 0.058 0.332 0.116 0.664 0.174 0.996 0.028 0.346 0.055 0.693 0.083 1.039-0.001 0.211-0.010 0.423 0.003 0.633 0.003 0.054 0.074 0.104 0.113 0.156 0.001-0.002 0.002-0.004 0.004-0.006-0.001 0.002-0.002 0.004-0.004 0.006 0.118 0.041 0.235 0.083 0.353 0.124 0.106 0.041 0.212 0.083 0.367 0.143-0.023-0.346-0.043-0.635-0.063-0.924-0.001-0.303-0.002-0.607-0.003-0.91-0.006 0.007-0.014 0.014-0.021 0.021 0.007-0.007 0.014-0.014 0.021-0.021 0.042-0.462 0.085-0.924 0.127-1.386 0.031-0.101 0.061-0.201 0.092-0.302 0.088-0.156 0.175-0.311 0.263-0.467 0.325-0.262 0.674-0.499 0.971-0.79 0.536-0.527 1.071-1.060 1.55-1.637 0.622-0.748 1.158-1.565 1.588-2.441 1.223-2.491 1.789-5.269 1.564-8.039-0.002-0.024-0.004-0.049-0.006-0.074z"},child:[]}]})(c)}function _L(c){return Pt({attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M14.824 7.518c0 0.007 0.103 0.202 0.232 0.441 0.126 0.235 0.219 0.437 0.205 0.447s-0.371 0.146-0.792 0.295c-0.424 0.152-0.765 0.282-0.759 0.288s0.487 0.056 1.067 0.109c0.699 0.066 1.067 0.113 1.093 0.139 0.023 0.023 0.182 0.282 0.358 0.57l0.315 0.53 0.056-0.133c0.030-0.070 0.126-0.302 0.215-0.51l0.156-0.381 0.841-0.089c0.46-0.050 0.871-0.089 0.914-0.089 0.040-0.003 0.073-0.013 0.073-0.030 0-0.013-0.311-0.142-0.696-0.285-0.381-0.142-0.696-0.265-0.696-0.268s0.083-0.205 0.182-0.447 0.175-0.447 0.169-0.454c-0.007-0.010-0.331 0.089-0.715 0.215l-0.702 0.229-0.745-0.295c-0.732-0.288-0.772-0.301-0.772-0.282zM19.452 10.038c-0.891 0.354-1.623 0.649-1.63 0.656s0.656 0.275 1.474 0.6l1.484 0.586 0.159-0.063c1.653-0.643 3.157-1.242 3.15-1.249-0.023-0.027-2.948-1.172-2.981-1.172-0.023 0.003-0.768 0.291-1.656 0.643zM10.899 9.694c-0.855 0.089-1.573 0.338-1.878 0.653-0.209 0.215-0.242 0.398-0.113 0.619 0.192 0.331 0.822 0.61 1.693 0.752 0.391 0.066 1.54 0.056 1.938-0.013 0.931-0.162 1.534-0.46 1.676-0.835 0.053-0.139 0.053-0.159 0-0.295-0.139-0.364-0.732-0.666-1.61-0.818-0.444-0.076-1.272-0.106-1.706-0.063zM26.819 10.724c-0.043 0.056-0.202 0.182-0.354 0.285-0.451 0.291-1.034 0.556-4.651 2.113-2.544 1.093-3.193 1.381-4.074 1.805-0.977 0.467-1.381 0.596-1.872 0.596-0.441 0-0.702-0.076-1.524-0.441-0.328-0.146-1.67-0.709-2.981-1.255-5.734-2.385-5.84-2.435-6.148-2.766l-0.129-0.142v2.256l0.146 0.139c0.139 0.136 0.613 0.421 0.782 0.47 0.046 0.013 0.358 0.142 0.696 0.288s1.984 0.835 3.66 1.534c2.773 1.156 3.405 1.421 4.349 1.835 0.5 0.222 0.778 0.278 1.249 0.262 0.345-0.013 0.447-0.033 0.749-0.136 0.195-0.066 0.533-0.209 0.752-0.318 0.719-0.361 1.59-0.745 5.058-2.239 3.263-1.408 3.687-1.603 4.041-1.848 0.364-0.258 0.348-0.195 0.348-1.451 0-0.6-0.003-1.090-0.010-1.090s-0.043 0.046-0.086 0.103zM15.397 12.195c-1.335 0.205-2.441 0.381-2.461 0.388-0.030 0.010 3.326 1.421 3.468 1.457 0.033 0.010 1.534-2.15 1.534-2.206 0-0.030 0.003-0.033-2.541 0.361zM26.838 14.428c-0.030 0.050-0.169 0.172-0.305 0.268-0.434 0.298-1.086 0.596-5.052 2.302-2.282 0.984-2.998 1.299-3.677 1.63-1.1 0.533-1.365 0.619-1.954 0.616-0.457-0.003-0.739-0.076-1.345-0.351-0.583-0.268-1.236-0.543-3.856-1.63-4.558-1.891-5.085-2.127-5.406-2.438l-0.159-0.149v2.219l0.179 0.169c0.292 0.272 0.262 0.258 5.154 2.296 1.795 0.745 3.488 1.457 3.76 1.58 0.722 0.325 0.931 0.401 1.216 0.46 0.666 0.136 1.159 0.026 2.239-0.5 0.702-0.341 1.56-0.722 3.637-1.616 3.948-1.703 4.922-2.14 5.21-2.332 0.103-0.073 0.242-0.189 0.311-0.265l0.123-0.136v-1.11c0-0.61-0.003-1.11-0.010-1.11-0.003 0-0.033 0.043-0.066 0.096zM26.802 18.061c-0.262 0.328-0.785 0.58-4.856 2.332-2.657 1.146-3.465 1.504-4.339 1.921-0.918 0.437-1.219 0.53-1.749 0.53-0.361 0-0.729-0.086-1.136-0.265-0.951-0.417-1.577-0.682-4.353-1.838-3.157-1.315-4.167-1.742-4.505-1.911-0.315-0.159-0.636-0.384-0.709-0.5l-0.070-0.106v1.13c0 1.295-0.023 1.199 0.325 1.434 0.384 0.258 0.954 0.51 4.744 2.083 2.65 1.1 3.604 1.501 4.074 1.713 0.961 0.431 1.216 0.5 1.752 0.47 0.49-0.023 0.812-0.129 1.66-0.533 0.884-0.424 1.537-0.715 4.422-1.958 4.008-1.726 4.442-1.934 4.747-2.286l0.106-0.119v-1.106c0-0.61-0.003-1.11-0.007-1.11-0.007 0-0.053 0.053-0.106 0.119z"},child:[]}]})(c)}function SL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4.105 4.105S9.158 1.58 11.684.316a3.079 3.079 0 0 1 1.481-.315c.766.047 1.677.788 1.677.788L24 9.948v9.789h-4.263V24H9.789l-9-9C.303 14.5 0 13.795 0 13.105c0-.319.18-.818.316-1.105l3.789-7.895zm.679.679v11.787c.002.543.021 1.024.498 1.508L10.204 23h8.533v-4.263L4.784 4.784zm12.055-.678c-.899-.896-1.809-1.78-2.74-2.643-.302-.267-.567-.468-1.07-.462-.37.014-.87.195-.87.195L6.341 4.105l10.498.001z"},child:[]}]})(c)}function EL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.184-.186h-2.12a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288Z"},child:[]}]})(c)}function xL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.455 8.369c-.538-.748-1.778-2.285-3.681-4.569-.826-.991-1.535-1.832-1.884-2.245a146 146 0 0 0-.488-.576l-.207-.245-.113-.133-.022-.032-.01-.005L12.57 0l-.609.488c-1.555 1.246-2.828 2.851-3.681 4.64-.523 1.064-.864 2.105-1.043 3.176-.047.241-.088.489-.121.738-.209-.017-.421-.028-.632-.033-.018-.001-.035-.002-.059-.003a7.46 7.46 0 0 0-2.28.274l-.317.089-.163.286c-.765 1.342-1.198 2.869-1.252 4.416-.07 2.01.477 3.954 1.583 5.625 1.082 1.633 2.61 2.882 4.42 3.611l.236.095.071.025.003-.001a9.59 9.59 0 0 0 2.941.568q.171.006.342.006c1.273 0 2.513-.249 3.69-.742l.008.004.313-.145a9.63 9.63 0 0 0 3.927-3.335c1.01-1.49 1.577-3.234 1.641-5.042.075-2.161-.643-4.304-2.133-6.371m-7.083 6.695c.328 1.244.264 2.44-.191 3.558-1.135-1.12-1.967-2.352-2.475-3.665-.543-1.404-.87-2.74-.974-3.975.48.157.922.366 1.315.622 1.132.737 1.914 1.902 2.325 3.461zm.207 6.022c.482.368.99.712 1.513 1.028-.771.21-1.565.302-2.369.273a8 8 0 0 1-.373-.022c.458-.394.869-.823 1.228-1.279zm1.347-6.431c-.516-1.957-1.527-3.437-3.002-4.398-.647-.421-1.385-.741-2.194-.95.011-.134.026-.268.043-.4.014-.113.03-.216.046-.313.133-.689.332-1.37.589-2.025.099-.25.206-.499.321-.74l.004-.008c.177-.358.376-.719.61-1.105l.092-.152-.003-.001c.544-.851 1.197-1.627 1.942-2.311l.288.341c.672.796 1.304 1.548 1.878 2.237 1.291 1.549 2.966 3.583 3.612 4.48 1.277 1.771 1.893 3.579 1.83 5.375-.049 1.395-.461 2.755-1.195 3.933-.694 1.116-1.661 2.05-2.8 2.708-.636-.318-1.559-.839-2.539-1.599.79-1.575.952-3.28.479-5.072zm-2.575 5.397c-.725.939-1.587 1.55-2.09 1.856-.081-.029-.163-.06-.243-.093l-.065-.026c-1.49-.616-2.747-1.656-3.635-3.01-.907-1.384-1.356-2.993-1.298-4.653.041-1.19.338-2.327.882-3.379.316-.07.638-.114.96-.131l.084-.002c.162-.003.324-.003.478 0 .227.011.454.035.677.07.073 1.513.445 3.145 1.105 4.852.637 1.644 1.694 3.162 3.144 4.515z"},child:[]}]})(c)}function CL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.314 0L2.3 12 6 15.7 21.684.013h-7.357zm.014 11.072L7.857 17.53l6.47 6.47H21.7l-6.46-6.468 6.46-6.46h-7.37z"},child:[]}]})(c)}function TL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187"},child:[]}]})(c)}function ML(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"},child:[]}]})(c)}function DL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.811 10.231c-.047 0-.058-.023-.035-.059l.246-.315c.023-.035.081-.058.128-.058h4.172c.046 0 .058.035.035.07l-.199.303c-.023.036-.082.07-.117.07zM.047 11.306c-.047 0-.059-.023-.035-.058l.245-.316c.023-.035.082-.058.129-.058h5.328c.047 0 .07.035.058.07l-.093.28c-.012.047-.058.07-.105.07zm2.828 1.075c-.047 0-.059-.035-.035-.07l.163-.292c.023-.035.07-.07.117-.07h2.337c.047 0 .07.035.07.082l-.023.28c0 .047-.047.082-.082.082zm12.129-2.36c-.736.187-1.239.327-1.963.514-.176.046-.187.058-.34-.117-.174-.199-.303-.327-.548-.444-.737-.362-1.45-.257-2.115.175-.795.514-1.204 1.274-1.192 2.22.011.935.654 1.706 1.577 1.835.795.105 1.46-.175 1.987-.77.105-.13.198-.27.315-.434H10.47c-.245 0-.304-.152-.222-.35.152-.362.432-.97.596-1.274a.315.315 0 01.292-.187h4.253c-.023.316-.023.631-.07.947a4.983 4.983 0 01-.958 2.29c-.841 1.11-1.94 1.8-3.33 1.986-1.145.152-2.209-.07-3.143-.77-.865-.655-1.356-1.52-1.484-2.595-.152-1.274.222-2.419.993-3.424.83-1.086 1.928-1.776 3.272-2.02 1.098-.2 2.15-.07 3.096.571.62.41 1.063.97 1.356 1.648.07.105.023.164-.117.2m3.868 6.461c-1.064-.024-2.034-.328-2.852-1.029a3.665 3.665 0 01-1.262-2.255c-.21-1.32.152-2.489.947-3.529.853-1.122 1.881-1.706 3.272-1.95 1.192-.21 2.314-.095 3.33.595.923.63 1.496 1.484 1.648 2.605.198 1.578-.257 2.863-1.344 3.962-.771.783-1.718 1.273-2.805 1.495-.315.06-.63.07-.934.106zm2.78-4.72c-.011-.153-.011-.27-.034-.387-.21-1.157-1.274-1.81-2.384-1.554-1.087.245-1.788.935-2.045 2.033-.21.912.234 1.835 1.075 2.21.643.28 1.285.244 1.905-.07.923-.48 1.425-1.228 1.484-2.233z"},child:[]}]})(c)}function RL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.571 11.513H0a5.218 5.218 0 0 0 5.232 5.215h2.13v2.057A5.215 5.215 0 0 0 12.575 24V12.518a1.005 1.005 0 0 0-1.005-1.005zm5.723-5.756H5.736a5.215 5.215 0 0 0 5.215 5.214h2.129v2.058a5.218 5.218 0 0 0 5.215 5.214V6.758a1.001 1.001 0 0 0-1.001-1.001zM23.013 0H11.455a5.215 5.215 0 0 0 5.215 5.215h2.129v2.057A5.215 5.215 0 0 0 24 12.483V1.005A1.001 1.001 0 0 0 23.013 0Z"},child:[]}]})(c)}function kL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378 0 0 0-1.951-.003l-2.396 2.392a3.021 3.021 0 0 1-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68 0 0 1 .066-.523 2.545 2.545 0 0 1 .619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.94-.207a1.384 1.384 0 0 0-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384 0 0 0 13.483 0zm-2.866 12.815a1.38 1.38 0 0 0-1.38 1.382 1.38 1.38 0 0 0 1.38 1.382H20.79a1.38 1.38 0 0 0 1.38-1.382 1.38 1.38 0 0 0-1.38-1.382z"},child:[]}]})(c)}function LL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 00-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139zm.529 3.405h.013c.213 0 .396.062.584.198.19.135.33.332.438.533.105.259.158.459.166.724 0-.02.006-.04.006-.06v.105a.086.086 0 01-.004-.021l-.004-.024a1.807 1.807 0 01-.15.706.953.953 0 01-.213.335.71.71 0 00-.088-.042c-.104-.045-.198-.064-.284-.133a1.312 1.312 0 00-.22-.066c.05-.06.146-.133.183-.198.053-.128.082-.264.088-.402v-.02a1.21 1.21 0 00-.061-.4c-.045-.134-.101-.2-.183-.333-.084-.066-.167-.132-.267-.132h-.016c-.093 0-.176.03-.262.132a.8.8 0 00-.205.334 1.18 1.18 0 00-.09.4v.019c.002.089.008.179.02.267-.193-.067-.438-.135-.607-.202a1.635 1.635 0 01-.018-.2v-.02a1.772 1.772 0 01.15-.768c.082-.22.232-.406.43-.533a.985.985 0 01.594-.2zm-2.962.059h.036c.142 0 .27.048.399.135.146.129.264.288.344.465.09.199.14.4.153.667v.004c.007.134.006.2-.002.266v.08c-.03.007-.056.018-.083.024-.152.055-.274.135-.393.2.012-.09.013-.18.003-.267v-.015c-.012-.133-.04-.2-.082-.333a.613.613 0 00-.166-.267.248.248 0 00-.183-.064h-.021c-.071.006-.13.04-.186.132a.552.552 0 00-.12.27.944.944 0 00-.023.33v.015c.012.135.037.2.08.334.046.134.098.2.166.268.01.009.02.018.034.024-.07.057-.117.07-.176.136a.304.304 0 01-.131.068 2.62 2.62 0 01-.275-.402 1.772 1.772 0 01-.155-.667 1.759 1.759 0 01.08-.668 1.43 1.43 0 01.283-.535c.128-.133.26-.2.418-.2zm1.37 1.706c.332 0 .733.065 1.216.399.293.2.523.269 1.052.468h.003c.255.136.405.266.478.399v-.131a.571.571 0 01.016.47c-.123.31-.516.643-1.063.842v.002c-.268.135-.501.333-.775.465-.276.135-.588.292-1.012.267a1.139 1.139 0 01-.448-.067 3.566 3.566 0 01-.322-.198c-.195-.135-.363-.332-.612-.465v-.005h-.005c-.4-.246-.616-.512-.686-.71-.07-.268-.005-.47.193-.6.224-.135.38-.271.483-.336.104-.074.143-.102.176-.131h.002v-.003c.169-.202.436-.47.839-.601.139-.036.294-.065.466-.065zm2.8 2.142c.358 1.417 1.196 3.475 1.735 4.473.286.534.855 1.659 1.102 3.024.156-.005.33.018.513.064.646-1.671-.546-3.467-1.089-3.966-.22-.2-.232-.335-.123-.335.59.534 1.365 1.572 1.646 2.757.13.535.16 1.104.021 1.67.067.028.135.06.205.067 1.032.534 1.413.938 1.23 1.537v-.043c-.06-.003-.12 0-.18 0h-.016c.151-.467-.182-.825-1.065-1.224-.915-.4-1.646-.336-1.77.465-.008.043-.013.066-.018.135-.068.023-.139.053-.209.064-.43.268-.662.669-.793 1.187-.13.533-.17 1.156-.205 1.869v.003c-.02.334-.17.838-.319 1.35-1.5 1.072-3.58 1.538-5.348.334a2.645 2.645 0 00-.402-.533 1.45 1.45 0 00-.275-.333c.182 0 .338-.03.465-.067a.615.615 0 00.314-.334c.108-.267 0-.697-.345-1.163-.345-.467-.931-.995-1.788-1.521-.63-.4-.986-.87-1.15-1.396-.165-.534-.143-1.085-.015-1.645.245-1.07.873-2.11 1.274-2.763.107-.065.037.135-.408.974-.396.751-1.14 2.497-.122 3.854a8.123 8.123 0 01.647-2.876c.564-1.278 1.743-3.504 1.836-5.268.048.036.217.135.289.202.218.133.38.333.59.465.21.201.477.335.876.335.039.003.075.006.11.006.412 0 .73-.134.997-.268.29-.134.52-.334.74-.4h.005c.467-.135.835-.402 1.044-.7zm2.185 8.958c.037.6.343 1.245.882 1.377.588.134 1.434-.333 1.791-.765l.211-.01c.315-.007.577.01.847.268l.003.003c.208.199.305.53.391.876.085.4.154.78.409 1.066.486.527.645.906.636 1.14l.003-.007v.018l-.003-.012c-.015.262-.185.396-.498.595-.63.401-1.746.712-2.457 1.57-.618.737-1.37 1.14-2.036 1.191-.664.053-1.237-.2-1.574-.898l-.005-.003c-.21-.4-.12-1.025.056-1.69.176-.668.428-1.344.463-1.897.037-.714.076-1.335.195-1.814.12-.465.308-.797.641-.984l.045-.022zm-10.814.049h.01c.053 0 .105.005.157.014.376.055.706.333 1.023.752l.91 1.664.003.003c.243.533.754 1.064 1.189 1.637.434.598.77 1.131.729 1.57v.006c-.057.744-.48 1.148-1.125 1.294-.645.135-1.52.002-2.395-.464-.968-.536-2.118-.469-2.857-.602-.369-.066-.61-.2-.723-.4-.11-.2-.113-.602.123-1.23v-.004l.002-.003c.117-.334.03-.752-.027-1.118-.055-.401-.083-.71.043-.94.16-.334.396-.4.69-.533.294-.135.64-.202.915-.47h.002v-.002c.256-.268.445-.601.668-.838.19-.201.38-.336.663-.336zm7.159-9.074c-.435.201-.945.535-1.488.535-.542 0-.97-.267-1.28-.466-.154-.134-.28-.268-.373-.335-.164-.134-.144-.333-.074-.333.109.016.129.134.199.2.096.066.215.2.36.333.292.2.68.467 1.167.467.485 0 1.053-.267 1.398-.466.195-.135.445-.334.648-.467.156-.136.149-.267.279-.267.128.016.034.134-.147.332a8.097 8.097 0 01-.69.468zm-1.082-1.583V5.64c-.006-.02.013-.042.029-.05.074-.043.18-.027.26.004.063 0 .16.067.15.135-.006.049-.085.066-.135.066-.055 0-.092-.043-.141-.068-.052-.018-.146-.008-.163-.065zm-.551 0c-.02.058-.113.049-.166.066-.047.025-.086.068-.14.068-.05 0-.13-.02-.136-.068-.01-.066.088-.133.15-.133.08-.031.184-.047.259-.005.019.009.036.03.03.05v.02h.003z"},child:[]}]})(c)}function OL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.405 5.501c-.115 0-.193.014-.274.033v.013h.014c.054.104.146.18.214.273.054.107.1.214.154.32l.014-.015c.094-.066.14-.172.14-.333-.04-.047-.046-.094-.08-.14-.04-.067-.126-.1-.18-.153zM5.77 18.695h-.927a50.854 50.854 0 00-.27-4.41h-.008l-1.41 4.41H2.45l-1.4-4.41h-.01a72.892 72.892 0 00-.195 4.41H0c.055-1.966.192-3.81.41-5.53h1.15l1.335 4.064h.008l1.347-4.064h1.095c.242 2.015.384 3.86.428 5.53zm4.017-4.08c-.378 2.045-.876 3.533-1.492 4.46-.482.716-1.01 1.073-1.583 1.073-.153 0-.34-.046-.566-.138v-.494c.11.017.24.026.386.026.268 0 .483-.075.647-.222.197-.18.295-.382.295-.605 0-.155-.077-.47-.23-.944L6.23 14.615h.91l.727 2.36c.164.536.233.91.205 1.123.4-1.064.678-2.227.835-3.483zm12.325 4.08h-2.63v-5.53h.885v4.85h1.745zm-3.32.135l-1.016-.5c.09-.076.177-.158.255-.25.433-.506.648-1.258.648-2.253 0-1.83-.718-2.746-2.155-2.746-.704 0-1.254.232-1.65.697-.43.508-.646 1.256-.646 2.245 0 .972.19 1.686.574 2.14.35.41.877.615 1.583.615.264 0 .506-.033.725-.098l1.325.772.36-.622zM15.5 17.588c-.225-.36-.337-.94-.337-1.736 0-1.393.424-2.09 1.27-2.09.443 0 .77.167.977.5.224.362.336.936.336 1.723 0 1.404-.424 2.108-1.27 2.108-.445 0-.77-.167-.978-.5zm-1.658-.425c0 .47-.172.856-.516 1.156-.344.3-.803.45-1.384.45-.543 0-1.064-.172-1.573-.515l.237-.476c.438.22.833.328 1.19.328.332 0 .593-.073.783-.22a.754.754 0 00.3-.615c0-.33-.23-.61-.648-.845-.388-.213-1.163-.657-1.163-.657-.422-.307-.632-.636-.632-1.177 0-.45.157-.81.47-1.085.315-.278.72-.415 1.22-.415.512 0 .98.136 1.4.41l-.213.476a2.726 2.726 0 00-1.064-.23c-.283 0-.502.068-.654.206a.685.685 0 00-.248.524c0 .328.234.61.666.85.393.215 1.187.67 1.187.67.433.305.648.63.648 1.168zm9.382-5.852c-.535-.014-.95.04-1.297.188-.1.04-.26.04-.274.167.055.053.063.14.11.214.08.134.218.313.346.407.14.11.28.216.427.31.26.16.555.255.81.416.145.094.293.213.44.313.073.05.12.14.214.172v-.02c-.046-.06-.06-.147-.105-.214-.067-.067-.134-.127-.2-.193a3.223 3.223 0 00-.695-.675c-.214-.146-.682-.35-.77-.595l-.013-.014c.146-.013.32-.066.46-.106.227-.06.435-.047.67-.106.106-.027.213-.06.32-.094v-.06c-.12-.12-.21-.283-.334-.395a8.867 8.867 0 00-1.104-.823c-.21-.134-.476-.22-.697-.334-.08-.04-.214-.06-.26-.127-.12-.146-.19-.34-.275-.514a17.69 17.69 0 01-.547-1.163c-.12-.262-.193-.523-.34-.763-.69-1.137-1.437-1.826-2.586-2.5-.247-.14-.543-.2-.856-.274-.167-.008-.334-.02-.5-.027-.11-.047-.216-.174-.31-.235-.38-.24-1.364-.76-1.644-.072-.18.434.267.862.422 1.082.115.153.26.328.34.5.047.116.06.235.107.356.106.294.207.622.347.897.073.14.153.287.247.413.054.073.146.107.167.227-.094.136-.1.334-.154.5-.24.757-.146 1.693.194 2.25.107.166.362.534.703.393.3-.12.234-.5.32-.835.02-.08.007-.133.048-.187v.015c.094.188.188.367.274.555.206.328.566.668.867.895.16.12.287.328.487.402v-.02h-.015c-.043-.058-.1-.086-.154-.133a3.445 3.445 0 01-.35-.4 8.76 8.76 0 01-.747-1.218c-.11-.21-.202-.436-.29-.643-.04-.08-.04-.2-.107-.24-.1.146-.247.273-.32.453-.127.288-.14.642-.188 1.01-.027.007-.014 0-.027.014-.214-.052-.287-.274-.367-.46-.2-.475-.233-1.238-.06-1.785.047-.14.247-.582.167-.716-.042-.127-.174-.2-.247-.303a2.478 2.478 0 01-.24-.427c-.16-.374-.24-.788-.414-1.162-.08-.173-.22-.354-.334-.513-.127-.18-.267-.307-.368-.52-.033-.073-.08-.194-.027-.274.014-.054.042-.075.094-.09.088-.072.335.022.422.062.247.1.455.194.662.334.094.066.195.193.315.226h.14c.214.047.455.014.655.073.355.114.675.28.962.46a5.953 5.953 0 012.085 2.286c.08.154.115.295.188.455.14.33.313.663.455.982.14.315.275.636.476.897.1.14.502.213.682.286.133.06.34.115.46.188.23.14.454.3.67.454.11.076.443.243.463.378z"},child:[]}]})(c)}function PL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.5594 14.7228a.5269.5269 0 0 0-.0563-.1191c-.139-.2632-.4768-.3418-1.0074-.2321-1.6533.3411-2.2935.1312-2.5256-.0191 1.342-2.0482 2.445-4.522 3.0411-6.8297.2714-1.0507.7982-3.5237.1222-4.7316a1.5641 1.5641 0 0 0-.1509-.235C21.6931.9086 19.8007.0248 17.5099.0005c-1.4947-.0158-2.7705.3461-3.1161.4794a9.449 9.449 0 0 0-.5159-.0816 8.044 8.044 0 0 0-1.3114-.1278c-1.1822-.0184-2.2038.2642-3.0498.8406-.8573-.3211-4.7888-1.645-7.2219.0788C.9359 2.1526.3086 3.8733.4302 6.3043c.0409.818.5069 3.334 1.2423 5.7436.4598 1.5065.9387 2.7019 1.4334 3.582.553.9942 1.1259 1.5933 1.7143 1.7895.4474.1491 1.1327.1441 1.8581-.7279.8012-.9635 1.5903-1.8258 1.9446-2.2069.4351.2355.9064.3625 1.39.3772a.0569.0569 0 0 0 .0004.0041 11.0312 11.0312 0 0 0-.2472.3054c-.3389.4302-.4094.5197-1.5002.7443-.3102.064-1.1344.2339-1.1464.8115-.0025.1224.0329.2309.0919.3268.2269.4231.9216.6097 1.015.6331 1.3345.3335 2.5044.092 3.3714-.6787-.017 2.231.0775 4.4174.3454 5.0874.2212.5529.7618 1.9045 2.4692 1.9043.2505 0 .5263-.0291.8296-.0941 1.7819-.3821 2.5557-1.1696 2.855-2.9059.1503-.8707.4016-2.8753.5388-4.1012.0169-.0703.0357-.1207.057-.1362.0007-.0005.0697-.0471.4272.0307a.3673.3673 0 0 0 .0443.0068l.2539.0223.0149.001c.8468.0384 1.9114-.1426 2.5312-.4308.6438-.2988 1.8057-1.0323 1.5951-1.6698zM2.371 11.8765c-.7435-2.4358-1.1779-4.8851-1.2123-5.5719-.1086-2.1714.4171-3.6829 1.5623-4.4927 1.8367-1.2986 4.8398-.5408 6.108-.13-.0032.0032-.0066.0061-.0098.0094-2.0238 2.044-1.9758 5.536-1.9708 5.7495-.0002.0823.0066.1989.0162.3593.0348.5873.0996 1.6804-.0735 2.9184-.1609 1.1504.1937 2.2764.9728 3.0892.0806.0841.1648.1631.2518.2374-.3468.3714-1.1004 1.1926-1.9025 2.1576-.5677.6825-.9597.5517-1.0886.5087-.3919-.1307-.813-.5871-1.2381-1.3223-.4796-.839-.9635-2.0317-1.4155-3.5126zm6.0072 5.0871c-.1711-.0428-.3271-.1132-.4322-.1772.0889-.0394.2374-.0902.4833-.1409 1.2833-.2641 1.4815-.4506 1.9143-1.0002.0992-.126.2116-.2687.3673-.4426a.3549.3549 0 0 0 .0737-.1298c.1708-.1513.2724-.1099.4369-.0417.156.0646.3078.26.3695.4752.0291.1016.0619.2945-.0452.4444-.9043 1.2658-2.2216 1.2494-3.1676 1.0128zm2.094-3.988-.0525.141c-.133.3566-.2567.6881-.3334 1.003-.6674-.0021-1.3168-.2872-1.8105-.8024-.6279-.6551-.9131-1.5664-.7825-2.5004.1828-1.3079.1153-2.4468.079-3.0586-.005-.0857-.0095-.1607-.0122-.2199.2957-.2621 1.6659-.9962 2.6429-.7724.4459.1022.7176.4057.8305.928.5846 2.7038.0774 3.8307-.3302 4.7363-.084.1866-.1633.3629-.2311.5454zm7.3637 4.5725c-.0169.1768-.0358.376-.0618.5959l-.146.4383a.3547.3547 0 0 0-.0182.1077c-.0059.4747-.054.6489-.115.8693-.0634.2292-.1353.4891-.1794 1.0575-.11 1.4143-.8782 2.2267-2.4172 2.5565-1.5155.3251-1.7843-.4968-2.0212-1.2217a6.5824 6.5824 0 0 0-.0769-.2266c-.2154-.5858-.1911-1.4119-.1574-2.5551.0165-.5612-.0249-1.9013-.3302-2.6462.0044-.2932.0106-.5909.019-.8918a.3529.3529 0 0 0-.0153-.1126 1.4927 1.4927 0 0 0-.0439-.208c-.1226-.4283-.4213-.7866-.7797-.9351-.1424-.059-.4038-.1672-.7178-.0869.067-.276.1831-.5875.309-.9249l.0529-.142c.0595-.16.134-.3257.213-.5012.4265-.9476 1.0106-2.2453.3766-5.1772-.2374-1.0981-1.0304-1.6343-2.2324-1.5098-.7207.0746-1.3799.3654-1.7088.5321a5.6716 5.6716 0 0 0-.1958.1041c.0918-1.1064.4386-3.1741 1.7357-4.4823a4.0306 4.0306 0 0 1 .3033-.276.3532.3532 0 0 0 .1447-.0644c.7524-.5706 1.6945-.8506 2.802-.8325.4091.0067.8017.0339 1.1742.081 1.939.3544 3.2439 1.4468 4.0359 2.3827.8143.9623 1.2552 1.9315 1.4312 2.4543-1.3232-.1346-2.2234.1268-2.6797.779-.9926 1.4189.543 4.1729 1.2811 5.4964.1353.2426.2522.4522.2889.5413.2403.5825.5515.9713.7787 1.2552.0696.087.1372.1714.1885.245-.4008.1155-1.1208.3825-1.0552 1.717-.0123.1563-.0423.4469-.0834.8148-.0461.2077-.0702.4603-.0994.7662zm.8905-1.6211c-.0405-.8316.2691-.9185.5967-1.0105a2.8566 2.8566 0 0 0 .135-.0406 1.202 1.202 0 0 0 .1342.103c.5703.3765 1.5823.4213 3.0068.1344-.2016.1769-.5189.3994-.9533.6011-.4098.1903-1.0957.333-1.7473.3636-.7197.0336-1.0859-.0807-1.1721-.151zm.5695-9.2712c-.0059.3508-.0542.6692-.1054 1.0017-.055.3576-.112.7274-.1264 1.1762-.0142.4368.0404.8909.0932 1.3301.1066.887.216 1.8003-.2075 2.7014a3.5272 3.5272 0 0 1-.1876-.3856c-.0527-.1276-.1669-.3326-.3251-.6162-.6156-1.1041-2.0574-3.6896-1.3193-4.7446.3795-.5427 1.3408-.5661 2.1781-.463zm.2284 7.0137a12.3762 12.3762 0 0 0-.0853-.1074l-.0355-.0444c.7262-1.1995.5842-2.3862.4578-3.4385-.0519-.4318-.1009-.8396-.0885-1.2226.0129-.4061.0666-.7543.1185-1.0911.0639-.415.1288-.8443.1109-1.3505.0134-.0531.0188-.1158.0118-.1902-.0457-.4855-.5999-1.938-1.7294-3.253-.6076-.7073-1.4896-1.4972-2.6889-2.0395.5251-.1066 1.2328-.2035 2.0244-.1859 2.0515.0456 3.6746.8135 4.8242 2.2824a.908.908 0 0 1 .0667.1002c.7231 1.3556-.2762 6.2751-2.9867 10.5405zm-8.8166-6.1162c-.025.1794-.3089.4225-.6211.4225a.5821.5821 0 0 1-.0809-.0056c-.1873-.026-.3765-.144-.5059-.3156-.0458-.0605-.1203-.178-.1055-.2844.0055-.0401.0261-.0985.0925-.1488.1182-.0894.3518-.1226.6096-.0867.3163.0441.6426.1938.6113.4186zm7.9305-.4114c.0111.0792-.049.201-.1531.3102-.0683.0717-.212.1961-.4079.2232a.5456.5456 0 0 1-.075.0052c-.2935 0-.5414-.2344-.5607-.3717-.024-.1765.2641-.3106.5611-.352.297-.0414.6111.0088.6356.1851z"},child:[]}]})(c)}function NL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.527.099C6.955-.744.942 3.9.099 10.473c-.843 6.572 3.8 12.584 10.373 13.428 6.573.843 12.587-3.801 13.428-10.374C24.744 6.955 20.101.943 13.527.099zm2.471 7.485a.855.855 0 0 0-.593.25l-4.453 4.453-.307-.307-.643-.643c4.389-4.376 5.18-4.418 5.996-3.753zm-4.863 4.861l4.44-4.44a.62.62 0 1 1 .847.903l-4.699 4.125-.588-.588zm.33.694l-1.1.238a.06.06 0 0 1-.067-.032.06.06 0 0 1 .01-.073l.645-.645.512.512zm-2.803-.459l1.172-1.172.879.878-1.979.426a.074.074 0 0 1-.085-.039.072.072 0 0 1 .013-.093zm-3.646 6.058a.076.076 0 0 1-.069-.083.077.077 0 0 1 .022-.046h.002l.946-.946 1.222 1.222-2.123-.147zm2.425-1.256a.228.228 0 0 0-.117.256l.203.865a.125.125 0 0 1-.211.117h-.003l-.934-.934-.294-.295 3.762-3.758 1.82-.393.874.874c-1.255 1.102-2.971 2.201-5.1 3.268zm5.279-3.428h-.002l-.839-.839 4.699-4.125a.952.952 0 0 0 .119-.127c-.148 1.345-2.029 3.245-3.977 5.091zm3.657-6.46l-.003-.002a1.822 1.822 0 0 1 2.459-2.684l-1.61 1.613a.119.119 0 0 0 0 .169l1.247 1.247a1.817 1.817 0 0 1-2.093-.343zm2.578 0a1.714 1.714 0 0 1-.271.218h-.001l-1.207-1.207 1.533-1.533c.661.72.637 1.832-.054 2.522zM18.855 6.05a.143.143 0 0 0-.053.157.416.416 0 0 1-.053.45.14.14 0 0 0 .023.197.141.141 0 0 0 .084.03.14.14 0 0 0 .106-.05.691.691 0 0 0 .087-.751.138.138 0 0 0-.194-.033z"},child:[]}]})(c)}function FL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"},child:[]}]})(c)}function IL(c){return Pt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"},child:[]}]})(c)}function BL(){return T.jsxs(An,{style:{justifyContent:"center",paddingBottom:"50px"},children:[T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(CL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(vL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(bD,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(SL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(vD,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(AL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(FL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(xL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(DL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(PL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(OL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(wL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(EL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(_L,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(kL,{})})]})}function zL(c){return Pt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10.8634 13.9195C10.6568 14.0195 10.4233 14.0246 10.2185 13.9444C10.1162 13.9044 10.021 13.843 9.93997 13.7614L4.81616 9.06268L2.58433 10.7656C2.37657 10.9241 2.08597 10.9111 1.89301 10.7347L1.17719 10.0802C0.941168 9.86437 0.940898 9.49112 1.17661 9.27496L3.11213 7.5L1.17661 5.72504C0.940898 5.50888 0.941168 5.13563 1.17719 4.91982L1.89301 4.2653C2.08597 4.08887 2.37657 4.07588 2.58433 4.2344L4.81616 5.93732L9.93997 1.23855C9.97037 1.20797 10.0028 1.18023 10.0368 1.15538C10.2748 0.981429 10.5922 0.949298 10.8634 1.08048L13.5399 2.37507C13.8212 2.5111 14 2.79721 14 3.11109V8H10.752V4.53356L6.86419 7.5L10.752 10.4664V8H14V11.8889C14 12.2028 13.8211 12.4889 13.5399 12.625L10.8634 13.9195Z"},child:[]}]})(c)}function jL(){return T.jsxs(An,{style:{justifyContent:"center",paddingBottom:"50px"},children:[T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(_D,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(LL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(zL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(NL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(TL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(ML,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(IL,{})}),T.jsx(Ht,{xs:4,md:2,className:"tech-icons",children:T.jsx(RL,{})})]})}function CS(){return T.jsxs(zs,{children:[T.jsxs("h1",{style:{fontSize:"2.1em",padding:"140px 0 40px 0",color:"white"},children:["Professional ",T.jsx("strong",{className:"purple",children:"Skillset "})]}),T.jsx(BL,{}),T.jsxs("h1",{className:"project-heading",children:[T.jsx("strong",{className:"purple",children:"Tools"})," I use"]}),T.jsx(jL,{}),T.jsx(bL,{})]})}function HL(){return T.jsxs(T.Fragment,{children:[T.jsx("section",{id:"home",children:T.jsxs(zs,{fluid:!0,className:"home-section",id:"home",children:[T.jsx(Yu,{}),T.jsx(zs,{className:"home-content",children:T.jsxs(An,{children:[T.jsxs(Ht,{md:7,className:"home-header",children:[T.jsxs("h1",{style:{paddingBottom:15},className:"heading",children:["Hi There!"," ",T.jsx("span",{className:"wave",role:"img","aria-labelledby":"wave",children:""})]}),T.jsxs("h1",{className:"heading-name",children:["I'M",T.jsx("strong",{className:"main-name",children:" MULUKEN ZEWGE"})]}),T.jsx("div",{style:{padding:50,textAlign:"left"},children:T.jsx(J5,{})})]}),T.jsx(Ht,{md:5,style:{paddingBottom:20},children:T.jsx("img",{src:a4,alt:"home pic",className:"img-fluid",style:{maxHeight:"450px"}})})]})})]})}),T.jsx("section",{id:"about",children:T.jsx(kw,{})}),T.jsx("section",{id:"experience",children:T.jsx(fS,{})}),T.jsx("section",{id:"projects",children:T.jsx(Lw,{})}),T.jsx("section",{id:"skills",children:T.jsx(CS,{})}),T.jsx("section",{id:"education",children:T.jsx(pS,{})}),T.jsx("section",{id:"resume",children:T.jsx(dS,{})})]})}function UL(){const{pathname:c}=Iu();return F.useEffect(()=>{window.scrollTo(0,0)},[c]),null}function $L(){const[c,t]=F.useState(!0);return F.useEffect(()=>{const e=setTimeout(()=>{t(!1)},1200);return()=>clearTimeout(e)},[]),T.jsxs(Kx,{children:[T.jsx(Qx,{load:c}),T.jsxs("div",{className:"App",id:c?"no-scroll":"scroll",children:[T.jsx(KT,{}),T.jsx(UL,{}),T.jsxs(Xx,{children:[T.jsx(hn,{path:"/",element:T.jsx(HL,{})}),T.jsx(hn,{path:"/about",element:T.jsx(kw,{})}),T.jsx(hn,{path:"/experience",element:T.jsx(fS,{})}),T.jsx(hn,{path:"/project",element:T.jsx(Lw,{})}),T.jsx(hn,{path:"/skills",element:T.jsx(CS,{})}),T.jsx(hn,{path:"/education",element:T.jsx(pS,{})}),T.jsx(hn,{path:"/resume",element:T.jsx(dS,{})}),T.jsx(hn,{path:"*",element:T.jsx(Vx,{to:"/"})})]})]})]})}J3.createRoot(document.getElementById("root")).render(T.jsx(F.StrictMode,{children:T.jsx($L,{})}));export{X3 as R,tx as a,Or as g,T as j,F as r};
